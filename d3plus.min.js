!function n(e,t,a){function r(l,o){if(!t[l]){if(!e[l]){var s="function"==typeof require&&require;if(!o&&s)return s(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+l+"'")}var u=t[l]={exports:{}};e[l][0].call(u.exports,function(t){var a=e[l][1][t];return r(a?a:t)},u,u.exports,n,e,t,a)}return t[l].exports}for(var i="function"==typeof require&&require,l=0;l<a.length;l++)r(a[l]);return r}({1:[function(e,t){t.exports=e("./lib/heap")},{"./lib/heap":2}],2:[function(e,t){(function(){var e,a,n,r,i,l,o,s,u,d,c,p,f,v,h;n=Math.floor,d=Math.min,a=function(e,t){return t>e?-1:e>t?1:0},u=function(e,t,r,i,l){var o;if(null==r&&(r=0),null==l&&(l=a),0>r)throw new Error("lo must be non-negative");for(null==i&&(i=e.length);i>r;)o=n((r+i)/2),l(t,e[o])<0?i=o:r=o+1;return[].splice.apply(e,[r,r-r].concat(t)),t},l=function(e,t,n){return null==n&&(n=a),e.push(t),v(e,0,e.length-1,n)},i=function(e,t){var n,r;return null==t&&(t=a),n=e.pop(),e.length?(r=e[0],e[0]=n,h(e,0,t)):r=n,r},s=function(e,t,n){var r;return null==n&&(n=a),r=e[0],e[0]=t,h(e,0,n),r},o=function(e,t,n){var r;return null==n&&(n=a),e.length&&n(e[0],t)<0&&(r=[e[0],t],t=r[0],e[0]=r[1],h(e,0,n)),t},r=function(e,t){var r,i,l,o,s,u;for(null==t&&(t=a),o=function(){u=[];for(var t=0,a=n(e.length/2);a>=0?a>t:t>a;a>=0?t++:t--)u.push(t);return u}.apply(this).reverse(),s=[],i=0,l=o.length;l>i;i++)r=o[i],s.push(h(e,r,t));return s},f=function(e,t,n){var r;return null==n&&(n=a),r=e.indexOf(t),-1!==r?(v(e,0,r,n),h(e,r,n)):void 0},c=function(e,t,n){var i,l,s,u,d;if(null==n&&(n=a),l=e.slice(0,t),!l.length)return l;for(r(l,n),d=e.slice(t),s=0,u=d.length;u>s;s++)i=d[s],o(l,i,n);return l.sort(n).reverse()},p=function(e,t,n){var l,o,s,c,p,f,v,h,g,m;if(null==n&&(n=a),10*t<=e.length){if(c=e.slice(0,t).sort(n),!c.length)return c;for(s=c[c.length-1],h=e.slice(t),p=0,v=h.length;v>p;p++)l=h[p],n(l,s)<0&&(u(c,l,0,null,n),c.pop(),s=c[c.length-1]);return c}for(r(e,n),m=[],o=f=0,g=d(t,e.length);g>=0?g>f:f>g;o=g>=0?++f:--f)m.push(i(e,n));return m},v=function(e,t,n,r){var i,l,o;for(null==r&&(r=a),i=e[n];n>t&&(o=n-1>>1,l=e[o],r(i,l)<0);)e[n]=l,n=o;return e[n]=i},h=function(e,t,n){var r,i,l,o,s;for(null==n&&(n=a),i=e.length,s=t,l=e[t],r=2*t+1;i>r;)o=r+1,i>o&&!(n(e[r],e[o])<0)&&(r=o),e[t]=e[r],t=r,r=2*t+1;return e[t]=l,v(e,s,t,n)},e=function(){function e(e){this.cmp=null!=e?e:a,this.nodes=[]}return e.push=l,e.pop=i,e.replace=s,e.pushpop=o,e.heapify=r,e.nlargest=c,e.nsmallest=p,e.prototype.push=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pop=function(){return i(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return o(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return r(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return f(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),("undefined"!=typeof t&&null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)},{}],3:[function(e,t){!function(){"use strict";function e(e,t){var a=e.x-t.x,n=e.y-t.y;return a*a+n*n}function a(e,t,a){var n=t.x,r=t.y,i=a.x-n,l=a.y-r;if(0!==i||0!==l){var o=((e.x-n)*i+(e.y-r)*l)/(i*i+l*l);o>1?(n=a.x,r=a.y):o>0&&(n+=i*o,r+=l*o)}return i=e.x-n,l=e.y-r,i*i+l*l}function n(t,a){for(var n,r=t[0],i=[r],l=1,o=t.length;o>l;l++)n=t[l],e(n,r)>a&&(i.push(n),r=n);return r!==n&&i.push(n),i}function r(e,t){var n,r,i,l,o=e.length,s="undefined"!=typeof Uint8Array?Uint8Array:Array,u=new s(o),d=0,c=o-1,p=[],f=[];for(u[d]=u[c]=1;c;){for(r=0,n=d+1;c>n;n++)i=a(e[n],e[d],e[c]),i>r&&(l=n,r=i);r>t&&(u[l]=1,p.push(d,l,l,c)),c=p.pop(),d=p.pop()}for(n=0;o>n;n++)u[n]&&f.push(e[n]);return f}function i(e,t,a){var i=void 0!==t?t*t:1;return e=a?e:n(e,i),e=r(e,i)}"function"==typeof define&&define.amd?define(function(){return i}):"undefined"!=typeof t?t.exports=i:"undefined"!=typeof self?self.simplify=i:window.simplify=i}()},{}],4:[function(e,t){"use strict";function a(e,t,a,n){this.points=e,this.ids=t,this.dimension=n,this.length=a}function n(e){var t,n,r;if(Array.isArray(e)){if(t=e.length,0===t)return new a(null,null,0,0);n=e[0].length,r=i(d.mallocDouble(t*(n+1)),[t,n+1]),o(e,r.hi(t,n))}else{t=e.shape[0],n=e.shape[1];var f=e.dtype;f="int8"===f||"int16"===f||"int32"===f?"int32":"uint8"===f||"uint8_clamped"===f||"buffer"===f||"uint16"===f||"uint32"===f?"uint32":"float32"===f?"float32":"float64",r=i(d.malloc(t*(n+1)),[t,n+1]),s.assign(r.hi(t,n),e)}for(var v=0;t>v;++v)r.set(v,n,v);for(var h=u.malloc([t,n],e.dtype),g=d.mallocInt32(t),m=0,y=h.data,b=r.data,x=(p.log2(p.nextPow2(t)),l.compile(r.order,!0,r.dtype)),w=[r];t>m;){var _=w.shift(),z=_,k=0|z.shape[0];if(k>1){var A,E=p.log2(m+1)%n,j=c.root(k);A=x(z,j,function(e,t){return e.get(E)-t.get(E)});for(var O=h.index(m,0),M=A.offset,v=0;n>v;++v)y[O++]=b[M++];g[m]=b[M],m+=1,w.push(z.hi(j)),k>2&&w.push(z.lo(j+1))}else{for(var M=z.offset,O=h.index(m,0),v=0;n>v;++v)y[O+v]=b[M++];g[m]=b[M],m+=1}}return d.free(r.data),new a(h,g,t,n)}function r(e){var t=e.p,n=e.i;if(t){for(var r=t.length,l=d.mallocFloat64(r),o=0;r>o;++o)l[o]=t[o];for(var s=n.length,u=d.mallocInt32(s),o=0;s>o;++o)u[o]=n[o];var c=r/s|0;return new a(i(l,[s,c]),u,s,c)}return new a(null,null,0,e.d)}t.exports=n,t.exports.deserialize=r;var i=e("ndarray"),l=e("ndarray-select"),o=e("ndarray-pack"),s=e("ndarray-ops"),u=e("ndarray-scratch"),d=e("typedarray-pool"),c=e("inorder-tree-layout"),p=e("bit-twiddle"),f=e("./lib/heap.js"),v=a.prototype;v.serialize=function(){return this.length>0?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},v.range=function(e,t,a){var n=this.length;if(!(1>n)){for(var r=this.dimension,i=0;r>i;++i)if(t[i]<e[i])return;var l,s=this.points,c=this.ids,f=u.malloc([n,2,r]),v=d.mallocInt32(n),h=f.data,g=s.data,m=1,y=0;for(v[0]=0,o(e,f.pick(0,0)),o(t,f.pick(0,1));m>y;){for(var b=v[y],x=p.log2(b+1)%r,w=f.index(y,0,0),_=f.index(y,1,0),z=s.index(b,0),k=!0,i=0;r>i;++i){var A=g[z+i];if(A<h[w+i]||h[_+i]<A){k=!1;break}}if(k&&(l=a(c[b]),void 0!==l))break;var E=g[z+x],j=h[_+x],O=h[w+x];if(E>=O){var M=2*b+1;if(n>M){v[m]=M;for(var F=f.index(m,0,0),i=0;r>i;++i)h[F+i]=h[w+i];for(var I=f.index(m,1,0),i=0;r>i;++i)h[I+i]=h[_+i];h[I+x]=Math.min(j,E),m+=1}}if(j>=E){var B=2*(b+1);if(n>B){v[m]=B;for(var F=f.index(m,0,0),i=0;r>i;++i)h[F+i]=h[w+i];for(var I=f.index(m,1,0),i=0;r>i;++i)h[I+i]=h[_+i];h[F+x]=Math.max(O,E),m+=1}}y+=1}return u.free(f),d.free(v),l}},v.rnn=function(e,t,a){if(!(0>t)){var n=this.length;if(!(1>n)){var r,i=this.dimension,l=this.points,o=this.ids,s=u.malloc([n,i]),c=d.mallocInt32(n),f=s.data,v=l.data,h=1,g=0,m=t*t;c[0]=0;for(var y=0;i>y;++y)s.set(0,y,0);for(;h>g;){for(var b=c[g],x=l.index(b,0),w=0,y=0;i>y;++y)w+=Math.pow(e[y]-v[x+y],2);if(m>=w&&(r=a(o[b]),void 0!==r))break;for(var _=p.log2(b+1)%i,z=0,k=s.index(g,0),y=0;i>y;++y)y!==_&&(z+=f[k+y]);var A=e[_],E=v[x+_],j=f[k+_],O=j,M=j;E>A?M=Math.max(j,Math.pow(E-A,2)):O=Math.max(j,Math.pow(E-A,2));var F=O+z,I=M+z;if(m>=F){var B=2*b+1;if(n>B){c[h]=B;for(var S=s.index(h,0),y=0;i>y;++y)f[S+y]=f[k+y];f[S+_]=O,h+=1}}if(m>=I){var N=2*(b+1);if(n>N){c[h]=N;for(var S=s.index(h,0),y=0;i>y;++y)f[S+y]=f[k+y];f[S+_]=M,h+=1}}g+=1}return u.free(s),d.free(c),r}}},v.nn=function(e,t){var a=this.length;if(1>a)return-1;if("number"==typeof t){if(0>t)return-1}else t=1/0;var n=this.dimension,r=this.points,i=r.data,l=d.mallocFloat64(n),o=new f(a,n+1),s=o.index,u=o.data;s[0]=0;for(var c=0;n>=c;++c)u[c]=0;o.count+=1;for(var v=-1,h=t;o.count>0&&!(u[0]>=h);){for(var g=s[0],m=r.index(g,0),y=0,c=0;n>c;++c)y+=Math.pow(e[c]-i[m+c],2);h>y&&(h=y,v=g);for(var b=p.log2(g+1)%n,x=0,c=0;n>c;++c){var w=u[c+1];c!==b&&(x+=w),l[c]=w}var _=e[b],z=i[m+b],k=l[b],A=k,E=k;z>_?E=Math.max(k,Math.pow(z-_,2)):A=Math.max(k,Math.pow(z-_,2));var j=A+x,O=E+x;if(o.pop(),h>j){var M=2*g+1;if(a>M){var F=o.count;s[F]=M;var I=F*(n+1);u[I]=j;for(var c=1;n>=c;++c)u[I+c]=l[c-1];u[I+b+1]=A,o.push()}}if(h>O){var B=2*(g+1);if(a>B){var F=o.count;s[F]=B;var I=F*(n+1);u[I]=O;for(var c=1;n>=c;++c)u[I+c]=l[c-1];u[I+b+1]=E,o.push()}}}return d.freeFloat64(l),o.dispose(),0>v?-1:this.ids[v]},v.knn=function(e,t,a){if("number"==typeof a){if(0>a)return[]}else a=1/0;var n=this.length;if(1>n)return[];if("number"==typeof t){if(0>=t)return[];t=0|Math.min(t,n)}else t=n;var r=this.ids,i=this.dimension,l=this.points,o=l.data,s=d.mallocFloat64(i),u=new f(t,1),c=u.index,v=u.data,h=new f(n,i+1),g=h.index,m=h.data;g[0]=0;for(var y=0;i>=y;++y)m[y]=0;h.count+=1;for(var b=a;h.count>0&&!(m[0]>=b);){for(var x=g[0],w=l.index(x,0),_=0,y=0;i>y;++y)_+=Math.pow(e[y]-o[w+y],2);if(b>_){u.count>=t&&u.pop();var z=u.count;c[z]=x,v[z]=-_,u.push(),u.count>=t&&(b=-v[0])}for(var k=p.log2(x+1)%i,A=0,y=0;i>y;++y){var E=m[y+1];y!==k&&(A+=E),s[y]=E}var j=e[k],O=o[w+k],M=s[k],F=M,I=M;O>j?I=Math.max(M,Math.pow(O-j,2)):F=Math.max(M,Math.pow(O-j,2));var B=F+A,S=I+A;if(h.pop(),b>B){var N=2*x+1;if(n>N){var V=h.count;g[V]=N;var T=V*(i+1);m[T]=B;for(var y=1;i>=y;++y)m[T+y]=s[y-1];m[T+k+1]=F,h.push()}}if(b>S){var C=2*(x+1);if(n>C){var V=h.count;g[V]=C;var T=V*(i+1);m[T]=S;for(var y=1;i>=y;++y)m[T+y]=s[y-1];m[T+k+1]=I,h.push()}}}d.freeFloat64(s),h.dispose();for(var q=new Array(u.count),r=this.ids,y=u.count-1;y>=0;--y)q[y]=r[c[0]],u.pop();return u.dispose(),q},v.dispose=function(){d.free(this.points.data),d.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0}},{"./lib/heap.js":5,"bit-twiddle":6,"inorder-tree-layout":7,ndarray:22,"ndarray-ops":9,"ndarray-pack":14,"ndarray-scratch":20,"ndarray-select":21,"typedarray-pool":25}],5:[function(e,t){"use strict";function a(e){return 1&e?e-1>>1:(e>>1)-1}function n(e,t){this.count=0,this.dataSize=t,this.index=r.mallocInt32(e),this.data=r.mallocFloat64(e*t)}t.exports=n;var r=e("typedarray-pool"),i=n.prototype;i.heapSwap=function(e,t){var a=this.data,n=this.index,r=this.dataSize,i=n[e];n[e]=n[t],n[t]=i;for(var l=r*e,o=r*t,s=0;r>s;++s){var u=a[l];a[l]=a[o],a[o]=u,l+=1,o+=1}},i.heapUp=function(e){for(var t=this.dataSize,n=(this.index,this.data),r=n[t*e];e>0;){var i=a(e);if(i>=0){var l=n[t*i];if(l>r){this.heapSwap(e,i),e=i;continue}}break}},i.heapDown=function(e){for(var t=this.dataSize,a=(this.index,this.data),n=this.count,r=a[t*e];;){var i=r,l=2*e+1,o=2*(e+1),s=e;if(n>l){var u=a[t*l];i>u&&(s=l,i=u)}if(n>o){var d=a[t*o];i>d&&(s=o)}if(s===e)break;this.heapSwap(e,s),e=s}},i.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},i.push=function(){this.heapUp(this.count),this.count+=1},i.dispose=function(){r.freeInt32(this.index),r.freeFloat64(this.data)}},{"typedarray-pool":25}],6:[function(e,t,a){"use strict";"use restrict";function n(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var r=32;a.INT_BITS=r,a.INT_MAX=2147483647,a.INT_MIN=-1<<r-1,a.sign=function(e){return(e>0)-(0>e)},a.abs=function(e){var t=e>>r-1;return(e^t)-t},a.min=function(e,t){return t^(e^t)&-(t>e)},a.max=function(e,t){return e^(e^t)&-(t>e)},a.isPow2=function(e){return!(e&e-1||!e)},a.log2=function(e){var t,a;return t=(e>65535)<<4,e>>>=t,a=(e>255)<<3,e>>>=a,t|=a,a=(e>15)<<2,e>>>=a,t|=a,a=(e>3)<<1,e>>>=a,t|=a,t|e>>1},a.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},a.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},a.countTrailingZeros=n,a.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},a.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},a.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var i=new Array(256);!function(e){for(var t=0;256>t;++t){var a=t,n=t,r=7;for(a>>>=1;a;a>>>=1)n<<=1,n|=1&a,--r;e[t]=n<<r&255}}(i),a.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},a.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},a.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},a.interleave3=function(e,t,a){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),e|a<<2},a.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},a.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},{}],7:[function(e,t,a){"use strict";function n(e){var t=(h.nextPow2(e+1)>>>1)-1,a=e-t;return h.nextPow2(a)-1>=t?t:(t>>>1)+a}function r(){return 0}function i(e){return e-1}function l(e,t){if(0>=e)return 0;var a=n(e);return t>a?l(e-a-1,t-a-1):t===a?h.log2(e):l(a,t)}function o(e,t){return Math.max(t-1,0)}function s(e,t){return Math.min(t+1,e-1)}function u(e,t){if(0>=e)return-1;var a=n(e);if(t>a){var r=u(e-a-1,t-a-1);return 0>r?a:r+a+1}if(t===a)return-1;var r=u(a,t);return 0>r?a:r}function d(e,t){if(0>=e)return 0;var a=n(e);return t>a?d(e-a-1,t-a-1)+a+1:t===a?n(t):d(a,t)}function c(e,t){if(0>=e)return 0;var a=n(e);return t>a?c(e-a-1,t-a-1)+a+1:t===a?n(e-a-1)+a+1:c(a,t)}function p(e,t){return 0===l(e,t)}function f(e,t){e|=0,t|=0;for(var a=0;e>1;){var r=n(e);if(t>r)a+=r+1,e-=r+1,t-=r+1;else{if(t===r)break;e=r}}return a}function v(e,t){e|=0,t|=0;for(var a=0;e>1;){var r=n(e);if(t>r)a+=r+1,e-=r+1,t-=r+1;else{if(t===r){a+=e-1;break}e=r}}return a}var h=e("bit-twiddle");a.root=n,a.begin=r,a.end=i,a.height=l,a.prev=o,a.next=s,a.parent=u,a.left=d,a.right=c,a.leaf=p,a.lo=f,a.hi=v},{"bit-twiddle":8}],8:[function(e,t){t.exports=e(6)},{}],9:[function(e,t,a){"use strict";function n(e){if(!e)return o;for(var t=0;t<e.args.length;++t){var a=e.args[t];e.args[t]=0===t?{name:a,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:a,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function r(e){return l({args:e.args,pre:n(e.pre),body:n(e.body),post:n(e.proc),funcName:e.funcName})}function i(e){for(var t=[],a=0;a<e.args.length;++a)t.push("a"+a);var n=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return n(r(e))}var l=e("cwise-compiler"),o={body:"",args:[],thisVars:[],localVars:[]},s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var t=s[e];a[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),a[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),a[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),a[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var t=u[e];a[e]=i({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),a[e+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var d={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in d){var t=d[e];a[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),a[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),a[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),a[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var t=c[e];a[t]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),a[t+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var p=["max","min","atan2","pow"];!function(){for(var e=0;e<p.length;++e){var t=p[e];a[t]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),a[t+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),a[t+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),a[t+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var f=["atan2","pow"];!function(){for(var e=0;e<f.length;++e){var t=f[e];a[t+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),a[t+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),a[t+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),a[t+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),a.any=l({args:["array"],pre:o,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),a.all=l({args:["array"],pre:o,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),a.sum=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),a.prod=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),a.norm2squared=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),a.norm2=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),a.norminf=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),a.norm1=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),a.sup=l({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),a.inf=l({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),a.argmin=l({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),a.argmax=l({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),a.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),a.assign=i({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),a.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),a.equals=l({args:["array","array"],pre:o,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":10}],10:[function(e,t){"use strict";function a(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function n(e){var t=new a;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var i=0;i<n.length;++i){var l=n[i];if("array"===l){if(t.arrayArgs.push(i),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===l)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===l){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===l){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof l||!l.offset)throw new Error("cwise: Unknown argument type "+n[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:l.array,offset:l.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,r(t)}var r=e("./lib/thunk.js");t.exports=n},{"./lib/thunk.js":12}],11:[function(e,t){"use strict";function a(e,t,a){var n,r,i=e.length,l=t.arrayArgs.length,o=t.indexArgs.length>0,s=[],u=[],d=0,c=0;for(n=0;i>n;++n)u.push(["i",n,"=0"].join(""));for(r=0;l>r;++r)for(n=0;i>n;++n)c=d,d=e[n],u.push(0===n?["d",r,"s",n,"=t",r,"p",d].join(""):["d",r,"s",n,"=(t",r,"p",d,"-s",c,"*t",r,"p",c,")"].join(""));for(s.push("var "+u.join(",")),n=i-1;n>=0;--n)d=e[n],s.push(["for(i",n,"=0;i",n,"<s",d,";++i",n,"){"].join(""));for(s.push(a),n=0;i>n;++n){for(c=d,d=e[n],r=0;l>r;++r)s.push(["p",r,"+=d",r,"s",n].join(""));o&&(n>0&&s.push(["index[",c,"]-=s",c].join("")),s.push(["++index[",d,"]"].join(""))),s.push("}")}return s.join("\n")}function n(e,t,n,r){for(var i=t.length,l=n.arrayArgs.length,o=n.blockSize,s=n.indexArgs.length>0,u=[],d=0;l>d;++d)u.push(["var offset",d,"=p",d].join(""));for(var d=e;i>d;++d)u.push(["for(var j"+d+"=SS[",t[d],"]|0;j",d,">0;){"].join("")),u.push(["if(j",d,"<",o,"){"].join("")),u.push(["s",t[d],"=j",d].join("")),u.push(["j",d,"=0"].join("")),u.push(["}else{s",t[d],"=",o].join("")),u.push(["j",d,"-=",o,"}"].join("")),s&&u.push(["index[",t[d],"]=j",d].join(""));for(var d=0;l>d;++d){for(var c=["offset"+d],p=e;i>p;++p)c.push(["j",p,"*t",d,"p",t[p]].join(""));u.push(["p",d,"=(",c.join("+"),")"].join(""))}u.push(a(t,n,r));for(var d=e;i>d;++d)u.push("}");return u.join("\n")}function r(e){for(var t=0,a=e[0].length;a>t;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function i(e,t,a){for(var n=e.body,r=[],i=[],l=0;l<e.args.length;++l){var o=e.args[l];if(!(o.count<=0)){var s=new RegExp(o.name,"g"),u="",d=t.arrayArgs.indexOf(l);switch(t.argTypes[l]){case"offset":var c=t.offsetArgIndex.indexOf(l),p=t.offsetArgs[c];d=p.array,u="+q"+c;case"array":u="p"+d+u;var f="l"+l,v="a"+d;1===o.count?"generic"===a[d]?o.lvalue?(r.push(["var ",f,"=",v,".get(",u,")"].join("")),n=n.replace(s,f),i.push([v,".set(",u,",",f,")"].join(""))):n=n.replace(s,[v,".get(",u,")"].join("")):n=n.replace(s,[v,"[",u,"]"].join("")):"generic"===a[d]?(r.push(["var ",f,"=",v,".get(",u,")"].join("")),n=n.replace(s,f),o.lvalue&&i.push([v,".set(",u,",",f,")"].join(""))):(r.push(["var ",f,"=",v,"[",u,"]"].join("")),n=n.replace(s,f),o.lvalue&&i.push([v,"[",u,"]=",f].join("")));break;case"scalar":n=n.replace(s,"Y"+t.scalarArgs.indexOf(l));break;case"index":n=n.replace(s,"index");break;case"shape":n=n.replace(s,"shape")}}}return[r.join("\n"),n,i.join("\n")].join("\n").trim()}function l(e){for(var t=new Array(e.length),a=!0,n=0;n<e.length;++n){var r=e[n],i=r.match(/\d+/);i=i?i[0]:"",t[n]=0===r.charAt(0)?"u"+r.charAt(1)+i:r.charAt(0)+i,n>0&&(a=a&&t[n]===t[n-1])}return a?t[0]:t.join("")}function o(e,t){for(var o=0|t[1].length,u=new Array(e.arrayArgs.length),d=new Array(e.arrayArgs.length),c=["SS"],p=["'use strict'"],f=[],v=0;o>v;++v)f.push(["s",v,"=SS[",v,"]"].join(""));for(var h=0;h<e.arrayArgs.length;++h){c.push("a"+h),c.push("t"+h),c.push("p"+h),d[h]=t[2*h],u[h]=t[2*h+1];for(var v=0;o>v;++v)f.push(["t",h,"p",v,"=t",h,"[",v,"]"].join(""))}for(var h=0;h<e.scalarArgs.length;++h)c.push("Y"+h);if(e.shapeArgs.length>0&&f.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var g=new Array(o),h=0;o>h;++h)g[h]="0";f.push(["index=[",g.join(","),"]"].join(""))}for(var h=0;h<e.offsetArgs.length;++h){for(var m=e.offsetArgs[h],y=[],v=0;v<m.offset.length;++v)0!==m.offset[v]&&y.push(1===m.offset[v]?["t",m.array,"p",v].join(""):[m.offset[v],"*t",m.array,"p",v].join(""));f.push(0===y.length?"q"+h+"=0":["q",h,"=",y.join("+")].join(""))}var b=s([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));f=f.concat(b),p.push("var "+f.join(","));for(var h=0;h<e.arrayArgs.length;++h)p.push("p"+h+"|=0");e.pre.body.length>3&&p.push(i(e.pre,e,d));var x=i(e.body,e,d),w=r(u);p.push(o>w?n(w,u[0],e,x):a(u[0],e,x)),e.post.body.length>3&&p.push(i(e.post,e,d)),e.debug&&console.log("Generated cwise routine for ",t,":\n\n",p.join("\n"));var _=[e.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",w,l(d)].join(""),z=new Function(["function ",_,"(",c.join(","),"){",p.join("\n"),"} return ",_].join(""));return z()}var s=e("uniq");t.exports=o},{uniq:13}],12:[function(e,t){"use strict";function a(e){var t=["'use strict'","var CACHED={}"],a=[],r=e.funcName+"_cwise_thunk";t.push(["return function ",r,"(",e.shimArgs.join(","),"){"].join(""));for(var i=[],l=[],o=[["array",e.arrayArgs[0],".shape"].join("")],s=0;s<e.arrayArgs.length;++s){var u=e.arrayArgs[s];a.push(["t",u,"=array",u,".dtype,","r",u,"=array",u,".order"].join("")),i.push("t"+u),i.push("r"+u),l.push("t"+u),l.push("r"+u+".join()"),o.push("array"+u+".data"),o.push("array"+u+".stride"),o.push("array"+u+".offset|0")}for(var s=0;s<e.scalarArgs.length;++s)o.push("scalar"+e.scalarArgs[s]);a.push(["type=[",l.join(","),"].join()"].join("")),a.push("proc=CACHED[type]"),t.push("var "+a.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),e.debug&&console.log("Generated thunk:",t.join("\n"));var d=new Function("compile",t.join("\n"));return d(n.bind(void 0,e))}var n=e("./compile.js");t.exports=a},{"./compile.js":11}],13:[function(e,t){"use strict";function a(e,t){for(var a=1,n=e.length,r=e[0],i=e[0],l=1;n>l;++l)if(i=r,r=e[l],t(r,i)){if(l===a){a++;continue}e[a++]=r}return e.length=a,e}function n(e){for(var t=1,a=e.length,n=e[0],r=e[0],i=1;a>i;++i,r=n)if(r=n,n=e[i],n!==r){if(i===t){t++;continue}e[t++]=n}return e.length=t,e}function r(e,t,r){return 0===e.length?e:t?(r||e.sort(t),a(e,t)):(r||e.sort(),n(e))}t.exports=r},{}],14:[function(e,t){"use strict";var a=e("ndarray"),n=e("./doConvert.js");t.exports=function(e,t){for(var r=[],i=e,l=1;i instanceof Array;)r.push(i.length),l*=i.length,i=i[0];return 0===r.length?a():(t||(t=a(new Float64Array(l),r)),n(t,e),t)}},{"./doConvert.js":15,ndarray:22}],15:[function(e,t){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})
},{"cwise-compiler":16}],16:[function(e,t){"use strict";function a(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function n(e){var t=new a;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n.slice(0);for(var i=0;i<n.length;++i){var l=n[i];if("array"===l){if(t.arrayArgs.push(i),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===l)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===l){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===l){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof l||!l.offset)throw new Error("cwise: Unknown argument type "+n[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:l.array,offset:l.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,r(t)}var r=e("./lib/thunk.js");t.exports=n},{"./lib/thunk.js":18}],17:[function(e,t){"use strict";function a(e,t,a){var n,r,i=e.length,l=t.arrayArgs.length,o=t.indexArgs.length>0,s=[],u=[],d=0,c=0;for(n=0;i>n;++n)u.push(["i",n,"=0"].join(""));for(r=0;l>r;++r)for(n=0;i>n;++n)c=d,d=e[n],u.push(0===n?["d",r,"s",n,"=t",r,"[",d,"]"].join(""):["d",r,"s",n,"=(t",r,"[",d,"]-s",c,"*t",r,"[",c,"])"].join(""));for(s.push("var "+u.join(",")),n=i-1;n>=0;--n)d=e[n],s.push(["for(i",n,"=0;i",n,"<s",d,";++i",n,"){"].join(""));for(s.push(a),n=0;i>n;++n){for(c=d,d=e[n],r=0;l>r;++r)s.push(["p",r,"+=d",r,"s",n].join(""));o&&(n>0&&s.push(["index[",c,"]-=s",c].join("")),s.push(["++index[",d,"]"].join(""))),s.push("}")}return s.join("\n")}function n(e,t,n,r){for(var i=t.length,l=n.arrayArgs.length,o=n.blockSize,s=n.indexArgs.length>0,u=[],d=0;l>d;++d)u.push(["var offset",d,"=p",d].join(""));for(var d=e;i>d;++d)u.push(["for(var j"+d+"=SS[",t[d],"]|0;j",d,">0;){"].join("")),u.push(["if(j",d,"<",o,"){"].join("")),u.push(["s",t[d],"=j",d].join("")),u.push(["j",d,"=0"].join("")),u.push(["}else{s",t[d],"=",o].join("")),u.push(["j",d,"-=",o,"}"].join("")),s&&u.push(["index[",t[d],"]=j",d].join(""));for(var d=0;l>d;++d){for(var c=["offset"+d],p=e;i>p;++p)c.push(["j",p,"*t",d,"[",t[p],"]"].join(""));u.push(["p",d,"=(",c.join("+"),")"].join(""))}u.push(a(t,n,r));for(var d=e;i>d;++d)u.push("}");return u.join("\n")}function r(e){for(var t=0,a=e[0].length;a>t;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function i(e,t,a){for(var n=e.body,r=[],i=[],l=0;l<e.args.length;++l){var o=e.args[l];if(!(o.count<=0)){var s=new RegExp(o.name,"g"),u="",d=t.arrayArgs.indexOf(l);switch(t.argTypes[l]){case"offset":var c=t.offsetArgIndex.indexOf(l),p=t.offsetArgs[c];d=p.array,u="+q"+c;case"array":u="p"+d+u;var f="l"+l,v="a"+d;1===o.count?"generic"===a[d]?o.lvalue?(r.push(["var ",f,"=",v,".get(",u,")"].join("")),n=n.replace(s,f),i.push([v,".set(",u,",",f,")"].join(""))):n=n.replace(s,[v,".get(",u,")"].join("")):n=n.replace(s,[v,"[",u,"]"].join("")):"generic"===a[d]?(r.push(["var ",f,"=",v,".get(",u,")"].join("")),n=n.replace(s,f),o.lvalue&&i.push([v,".set(",u,",",f,")"].join(""))):(r.push(["var ",f,"=",v,"[",u,"]"].join("")),n=n.replace(s,f),o.lvalue&&i.push([v,"[",u,"]=",f].join("")));break;case"scalar":n=n.replace(s,"Y"+t.scalarArgs.indexOf(l));break;case"index":n=n.replace(s,"index");break;case"shape":n=n.replace(s,"shape")}}}return[r.join("\n"),n,i.join("\n")].join("\n").trim()}function l(e){for(var t=new Array(e.length),a=!0,n=0;n<e.length;++n){var r=e[n],i=r.match(/\d+/);i=i?i[0]:"",t[n]=0===r.charAt(0)?"u"+r.charAt(1)+i:r.charAt(0)+i,n>0&&(a=a&&t[n]===t[n-1])}return a?t[0]:t.join("")}function o(e,t){for(var o=0|t[1].length,u=new Array(e.arrayArgs.length),d=new Array(e.arrayArgs.length),c=["SS"],p=["'use strict'"],f=[],v=0;o>v;++v)f.push(["s",v,"=SS[",v,"]"].join(""));for(var h=0;h<e.arrayArgs.length;++h)c.push("a"+h),c.push("t"+h),c.push("p"+h),d[h]=t[2*h],u[h]=t[2*h+1];for(var h=0;h<e.scalarArgs.length;++h)c.push("Y"+h);if(e.shapeArgs.length>0&&f.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var g=new Array(o),h=0;o>h;++h)g[h]="0";f.push(["index=[",g.join(","),"]"].join(""))}for(var h=0;h<e.offsetArgs.length;++h){for(var m=e.offsetArgs[h],y=[],v=0;v<m.offset.length;++v)0!==m.offset[v]&&y.push(1===m.offset[v]?["t",m.array,"[",v,"]"].join(""):[m.offset[v],"*t",m.array,"[",v,"]"].join(""));f.push(0===y.length?"q"+h+"=0":["q",h,"=(",y.join("+"),")|0"].join(""))}var b=s([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));f=f.concat(b),p.push("var "+f.join(","));for(var h=0;h<e.arrayArgs.length;++h)p.push("p"+h+"|=0");e.pre.body.length>3&&p.push(i(e.pre,e,d));var x=i(e.body,e,d),w=r(u);p.push(o>w?n(w,u[0],e,x):a(u[0],e,x)),e.post.body.length>3&&p.push(i(e.post,e,d)),e.debug&&console.log("Generated cwise routine for ",t,":\n\n",p.join("\n"));var _=[e.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",w,l(d)].join(""),z=new Function(["function ",_,"(",c.join(","),"){",p.join("\n"),"} return ",_].join(""));return z()}var s=e("uniq");t.exports=o},{uniq:19}],18:[function(e,t,a){arguments[4][12][0].apply(a,arguments)},{"./compile.js":17}],19:[function(e,t){"use strict";function a(e,t){for(var a=1,n=e.length,r=e[0],i=e[0],l=1;n>l;++l)if(i=r,r=e[l],t(r,i)){if(l===a){a++;continue}e[a++]=r}return e.length=a,e}function n(e){for(var t=1,a=e.length,n=e[0],r=e[0],i=1;a>i;++i,r=n)if(r=n,n=e[i],n!==r){if(i===t){t++;continue}e[t++]=n}return e.length=t,e}function r(e,t,r){return 0===e.length?[]:t?(r||e.sort(t),a(e,t)):(r||e.sort(),n(e))}t.exports=r},{}],20:[function(e,t,a){"use strict";function n(e){var t=e.dtype;("generic"===t||"array"===t)&&(t="double");var a=u.malloc(e.size,t),n=o(a,e.shape);return s.assign(n,e),n}function r(e,t){t||(t="double");for(var a=1,n=new Array(e.length),r=e.length-1;r>=0;--r)n[r]=a,a*=e[r];return o(u.malloc(a,t),e,n,0)}function i(e){"generic"!==e.dtype&&"array"!==e.dtype&&u.free(e.data)}function l(e,t){t||(t="double");for(var a=1,n=new Array(e.length),r=e.length-1;r>=0;--r)n[r]=a,a*=e[r];for(var i=u.malloc(a,t),r=0;a>r;++r)i[r]=0;return o(i,e,n,0)}var o=e("ndarray"),s=e("ndarray-ops"),u=e("typedarray-pool");a.clone=n,a.malloc=r,a.free=i,a.zeros=l},{ndarray:22,"ndarray-ops":9,"typedarray-pool":25}],21:[function(e,t){"use strict";function a(e){return"s"+e}function n(e){return"t"+e}function r(e){return"u"+e}function i(e){return"v"+e}function l(e){return"i"+e}function o(e){return"p"+e}function s(e){return"x"+e}function u(e){var t=e.slice();return t.splice(e.indexOf(0),1),t.unshift(0),t}function d(e,t,d){function c(r,u,d){if(t)E.push(o(0),".offset=",m,"+",n(e[0]),"*(",u,");",o(1),".offset=",m,"+",n(e[0]),"*(",d,");",r,"=",h,"(",o(0),",",o(1),");");else{E.push(s(0),"=",m,"+",n(0),"*(",u,");",s(1),"=",m,"+",n(0),"*(",d,");"),z>1&&E.push("_cmp:");for(var c=z-1;c>0;--c)E.push("for(",l(c),"=0;",l(c),"<",a(c),";",l(c),"++){");k?E.push(r,"=",g,".get(",s(0),")-",g,".get(",s(1),");"):E.push(r,"=",g,"[",s(0),"]-",g,"[",s(1),"];"),z>1&&E.push("if(",r,")break _cmp;");for(var c=1;z>c;++c)E.push(s(0),"+=",i(c),";",s(1),"+=",i(c),"}")}}function p(t,i){E.push(s(0),"=",m,"+",n(e[0]),"*(",t,");",s(1),"=",m,"+",n(e[0]),"*(",i,");");for(var o=z-1;o>0;--o)E.push("for(",l(e[o]),"=0;",l(e[o]),"<",a(e[o]),";",l(e[o]),"++){");k?E.push(b,"=",g,".get(",s(0),");",g,".set(",s(0),",",g,".get(",s(1),"));",g,".set(",s(1),",",b,");"):E.push(b,"=",g,"[",s(0),"];",g,"[",s(0),"]=",g,"[",s(1),"];",g,"[",s(1),"]=",b,";");for(var o=1;z>o;++o)E.push(s(0),"+=",r(e[o]),";",s(1),"+=",r(e[o]),"}")}e=u(e);var z=e.length,k="generic"===d,A="ndSelect"+d+e.join("_")+"_"+(t?"cmp":"lex"),E=[],j=[f,v];t&&j.push(h);for(var O=[g+"="+f+".data",m+"="+f+".offset|0",y+"=Math.random",b],M=0;2>M;++M)O.push(s(M)+"=0");for(var M=0;z>M;++M)O.push(a(M)+"="+f+".shape["+M+"]|0",n(M)+"="+f+".stride["+M+"]|0",l(M)+"=0");for(var M=1;z>M;++M)z-1>M?O.push(i(M)+"=("+n(M)+"-"+a(M+1)+"*"+n(M+1)+")|0",r(e[M])+"=("+n(e[M])+"-"+a(e[M+1])+"*"+n(e[M+1])+")|0"):O.push(i(M)+"="+n(M),r(e[M])+"="+n(e[M]));if(t)for(var M=0;2>M;++M)O.push(o(M)+"="+f+".pick(0)");O.push(_+"=0",x+"=0",w+"="+a(e[0])+"-1"),E.push("while(",x,"<",w,"){",_,"=(",y,"()*(",w,"-",x,"+1)+",x,")|0;"),p(_,w),E.push(_,"=",x,";","for(",l(0),"=",x,";",l(0),"<",w,";",l(0),"++){"),c(b,l(0),w),E.push("if(",b,"<0){"),p(_,l(0)),E.push(_,"++;"),E.push("}}"),p(_,w),E.push("if(",_,"===",v,"){",x,"=",_,";","break;","}else if(",v,"<",_,"){",w,"=",_,"-1;","}else{",x,"=",_,"+1;","}","}"),t?E.push(o(0),".offset=",m,"+",x,"*",n(0),";","return ",o(0),";"):E.push("return ",f,".pick(",x,");");var F=["'use strict';function ",A,"(",j,"){","var ",O.join(),";",E.join(""),"};return ",A].join(""),I=new Function(F);return I()}function c(e,t,a){var n=e.join()+t+a,r=z[n];return r?r:z[n]=d(e,t,a)}function p(e,t,a){if(t|=0,0===e.dimension||e.shape[0]<=t||0>t)return null;var n=!!a,r=c(e.order,n,e.dtype);return n?r(e,t,a):r(e,t)}t.exports=p,t.exports.compile=c;var f="a",v="K",h="C",g="d",m="o",y="R",b="T",x="L",w="H",_="X",z={}},{}],22:[function(e,t){(function(a){function n(e,t){return e[0]-t[0]}function r(){var e,t=this.stride,a=new Array(t.length);for(e=0;e<a.length;++e)a[e]=[Math.abs(t[e]),e];a.sort(n);var r=new Array(a.length);for(e=0;e<r.length;++e)r[e]=a[e][1];return r}function i(e,t){var a=["View",t,"d",e].join("");0>t&&(a="View_Nil"+e);var n="generic"===e;if(-1===t){var i="function "+a+"(a){this.data=a;};var proto="+a+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+a+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+a+"(a){return new "+a+"(a);}",l=new Function(i);return l()}if(0===t){var i="function "+a+"(a,d) {this.data = a;this.offset = d};var proto="+a+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+a+"_copy() {return new "+a+"(this.data,this.offset)};proto.pick=function "+a+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+a+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+a+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+a+"(a,b,c,d){return new "+a+"(a,d)}",l=new Function("TrivialArray",i);return l(p[e][0])}var i=["'use strict'"],o=s(t),d=o.map(function(e){return"i"+e}),c="this.offset+"+o.map(function(e){return"this._stride"+e+"*i"+e}).join("+");i.push("function "+a+"(a,"+o.map(function(e){return"b"+e}).join(",")+","+o.map(function(e){return"c"+e}).join(",")+",d){this.data=a");for(var f=0;t>f;++f)i.push("this._shape"+f+"=b"+f+"|0");for(var f=0;t>f;++f)i.push("this._stride"+f+"=c"+f+"|0");i.push("this.offset=d|0}","var proto="+a+".prototype","proto.dtype='"+e+"'","proto.dimension="+t);var v="VStride"+t+"d"+e,h="VShape"+t+"d"+e,g={stride:v,shape:h};for(var m in g){var y=g[m];i.push("function "+y+"(v) {this._v=v} var aproto="+y+".prototype","aproto.length="+t);for(var b=[],f=0;t>f;++f)b.push(["this._v._",m,f].join(""));i.push("aproto.toJSON=function "+y+"_toJSON(){return ["+b.join(",")+"]}","aproto.valueOf=aproto.toString=function "+y+"_toString(){return ["+b.join(",")+"].join()}");for(var f=0;t>f;++f)i.push("Object.defineProperty(aproto,"+f+",{get:function(){return this._v._"+m+f+"},set:function(v){return this._v._"+m+f+"=v|0},enumerable:true})");for(var f=0;f<u.length;++f)u[f]in Array.prototype&&i.push("aproto."+u[f]+"=Array.prototype."+u[f]);i.push(["Object.defineProperty(proto,'",m,"',{get:function ",y,"_get(){return new ",y,"(this)},set: function ",y,"_set(v){"].join(""));for(var f=0;t>f;++f)i.push("this._"+m+f+"=v["+f+"]|0");i.push("return v}})")}i.push("Object.defineProperty(proto,'size',{get:function "+a+"_size(){return "+o.map(function(e){return"this._shape"+e}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),4>t?(i.push("function "+a+"_order(){"),2===t?i.push("return (Math.abs(this._stride0)>Math.abs(this._stride1))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this._stride0),s1=Math.abs(this._stride1),s2=Math.abs(this._stride2);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+a+"_set("+d.join(",")+",v){"),i.push(n?"return this.data.set("+c+",v)}":"return this.data["+c+"]=v}"),i.push("proto.get=function "+a+"_get("+d.join(",")+"){"),i.push(n?"return this.data.get("+c+")}":"return this.data["+c+"]}"),i.push("proto.index=function "+a+"_index(",d.join(),"){return "+c+"}"),i.push("proto.hi=function "+a+"_hi("+d.join(",")+"){return new "+a+"(this.data,"+o.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this._shape",e,":i",e,"|0"].join("")}).join(",")+","+o.map(function(e){return"this._stride"+e}).join(",")+",this.offset)}");var x=o.map(function(e){return"a"+e+"=this._shape"+e}),w=o.map(function(e){return"c"+e+"=this._stride"+e});i.push("proto.lo=function "+a+"_lo("+d.join(",")+"){var b=this.offset,d=0,"+x.join(",")+","+w.join(","));for(var f=0;t>f;++f)i.push("if(typeof i"+f+"==='number'&&i"+f+">=0){d=i"+f+"|0;b+=c"+f+"*d;a"+f+"-=d}");i.push("return new "+a+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+a+"_step("+d.join(",")+"){var "+o.map(function(e){return"a"+e+"=this._shape"+e}).join(",")+","+o.map(function(e){return"b"+e+"=this._stride"+e}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var f=0;t>f;++f)i.push("if(typeof i"+f+"==='number'){d=i"+f+"|0;if(d<0){c+=b"+f+"*(a"+f+"-1);a"+f+"=ceil(-a"+f+"/d)}else{a"+f+"=ceil(a"+f+"/d)}b"+f+"*=d}");i.push("return new "+a+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"b"+e}).join(",")+",c)}");for(var _=new Array(t),z=new Array(t),f=0;t>f;++f)_[f]="a[i"+f+"]",z[f]="b[i"+f+"]";i.push("proto.transpose=function "+a+"_transpose("+d+"){"+d.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+a+"(this.data,"+_.join(",")+","+z.join(",")+",this.offset)}"),i.push("proto.pick=function "+a+"_pick("+d+"){var a=[],b=[],c=this.offset");for(var f=0;t>f;++f)i.push("if(typeof i"+f+"==='number'&&i"+f+">=0){c=(c+this._stride"+f+"*i"+f+")|0}else{a.push(this._shape"+f+");b.push(this._stride"+f+")}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+a+"(data,shape,stride,offset){return new "+a+"(data,"+o.map(function(e){return"shape["+e+"]"}).join(",")+","+o.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var l=new Function("CTOR_LIST","ORDER",i.join("\n"));return l(p[e],r)}function l(e){if(c&&a.isBuffer(e))return"buffer";if(d)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function o(e,t,a,n){if(void 0===e){var r=p.array[0];return r([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var o=t.length;if(void 0===a){a=new Array(o);for(var s=o-1,u=1;s>=0;--s)a[s]=u,u*=t[s]}if(void 0===n){n=0;for(var s=0;o>s;++s)a[s]<0&&(n-=(t[s]-1)*a[s])}for(var d=l(e),c=p[d];c.length<=o+1;)c.push(i(d,c.length-1));var r=c[o+1];return r(e,t,a,n)}var s=e("iota-array"),u=["concat","join","slice","toString","indexOf","lastIndexOf","forEach","every","some","filter","map","reduce","reduceRight"],d="undefined"!=typeof Float64Array,c="undefined"!=typeof a,p={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=o}).call(this,e("buffer").Buffer)},{buffer:27,"iota-array":23}],23:[function(e,t){"use strict";function a(e){for(var t=new Array(e),a=0;e>a;++a)t[a]=a;return t}t.exports=a},{}],24:[function(e,t){"use strict";function a(e,t,n){var r=0|e[n];if(0>=r)return[];var i,l=new Array(r);if(n===e.length-1)for(i=0;r>i;++i)l[i]=t;else for(i=0;r>i;++i)l[i]=a(e,t,n+1);return l}function n(e,t){var a,n;for(a=new Array(e),n=0;e>n;++n)a[n]=t;return a}function r(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return n(0|e,t);break;case"object":if("number"==typeof e.length)return a(e,t,0)}return[]}t.exports=r},{}],25:[function(e,t,a){(function(t,n){var r=e("bit-twiddle"),i=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var l="undefined"!=typeof Uint8ClampedArray,o=t.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=i([32,0])),o.BUFFER||(o.BUFFER=i([32,0]));var s=o.UINT8,u=o.UINT16,d=o.UINT32,c=o.INT8,p=o.INT16,f=o.INT32,v=o.FLOAT,h=o.DOUBLE,g=o.DATA,m=o.UINT8C,y=o.BUFFER;a.free=function(e){var t=0|e.length,a=r.log2(t);if(n.isBuffer(e))y[a].push(e);else switch(Object.prototype.toString.call(e)){case"[object Uint8Array]":s[a].push(e);break;case"[object Uint16Array]":u[a].push(e);break;case"[object Uint32Array]":d[a].push(e);break;case"[object Int8Array]":c[a].push(e);break;case"[object Int16Array]":p[a].push(e);break;case"[object Int32Array]":f[a].push(e);break;case"[object Uint8ClampedArray]":m[a].push(e);break;case"[object Float32Array]":v[a].push(e);break;case"[object Float64Array]":h[a].push(e);break;case"[object ArrayBuffer]":g[a].push(e);break;default:throw new Error("typedarray-pool: Unspecified array type")}},a.freeUint8=function(e){s[r.log2(e.length)].push(e)},a.freeUint16=function(e){u[r.log2(e.length)].push(e)},a.freeUint32=function(e){d[r.log2(e.length)].push(e)},a.freeInt8=function(e){c[r.log2(e.length)].push(e)},a.freeInt16=function(e){p[r.log2(e.length)].push(e)},a.freeInt32=function(e){f[r.log2(e.length)].push(e)},a.freeFloat32=a.freeFloat=function(e){v[r.log2(e.length)].push(e)},a.freeFloat64=a.freeDouble=function(e){h[r.log2(e.length)].push(e)},a.freeArrayBuffer=function(e){g[r.log2(e.length)].push(e)},a.freeUint8Clamped=l?function(e){m[r.log2(e.length)].push(e)}:a.freeUint8,a.freeBuffer=function(e){y[r.log2(e.length)].push(e)},a.malloc=function(e,t){e=r.nextPow2(e);var a=r.log2(e);if(void 0===t||"arraybuffer"===t){var i=g[a];if(i.length>0){var o=i[i.length-1];return i.pop(),o}return new ArrayBuffer(e)}switch(t){case"uint8":var b=s[a];return b.length>0?b.pop():new Uint8Array(e);case"uint16":var x=u[a];return x.length>0?x.pop():new Uint16Array(e);case"uint32":var w=d[a];return w.length>0?w.pop():new Uint32Array(e);case"int8":var _=c[a];return _.length>0?_.pop():new Int8Array(e);case"int16":var z=p[a];return z.length>0?z.pop():new Int16Array(e);case"int32":var k=f[a];return k.length>0?k.pop():new Int32Array(e);case"float":case"float32":var A=v[a];return A.length>0?A.pop():new Float32Array(e);case"double":case"float64":var E=h[a];return E.length>0?E.pop():new Float64Array(e);case"uint8_clamped":if(l){var j=m[a];return j.length>0?j.pop():new Uint8ClampedArray(e)}var b=s[a];return b.length>0?b.pop():new Uint8Array(e);case"buffer":var O=y[a];return O.length>0?O.pop():new n(e);default:return null}return null},a.mallocUint8=function(e){e=r.nextPow2(e);var t=r.log2(e),a=s[t];return a.length>0?a.pop():new Uint8Array(e)},a.mallocUint16=function(e){e=r.nextPow2(e);var t=r.log2(e),a=u[t];return a.length>0?a.pop():new Uint16Array(e)},a.mallocUint32=function(e){e=r.nextPow2(e);var t=r.log2(e),a=d[t];return a.length>0?a.pop():new Uint32Array(e)},a.mallocInt8=function(e){e=r.nextPow2(e);var t=r.log2(e),a=c[t];return a.length>0?a.pop():new Int8Array(e)},a.mallocInt16=function(e){e=r.nextPow2(e);var t=r.log2(e),a=p[t];return a.length>0?a.pop():new Int16Array(e)},a.mallocInt32=function(e){e=r.nextPow2(e);var t=r.log2(e),a=f[t];return a.length>0?a.pop():new Int32Array(e)},a.mallocFloat32=a.mallocFloat=function(e){e=r.nextPow2(e);var t=r.log2(e),a=v[t];return a.length>0?a.pop():new Float32Array(e)},a.mallocFloat64=a.mallocDouble=function(e){e=r.nextPow2(e);var t=r.log2(e),a=h[t];return a.length>0?a.pop():new Float64Array(e)},a.mallocArrayBuffer=function(e){e=r.nextPow2(e);var t=r.log2(e),a=g[t];return a.length>0?a.pop():new ArrayBuffer(e)},a.mallocUint8Clamped=l?function(e){e=r.nextPow2(e);var t=r.log2(e),a=m[t];return a.length>0?a.pop():new Uint8ClampedArray(e)}:a.mallocUint8,a.mallocBuffer=function(e){e=r.nextPow2(e);var t=r.log2(e),a=y[t];return a.length>0?a.pop():new n(e)},a.clearCache=function(){for(var e=0;32>e;++e)s[e].length=0,u[e].length=0,d[e].length=0,c[e].length=0,p[e].length=0,f[e].length=0,v[e].length=0,h[e].length=0,g[e].length=0,m[e].length=0,y[e].length=0}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":6,buffer:27,dup:24}],26:[function(){},{}],27:[function(e,t,a){function n(e,t,a){if(!(this instanceof n))return new n(e,t,a);var r=typeof e;if("base64"===t&&"string"===r)for(e=O(e);e.length%4!==0;)e+="=";var i;if("number"===r)i=F(e);else if("string"===r)i=n.byteLength(e,t);else{if("object"!==r)throw new Error("First argument needs to be a number, array or string.");i=F(e.length)}var l;n._useTypedArrays?l=n._augment(new Uint8Array(i)):(l=this,l.length=i,l._isBuffer=!0);var o;if(n._useTypedArrays&&"number"==typeof e.byteLength)l._set(e);else if(B(e))for(o=0;i>o;o++)l[o]=n.isBuffer(e)?e.readUInt8(o):e[o];else if("string"===r)l.write(e,0,t);else if("number"===r&&!n._useTypedArrays&&!a)for(o=0;i>o;o++)l[o]=0;return l}function r(e,t,a,r){a=Number(a)||0;var i=e.length-a;r?(r=Number(r),r>i&&(r=i)):r=i;var l=t.length;R(l%2===0,"Invalid hex string"),r>l/2&&(r=l/2);for(var o=0;r>o;o++){var s=parseInt(t.substr(2*o,2),16);R(!isNaN(s),"Invalid hex string"),e[a+o]=s}return n._charsWritten=2*o,o}function i(e,t,a,r){var i=n._charsWritten=q(N(t),e,a,r);return i}function l(e,t,a,r){var i=n._charsWritten=q(V(t),e,a,r);return i}function o(e,t,a,n){return l(e,t,a,n)}function s(e,t,a,r){var i=n._charsWritten=q(C(t),e,a,r);return i}function u(e,t,a,r){var i=n._charsWritten=q(T(t),e,a,r);return i}function d(e,t,a){return H.fromByteArray(0===t&&a===e.length?e:e.slice(t,a))}function c(e,t,a){var n="",r="";a=Math.min(e.length,a);for(var i=t;a>i;i++)e[i]<=127?(n+=U(r)+String.fromCharCode(e[i]),r=""):r+="%"+e[i].toString(16);return n+U(r)}function p(e,t,a){var n="";a=Math.min(e.length,a);for(var r=t;a>r;r++)n+=String.fromCharCode(e[r]);return n}function f(e,t,a){return p(e,t,a)}function v(e,t,a){var n=e.length;(!t||0>t)&&(t=0),(!a||0>a||a>n)&&(a=n);for(var r="",i=t;a>i;i++)r+=S(e[i]);return r}function h(e,t,a){for(var n=e.slice(t,a),r="",i=0;i<n.length;i+=2)r+=String.fromCharCode(n[i]+256*n[i+1]);return r}function g(e,t,a,n){n||(R("boolean"==typeof a,"missing or invalid endian"),R(void 0!==t&&null!==t,"missing offset"),R(t+1<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var i;return a?(i=e[t],r>t+1&&(i|=e[t+1]<<8)):(i=e[t]<<8,r>t+1&&(i|=e[t+1])),i}}function m(e,t,a,n){n||(R("boolean"==typeof a,"missing or invalid endian"),R(void 0!==t&&null!==t,"missing offset"),R(t+3<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var i;return a?(r>t+2&&(i=e[t+2]<<16),r>t+1&&(i|=e[t+1]<<8),i|=e[t],r>t+3&&(i+=e[t+3]<<24>>>0)):(r>t+1&&(i=e[t+1]<<16),r>t+2&&(i|=e[t+2]<<8),r>t+3&&(i|=e[t+3]),i+=e[t]<<24>>>0),i}}function y(e,t,a,n){n||(R("boolean"==typeof a,"missing or invalid endian"),R(void 0!==t&&null!==t,"missing offset"),R(t+1<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var i=g(e,t,a,!0),l=32768&i;return l?-1*(65535-i+1):i}}function b(e,t,a,n){n||(R("boolean"==typeof a,"missing or invalid endian"),R(void 0!==t&&null!==t,"missing offset"),R(t+3<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var i=m(e,t,a,!0),l=2147483648&i;return l?-1*(4294967295-i+1):i}}function x(e,t,a,n){return n||(R("boolean"==typeof a,"missing or invalid endian"),R(t+3<e.length,"Trying to read beyond buffer length")),W.read(e,t,a,23,4)}function w(e,t,a,n){return n||(R("boolean"==typeof a,"missing or invalid endian"),R(t+7<e.length,"Trying to read beyond buffer length")),W.read(e,t,a,52,8)}function _(e,t,a,n,r){r||(R(void 0!==t&&null!==t,"missing value"),R("boolean"==typeof n,"missing or invalid endian"),R(void 0!==a&&null!==a,"missing offset"),R(a+1<e.length,"trying to write beyond buffer length"),L(t,65535));var i=e.length;if(!(a>=i))for(var l=0,o=Math.min(i-a,2);o>l;l++)e[a+l]=(t&255<<8*(n?l:1-l))>>>8*(n?l:1-l)}function z(e,t,a,n,r){r||(R(void 0!==t&&null!==t,"missing value"),R("boolean"==typeof n,"missing or invalid endian"),R(void 0!==a&&null!==a,"missing offset"),R(a+3<e.length,"trying to write beyond buffer length"),L(t,4294967295));var i=e.length;if(!(a>=i))for(var l=0,o=Math.min(i-a,4);o>l;l++)e[a+l]=t>>>8*(n?l:3-l)&255}function k(e,t,a,n,r){r||(R(void 0!==t&&null!==t,"missing value"),R("boolean"==typeof n,"missing or invalid endian"),R(void 0!==a&&null!==a,"missing offset"),R(a+1<e.length,"Trying to write beyond buffer length"),P(t,32767,-32768));var i=e.length;a>=i||(t>=0?_(e,t,a,n,r):_(e,65535+t+1,a,n,r))}function A(e,t,a,n,r){r||(R(void 0!==t&&null!==t,"missing value"),R("boolean"==typeof n,"missing or invalid endian"),R(void 0!==a&&null!==a,"missing offset"),R(a+3<e.length,"Trying to write beyond buffer length"),P(t,2147483647,-2147483648));var i=e.length;a>=i||(t>=0?z(e,t,a,n,r):z(e,4294967295+t+1,a,n,r))}function E(e,t,a,n,r){r||(R(void 0!==t&&null!==t,"missing value"),R("boolean"==typeof n,"missing or invalid endian"),R(void 0!==a&&null!==a,"missing offset"),R(a+3<e.length,"Trying to write beyond buffer length"),D(t,3.4028234663852886e38,-3.4028234663852886e38));var i=e.length;a>=i||W.write(e,t,a,n,23,4)}function j(e,t,a,n,r){r||(R(void 0!==t&&null!==t,"missing value"),R("boolean"==typeof n,"missing or invalid endian"),R(void 0!==a&&null!==a,"missing offset"),R(a+7<e.length,"Trying to write beyond buffer length"),D(t,1.7976931348623157e308,-1.7976931348623157e308));var i=e.length;a>=i||W.write(e,t,a,n,52,8)}function O(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function M(e,t,a){return"number"!=typeof e?a:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function F(e){return e=~~Math.ceil(+e),0>e?0:e}function I(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function B(e){return I(e)||n.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function S(e){return 16>e?"0"+e.toString(16):e.toString(16)}function N(e){for(var t=[],a=0;a<e.length;a++){var n=e.charCodeAt(a);if(127>=n)t.push(e.charCodeAt(a));else{var r=a;n>=55296&&57343>=n&&a++;for(var i=encodeURIComponent(e.slice(r,a+1)).substr(1).split("%"),l=0;l<i.length;l++)t.push(parseInt(i[l],16))}}return t}function V(e){for(var t=[],a=0;a<e.length;a++)t.push(255&e.charCodeAt(a));return t}function T(e){for(var t,a,n,r=[],i=0;i<e.length;i++)t=e.charCodeAt(i),a=t>>8,n=t%256,r.push(n),r.push(a);return r}function C(e){return H.toByteArray(e)}function q(e,t,a,n){for(var r=0;n>r&&!(r+a>=t.length||r>=e.length);r++)t[r+a]=e[r];return r}function U(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function L(e,t){R("number"==typeof e,"cannot write a non-number as a number"),R(e>=0,"specified a negative value for writing an unsigned value"),R(t>=e,"value is larger than maximum value for type"),R(Math.floor(e)===e,"value has a fractional component")}function P(e,t,a){R("number"==typeof e,"cannot write a non-number as a number"),R(t>=e,"value larger than maximum allowed value"),R(e>=a,"value smaller than minimum allowed value"),R(Math.floor(e)===e,"value has a fractional component")}function D(e,t,a){R("number"==typeof e,"cannot write a non-number as a number"),R(t>=e,"value larger than maximum allowed value"),R(e>=a,"value smaller than minimum allowed value")}function R(e,t){if(!e)throw new Error(t||"Failed assertion")}var H=e("base64-js"),W=e("ieee754");a.Buffer=n,a.SlowBuffer=n,a.INSPECT_MAX_BYTES=50,n.poolSize=8192,n._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(a){return!1}}(),n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},n.byteLength=function(e,t){var a;switch(e+="",t||"utf8"){case"hex":a=e.length/2;break;case"utf8":case"utf-8":a=N(e).length;break;case"ascii":case"binary":case"raw":a=e.length;break;case"base64":a=C(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=2*e.length;break;default:throw new Error("Unknown encoding")}return a},n.concat=function(e,t){if(R(I(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new n(0);if(1===e.length)return e[0];var a;if("number"!=typeof t)for(t=0,a=0;a<e.length;a++)t+=e[a].length;var r=new n(t),i=0;for(a=0;a<e.length;a++){var l=e[a];l.copy(r,i),i+=l.length}return r},n.prototype.write=function(e,t,a,n){if(isFinite(t))isFinite(a)||(n=a,a=void 0);else{var d=n;n=t,t=a,a=d}t=Number(t)||0;var c=this.length-t;a?(a=Number(a),a>c&&(a=c)):a=c,n=String(n||"utf8").toLowerCase();var p;switch(n){case"hex":p=r(this,e,t,a);break;case"utf8":case"utf-8":p=i(this,e,t,a);break;case"ascii":p=l(this,e,t,a);break;case"binary":p=o(this,e,t,a);break;case"base64":p=s(this,e,t,a);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":p=u(this,e,t,a);break;default:throw new Error("Unknown encoding")}return p},n.prototype.toString=function(e,t,a){var n=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,a=void 0!==a?Number(a):a=n.length,a===t)return"";var r;switch(e){case"hex":r=v(n,t,a);break;case"utf8":case"utf-8":r=c(n,t,a);break;case"ascii":r=p(n,t,a);break;case"binary":r=f(n,t,a);break;case"base64":r=d(n,t,a);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=h(n,t,a);break;default:throw new Error("Unknown encoding")}return r},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.copy=function(e,t,a,r){var i=this;
if(a||(a=0),r||0===r||(r=this.length),t||(t=0),r!==a&&0!==e.length&&0!==i.length){R(r>=a,"sourceEnd < sourceStart"),R(t>=0&&t<e.length,"targetStart out of bounds"),R(a>=0&&a<i.length,"sourceStart out of bounds"),R(r>=0&&r<=i.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length),e.length-t<r-a&&(r=e.length-t+a);var l=r-a;if(100>l||!n._useTypedArrays)for(var o=0;l>o;o++)e[o+t]=this[o+a];else e._set(this.subarray(a,a+l),t)}},n.prototype.slice=function(e,t){var a=this.length;if(e=M(e,a,0),t=M(t,a,a),n._useTypedArrays)return n._augment(this.subarray(e,t));for(var r=t-e,i=new n(r,void 0,!0),l=0;r>l;l++)i[l]=this[l+e];return i},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.readUInt8=function(e,t){return t||(R(void 0!==e&&null!==e,"missing offset"),R(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},n.prototype.readUInt16LE=function(e,t){return g(this,e,!0,t)},n.prototype.readUInt16BE=function(e,t){return g(this,e,!1,t)},n.prototype.readUInt32LE=function(e,t){return m(this,e,!0,t)},n.prototype.readUInt32BE=function(e,t){return m(this,e,!1,t)},n.prototype.readInt8=function(e,t){if(t||(R(void 0!==e&&null!==e,"missing offset"),R(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var a=128&this[e];return a?-1*(255-this[e]+1):this[e]}},n.prototype.readInt16LE=function(e,t){return y(this,e,!0,t)},n.prototype.readInt16BE=function(e,t){return y(this,e,!1,t)},n.prototype.readInt32LE=function(e,t){return b(this,e,!0,t)},n.prototype.readInt32BE=function(e,t){return b(this,e,!1,t)},n.prototype.readFloatLE=function(e,t){return x(this,e,!0,t)},n.prototype.readFloatBE=function(e,t){return x(this,e,!1,t)},n.prototype.readDoubleLE=function(e,t){return w(this,e,!0,t)},n.prototype.readDoubleBE=function(e,t){return w(this,e,!1,t)},n.prototype.writeUInt8=function(e,t,a){a||(R(void 0!==e&&null!==e,"missing value"),R(void 0!==t&&null!==t,"missing offset"),R(t<this.length,"trying to write beyond buffer length"),L(e,255)),t>=this.length||(this[t]=e)},n.prototype.writeUInt16LE=function(e,t,a){_(this,e,t,!0,a)},n.prototype.writeUInt16BE=function(e,t,a){_(this,e,t,!1,a)},n.prototype.writeUInt32LE=function(e,t,a){z(this,e,t,!0,a)},n.prototype.writeUInt32BE=function(e,t,a){z(this,e,t,!1,a)},n.prototype.writeInt8=function(e,t,a){a||(R(void 0!==e&&null!==e,"missing value"),R(void 0!==t&&null!==t,"missing offset"),R(t<this.length,"Trying to write beyond buffer length"),P(e,127,-128)),t>=this.length||(e>=0?this.writeUInt8(e,t,a):this.writeUInt8(255+e+1,t,a))},n.prototype.writeInt16LE=function(e,t,a){k(this,e,t,!0,a)},n.prototype.writeInt16BE=function(e,t,a){k(this,e,t,!1,a)},n.prototype.writeInt32LE=function(e,t,a){A(this,e,t,!0,a)},n.prototype.writeInt32BE=function(e,t,a){A(this,e,t,!1,a)},n.prototype.writeFloatLE=function(e,t,a){E(this,e,t,!0,a)},n.prototype.writeFloatBE=function(e,t,a){E(this,e,t,!1,a)},n.prototype.writeDoubleLE=function(e,t,a){j(this,e,t,!0,a)},n.prototype.writeDoubleBE=function(e,t,a){j(this,e,t,!1,a)},n.prototype.fill=function(e,t,a){if(e||(e=0),t||(t=0),a||(a=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),R("number"==typeof e&&!isNaN(e),"value is not a number"),R(a>=t,"end < start"),a!==t&&0!==this.length){R(t>=0&&t<this.length,"start out of bounds"),R(a>=0&&a<=this.length,"end out of bounds");for(var n=t;a>n;n++)this[n]=e}},n.prototype.inspect=function(){for(var e=[],t=this.length,n=0;t>n;n++)if(e[n]=S(this[n]),n===a.INSPECT_MAX_BYTES){e[n+1]="...";break}return"<Buffer "+e.join(" ")+">"},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n._useTypedArrays)return new n(this).buffer;for(var e=new Uint8Array(this.length),t=0,a=e.length;a>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var G=n.prototype;n._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=G.get,e.set=G.set,e.write=G.write,e.toString=G.toString,e.toLocaleString=G.toString,e.toJSON=G.toJSON,e.copy=G.copy,e.slice=G.slice,e.readUInt8=G.readUInt8,e.readUInt16LE=G.readUInt16LE,e.readUInt16BE=G.readUInt16BE,e.readUInt32LE=G.readUInt32LE,e.readUInt32BE=G.readUInt32BE,e.readInt8=G.readInt8,e.readInt16LE=G.readInt16LE,e.readInt16BE=G.readInt16BE,e.readInt32LE=G.readInt32LE,e.readInt32BE=G.readInt32BE,e.readFloatLE=G.readFloatLE,e.readFloatBE=G.readFloatBE,e.readDoubleLE=G.readDoubleLE,e.readDoubleBE=G.readDoubleBE,e.writeUInt8=G.writeUInt8,e.writeUInt16LE=G.writeUInt16LE,e.writeUInt16BE=G.writeUInt16BE,e.writeUInt32LE=G.writeUInt32LE,e.writeUInt32BE=G.writeUInt32BE,e.writeInt8=G.writeInt8,e.writeInt16LE=G.writeInt16LE,e.writeInt16BE=G.writeInt16BE,e.writeInt32LE=G.writeInt32LE,e.writeInt32BE=G.writeInt32BE,e.writeFloatLE=G.writeFloatLE,e.writeFloatBE=G.writeFloatBE,e.writeDoubleLE=G.writeDoubleLE,e.writeDoubleBE=G.writeDoubleBE,e.fill=G.fill,e.inspect=G.inspect,e.toArrayBuffer=G.toArrayBuffer,e}},{"base64-js":28,ieee754:29}],28:[function(e,t,a){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===l?62:t===o?63:s>t?-1:s+10>t?t-s+26+26:d+26>t?t-d:u+26>t?t-u+26:void 0}function a(e){function a(e){u[c++]=e}var n,r,l,o,s,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var d=e.length;s="="===e.charAt(d-2)?2:"="===e.charAt(d-1)?1:0,u=new i(3*e.length/4-s),l=s>0?e.length-4:e.length;var c=0;for(n=0,r=0;l>n;n+=4,r+=3)o=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),a((16711680&o)>>16),a((65280&o)>>8),a(255&o);return 2===s?(o=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,a(255&o)):1===s&&(o=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,a(o>>8&255),a(255&o)),u}function r(e){function t(e){return n.charAt(e)}function a(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,i,l,o=e.length%3,s="";for(r=0,l=e.length-o;l>r;r+=3)i=(e[r]<<16)+(e[r+1]<<8)+e[r+2],s+=a(i);switch(o){case 1:i=e[e.length-1],s+=t(i>>2),s+=t(i<<4&63),s+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],s+=t(i>>10),s+=t(i>>4&63),s+=t(i<<2&63),s+="="}return s}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,l="+".charCodeAt(0),o="/".charCodeAt(0),s="0".charCodeAt(0),u="a".charCodeAt(0),d="A".charCodeAt(0);e.toByteArray=a,e.fromByteArray=r}("undefined"==typeof a?this.base64js={}:a)},{}],29:[function(e,t,a){a.read=function(e,t,a,n,r){var i,l,o=8*r-n-1,s=(1<<o)-1,u=s>>1,d=-7,c=a?r-1:0,p=a?-1:1,f=e[t+c];for(c+=p,i=f&(1<<-d)-1,f>>=-d,d+=o;d>0;i=256*i+e[t+c],c+=p,d-=8);for(l=i&(1<<-d)-1,i>>=-d,d+=n;d>0;l=256*l+e[t+c],c+=p,d-=8);if(0===i)i=1-u;else{if(i===s)return l?0/0:1/0*(f?-1:1);l+=Math.pow(2,n),i-=u}return(f?-1:1)*l*Math.pow(2,i-n)},a.write=function(e,t,a,n,r,i){var l,o,s,u=8*i-r-1,d=(1<<u)-1,c=d>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,v=n?1:-1,h=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(o=isNaN(t)?1:0,l=d):(l=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-l))<1&&(l--,s*=2),t+=l+c>=1?p/s:p*Math.pow(2,1-c),t*s>=2&&(l++,s/=2),l+c>=d?(o=0,l=d):l+c>=1?(o=(t*s-1)*Math.pow(2,r),l+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,r),l=0));r>=8;e[a+f]=255&o,f+=v,o/=256,r-=8);for(l=l<<r|o,u+=r;u>0;e[a+f]=255&l,f+=v,l/=256,u-=8);e[a+f-v]|=128*h}},{}],30:[function(){d3plus.array.sort=function(e,t,a,n,r){function i(e,i){for(var l=0,o=0;o<t.length;o++){var s=t[o];if(r){var u=e.d3plus?r.id.nesting[e.d3plus.depth]:void 0,d=e.d3plus?e.d3plus.depth:void 0;e=s===r.color.value?d3plus.variable.color(r,e,u):s===r.text.value?d3plus.variable.text(r,e,d):d3plus.variable.value(r,e,s,u);var u=i.d3plus?r.id.nesting[i.d3plus.depth]:void 0,d=i.d3plus?i.d3plus.depth:void 0;i=s===r.color.value?d3plus.variable.color(r,i,u):s===r.text.value?d3plus.variable.text(r,i,d):d3plus.variable.value(r,i,s,u)}else e=e[s],i=i[s];if(e=e instanceof Array?e=e[0]:"string"==typeof e?e=e.toLowerCase():e,i=i instanceof Array?i=i[0]:"string"==typeof i?i=i.toLowerCase():i,l=n.indexOf(s)>=0?d3plus.color.sort(e,i):i>e?-1:1,0!==l||o===t.length-1)break}return"asc"===a?l:-l}if(!e||e.length<=1||!t)return e||[];if(!a)var a="asc";if(t instanceof Array||(t=[t]),n)n instanceof Array||(n=[n]);else var n=["color"];return 2===e.length?i(e[0],e[1]):e.sort(i)}},{}],31:[function(){d3plus.array.update=function(e,t){if(!(e instanceof Array))var e=[];return t instanceof Array?e=t:e.indexOf(t)>=0?e.splice(e.indexOf(t),1):e.push(t),e}},{}],32:[function(){d3plus.color.legible=function(e){var t;return t=d3.hsl(e),t.l>.45&&(t.s>.8&&(t.s=.8),t.l=.45),t.toString()}},{}],33:[function(){d3plus.color.lighter=function(e,t){if(void 0===t)var t=.5;var a=d3.hsl(e);return a.l+=(1-a.l)*t,a.toString()}},{}],34:[function(){d3plus.color.mix=function(e,t,a,n){if(!a)var a=1;if(!n)var n=1;e=d3.rgb(e),t=d3.rgb(t);var r=(a*e.r+n*t.r-a*n*t.r)/(a+n-a*n),i=(a*e.g+n*t.g-a*n*t.g)/(a+n-a*n),l=(a*e.b+n*t.b-a*n*t.b)/(a+n-a*n);return d3.rgb(r,i,l).toString()}},{}],35:[function(){d3plus.color.random=function(e){var t=e||Math.floor(20*Math.random());return d3plus.color.scale.default(t)}},{}],36:[function(){d3plus.color.scale={},d3plus.color.scale.default=d3.scale.ordinal().range(["#B35C1E","#C9853A","#E4BA79","#F5DD9E","#F3D261","#C4B346","#94B153","#254322","#4F6456","#759E80","#9ED3E3","#27366C","#7B91D3","#C6CBF7","#D59DC2","#E5B3BB","#E06363","#AF3500","#D74B03","#843012","#9A4400"])},{}],37:[function(){d3plus.color.sort=function(e,t){var a=d3.hsl(e),n=d3.hsl(t);return e=0===a.s?361:a.h,t=0===n.s?361:n.h,e===t?a.l-n.l:e-t}},{}],38:[function(){d3plus.color.text=function(e){var t=d3.rgb(e),a=t.r,n=t.g,r=t.b,i=(299*a+587*n+114*r)/1e3;return i>=128?"#444444":"#f7f7f7"}},{}],39:[function(){d3plus.color.validate=function(e){e+="",e=e.replace(/ /g,""),0===e.indexOf("rgb")&&(e=e.split("(")[1].split(")")[0].split(",").slice(0,3).join(",")),0===e.indexOf("hsl")&&(e=e.split(",")[2].split(")")[0]);var t=d3.rgb(e).toString(),a=["black","#000","#000000","0%","0,0,0"],n=a.indexOf(e)>=0;return"#000000"!==t||n}},{}],40:[function(){d3plus.data.color=function(e){e.dev.value&&d3plus.console.time("getting color data range");var t=[];if(e.data.pool.forEach(function(a){var n=parseFloat(d3plus.variable.value(e,a,e.color.value));"number"==typeof n&&!isNaN(n)&&t.indexOf(n)<0&&t.push(n)}),e.dev.value&&d3plus.console.timeEnd("getting color data range"),t.length>1){if(e.dev.value&&d3plus.console.time("calculating color scale"),t=d3.extent(t),t[0]<0&&t[1]>0){var a=e.color.range;3==a.length&&(t.push(t[1]),t[1]=0)}else if(t[1]>0&&t[0]>=0){var a=e.color.heatmap;t=d3plus.util.buckets(t,a.length)}else{var a=e.color.range.slice(0);t[0]<0?a.pop():a.shift()}e.color.scale=d3.scale.sqrt().domain(t).range(a).interpolate(d3.interpolateRgb),e.dev.value&&d3plus.console.timeEnd("calculating color scale")}else e.color.scale=null}},{}],41:[function(){d3plus.data.edges=function(e){if(e.dev.value){var t="analyzing edges list";d3plus.console.time(t)}var a=d3plus.visualization[e.type.value].requirements,n=a.indexOf("nodes")>=0&&!e.nodes.value;if(n){e.nodes.value=[];var r=[];e.nodes.changed=!0}e.edges.value.forEach(function(t){if("object"!=typeof t[e.edges.source]){var a={};a[e.id.value]=t[e.edges.source],t[e.edges.source]=a}if("object"!=typeof t[e.edges.target]){var a={};a[e.id.value]=t[e.edges.target],t[e.edges.target]=a}"keys"in e.data||(e.data.keys={}),e.id.value in e.data.keys||(e.data.keys[e.id.value]=typeof t[e.edges.source][e.id.value]),n&&(r.indexOf(t[e.edges.source][e.id.value])<0&&(r.push(t[e.edges.source][e.id.value]),e.nodes.value.push(t[e.edges.source])),r.indexOf(t[e.edges.target][e.id.value])<0&&(r.push(t[e.edges.target][e.id.value]),e.nodes.value.push(t[e.edges.target])))}),e.edges.value=e.edges.value.filter(function(t){var a=t[e.edges.source][e.id.value],n=t[e.edges.target][e.id.value];if(a===n){var r=e.format.locale.value.dev.sameEdge;return d3plus.console.warning(d3plus.string.format(r,'"'+a+'"'),"edges"),!1}return!0}),e.edges.linked=!0,e.dev.value&&d3plus.console.timeEnd(t)}},{}],42:[function(){d3plus.data.element=function(e){function t(e,t){[].forEach.call(t.attributes,function(t){if(/^data-/.test(t.name)){var a=t.name.substr(5).replace(/-(.)/g,function(e,t){return t.toUpperCase()});e[a]=t.value}}),n.forEach(function(a){null!==t.getAttribute(a)&&(e[a]=t.getAttribute(a))})}function a(e){e.style("position","absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important").html("")}var n=[e.color.value,e.icon.value,e.keywords.value,e.alt.value,"style"];e.text.value||e.self.text("text"),n=n.concat(e.id.nesting),e.data.element=e.data.value;var r=e.data.element.node().tagName.toLowerCase(),i=e.data.element.attr("type"),l=[];if("select"===r){var o=e.data.element.node().id;o&&e.self.container({id:o}),e.data.element.selectAll("option").each(function(a,n){var r={};if(r.text=this.innerHTML,t(r,this),l.push(r),this.selected)for(var n=e.id.nesting.length-1;n>=0;n--){var i=e.id.nesting[n];if(i in r){e.self.focus(r[i]);break}}})}else if("input"===r&&"radio"===i){var s=e.data.element.node().getAttribute("name");s&&e.self.container({id:s}),e.data.element.each(function(){var n={};t(n,this);var r=n[e.id.value]||this.id||!1;if(r&&isNaN(parseFloat(r))){var i=d3.select("label[for="+r+"]");i.empty()||(n.text=i.html(),i.call(a))}l.push(n),this.checked&&(e.focus.value=n[e.id.value])})}!e.focus.value&&l.length&&(e.data.element.node().selectedIndex=0,e.self.focus(l[0][e.id.value]));var u=d3.select("legend[for="+e.container.id+"]");u.empty()||(e.self.title(u.html()),u.call(a)),e.data.element.call(a);var d=e.container.value?e.container.value.node().tagName.toLowerCase():!1;return(e.container.value===!1||"body"===d)&&(e.container.value=d3.select(e.data.element.node().parentNode)),l}},{}],43:[function(){d3plus.data.fetch=function(e,t){if(!t&&"time"in e){var a=e.time.solo.value.length?"solo":"mute",t=[];if(e.time[a].value.length){var t=[];e.time[a].value.forEach(function(a){"function"==typeof a?e.data.time.forEach(function(e){a(e)&&t.push(e)}):t.push(a)}),"mute"===a&&(t=e.data.time.filter(function(e){return t.indexOf(e)<0}))}else t.push("all")}else t=["all"];var n=[e.type.value,e.id.value,e.depth.value].concat(e.data.filters).concat(t),r=e.data.solo.length?"solo":"mute",i=d3.keys(e.data.cache),l="viz"===e.shell?d3plus.visualization[e.type.value].filter:null;e.data[r].length&&e.data[r].forEach(function(t){var a=e[t][r].value.slice(0);a.unshift(t),n=n.concat(a)}),n=n.join("_");for(var o=0;o<i.length;o++){var s=i[o].split("_").slice(1).join("_");if(s===n){n=(new Date).getTime()+"_"+n,e.data.cache[n]=e.data.cache[i[o]],delete e.data.cache[i[o]];break}}if(e.data.cache[n]){e.dev.value&&d3plus.console.comment("data already cached");var u=e.data.cache[n];return"function"==typeof l&&(u=l(e,u)),u}if(e.data.value)if(1===t.length)var u=e.data.nested[t[0]][e.id.value];else{var d=[],u=[];if(t.forEach(function(t){e.data.nested[t]?u=u.concat(e.data.nested[t][e.id.value]):d.push(t)}),0===u.length&&d.length&&!e.internal_error){var c=e.format.locale.value.error.dataYear,p=e.format.locale.value.ui.and;d=d3plus.string.list(d,p),e.internal_error=d3plus.string.format(c,d)}else{var f=!1;if(e.axes.values.forEach(function(t){e[t].value===e.time.value&&"continuous"===e[t].scale.value&&(f=!0)}),!f){var v=e.id.nesting.slice(0,e.depth.value+1);u=d3plus.data.nest(e,u,v)}}}else var u=[];u=u?d3plus.data.filter(e,u):[];var i=d3.keys(e.data.cache);return 20===i.length&&(i.sort(),delete e.data.cache(i[0])),n=(new Date).getTime()+"_"+n,e.data.cache[n]=u,"function"==typeof l&&(u=l(e,u)),e.dev.value&&d3plus.console.comment("storing data in cache"),u}},{}],44:[function(){d3plus.data.filter=function(e,t){e.dev.value&&d3plus.console.time("filtering data");var a=d3.keys(e.data.keys||{});"attrs"in e&&(a=a.concat(d3.keys(e.attrs.keys||{}))),t=t.filter(function(t){return e.id.value in t}),e.data.filters.forEach(function(n){a.indexOf(e[n].value)>=0&&(t=t.filter(function(t){var a=d3plus.variable.value(e,t,e[n].value);return"size"===n?"number"==typeof a&&a>0:null!==a}))});var n=e.data.solo.length?"solo":"mute";return e.data[n].forEach(function(a){function r(t){var r=e[a][n].value,i=!1;return r.forEach(function(e){"function"==typeof e?i=e(t):e===t&&(i=!0)}),i}function i(t){var i=!1;return e[a].nesting?e[a].nesting.forEach(function(a){i||(i=r(d3plus.variable.value(e,t,a)))}):i=r(d3plus.variable.value(e,t,e[a].value)),"solo"===n?i:!i}t=t.filter(i),"id"===a&&("nodes"in e&&e.nodes.value&&(e.dev.value&&d3plus.console.log("Filtering Nodes"),e.nodes.restricted=e.nodes.value.filter(i)),"edges"in e&&e.edges.value&&(e.dev.value&&d3plus.console.log("Filtering Connections"),e.edges.restricted=e.edges.value.filter(function(t){var a=i(t[e.edges.source]),n=i(t[e.edges.target]);return a&&n})))}),e.dev.value&&d3plus.console.timeEnd("filtering data"),t}},{}],45:[function(){d3plus.data.format=function(e){if(e.dev.value){var t="disaggregating data by time and nesting";d3plus.console.time(t)}if(e.time&&e.time.value){e.data.time=d3plus.util.uniques(e.data.value,e.time.value);for(var a=0;a<e.data.time.length;a++)e.data.time[a]=parseInt(e.data.time[a]);e.data.time=e.data.time.filter(function(e){return e}),e.data.time.sort()}else e.data.time=[];e.data.nested={all:{}},e.id.nesting.forEach(function(t,a){var n=e.id.nesting.slice(0,a+1);e.data.nested.all[t]=d3plus.data.nest(e,e.data.value,n)}),e.data.time.forEach(function(t){e.data.nested[t]={};var a=e.data.value.filter(function(a){return parseInt(d3plus.variable.value(e,a,e.time.value))===t});e.id.nesting.forEach(function(n,r){var i=e.id.nesting.slice(0,r+1);e.data.nested[t][n]=d3plus.data.nest(e,a,i)})}),e.dev.value&&d3plus.console.timeEnd(t)}},{}],46:[function(){d3plus.data.keys=function(e,t){function a(n){if(n instanceof Array)n.forEach(function(e){a(e)});else if(d3plus.object.validate(n))for(var r in n)d3plus.object.validate(n[r])?a(n[r]):r in e[t].keys||!n[r]||(e[t].keys[r]=typeof n[r])}if(e.dev.value){var n=t+" key analysis";console.time(n)}if(e[t].keys={},d3plus.object.validate(e[t].value))for(var r in e[t].value)a(e[t].value[r]);else a(e[t].value);e.dev.value&&console.time(n)}},{}],47:[function(e){var t;t=e("static-kdtree"),d3plus.data.lof=function(e,a){var n,r,i,l,o,s,u,d,c,p,f,v;return null==a&&(a=10),v=t(e),u=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)d=e[t],r.push(v.knn(d,a+1).slice(1));return r}(),f=function(t,a){var n,r,i,l,o,s;for(n=e[t],r=e[a],l=0,t=o=0,s=n.length;s>=0?s>o:o>s;t=s>=0?++o:--o)i=n[t]-r[t],l+=i*i;return l},l=function(){var t,n,i;for(i=[],r=t=0,n=e.length;n>=0?n>t:t>n;r=n>=0?++t:--t)i.push(f(r,u[r][a-1]));return i}(),c=function(e,t){return Math.max(f(e,t),l[t])},o=function(e){var t,n,r,i,l;for(n=0,l=u[e],r=0,i=l.length;i>r;r++)t=l[r],n+=c(e,t);return a/n},s=function(){var t,a,n;for(n=[],r=t=0,a=e.length;a>=0?a>t:t>a;r=a>=0?++t:--t)n.push(o(r));return n}(),p=function(){var t,l,o,d,c,p;for(p=[],r=t=0,d=e.length;d>=0?d>t:t>d;r=d>=0?++t:--t){for(n=0,c=u[r],l=0,o=c.length;o>l;l++)i=c[l],n+=s[i];n/=a,p.push([r,n/s[r]])}return p}(),p.sort(function(e,t){return t[1]-e[1]}),p}},{"static-kdtree":4}],48:[function(){d3plus.data.mad=function(e){var t,a,n;return a=d3.median(e),t=d3.median(e.map(function(e){return Math.abs(e-a)})),n=e.map(function(e,n){return[n,Math.abs(e-a)/t]}),n.sort(function(e,t){return t[1]-e[1]}),n}},{}],49:[function(){d3plus.data.nest=function(e,t,a,n){var r=d3.nest(),i=[],l="viz"===e.shell?["active","temp","total"]:[],n=n instanceof Array?n:"viz"===e.shell?d3plus.visualization[e.type.value].requirements:[],o="viz"===e.shell?[e.time.value,e.icon.value]:[],s=function(){n&&n.length&&e.axes.values.forEach(function(t){var a=e[t].value;n.indexOf(t)>=0&&a&&"continuous"===e[t].scale.value&&(o.push(a),r.key(function(t){return d3plus.variable.value(e,t,a)}))})};a.forEach(function(t){r.key(function(a){return"function"==typeof t?t(a):d3plus.variable.value(e,a,t)}),s()}),a.length||(r.key(function(){return!0}),s());var u=a.length?a.length-1:0;r.rollup(function(t){if(1===t.length&&"d3plus"in t[0]){var a=t[0];return a.d3plus.depth=u,i.push(a),a}"size"in e&&e.size.value&&d3plus.util.uniques(t,e.size.value).length&&d3plus.array.sort(t,e.size.value,"desc",[],e);var a={d3plus:{depth:u}};l.forEach(function(n){var r=e[n].value||n;a.d3plus[r]=d3.sum(t,function(t){if(e[n].value){var a=d3plus.variable.value(e,t,e[n].value);"number"!=typeof a&&(a=a?1:0)}else if("total"===n)var a=1;else var a=0;return a})});for(var n in e.data.keys){var r=e.aggs.value[n]||"sum",o=typeof r,s=e.data.keys[n],d=e.id.nesting.indexOf(n)>=0,c="time"in e&&n===e.time.value;if(n in a.d3plus)a[n]=a.d3plus[n];else if("function"===o)a[n]=e.aggs.value[n](t);else if("number"!==s||"string"!==o||d||c){var p=1===t.length?t[0][n]:d3plus.util.uniques(t,n);if(p instanceof Array&&1===p.length&&"string"==typeof p[0]&&0===p[0].indexOf("[object Object]")){var f=[];t.forEach(function(e){f=f.concat(e[n])});var p=d3plus.util.uniques(f,n)}if(p)p instanceof Array||(p=[p]),p.length&&(a[n]=p.length<=t.length&&d&&e.id.nesting.indexOf(n)>u&&p.length>1?t:1===p.length?p[0]:p);else if(d){var v=e.id.nesting.indexOf(n)-1;v>=u&&(!("endPoint"in a.d3plus)||a.d3plus.endPoint>u)&&(a.d3plus.endPoint=u)}}else a[n]=d3[r](t,function(e){return n in e?e[n]:!1})}return i.push(a),a});var d=function(e){return e.values&&e.values.length?(e.children=e.values.map(function(e){return d(e)}),delete e.values,e):e.values?e.values:e},c=function(t,n,r){if(t.children){"number"==e.data.keys[a[n]]&&(t.key=parseFloat(t.key)),r[a[n]]=t.key,delete t.key;for(var i in r)t[i]=r[i];n++,t.children.forEach(function(e){c(e,n,r)})}};return r=r.entries(t).map(d).map(function(e){return c(e,0,{}),e}),i}},{}],50:[function(){d3plus.data.nodes=function(e){if(e.dev.value){var t="analyzing node positions";d3plus.console.time(t)}var a=e.nodes.value.filter(function(e){return"number"==typeof e.x&&"number"==typeof e.y}).length;if(a==e.nodes.value.length)e.nodes.positions=!0;else{var n=d3.layout.force().size([e.width.viz,e.height.viz]).nodes(e.nodes.value).links(e.edges.value),r=50,i=.01;n.start();for(var l=r;l>0&&(n.tick(),!(n.alpha()<i));--l);n.stop(),e.nodes.positions=!0}e.dev.value&&d3plus.console.timeEnd(t)}},{}],51:[function(){d3plus.data.reset=function(e,t){e.changed&&(e.changed=!1),"draw"===t&&(e.frozen=!1,e.update=!0,e.first=!1);for(var a in e)d3plus.object.validate(e[a])&&d3plus.data.reset(e[a],a)}},{}],52:[function(){d3plus.data.threshold=function(e,t,a){if(e.size.threshold===!1)var n=0;else if("number"==typeof e.size.threshold)var n=e.size.threshold;else if("number"==typeof d3plus.visualization[e.type.value].threshold)var n=d3plus.visualization[e.type.value].threshold;else if("function"==typeof d3plus.visualization[e.type.value].threshold)var n=d3plus.visualization[e.type.value].threshold(e);else var n=.02;if("number"==typeof n&&n>0){var r=[],i=0==e.depth.value?0:{},l=[],o={},s=d3.nest();a&&s.key(function(t){return d3plus.variable.value(e,t,a)}),s.rollup(function(t){var n=t.length;e.aggs[e.size.value]?"function"==typeof e.aggs[e.size.value]?n=e.aggs[e.size.value](t):"string"==typeof e.aggs[e.size.value]&&(n=d3[e.aggs[e.size.value]](t,function(t){return d3plus.variable.value(e,t,e.size.value)})):n=d3.sum(t,function(t){return d3plus.variable.value(e,t,e.size.value)});var r=a?d3plus.variable.value(e,t[0],a):"all";return o[r]=n,n}).entries(t);var u=t.filter(function(t){var s=d3plus.variable.value(e,t,e.id.value),u=d3plus.variable.value(e,t,e.size.value),d=a?d3plus.variable.value(e,t,a):"all";if(r.indexOf(s)<0&&u/o[d]>=n&&r.push(s),r.indexOf(s)<0){if(0==e.depth.value)u>i&&(i=u);else{var c=t[e.id.nesting[e.depth.value-1]];c in i||(i[c]=0),u>i[c]&&(i[c]=u)}return l.push(t),!1}return!0});if(l.length>1){l=d3plus.array.sort(l,e.size.value,"desc",[],e);var d=e.id.nesting.slice(0,e.depth.value),c=d3plus.data.nest(e,l,d).filter(function(t){return d3plus.variable.value(e,t,e.size.value)>0});c.forEach(function(t){var a=e.id.nesting[e.depth.value-1];if(e.id.nesting.forEach(function(a,n){if(e.depth.value==n){var r=t[e.id.nesting[n-1]];t[a]="string"==typeof r?"d3plus_other_"+r:"d3plus_other"}else n>e.depth.value&&delete t[a]}),e.color.value&&"string"===e.color.type&&(t[e.color.value]=0==e.depth.value?e.color.missing:d3plus.variable.color(e,t[a],a)),e.icon.value&&0!=e.depth.value&&(t[e.icon.value]=d3plus.variable.value(e,t[a],e.icon.value,a),t.d3plus.depth=e.depth.value+1),0==e.depth.value){var r=e.format.value(e.format.locale.value.ui.values);r+=" < "+e.format.value(i)}else{var o=d3plus.variable.text(e,t,e.depth.value-1)[0],r=o;r+=" < "+e.format.value(i[t[a]],e.size.value)}r+=" ("+e.format.value(100*n)+"%)",t.d3plus.threshold=i,a?(t.d3plus.merged=[],l.forEach(function(e){t[a]==e[a]&&t.d3plus.merged.push(e)})):t.d3plus.merged=l,e.text.value?t[e.text.value]=r:t.d3plus.text=r})}else c=l;return u.concat(c)}return t}},{}],53:[function(){d3plus.data.url=function(e,t,a){e.dev.value&&d3plus.console.time("loading "+t);var n=e[t].url;if(e[t].filetype.value)var r=e[t].filetype.value;else{var r=n.slice(n.length-5).split(".");r=r.length>1?r[1]:!1,r?("txt"===r&&(r="text"),e[t].filetype.accepted.indexOf(r)<0&&(r="json")):r="json"}if("dsv"===r)var i=d3.dsv(e[t].delimiter.value,"text/plain");else var i=d3[r];i(n,function(i,l){if(!i&&l){if("function"==typeof e[t].callback){var o=e[t].callback(l);if(o)if(d3plus.object.validate(o)&&t in o)for(var s in o)s in e&&(e[s].value=o[s]);else e[t].value=o}else e[t].value=l;"json"!==r&&e[t].value.forEach(function(e){for(var t in e)"false"===e[t].toLowerCase()?e[t]=!1:"true"===e[t].toLowerCase()?e[t]=!0:"null"===e[t].toLowerCase()?e[t]=null:"undefined"===e[t].toLowerCase()&&(e[t]=void 0)}),e[t].changed=!0,e[t].loaded=!0}else e.internal_error='Could not load data from: "'+n+'"';e.dev.value&&d3plus.console.time("loading "+t),a()})}},{}],54:[function(e){var t;t=e("../style/sheet.coffee"),d3plus.font.awesome=t("font-awesome")},{"../style/sheet.coffee":192}],55:[function(){d3plus.font.sizes=function(e,t,a){var n=a||d3plus.font.tester("svg").append("text"),t=t||{},r=[];e instanceof Array||(e=[e]);var i=n.selectAll("tspan.d3plus_testFontSize").data(e);return i.enter().append("tspan").attr("class","d3plus_testFontSize").text(String).style(t).attr("x",0).attr("y",0).each(function(e){r.push({height:this.offsetHeight,text:e,width:this.getComputedTextLength()})}),i.remove(),n||n.remove(),r}},{}],56:[function(){d3plus.font.tester=function(e){if(["div","svg"].indexOf(e)<0)var e="div";var t=d3.select("body").selectAll(e+".d3plus_tester").data(["d3plus_tester"]);return t.enter().append(e).attr("class","d3plus_tester").style("position","absolute").style("left","-9999px").style("top","-9999px").style("visibility","hidden").style("display","block"),t}},{}],57:[function(){d3plus.font.validate=function(e){function t(e){return i.append("span").style("font-family",e).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")}function a(e,t){var a=e.node().offsetWidth,n=t.node().offsetWidth;return a!==n}e instanceof Array||(e=e.split(","));var n=e.join(", "),r=d3plus.font.validate.complete;if(n in r)return r[n];var i=d3plus.font.tester("div"),l=t("monospace"),o=t("sans-serif");for(var s in e){var u=e[s].trim(),d=t(u+",monospace"),c=a(d,l);if(d.remove(),!c){var d=t(u+",sans-serif");c=a(d,o),d.remove()}if(c){c=u;break}}return c||(c="sans-serif"),l.remove(),o.remove(),r[n]=c,c},d3plus.font.validate.complete={}},{}],58:[function(){d3plus.form=function(){var e={shell:"form"};e.self=function(){function t(a,n){var n="number"!=typeof n?1===e.id.nesting.length?0:e.id.nesting.length-1:n,r=e.id.nesting[n];return n>0&&(!(r in a)||a[r]instanceof Array)?t(a,n-1):r}var a=e.data.value instanceof Array&&e.data.value.length>e.data.large;if(e.draw.timing=e.draw.first||a||d3plus.ie?0:e.timing.ui,e.data.value instanceof Array){if(e.dev.value&&d3plus.console.groupCollapsed('drawing "'+e.type.value+'"'),e.data.changed&&(e.data.cache={},d3plus.data.keys(e,"data"),d3plus.data.format(e)),e.data.app=d3plus.data.fetch(e),(e.data.changed||e.order.changed||e.order.sort.changed)&&d3plus.array.sort(e.data.app,e.order.value||e.text.value,e.order.sort.value,e.color.value,e),!e.focus.value&&e.data.app.length&&(e.focus.value=e.data.app[0][e.id.value],e.dev.value&&d3plus.console.log('"value" set to "'+e.focus+'"')),e.data.changed){"auto"===e.search.value?e.data.app.length>10?(e.search.enabled=!0,e.dev.value&&d3plus.console.log("Search enabled.")):(e.search.enabled=!1,e.dev.value&&d3plus.console.log("Search disabled.")):e.search.enabled=e.search.value;var n=e.data.element?e.data.element.node().tagName.toLowerCase():"";if(e.data.element&&"select"===n){var r=[];for(var i in e.data.nested.all)r=r.concat(e.data.nested.all[i]);options=e.data.element.selectAll("option").data(r,function(e){var a=t(e);return e&&a in e?e[a]:!1}),options.exit().remove(),options.enter().append("option"),options.each(function(a){var n=t(a),r=n===e.id.value?e.text.value||e.id.value:e.text.nesting!==!0&&n in e.text.nesting?e.text.nesting[n]:n;for(var i in a)"object"!=typeof a[i]&&(i===r&&d3.select(this).html(a[i]),["alt","value"].indexOf(i)>=0?d3.select(this).attr(i,a[i]):d3.select(this).attr("data-"+i,a[i]));this.selected=a[n]===e.focus.value?!0:!1})}}else if(e.focus.changed&&e.data.element){var n=e.data.element.node().tagName.toLowerCase();"select"===n&&e.data.element.selectAll("option").each(function(a){var n=t(a);this.selected=a[n]===e.focus.value?!0:!1})}if("auto"!==e.type.value){if(!e.container.ui){e.container.ui=e.container.value.selectAll("div#d3plus_"+e.type.value+"_"+e.container.id).data(["container"]);var l=e.data.element?e.data.element[0][0]:null;if(l)if(l.id)l="#"+l.id;else{var o=l.getAttribute(e.id.value)?e.id.value:"data-"+e.id.value;l=l.getAttribute(o)?"["+o+"="+l.getAttribute(o)+"]":null}e.container.ui.enter().insert("div",l).attr("id","d3plus_"+e.type.value+"_"+e.container.id).style("position","relative").style("overflow","visible").style("vertical-align","top")}e.container.ui.transition().duration(e.draw.timing).style("display",e.ui.display.value).style("margin",e.ui.margin+"px");var s=e.container.ui.selectAll("div.d3plus_title").data(e.title.value?[e.title.value]:[]);s.enter().insert("div","#d3plus_"+e.type.value+"_"+e.container.id).attr("class","d3plus_title"),s.style("display",e.ui.display.value).style("color",e.font.color).style("font-family",e.font.family.value).style("font-size",e.font.size+"px").style("font-weight",e.font.weight).style("padding",e.ui.padding+"px").style("border-color","transparent").style("border-style","solid").style("border-width",e.ui.border+"px").text(String).each(function(){e.margin.left=this.offsetWidth})}if(e.data.value.length){var u=e.format.locale.value.visualization[e.type.value];e.dev.value&&d3plus.console.time("drawing "+u),d3plus.input[e.type.value](e),e.dev.value&&d3plus.console.timeEnd("drawing "+u)}else!e.data.url||e.data.loaded&&!e.data.stream||d3plus.data.url(e,"data",e.self.draw);d3plus.data.reset(e),e.methodGroup=!1,e.dev.value&&d3plus.console.groupEnd()}};var t=["active","aggs","alt","color","container","depth","dev","data","draw","focus","format","height","history","hover","icon","id","keywords","margin","open","order","remove","search","select","selectAll","text","title","type","width"],a=["data","font","icon","timing","title","ui"];return d3plus.method(e,t,a),e.self}},{}],59:[function(){d3plus.input.auto=function(e){var t=e.data.value.length;1===t?e.self.type("button").draw():5>t?e.self.type("toggle").draw():e.self.type("drop").draw()}},{}],60:[function(){d3plus.input.button=function(e){var t=this.button,a=e.container.ui.selectAll("div.d3plus_node").data(e.data.app,function(t){return t[e.id.value]
});if(e.dev.value&&d3plus.console.time("enter"),a.enter().append("div").attr("class","d3plus_node").call(t.color,e).call(t.style,e).call(t.icons,e).call(t.mouseevents,e,t.color),e.dev.value&&d3plus.console.timeEnd("enter"),e.draw.update||e.draw.timing){e.dev.value&&d3plus.console.time("ordering"),a.order(),e.dev.value&&d3plus.console.timeEnd("ordering");var n=a}else var r=[e.focus.previous,e.focus.value,e.hover.previous,e.hover.value].filter(function(e){return e}),n=a.filter(function(t){return r.indexOf(t[e.id.value])>=0});e.dev.value&&d3plus.console.time("update"),e.draw.timing?n.transition().duration(e.draw.timing).call(t.color,e).call(t.style,e):n.call(t.color,e).call(t.style,e),n.call(t.icons,e).call(t.mouseevents,e,t.color),e.dev.value&&d3plus.console.timeEnd("update"),a.exit().remove()}},{}],61:[function(){d3plus.input.button.color=function(e,t){e.style("background-color",function(e){return t.focus.value!==e[t.id.value]?t.hover.value===e[t.id.value]?d3plus.color.lighter(t.ui.color.secondary.value,.25):t.ui.color.secondary.value:t.hover.value===e[t.id.value]?d3.rgb(t.ui.color.primary.value).darker(.15).toString():t.ui.color.primary.value}).style("color",function(e){var a=e[t.icon.value]&&t.data.app.length<t.data.large;if(t.focus.value===e[t.id.value])var n=1;else var n=.75;if(t.focus.value===e[t.id.value]&&e[t.color.value]&&!a)var r=d3plus.color.legible(e[t.color.value]);else if(t.focus.value===e[t.id.value])var r=d3plus.color.text(t.ui.color.primary.value);else var r=d3plus.color.text(t.ui.color.secondary.value);var r=d3.rgb(r);return"rgba("+r.r+","+r.g+","+r.b+","+n+")"}).style("border-color",t.ui.color.secondary.value)}},{}],62:[function(){d3plus.input.button.icons=function(e,t){var a="right"===t.font.align.value&&!d3plus.rtl||d3plus.rtl&&"right"===t.font.align.value;e.each(function(e){var n=["label"];e[t.icon.value]&&t.data.app.length<=t.data.large&&n.push("icon");var r=t.icon.button.value;e[t.id.value]===t.focus.value&&t.icon.select.value?(r=t.icon.select.value,n.push("selected")):r&&e.d3plus.icon!==!1&&n.push("selected");var i=0,l=d3.select(this).selectAll("div.d3plus_button_element").data(n,function(e){return e});l.enter().append("div").style("display",function(e){return"label"===e?"block":"absolute"}),l.order().attr("class",function(e){var t="";return"selected"===e&&0===r.indexOf("fa-")&&(t=" fa "+r),"d3plus_button_element d3plus_button_"+e+t}).html(function(a){if("label"===a){var n=t.text.value&&t.text.value in e&&!(e[t.text.value]instanceof Array)?t.text.value:t.id.value;return t.format.value(e[n])}return"selected"===a&&r.indexOf("fa-")<0?r:""}).style("background-image",function(a){return"icon"===a?"url('"+e[t.icon.value]+"')":"none"}).style("background-color",function(a){return"icon"===a&&"knockout"===e.style?e[t.color.value]||t.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(e){return"label"===e?t.font.align.value:"center"}).style("position",function(e){return"label"==e?"static":"absolute"}).style("width",function(e){return"label"===e?"auto":(i=t.height.value?t.height.value-2*t.ui.padding-2*t.ui.border:t.font.size+t.ui.padding+t.ui.border,i+"px")}).style("height",function(e){return"icon"===e?i+"px":"auto"}).style("margin-top",function(e){if("label"===e)return"0px";if(this.offsetHeight)var a=this.offsetHeight;else if("selected"===e)var a=t.font.size;else var a=i;return-a/2+"px"}).style("top",function(e){return"label"===e?"auto":"50%"}).style("left",function(e){return"icon"===e&&!a||"selected"===e&&a?t.ui.padding+"px":"auto"}).style("right",function(e){return"icon"===e&&a||"selected"===e&&!a?t.ui.padding+"px":"auto"}).style(d3plus.prefix()+"transition",function(e){return"selected"===e?t.draw.timing/1e3+"s":"none"}).style(d3plus.prefix()+"transform",function(e){var a="selected"===e?t.icon.select.rotate:"none";return"rotate("+a+"deg)"}).style("opacity",function(e){return"selected"===e?t.icon.select.opacity:1}),l.exit().remove();var o=d3.select(this).selectAll(".d3plus_button_label");if(i>0){i+=2*t.ui.padding;var s=t.ui.padding;if(3===n.length)var u=s+"px "+i+"px";else if(n.indexOf("icon")>=0&&!d3plus.rtl||n.indexOf("selected")>=0&&d3plus.rtl)var u=s+"px "+s+"px "+s+"px "+i+"px";else var u=s+"px "+i+"px "+s+"px "+s+"px";o.style("padding",u)}else o.style("padding",t.ui.padding+"px");if("number"==typeof t.width.value){var d=t.width.value;d-=parseFloat(o.style("padding-left"),10),d-=parseFloat(o.style("padding-right"),10),d-=2*t.ui.border,d+="px"}else var d="auto";o.style("width",d)})}},{}],63:[function(){d3plus.input.button.mouseevents=function(e,t,a){e.on(d3plus.evt.over,function(e){t.self.hover(e[t.id.value]),d3plus.ie||!t.draw.timing?d3.select(this).style("cursor","pointer").call(a,t):d3.select(this).style("cursor","pointer").transition().duration(t.timing.mouseevents).call(a,t)}).on(d3plus.evt.out,function(){t.self.hover(!1),d3plus.ie||!t.draw.timing?d3.select(this).style("cursor","auto").call(a,t):d3.select(this).style("cursor","auto").transition().duration(t.timing.mouseevents).call(a,t)}).on(d3plus.evt.click,function(e){e[t.id.value]&&t.self.focus(e[t.id.value]).draw()})}},{}],64:[function(){d3plus.input.button.style=function(e,t){e.style("position","relative").style("margin",t.ui.margin+"px").style("display",t.ui.display.value).style("border-style","solid").style("border-width",t.ui.border+"px").style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("letter-spacing",t.font.spacing+"px")}},{}],65:[function(){d3plus.input.drop=function(e){var t=this.drop;e.margin.top=0,e.margin.title=0,t.element(e),t.keyboard(e),t.window(e),t.width(e),t.button(e),t.selector(e),t.title(e),t.search(e),t.list(e),t.data(e),t.update(e)}},{}],66:[function(){d3plus.input.drop.active=function(e,t,a){var n=[],a=a||e.active.value;if(a instanceof Array)for(var r=0;r<a.length;r++)n.push(this(e,t,a[r]));else{var i=typeof a;n.push("number"===i?e.depth.value===a:"function"===i?a(t):t===a)}return n.indexOf(!0)>=0}},{}],67:[function(){d3plus.input.drop.arrow=function(e){e.dev.value&&d3plus.console.time("rotating arrow");var t="&#x276f;"===e.icon.drop.value?90:0;if(e.open.value!=e.open.flipped.value)var a=180+t;else var a=t;e.container.button.icon({select:{opacity:e.open.value?.5:1,rotate:a}}).draw(),e.dev.value&&d3plus.console.timeEnd("rotating arrow")}},{}],68:[function(){d3plus.input.drop.button=function(e){if("button"in e.container||(e.dev.value&&d3plus.console.time("creating main button"),e.container.button=d3plus.form().container(e.container.ui).type("button").ui({margin:0}),e.dev.value&&d3plus.console.timeEnd("creating main button")),e.focus.changed||e.data.changed||e.depth.changed){var t=e.depth.value,a=d3plus.util.copy(e.data.value.filter(function(a){for(var n=!1,r=0;r<e.id.nesting.length;r++){var i=e.id.nesting[r];if(n=i in a&&a[i]===e.focus.value){t=r;break}}return n})[0]);a||(a=e.container.button.data()[0]||e.data.app[0]),e.container.button.data([a]).id(e.id.nesting).depth(t)}e.container.button.draw({update:e.draw.update}).focus(e.focus.value).font(e.font).icon({button:e.icon.drop.value,select:e.icon.drop.value,value:e.icon.value}).text(e.text.value).timing({ui:e.draw.timing}).ui({color:e.ui.color,padding:e.ui.padding}).width(e.width.value).draw(),e.margin.top+=e.container.button.container(Object).ui.node().offsetHeight,e.container.button.container(Object).ui.on(d3plus.evt.click,function(){e.self.open(!e.open.value).draw()})}},{}],69:[function(){d3plus.input.drop.data=function(e){if(e.data.url&&!e.data.loaded){var a={};a[e.text.value||e.id.value]=e.format.value(e.format.locale.value.ui.loading),e.data.filtered=[a]}else if(e.open.value){var n=e.text.solo.value.length?e.text.solo.value[0].toLowerCase():"",r=d3plus.string.strip(n).split("_"),i=[e.id.value,e.text.value,e.alt.value,e.keywords.value];if(i=i.filter(function(e){return e}),r=r.filter(function(e){return""!=e}),e.text.solo.value.length&&""!==e.text.solo.value[0]){var l=[],o=[],u=[],d=[];e.id.nesting.forEach(function(t){d=d.concat(e.data.nested.all[t])}),d.forEach(function(a){var d=!1;i.forEach(function(i){if(!d&&i in a&&"string"==typeof a[i]){var c=a[i].toLowerCase();if([e.text.value,e.id.value].indexOf(i)>=0&&0==c.indexOf(n))l.push(a),d=!0;else if(c.indexOf(n)>=0)o.push(a),d=!0;else{var p=d3plus.string.strip(c).split("_");for(t in p){if(d)break;for(s in r)if(0===p[t].indexOf(r[s])){u.push(a),d=!0;break}}}}})}),e.data.filtered=d3.merge([l,o,u]),e.data.filtered.forEach(function(e,t){e.d3plus_order=t})}else e.data.filtered=e.data.app,e.id.nesting.length>1&&e.depth.value<e.id.nesting.length-1&&(e.data.filtered=e.data.filtered.filter(function(t){return"endPoint"in t.d3plus&&t.d3plus.endPoint===e.depth.value&&(t.d3plus.icon=!1),!0}));if(0===e.data.filtered.length){var c={},p=e.format.value(e.format.locale.value.ui.noResults);c[e.text.value||e.id.value]=d3plus.string.format(p,'"'+n+'"'),e.data.filtered=[c]}}else e.data.filtered=[]}},{}],70:[function(){d3plus.input.drop.element=function(e){e.data.element&&(e.data.element.on("focus."+e.container.id,function(){e.self.draw({update:!1}).hover(!0).draw()}),e.data.element.on("blur."+e.container.id,function(){var t=e.search.enabled?d3.event.relatedTarget!=e.container.select("input").node():!0;t&&e.self.draw({update:!1}).hover(!1).draw()}),e.data.element.on("change."+e.container.id,function(){e.self.focus(this.value).draw()}),e.data.element.on("keydown.cancel_"+e.container.id,function(){var e=d3.event.keyCode;9!=e&&d3.event.preventDefault()}))}},{}],71:[function(){d3plus.input.drop.height=function(e){var t=e.container.button.container().node().getBoundingClientRect();e.height.secondary=window.innerHeight-t.bottom-e.ui.margin-2*e.ui.padding-2*e.ui.border,e.height.secondary<3*t.height?(e.height.secondary=t.top-10,e.self.open({flipped:!0})):e.self.open({flipped:!1});e.height.secondary>e.height.max&&(e.height.secondary=e.height.max)}},{}],72:[function(){d3plus.input.drop.items=function(e){var t=this;if(e.open.value){e.dev.value&&d3plus.console.time("updating list items"),"items"in e.container||(e.container.items=d3plus.form().container(e.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1));var a=e.draw.timing?e.data.large:1,n=d3plus.util.copy(e.order),r=e.depth.value===e.id.nesting.length-1;n.value=e.text.solo.value.length&&""!==e.text.solo.value[0]?"d3plus_order":e.order.value,(e.focus.changed||!e.container.items.focus())&&e.container.items.focus(e.focus.value,function(a){var n=a!==e.focus.value;n&&e.active.value&&(n=t.active(e,a)),n&&e.self.focus(a);var r=e.data.filtered.filter(function(t){return t[e.id.value]===a})[0];if(e.depth.value<e.id.nesting.length-1&&e.id.nesting[e.depth.value+1]in r){var i=e.depth.value,l=e.id.solo.value;e.history.states.push(function(){e.self.depth(i).id({solo:l}).draw()}),e.self.depth(e.depth.value+1).id({solo:[a]}).draw()}else e.depth.changed?n&&e.self.draw():e.self.open(!1).draw()}),e.container.items.active(e.active.value).data({large:a,value:e.data.filtered}).draw({update:e.draw.update}).font(e.font.secondary).id(e.id.value).icon({button:r?!1:e.icon.next,select:r?e.icon.select:!1}).order(n).text(e.text.secondary.value||e.text.value).timing({ui:e.draw.timing}).ui({color:{primary:1===e.id.nesting.length?e.ui.color.primary.value:e.ui.color.secondary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding}).draw(),e.dev.value&&d3plus.console.timeEnd("updating list items")}}},{}],73:[function(){d3plus.input.drop.keyboard=function(e){d3.select(document).on("keydown."+e.container.id,function(){if(e.open.value||e.hover===!0){var t=d3.event.keyCode,a=e.container.list.select("div").selectAll("div.d3plus_node"),n=0;if(a.each("boolean"==typeof e.hover?function(t,a){t.value==e.focus&&(n=a)}:function(t,a){t.value==e.hover&&(n=a)}),[9].indexOf(t)>=0&&(!e.search.enabled||e.search.enabled&&!d3.event.shiftKey))e.self.draw({update:!1}).disable();else if([40].indexOf(t)>=0){if(e.open.value&&(n>=a.size()-1?n=0:n+=1),"boolean"!=typeof e.hover)var r=a.data()[n].value;else var r=e.focus;e.open.value?e.self.draw({update:!1}).hover(r).draw(60):e.self.draw({update:!1}).hover(r).enable()}else if([38].indexOf(t)>=0){if(e.open.value&&(0>=n?n=a.size()-1:n-=1),"boolean"!=typeof e.hover)var r=a.data()[n].value;else var r=e.focus;e.open.value?e.self.draw({update:!1}).hover(r).draw(60):e.self.draw({update:!1}).hover(r).enable()}else[13].indexOf(t)>=0?"boolean"!=typeof e.hover?e.self.value(e.hover).hover(!0).draw():e.self.hover(e.focus).toggle():[27].indexOf(t)>=0&&(e.open.value?e.self.hover(!0).disable():e.hover===!0&&e.self.hover(!1).draw())}})}},{}],74:[function(){d3plus.input.drop.list=function(e){e.dev.value&&d3plus.console.time("populating list"),e.container.list=e.container.selector.selectAll("div.d3plus_drop_list").data(["list"]),e.container.list.enter().append("div").attr("class","d3plus_drop_list").attr("id","d3plus_drop_list_"+e.container.id).style("overflow-y","auto").style("overflow-x","hidden"),e.dev.value&&d3plus.console.timeEnd("populating list")}},{}],75:[function(){d3plus.input.drop.scroll=function(e){if(e.open.value){e.dev.value&&d3plus.console.time("calculating height");var t=!1;if("none"==e.container.selector.style("display"))var t=!0;t&&e.container.selector.style("display","block");var a=e.search.enabled?e.container.search.node().offsetHeight:0,n=e.container.selector.style("height"),r=e.container.selector.property("scrollTop"),i=e.container.list.style("max-height"),l=e.container.list.property("scrollTop");e.container.selector.style("height","auto"),e.container.list.style("max-height","200000px"),e.container.listHeight=parseFloat(e.container.selector.style("height"),10),e.container.list.style("max-height",i).property("scrollTop",l),e.container.selector.style("height",n).property("scrollTop",r);var o=!1;if(e.container.listHeight>e.height.secondary&&(e.container.listHeight=e.height.secondary,o=!0),t&&e.container.selector.style("display","none"),e.dev.value&&d3plus.console.timeEnd("calculating height"),o){e.dev.value&&d3plus.console.time("calculating scroll position");var s=e.container.list.select("div").selectAll("div.d3plus_node"),u=s[0][0];s.each(function(t){t[e.id.value]==e.focus.value&&(u=this)});var t=!1;"none"===e.container.selector.style("display")&&(t=!0,e.container.selector.style("display","block"));var d=u.offsetTop,c=u.offsetHeight,p=e.container.list.property("scrollTop");t&&e.container.selector.style("display","none"),t||e.data.changed||e.depth.changed?e.container.listScroll=d:(e.container.listScroll=p,p>d?e.container.listScroll=d:d+c>p+e.height.secondary-a&&(e.container.listScroll=d-(e.height.secondary-c-a))),e.dev.value&&d3plus.console.timeEnd("calculating scroll position")}else e.container.listScroll=0}else e.container.listScroll=e.container.list.property("scrollTop"),e.container.listHeight=0}},{}],76:[function(){d3plus.input.drop.search=function(e){function t(t){t.style("padding",e.ui.padding+"px").style("display","block").style("background-color",e.ui.color.secondary.value)}function a(t){var a=e.width.secondary-4*e.ui.padding-2*e.ui.border;t.style("padding",e.ui.padding+"px").style("width",a+"px").style("border-style","solid").style("border-width","0px").style("font-family",e.font.secondary.family.value).style("font-size",e.font.secondary.size+"px").style("font-weight",e.font.secondary.weight).style("text-align",e.font.secondary.align).style("outline","none").style(d3plus.prefix()+"border-radius","0").attr("placeholder",e.format.value(e.format.locale.value.method.search))}e.dev.value&&d3plus.console.time("creating search");var n=this;e.container.search=e.container.selector.selectAll("div.d3plus_drop_search").data(e.search.enabled?["search"]:[]),e.draw.timing?(e.container.search.transition().duration(e.draw.timing).call(t),e.container.search.select("input").transition().duration(e.draw.timing).call(a)):(e.container.search.call(t),e.container.search.select("input").call(a)),e.container.search.enter().insert("div","#d3plus_drop_list_"+e.container.id).attr("class","d3plus_drop_search").attr("id","d3plus_drop_search_"+e.container.id).call(t).append("input").attr("id","d3plus_drop_input_"+e.container.id).style("-webkit-appearance","none").call(a),e.container.search.select("input").on("keyup."+e.container.id,function(){e.text.solo[0]!==this.value&&(e.self.text({solo:[this.value]}),n.data(e),n.items(e),n.update(e))}),e.container.search.exit().remove(),e.search.enabled&&(e.margin.title+=e.container.search.node().offsetHeight),e.dev.value&&d3plus.console.timeEnd("creating search")}},{}],77:[function(){d3plus.input.drop.selector=function(e){e.container.selector=e.container.ui.selectAll("div.d3plus_drop_selector").data(["selector"]),e.container.selector.enter().append("div").attr("class","d3plus_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden"),e.container.selector.style("padding",e.ui.border+"px")}},{}],78:[function(){d3plus.input.drop.title=function(e){function t(t){t.style("padding",e.ui.padding+"px").style("display","block").style("background-color",e.ui.color.secondary.value).style("font-family",e.font.secondary.family.value).style("font-size",e.font.secondary.size+"px").style("font-weight",e.font.secondary.weight).style("text-align",e.font.secondary.align).style("color",d3plus.color.text(e.ui.color.secondary.value))}function a(t){if(!t.empty()){var a=0===e.icon.back.value.indexOf("fa-")?" fa "+e.icon.back.value:"";a="d3plus_drop_back"+a;var n=0===e.icon.back.value.indexOf("fa-")?"":e.icon.back.value;t.style("position","absolute").attr("class",a).style("top",e.ui.padding+e.font.secondary.size/2/2.5+"px").html(n)}}function n(t){var a=i?e.focus.value:e.format.locale.value.ui.back;t.text(e.format.value(a)).style("padding","0px "+2*e.ui.padding+"px")}if(e.open.value){e.dev.value&&d3plus.console.time("creating title and back button");var r=1===e.id.solo.value.length&&e.depth.value>0,i=r,l=e.container.button.data(Object).app[0];i=!0;for(var o=0;o<e.id.nesting.length;o++){var s=e.id.nesting[o];if(s in l&&l[s]===e.focus.value){i=!1;break}}e.container.title=e.container.selector.selectAll("div.d3plus_drop_title").data(r?["title"]:[]),e.draw.timing?(e.container.title.transition().duration(e.draw.timing).call(t),e.container.title.select("div.d3plus_drop_title_text").transition().duration(e.draw.timing).call(n)):(e.container.title.call(t),e.container.title.select("div.d3plus_drop_title_text").call(n)),e.container.title.select("span.d3plus_drop_back").call(a);var u=e.container.title.enter().insert("div","#d3plus_drop_list_"+e.container.id).attr("class","d3plus_drop_title").attr("id","d3plus_drop_title_"+e.container.id).call(t);u.append("span").attr("id","d3plus_drop_back_"+e.container.id).attr("class","d3plus_drop_back").call(a),u.append("div").attr("id","d3plus_drop_title_text_"+e.container.id).attr("class","d3plus_drop_title_text").call(n),e.container.title.on(d3plus.evt.over,function(){var t=d3plus.color.lighter(e.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("background-color",t).style("color",d3plus.color.text(t))}).on(d3plus.evt.out,function(){var t=e.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("background-color",t).style("color",d3plus.color.text(t))}).on(d3plus.evt.click,function(){e.history.back()}),e.container.title.exit().remove(),r&&(e.margin.title+=e.container.title.node().offsetHeight),e.dev.value&&d3plus.console.timeEnd("creating title and back button")}}},{}],79:[function(){d3plus.input.drop.update=function(e){function t(t){t.style("left",function(){return"left"===e.font.align.value?e.margin.left+"px":"center"===e.font.align.value?-((e.width.secondary-e.width.value)/2)+"px":"auto"}).style("right",function(){return"right"===e.font.align.value?"0px":"auto"}).style("height",e.container.listHeight+"px").style("padding",e.ui.border+"px").style("background-color",e.ui.color.secondary.value).style("z-index",function(){return e.open.value?"9999":"-1"}).style("width",e.width.secondary-2*e.ui.border+"px").style("top",function(){return e.open.flipped.value?"auto":e.margin.top+"px"}).style("bottom",function(){return e.open.flipped.value?e.margin.top+"px":"auto"}).style("opacity",e.open.value?1:0)}function a(t){t.style("top",function(){return e.open.flipped.value?"auto":e.margin.top+"px"}).style("bottom",function(){return e.open.flipped.value?e.margin.top+"px":"auto"}).style("display",e.open.value?null:"none"),e.search.enabled&&e.open.value&&e.container.selector.select("div.d3plus_drop_search input").node().focus()}function n(e){return function(){var t=d3.interpolateNumber(this.scrollTop,e);return function(e){this.scrollTop=t(e)}}}var r=this;e.draw.timing?e.container.ui.transition().duration(e.draw.timing).each("start",function(){e.open.value&&d3.select(this).style("z-index",9999)}).style("margin",e.ui.margin+"px").each("end",function(){e.open.value||d3.select(this).style("z-index","auto")}):e.container.ui.style("margin",e.ui.margin+"px").style("z-index",function(){return e.open.value?9999:"auto"}),r.items(e),r.height(e),r.scroll(e),r.arrow(e),e.dev.value&&d3plus.console.time("drawing list");var i=e.open.value?e.height.secondary-e.margin.title:0;e.draw.timing?(e.container.selector.transition().duration(e.draw.timing).each("start",function(){d3.select(this).style("display",e.open.value?"block":null)}).call(t).each("end",function(){d3.select(this).transition().duration(e.draw.timing).call(a)}),e.container.list.transition().duration(e.draw.timing).style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",i+"px").tween("scroll",n(e.container.listScroll))):(e.container.selector.call(t).call(a),e.container.list.style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",i+"px").property("scrollTop",e.container.listScroll)),e.dev.value&&d3plus.console.timeEnd("drawing list")}},{}],80:[function(){d3plus.input.drop.width=function(e){function t(t){var n="primary"===t?"value":t,r="value"===n?e.icon.drop.value:e.icon.select.value||e.icon.drop.value,i="value"===n?e.text.value:e.text.secondary.value||e.text.value,l="value"===n?e.font:e.font.secondary;e.dev.value&&d3plus.console.time("calculating "+t+" width");var o=d3plus.form().container(d3plus.font.tester()).data({large:9999,value:a}).draw({update:!1}).font(l).icon({button:r,value:e.icon.value}).id(e.id.value).timing({ui:0}).text(i||e.id.value).type("button").ui({border:0,display:"inline-block",margin:0,padding:e.ui.padding}).width(!1).draw(),s=[];o.selectAll("div.d3plus_node").each(function(){s.push(this.offsetWidth)}).remove();var u={};u[n]=d3.max(s)+2*e.ui.border,e.self.width(u),e.dev.value&&d3plus.console.timeEnd("calculating "+t+" width")}var a=[];for(var n in e.data.nested.all){var r=e.data.nested.all[n],i=d3plus.object.validate(e.text.nesting)&&n in e.text.nesting?e.text.nesting[n][0]:n;[e.id.value,e.text.value].indexOf(i)<0&&(r=d3plus.util.copy(r),r.forEach(function(t){t[e.text.value||e.id.value]=t[i]})),a=a.concat(r)}"number"!=typeof e.width.secondary&&("number"==typeof e.width.value?e.self.width({secondary:e.width.value}):t("secondary")),"number"!=typeof e.width.value&&(e.text.value===e.text.secondary?e.self.width(e.width.secondary):t("primary"))}},{}],81:[function(){d3plus.input.drop.window=function(e,t){var a=this;if(void 0===t)var t=window;d3.select(t).on("click."+e.container.id,function(){var t=d3.event.target||d3.event.toElement,a=t.parentNode;a&&["d3plus_node","d3plus_drop_title"].indexOf(a.className)>=0&&(t=a.parentNode),t&&a&&!d3plus.util.child(e.container.ui,t)&&e.open.value&&e.self.open(!e.open.value).draw()});try{var n=window.parent.location.host===window.location.host}catch(r){var n=!1}n&&t.self!==window.top&&a.window(e,t.parent)}},{}],82:[function(){d3plus.input.toggle=function(e){"buttons"in e.container||(e.container.buttons=d3plus.form().container(e.container.ui).type("button"));var t=e.data.app.length,a=e.width.value?e.width.value/t:!1,n=e.container.ui.selectAll("div.d3plus_toggle").data(e.data.app,function(t){return t[e.id.value]});n.enter().append("div").attr("class","d3plus_toggle").style("display","inline-block").style("vertical-align","top"),n.order().each(function(t){"form"in t.d3plus||(t.d3plus.form=d3plus.form().container(d3.select(this)));var n=e.id.nesting.length>e.depth.value?e.id.nesting[e.depth.value+1]:e.id.value;t[n]instanceof Array?t.d3plus.form.container({id:e.container.id+"_"+t[e.id.value]}).data(t[n]).id(e.id.nesting.slice(1)).type("drop"):t.d3plus.form.data([t]).id(e.id.value).type("button"),t.d3plus.form.color(e.color).focus(e.focus.value,function(t){t!==e.focus.value&&e.self.focus(t).draw()}).icon({select:!1,value:e.icon.value}).font(e.font).format(e.format).order(e.order).text(e.text.value).ui({border:e.ui.border,color:e.ui.color,display:"inline-block",margin:0,padding:e.ui.padding}).width(a).draw()})}},{}],83:[function(e,t){var a;a=e("./wiki.coffee"),d3plus.console=function(e,t,a){a=a||"",d3plus.ie?console.log("[ D3plus ] "+t):"groupCollapsed"===e?window.chrome&&navigator.onLine?console[e]("%c%c "+t,"padding:3px 10px;line-height:25px;background-size:20px;background-position:top left;background-image:url('http://d3plus.org/assets/img/favicon.ico');","font-weight:200;"+a):console[e]("%cD3plus%c "+t,"line-height:25px;font-weight:800;color:#b35c1e;margin-left:0px;","font-weight:200;"+a):console[e]("%c"+t,a+"font-weight:200;")},d3plus.console.comment=function(e){this("log",e,"color:#aaa;")},d3plus.console.error=function(e,t){this("groupCollapsed","ERROR: "+e,"font-weight:800;color:#D74B03;"),this.stack(),this.wiki(t),this.groupEnd()},d3plus.console.group=function(e){this("group",e,"color:#888;")},d3plus.console.groupCollapsed=function(e){this("groupCollapsed",e,"color:#888;")},d3plus.console.groupEnd=function(){d3plus.ie||console.groupEnd()},d3plus.console.log=function(e){this("log",e,"color:#444444;")},d3plus.console.stack=function(){var e,t,a,n,r,i,l;d3plus.ie||(e=new Error,e.stack&&(i=e.stack.split("\n"),i=i.filter(function(e){return 0!==e.indexOf("Error")&&e.indexOf("d3plus.js:")<0&&e.indexOf("d3plus.min.js:")<0}),i.length&&(r=window.chrome?"at ":"@",l=i[0].split(r)[1],i=l.split(":"),3===i.length&&i.pop(),t=i.pop(),n=i.join(":").split("/"),n=n[n.length-1],a="line "+t+" of "+n+": "+l,this("log",a,"color:#D74B03;"))))},d3plus.console.time=function(e){d3plus.ie||console.time(e)},d3plus.console.timeEnd=function(e){d3plus.ie||console.timeEnd(e)},d3plus.console.warning=function(e,t){this("groupCollapsed",e,"color:#888;"),this.stack(),this.wiki(t),this.groupEnd()},d3plus.console.wiki=function(e){e&&(e in a&&(e=d3plus.repo+"wiki/"+a[e]),this("log","documentation: "+e,"color:#aaa;"))},t.exports=d3plus.console},{"./wiki.coffee":89}],84:[function(){d3plus.evt={},d3plus.touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?!0:!1,d3plus.touch?(d3plus.evt.click="click",d3plus.evt.down="touchstart",d3plus.evt.up="touchend",d3plus.evt.over="touchstart",d3plus.evt.out="touchend",d3plus.evt.move="touchmove"):(d3plus.evt.click="click",d3plus.evt.down="mousedown",d3plus.evt.up="mouseup",d3plus.ie?(d3plus.evt.over="mouseenter",d3plus.evt.out="mouseleave"):(d3plus.evt.over="mouseover",d3plus.evt.out="mouseout"),d3plus.evt.move="mousemove")},{}],85:[function(){d3plus.ie=!1},{}],86:[function(){d3plus.prefix=function(){if("-webkit-transform"in document.body.style)var e="-webkit-";else if("-moz-transform"in document.body.style)var e="-moz-";else if("-ms-transform"in document.body.style)var e="-ms-";else if("-o-transform"in document.body.style)var e="-o-";else var e="";return d3plus.prefix=function(){return e},e}},{}],87:[function(){d3plus.rtl="rtl"==d3.select("html").attr("dir")},{}],88:[function(){d3plus.scrollbar=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var a=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;a==n&&(n=t.clientWidth),document.body.removeChild(t);var r=a-n;return d3plus.scrollbar=function(){return r},r}},{}],89:[function(e,t){d3plus.wiki={active:"Segmenting-Data#active",aggs:"Custom-Aggregations",alt:"Alt-Text-Parameters",attrs:"Attribute-Data#axes",axes:"Axis-Parameters",background:"Background",color:"Color-Parameters",container:"Container-Element",coords:"Geography-Data",csv:"CSV-Export",data:"Data-Points",depth:"Visible-Depth",descs:"Value-Definitions",dev:"Verbose-Mode",draw:"Draw",edges:"Edges-List",error:"Custom-Error-Message",focus:"Focus-Element",font:"Font-Styles",footer:"Custom-Footer",format:"Value-Formatting",height:"Height",history:"User-History",hover:"Hover-Element",icon:"Icon-Parameters",id:"Unique-ID",keywords:"Keyword-Parameters",labels:"Data-Labels",legend:"Legend",links:"Link-Styles",margin:"Outer-Margins",messages:"Status-Messages",method:"Methods",nodes:"Node-Positions",open:"Open",order:"Data-Ordering",remove:"Remove",search:"Search-Box",select:"Selecting-Elements#select",selectAll:"Selecting-Elements#selectall",shape:"Data-Shapes",size:"Size-Parameters",temp:"Segmenting-Data#temp",text:"Text-Parameters",time:"Time-Parameters",timeline:"Timeline",timing:"Animation-Timing",title:"Custom-Titles",tooltip:"Tooltip-Parameters",total:"Segmenting-Data#total",type:"Output-Type",ui:"Custom-Interface",width:"Width",x:"Axis-Parameters",y:"Axis-Parameters",zoom:"Zooming"},t.exports=d3plus.wiki},{}],90:[function(e){var t,a,n,r,i,l,o,s,u,d,c;d=e("simplify-js"),d3plus.geom.largestRect=function(e,a){var r,l,o,u,p,f,v,h,g,m,y,b,x,w,_,z,k,A,E,j,O,M,F,I,B,S,N,V,T,C,q,U,L,P,D,R,H,W,G,Y,J,K,X,Z,$,Q,et,tt,at,nt,rt,it,lt,ot,st,ut,dt,ct,pt,ft,vt,ht,gt,mt,yt,bt,xt;if(w=[],h=.5,p=5,null==a&&(a={}),null==a.maxAspectRatio&&(a.maxAspectRatio=15),null==a.minWidth&&(a.minWidth=0),null==a.minHeight&&(a.minHeight=0),null==a.tolerance&&(a.tolerance=.02),null==a.nTries&&(a.nTries=20),null!=a.angle&&(a.angle instanceof Array?f=a.angle:"number"==typeof a.angle?f=[a.angle]:"string"!=typeof a.angle||isNaN(a.angle)||(f=[Number(a.angle)])),null==f&&(f=d3.range(-90,90+p,p)),null!=a.aspectRatio&&(a.aspectRatio instanceof Array?g=a.aspectRatio:"number"==typeof a.aspectRatio?g=[a.aspectRatio]:"string"!=typeof a.aspectRatio||isNaN(a.aspectRatio)||(g=[Number(a.aspectRatio)])),null!=a.origin&&a.origin instanceof Array&&(P=a.origin[0]instanceof Array?a.origin:[a.origin]),v=d3.geom.polygon(e).area(),pt=d3.extent(e,function(e){return e[0]}),T=pt[0],I=pt[1],ft=d3.extent(e,function(e){return e[1]}),C=ft[0],B=ft[1],Q=Math.min(I-T,B-C)*a.tolerance,$=function(){var t,a,n;for(n=[],t=0,a=e.length;a>t;t++)D=e[t],n.push({x:D[0],y:D[1]});return n}(),Q>0&&($=d($,Q),e=function(){var e,t,a;for(a=[],e=0,t=$.length;t>e;e++)D=$[e],a.push([D.x,D.y]);return a}()),a.vdebug&&w.push({type:"simplify",poly:e}),vt=d3.extent(e,function(e){return e[0]}),T=vt[0],I=vt[1],ht=d3.extent(e,function(e){return e[1]}),C=ht[0],B=ht[1],m=[[T,C],[I,C],[I,B],[T,B]],gt=[I-T,B-C],b=gt[0],y=gt[1],tt=Math.min(b,y)/50,null==P)for(P=[],x=d3.geom.polygon(e).centroid(),n(x,e)&&P.push(x);P.length<a.nTries;)X=Math.random()*b+T,Z=Math.random()*y+C,K=[X,Z],n(K,e)&&P.push(K);for(a.vdebug&&w.push({type:"origins",points:P}),E=0,M=null,rt=0,st=f.length;st>rt;rt++)for(o=f[rt],u=-o*Math.PI/180,a.vdebug&&w.push({type:"angle",angle:o}),z=it=0,ut=P.length;ut>it;z=++it)for(U=P[z],mt=t(e,U,u),H=mt[0],G=mt[1],yt=t(e,U,u+Math.PI/2),R=yt[0],W=yt[1],q=[[(H[0]+G[0])/2,(H[1]+G[1])/2],[(R[0]+W[0])/2,(R[1]+W[1])/2]],a.vdebug&&w.push({type:"modifOrigin",idx:z,p1W:H,p2W:G,p1H:R,p2H:W,modifOrigins:q}),lt=0,dt=q.length;dt>lt;lt++)if(L=q[lt],a.vdebug&&w.push({type:"origin",cx:L[0],cy:L[1]}),bt=t(e,L,u),H=bt[0],G=bt[1],V=Math.min(c(L,H),c(L,G)),F=2*Math.sqrt(V),xt=t(e,L,u+Math.PI/2),R=xt[0],W=xt[1],N=Math.min(c(L,R),c(L,W)),O=2*Math.sqrt(N),!(E>F*O))for(null!=g?l=g:(S=Math.max(1,a.minWidth/O,E/(O*O)),j=Math.min(a.maxAspectRatio,F/a.minHeight,F*F/E),l=d3.range(S,j+h,h)),ot=0,ct=l.length;ct>ot;ot++)if(r=l[ot],A=Math.max(a.minWidth,Math.sqrt(E*r)),J=Math.min(F,O*r),!(E>J*O))for(J-A>=tt&&a.vdebug&&w.push({type:"aRatio",aRatio:r});J-A>=tt;)et=(A+J)/2,_=et/r,at=L[0],nt=L[1],Y=[[at-et/2,nt-_/2],[at+et/2,nt-_/2],[at+et/2,nt+_/2],[at-et/2,nt+_/2]],Y=s(Y,u,L),i(Y,e)?(k=!0,E=et*_,M={cx:at,cy:nt,width:et,height:_,angle:o},A=et):(k=!1,J=et),a.vdebug&&w.push({type:"rectangle",cx:at,cy:nt,width:et,height:_,areaFraction:et*_/v,angle:o,insidePoly:k});
return[M,E,w]},c=function(e,t){var a,n;return a=t[0]-e[0],n=t[1]-e[1],a*a+n*n},l=function(e,t,a){var n,r,i,l,o;return o=t[1]<a[1]?[t,a]:[a,t],n=o[0],r=o[1],(e[1]===r[1]||e[1]===n[1])&&(e[1]+=Number.MIN_VALUE),e[1]>r[1]||e[1]<n[1]?!1:e[0]>n[0]&&e[0]>r[0]?!1:e[0]<n[0]&&e[0]<r[0]?!0:(i=(r[1]-n[1])/(r[0]-n[0]),l=(e[1]-n[1])/(e[0]-n[0]),l>i)},n=function(e,t){var a,n,r,i,o;for(i=-1,o=t.length,n=t[o-1],r=0;++i<o;)a=n,n=t[i],l(e,a,n)&&r++;return r%2!==0},r=function(e,t,a){var n,r,i;return n=1e-9,r=e[0],i=e[1],r<Math.min(t[0],a[0])-n||r>Math.max(t[0],a[0])+n||i<Math.min(t[1],a[1])-n||i>Math.max(t[1],a[1])+n?!1:!0},a=function(e,t,a,n){var r,i,l,o,s,u,d,c,p,f;return c=1e-9,o=e[0]-t[0],u=e[1]-t[1],s=a[0]-n[0],d=a[1]-n[1],l=o*d-u*s,Math.abs(l)<c?null:(r=e[0]*t[1]-e[1]*t[0],i=a[0]*n[1]-a[1]*n[0],p=(r*s-i*o)/l,f=(r*d-i*u)/l,[p,f])},u=function(e,t,n,i){var l;return l=a(e,t,n,i),null==l?!1:r(l,e,t)&&r(l,n,i)},i=function(e,t){var a,r,i,l,o,s,d,c;for(o=-1,d=e.length,c=t.length,i=e[d-1];++o<d;)for(a=i,i=e[o],s=-1,l=t[c-1];++s<c;)if(r=l,l=t[s],u(a,i,r,l))return!1;return n(e[0],t)},o=function(e,t,a){var n,r,i,l;return null==a&&(a=[0,0]),i=e[0]-a[0],l=e[1]-a[1],n=Math.cos(t),r=Math.sin(t),[n*i-r*l+a[0],r*i+n*l+a[1]]},s=function(e,t,a){var n,r,i,l;for(l=[],r=0,i=e.length;i>r;r++)n=e[r],l.push(o(n,t,a));return l},t=function(e,t,n){var i,l,o,s,u,d,p,f,v,h,g,m,y,b,x;for(u=1e-9,t=[t[0]+u*Math.cos(n),t[1]+u*Math.sin(n)],b=t[0],x=t[1],m=[b+Math.cos(n),x+Math.sin(n)],p=0,Math.abs(m[0]-b)<u&&(p=1),d=-1,h=e.length,l=e[h-1],f=Number.MAX_VALUE,v=Number.MAX_VALUE,o=null,s=null;++d<h;)i=l,l=e[d],g=a(t,m,i,l),null!=g&&r(g,i,l)&&(y=c(t,g),g[p]<t[p]?f>y&&(f=y,o=g):g[p]>t[p]&&v>y&&(v=y,s=g));return[o,s]}},{"simplify-js":3}],91:[function(e){var t,a,n;t=window.d3plus||{},window.d3plus=t,t.version="1.4.0 - Teal",t.repo="https://github.com/alexandersimoes/d3plus/",t.array={},t.color={},t.data={},t.draw={},t.font={},t.geom={},t.input={},t.locale={},t.method={},t.network={},t.number={},t.object={},t.shape={},t.string={},t.style={},t.tooltip={},t.ui={},t.util={},t.variable={},t.visualization={},t.zoom={},n=e("./style/sheet.coffee"),a=e("./general/console.coffee"),n("d3plus.css")&&a.warning("d3plus.css has been deprecated, you do not need to load this file.","https://github.com/alexandersimoes/d3plus/releases/tag/v1.4.0")},{"./general/console.coffee":83,"./style/sheet.coffee":192}],92:[function(){d3plus.locale.en={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",deprecated:"the {0} method has been removed, please update your code to use {1}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",methods:"{0} visualizations require setting the following methods: {1}."},lowercase:["a","and","at","but","in","of","or","the","to","with"],message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",order:"order",search:"search",shape:"shape",size:"size",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",loading:"loading...",more:"{0} more",moreInfo:"click for more info",noResults:"no results matching {0}.",primary:"primary connections",share:"share",total:"total",values:"values"},uppercase:["tv","ui"],visualization:{bubbles:"Bubbles",chart:"Chart",geo_map:"Geo Map",line:"Line Plot",network:"Network",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",tree_map:"Tree Map"}}},{}],93:[function(){d3plus.locale.mk={dev:{accepted:"{0}   a   {1},    a   : {2}.",deprecated:"{0}   ,           {1}.",noChange:"{0}   ,   .",noContainer:" e           {0}.",of:"",oldStyle:"    {0}     . {1} ().",sameEdge:"        .       - {0}.",set:"{0}  .",setLong:"{0}    {1}.",setContainer:"    div  .container()"},error:{accepted:"{0}     {1} {2} ,      : {3}.",connections:"     {0}.",data:" ",dataYear:"    {0}.",lib:"{0}      {1} .",libs:"{0}      : {1}.",method:"{0}     {1} .",methods:"{0}      : {1}."},lowercase:["a","","","","","","","",""],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:"ID",height:"",labels:"",legend:"",margin:"",messages:"  ",order:"",search:"",shape:"",size:"",style:"",temp:" ",text:"",time:"",timeline:"",total:" ",type:"",width:"",x:"x ",y:"y ",zoom:"",mode:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geo_map:" ",line:" ",network:"",rings:"",scatter:" ",stacked:" ",tree_map:"    "},ui:{and:"",back:"",collapse:"    ",error:"",expand:"    ",loading:"  ...",more:"{0} ",moreInfo:"   ",noResults:"     {0}.",primary:" ",share:"",total:"",values:"",including:""},message:{data:"  ",draw:"  ",initializing:" {0}",loading:"  ",tooltipReset:"  ",ui:"   "},uppercase:["TV","UI"]}},{}],94:[function(){d3plus.locale.pt={dev:{accepted:"{0} no  um valor aceito para {1}, por favor, use um dos seguintes procedimentos: {2}.",deprecated:"{0} mtodo foi removido, por favor atualize seu cdigo para utilizar {1}.",noChange:"{0} no foi atualizado porque ele no mudou.",noContainer:"No foi possvel encontrar um local na pgina correspondente a {0}.",of:"de",oldStyle:"propriedades de estilo para {0} j foram incorporados diretamente no. {1} ().",sameEdge:"bordas no podem vincular a si mesmos. removendo automaticamente borda de auto-referncia {0}.",set:"{0} foi definida.",setLong:"{0} foi definida para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} no  um reconhecido {1} para {2} visualizaes, por favor, use um dos seguintes procedimentos: {3}.",connections:"No h conexes disponveis para {0}.",data:"No h dados disponveis",dataYear:"No h dados disponveis para {0}.",lib:"A visualizao {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualizao {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualizao {0} exige a definio do mtodo {1}.",methods:"A visualizao {0} exige a definio dos mtodos {1}."},lowercase:["a","com","de","e","em","mas","ou","para","um"],method:{active:"segmentos ativos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"cone",id:"id",height:"altura",labels:"rtulos",legend:"legenda",margin:"margem",messages:"mensagens de status",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporrios",text:"texto",time:"tempo",timeline:"cronograma",total:"segmentos totais",type:"tipo",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo"},time:["ano","data","dia","hora","ms"],visualization:{bubbles:"Bolhas",chart:"Grfico",geo_map:"Mapa",line:"Grfico de Linha",network:"Rede",rings:"Anis",scatter:"Disperso",stacked:"Evoluo",tree_map:"Tree Map"},ui:{and:"e",back:"de volta",collapse:"Clique para fechar",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"clique para mais informaes",noResults:"nenhum resultado para {0}.",primary:"conexes primrias",share:"participao",total:"total",values:"valores",including:"incluindo"},message:{data:"analisando dados",draw:"desenhando visualizao",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:["TV"]}},{}],95:[function(){d3plus.locale.zh={dev:{accepted:"{0}{1}, :{2}",deprecated:"{0}, {1}",noChange:"{0}, ",noContainer:"{0}",of:"",oldStyle:"{0}{1}",sameEdge:"{0}",set:"{0}",setLong:"{0}{1}",setContainer:"()div"},error:{accepted:"{0}{2}{1}, {3}.",connections:"{0}",data:"",dataYear:"{0}",lib:"{0}{1}",libs:"{0}{1}",method:"{0}{1}",methods:"{0}{1}"},lowercase:["","","","","...","","","","","..."],method:{active:"",color:"",depth:"",dev:"",focus:"",icon:"",id:"",height:"",labels:"",legend:"",margin:"",messages:"",order:"",search:"",shape:"",size:"",style:"",temp:"",text:"",time:"",timeline:"",total:"",type:"",width:"",x:"X",y:"Y",zoom:"",mode:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geo_map:"",line:"",network:"",rings:"",scatter:"",stacked:"",tree_map:""},ui:{and:"",back:"",collapse:"",error:"",expand:"",loading:"...",more:"{0}",moreInfo:"",noResults:"{0}",primary:"",share:"",total:"",values:"",including:""},message:{data:"",draw:"",initializing:"{0}",loading:"",tooltipReset:"",ui:"UI"},uppercase:["","",""]}},{}],96:[function(){d3plus.method.axis=function(e){var e=e||"x";return{accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,deprecates:[e+"axis",e+"axis_val",e+"axis_var"],domain:!1,lines:[],mute:d3plus.method.filter(!0),range:!1,reset:["range"],scale:{accepted:["linear","log","continuous","share"],value:"linear",deprecates:["layout","unique_axis","yaxis_scale"]},solo:d3plus.method.filter(!0),stacked:{accepted:[Boolean],value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}},{}],97:[function(){d3plus.method.filter=function(e){var e=e||!1;return{accepted:[Array,Boolean,Function,Number,Object,String],global:e,process:Array,value:[]}}},{}],98:[function(){d3plus.method.function=function(e,t){return function(a,n){function r(e){if(d3plus.object.validate(e))if("family"in e)e.family.value=e.family.process(a.family);else for(var t in e)r(e[t])}var i=e in t&&d3plus.object.validate(t[e])&&"accepted"in t[e]?t[e].accepted:e in t?typeof t[e]:null;if("function"==typeof i&&(i=i(t)),null===i||i instanceof Array||(i=[i]),a===Object)return t[e];if(!arguments.length&&(null===i&&!("value"in t)||void 0!==i&&i.indexOf(void 0)<0))return"value"in t[e]?t[e].value:t[e];if("style"===e&&"object"==typeof a){var l=t.format.locale.value.dev.oldStyle;(t.dev.value||"dev"===e&&a)&&!t.methodGroup&&"wait"!==t.methodGroup&&(t.methodGroup=!0,d3plus.console.groupCollapsed("method behavior"));for(var o in a)d3plus.console.warning(d3plus.string.format(l,'"'+o+'"',o),o),t.self[o](a[o]);return t.self}return"font"===e&&d3plus.object.validate(a)&&"family"in a&&"string"==typeof a.family&&r(t),d3plus.method.object(t,e,t,e,a),"function"==typeof n&&(t[e].callback=n),t[e].chainable===!1?t[e].value:t.self}}},{}],99:[function(){d3plus.method.init=function(e,t,a){t.previous=!1,t.changed=!1,t.initialized=!1,t.getVars=function(){return e},"init"in t&&!("value"in t)&&(t.value=t.init(e),delete t.init),"process"in t&&(t.value=d3plus.method.process(t,t.value));for(var n in t)if("deprecates"===n){var r=t[n]instanceof Array?t[n]:[t[n]];r.forEach(function(t){e.self[t]=function(t,a){return function(){e.dev.value&&e.methodGroup&&(d3plus.console.groupEnd(),e.methodGroup=!1);var n=e.format.locale.value.dev.deprecated;return t="."+t+"()",d3plus.console.error(d3plus.string.format(n,t,"."+a+"()"),a),e.self}}(t,a)})}else"global"===n?a in e||(e[a]=[]):d3plus.object.validate(t[n])&&d3plus.method.init(e,t[n],n);t.initialized=!0}},{}],100:[function(){d3plus.method.object=function(e,t,a,n,r){if(["accepted","getVars"].indexOf(n)<0){var i=d3plus.object.validate(r),l=!(!i||"value"in r||d3.keys(r)[0]in a[n]);if(null===r||!i||l)l?d3plus.method.set(e,t,a[n],"value",r):d3plus.method.set(e,t,a,n,r);else if(i)for(d in r)d3plus.method.object(e,t,a[n],d,r[d])}}},{}],101:[function(){d3plus.method.process=function(e,t){return e.process===Array?d3plus.array.update(d3plus.util.copy(e.value),t):"object"==typeof e.process&&"string"==typeof t?e.process[t]:"function"==typeof e.process?e.process(t):t}},{}],102:[function(){d3plus.method.processData=function(e,t){if("string"==typeof e||d3plus.util.d3selection(e)){if(void 0===t)var t=this;var a=(t.getVars(),e.indexOf("/")>=0);return!a&&d3plus.util.d3selection(e)?e:a||d3.selectAll(e).empty()?(t.url=e,[]):d3.selectAll(e)}return e}},{}],103:[function(){d3plus.method.set=function(e,t,a,n,r){if("value"!==n&&n&&n!==t)var i=e.format.locale.value.dev.of,l='"'+n+'" '+i+" ."+t+"()";else var l="."+t+"()";if("value"===n&&"accepted"in a)var o=a.accepted;else if(d3plus.object.validate(a[n])&&"accepted"in a[n])var o=a[n].accepted;else var o=null;"function"==typeof o&&(o=o(e)),null===o||o instanceof Array||(o=[o]);var s=!0;if(o instanceof Array){var u=void 0===r?r:r.constructor;s=o.indexOf(r)>=0||o.indexOf(u)>=0}if(s===!1){if(void 0!==r){var d=e.format.locale.value.dev.accepted,c=[],p=JSON.stringify(r),f=e.format.locale.value.ui.and;"string"!=typeof r&&(p='"'+p+'"'),o.forEach(function(e){c.push("string"==typeof e?'"'+e+'"':"function"==typeof e?e.toString().split("()")[0].substring(9):e.toString())}),c=d3plus.string.list(c,f),d3plus.console.warning(d3plus.string.format(d,p,l,c),t)}}else{if(d3plus.object.validate(a[n])&&"value"in a[n]){var v=n;a=a[n],n="value"}if("value"===n&&"process"in a&&(r=d3plus.method.process(a,r)),(!(a[n]instanceof Array)&&a[n]===r||a[n]&&a[n]===r)&&void 0!==r){var d=e.format.locale.value.dev.noChange;e.dev.value&&d3plus.console.comment(d3plus.string.format(d,l))}else{if(a.changed=!0,"history"in e&&"draw"!==t){var h=d3plus.util.copy(a);h.method=t,e.history.chain.push(h)}if(a.previous=a[n],"id"in e&&"value"===n&&"nesting"in a)if("id"!==t){if("object"!=typeof a.nesting&&(a.nesting={}),d3plus.object.validate(r)){for(var g in r)"string"==typeof r[g]&&(r[g]=[r[g]]);a.nesting=d3plus.object.merge(a.nesting,r),e.id.value in a.nesting||(a.nesting[e.id.value]=r[d3.keys(r)[0]])}else a.nesting[e.id.value]=r instanceof Array?r:[r];a[n]=a.nesting[e.id.value][0]}else r instanceof Array?(a.nesting=r,"depth"in e&&e.depth.value<r.length?a[n]=r[e.depth.value]:(a[n]=r[0],"depth"in e&&(e.depth.value=0))):(a[n]=r,a.nesting=[r],"depth"in e&&(e.depth.value=0));else if("depth"===t){if(e.depth.value=r>=e.id.nesting.length?e.id.nesting.length-1:0>r?0:r,e.id.value=e.id.nesting[e.depth.value],"object"==typeof e.text.nesting){var m=e.text.nesting[e.id.value];m&&(e.text.nesting[e.id.value]="string"==typeof m?[m]:m,e.text.value=m instanceof Array?m[0]:m)}}else a[n]=d3plus.object.validate(a[n])&&d3plus.object.validate(r)?d3plus.object.merge(a[n],r):r;if("value"===n&&a.global){var y=a[n].length>0,b=v||n;b in e&&(y&&e.data[b].indexOf(t)<0||!y&&e.data[b].indexOf(t)>=0)&&(e.data[b]=d3plus.array.update(e.data[b],t))}if("value"===n&&a.dataFilter&&e.data&&e.data.filters.indexOf(t)<0&&e.data.filters.push(t),"value"===n&&a.reset){var x="string"==typeof a.reset?[a.reset]:a.reset;x.forEach(function(e){a[e]=!1})}if((e.dev.value||"dev"===n)&&a.changed&&void 0!==a[n]){var w=a[n]instanceof Array&&a[n].length>10,_=d3plus.util.d3selection(a[n]),z="function"==typeof a[n],k=w||_||z?null:"string"==typeof a[n]?a[n]:JSON.stringify(a[n]);if((e.dev.value||"dev"===n&&user)&&!e.methodGroup&&"wait"!==e.methodGroup&&(e.methodGroup=!0,d3plus.console.groupCollapsed("method behavior")),null!==k&&k.length<260){var d=e.format.locale.value.dev.setLong;d3plus.console.log(d3plus.string.format(d,l,'"'+k+'"'))}else{var d=e.format.locale.value.dev.set;d3plus.console.log(d3plus.string.format(d,l))}}}"value"===n&&a.callback&&!a.url&&a.callback(r)}}},{}],104:[function(){d3plus.method=function(e,t,a){var t=t||[],a=a||[],n=d3plus.style[d3plus.method.style.value];t.forEach(function(t){t in e||(e[t]={}),e[t]=d3plus.object.merge(d3plus.method[t],e[t]),a.indexOf(t)>=0&&(e[t]=d3plus.object.merge(n[t],e[t]),a.splice(a.indexOf(t),1)),d3plus.method.init(e,e[t],t),e.self[t]=d3plus.method.function(t,e)}),a.forEach(function(t){e[t]=d3plus.object.merge(e[t]||{},n[t]),d3plus.method.init(e,e[t],t),e.self[t]=d3plus.method.function(t,e)})}},{}],105:[function(){d3plus.method.active={accepted:[!1,Array,Function,Number,Object,String],deprecates:"active_var",mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),spotlight:{accepted:[Boolean],deprecates:"spotlight",value:!1},value:!1}},{}],106:[function(){d3plus.method.aggs={accepted:[Object],deprecated:"nesting_aggs",value:{}}},{}],107:[function(){d3plus.method.alt={accepted:[!1,Array,Function,Object,String],mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),value:"alt"}},{}],108:[function(){d3plus.method.attrs={accepted:[!1,Array,Object,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},process:d3plus.method.processData,value:!1}},{}],109:[function(){d3plus.method.axes={mirror:{accepted:[Boolean],deprecates:["mirror_axis","mirror_axes"],value:!1},values:["x","y"]}},{}],110:[function(){d3plus.method.color={accepted:[!1,Array,Function,Object,String],deprecates:"color_var",init:function(e){return"form"===e.shell?"color":!1},mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0)}},{}],111:[function(){d3plus.method.container={accepted:[Array,Object,String],element:!1,id:"default",process:function(e){if(e===!1){var t=this.getVars().shell;return"form"===t?d3.select("body"):e}return d3plus.util.d3selection(e)?e:d3.select(e instanceof Array?e[0][0]:e)},value:!1}},{}],112:[function(){d3plus.method.coords={accepted:[!1,Array,Function,Object,String],filetype:{accepted:["json"],value:"json"},mute:d3plus.method.filter(!1),process:d3plus.method.processData,solo:d3plus.method.filter(!1),value:!1}},{}],113:[function(){d3plus.method.csv={accepted:[void 0,Array,String],chainable:!1,data:[],process:function(e){var t=this.getVars();if(void 0===t.returned)return[];if(e instanceof Array)var a=e;else if("string"==typeof e)var a=[e];var n=[],r=[],i=t.title.value||"My D3plus App Data";if(i=d3plus.string.strip(i),!a){var a=[t.id.value];t.time.value&&a.push(t.time.value),t.size.value&&a.push(t.size.value),t.text.value&&a.push(t.text.value)}a.forEach(function(e){r.push(t.format.value(e))}),n.push(r),t.returned.nodes.forEach(function(e){var r=[];a.forEach(function(a){r.push(d3plus.variable.value(t,e,a))}),n.push(r)});var l="data:text/csv;charset=utf-8,";if(n.forEach(function(e,t){dataString=e.join(","),l+=t<n.length?dataString+"\n":dataString}),d3plus.ie){var o=new Blob([l],{type:"text/csv;charset=utf-8;"});navigator.msSaveBlob(o,i+".csv")}else{var s=encodeURI(l),u=document.createElement("a");u.setAttribute("href",s),u.setAttribute("download",i+".csv"),u.click()}return this.data=n,a},value:void 0}},{}],114:[function(){d3plus.method.data={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],mute:[],process:function(e){var t=this.getVars();return"default"===t.container.id&&e.length&&t.self.container({id:"default"+e.length}),d3plus.method.processData(e,this)},solo:[],value:!1}},{}],115:[function(){d3plus.method.depth={accepted:[Function,Number],value:0}},{}],116:[function(){d3plus.method.descs={accepted:[!1,Function,Object],value:!1}},{}],117:[function(){d3plus.method.dev={accepted:[Boolean],value:!1}},{}],118:[function(){d3plus.method.draw={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e){if(this.initialized===!1)return this.initialized=!0,e;var t=this.getVars(),a="history"in t?t.history.chain:[];if("data"in t&&t.data.value&&d3plus.util.d3selection(t.data.value)&&(t.data.value=d3plus.data.element(t)),void 0===e&&"function"==typeof this.value&&(e=this.value),t.container.value===!1){var n=t.format.locale.value.dev.setContainer;d3plus.console.warning(n,"container")}else if(t.container.value.empty()){var n=t.format.locale.value.dev.noContainer;d3plus.console.warning(d3plus.string.format(n,'"'+t.container.value+'"'),"container")}else t.dev.value&&(t.methodGroup&&(t.methodGroup="wait",d3plus.console.groupEnd()),d3plus.console.time("total draw time")),t.container.value.call(t.self);if("function"==typeof e&&a.length){var r={};a.forEach(function(e){var t=e.method;delete e.method,r[t]=e}),e(r),t.history.chain=[]}return e},update:!0,value:void 0}},{}],119:[function(){d3plus.method.edges={accepted:[!1,Array,Function,String],connections:function(e,t,a){var n=this;if(!n.value)return[];if(!t)var t="id";var r=n.restricted||n.value,i=[];if(!e)return r;var l=r.filter(function(r){var l=!1;return r[n.source][t]==e?(l=!0,a&&i.push(r[n.target])):r[n.target][t]==e&&(l=!0,a&&i.push(r[n.source])),l});return a?i:l},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},label:!1,process:d3plus.method.processData,size:!1,source:"source",target:"target",value:!1}},{}],120:[function(){d3plus.method.error={accepted:[Boolean,String],value:!1}},{}],121:[function(){d3plus.method.focus={accepted:[!1,Function,Number,String],deprecates:"highlight",process:function(e){var t=this.getVars();if(t.data.element){var a=t.data.element.node().tagName.toLowerCase(),n=t.data.element.attr("type");"select"===a?t.data.element.selectAll("option").each(function(a,n){a&&a[t.id.value]===e&&(t.data.element.node().selectedIndex=n)}):"input"===a&&"radio"===n&&t.data.element.each(function(a){this.checked=a&&a[t.id.value]===e?!0:!1})}return e},tooltip:{accepted:[Boolean],value:!0},value:!1}},{}],122:[function(){d3plus.method.footer={accepted:[!1,Number,String],link:!1,value:!1}},{}],123:[function(){d3plus.method.format={accepted:[Function,String],deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(d3plus.locale)},process:function(e){var t="en",a=d3plus.locale[t];return e!==t&&(a=d3plus.object.merge(a,d3plus.locale[e])),this.language=e,a},value:"en"},number:{accepted:[!1,Function],value:!1},process:function(e){if("string"==typeof e){var t=this.getVars();t.self.format({locale:e})}else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){if("number"==typeof e){var a=this.number.value||d3plus.number.format;return a(e,t)}if("string"==typeof e){var a=this.text.value||d3plus.string.title;return a(e,t)}return JSON.stringify(e)}}},{}],124:[function(){d3plus.method.height={accepted:[!1,Number],secondary:!1,value:!1}},{}],125:[function(){d3plus.method.history={accepted:[Boolean],back:function(){if(this.states.length>0){var e=this.states.pop();e()}},chain:[],states:[],value:!0}},{}],126:[function(){d3plus.method.hover={accepted:[!1,Number,String],value:!1}},{}],127:[function(){d3plus.method.icon={accepted:[!1,Array,Function,Object,String],deprecates:"icon_var",style:{accepted:[Object,String],deprecates:"icon_style",value:"default"},value:"icon"}},{}],128:[function(){d3plus.method.id={accepted:[Array,String],dataFilter:!0,deprecates:["id_var","nesting"],init:function(e){return"form"===e.shell?(this.nesting=["value"],"value"):(this.nesting=["id"],"id")},mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0)}},{}],129:[function(){d3plus.method.keywords={accepted:[!1,Array,Function,Object,String],mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),value:"keywords"}},{}],130:[function(){d3plus.method.labels={accepted:[Boolean],resize:{accepted:[Boolean],value:!0},value:!0}},{}],131:[function(){d3plus.method.legend={accepted:[Boolean],value:!0}},{}],132:[function(){d3plus.method.margin={accepted:[Number,Object,String],process:function(e){var t=this,a=["top","right","bottom","left"];if(void 0===e)var e=t.value;var n=e;if("string"==typeof e&&(e=e.split(" "),e.forEach(function(t,a){e[a]=parseFloat(t,10)}),e=1===e.length?e[0]:2===e.length?{top:e[0],right:e[1],bottom:e[0],left:e[1]}:3===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[1]}:4===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[3]}:0),"number"==typeof e)a.forEach(function(a){t[a]=e});else{for(var r in e){var i=a.indexOf(r);i>=0&&(a.splice(i,1),t[r]=e[r])}a.forEach(function(e){t[e]=0})}return n},value:0}},{}],133:[function(){d3plus.method.messages={accepted:[Boolean,String],value:!0}},{}],134:[function(){d3plus.method.nodes={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},process:d3plus.method.processData,value:!1}},{}],135:[function(){d3plus.method.open={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}},{}],136:[function(){d3plus.method.order={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],value:"asc",deprecates:["sort"]},value:!1}},{}],137:[function(){d3plus.method.remove={accepted:void 0,process:function(e){if(!this.initialized)return e;var t=this.getVars();t.container.value.remove()},value:void 0}},{}],138:[function(){d3plus.method.resize={accepted:[Boolean],value:!1}},{}],139:[function(){d3plus.method.search={accepted:["auto",Boolean],process:function(e){return"Boolean"==typeof e&&(this.enabled=e),e},value:"auto"}},{}],140:[function(){d3plus.method.select={accepted:[String],chainable:!1,process:function(e){var t=this.getVars();return t.container.value&&e?t.container.value.select(e):e},value:void 0}},{}],141:[function(){d3plus.method.selectAll={accepted:[String],chainable:!1,process:function(e){var t=this.getVars();return t.container.value&&e?t.container.value.selectAll(e):e},value:void 0}},{}],142:[function(){d3plus.method.shape={accepted:function(e){return"textwrap"===e.shell?["circle","square"]:["circle","donut","line","square","area","coordinates"]},value:!1}},{}],143:[function(){d3plus.method.size={accepted:function(e){return"textwrap"===e.shell?[Array,!1]:[Array,Boolean,Function,Object,String]},dataFilter:!0,deprecates:["value","value_var"],mute:d3plus.method.filter(!0),scale:{accepted:[Function],deprecates:"size_scale",value:d3.scale.sqrt()},solo:d3plus.method.filter(!0),threshold:!0,value:!1}},{}],144:[function(){d3plus.method.style={accepted:function(){return d3.keys(d3plus.style).filter(function(e){return"object"==typeof d3plus.style[e]})},value:"default"}},{}],145:[function(){d3plus.method.temp={accepted:[!1,Array,Function,Object,String],deprecates:["else_var","else"],mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),value:!1}},{}],146:[function(){d3plus.method.text={accepted:[Array,Boolean,Function,Object,String],deprecates:["name_array","text_var"],html:{accepted:[Boolean],value:!1},init:function(e){if("textwrap"===e.shell){var t=this.split;this.break=new RegExp("[^\\s\\"+t.join("\\")+"]+\\"+t.join("?\\")+"?","g")}return!1},nesting:!0,mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),secondary:{accepted:[Array,Boolean,Function,Object,String],nesting:!0,value:!1},split:["-","/",";",":","&"]}},{}],147:[function(){d3plus.method.time={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,deprecates:["year","year_var"],fixed:{accepted:[Boolean],deprecates:["static_axis","static_axes"],value:!0},mute:d3plus.method.filter(!1),solo:d3plus.method.filter(!1),value:!1}},{}],148:[function(){d3plus.method.timeline={accepted:[Boolean],value:!0}},{}],149:[function(){d3plus.method.title={accepted:[!1,Function,String],link:!1,sub:{accepted:[!1,String],deprecates:"sub_title",link:!1,value:!1},total:{accepted:[Boolean,Object],deprecates:"total_bar",link:!1,value:!1},process:function(e){var t=this.getVars();if(0===t.container.id.indexOf("default")&&e){var a=d3plus.string.strip(e).toLowerCase();t.self.container({id:a})}return e},value:!1}},{}],150:[function(){d3plus.method.tooltip={accepted:[!1,Array,Function,Object,String],deprecates:"tooltip_info",html:{accepted:[!1,Function,String],deprecates:"click_function",value:!1},value:!1}},{}],151:[function(){d3plus.method.total={accepted:[!1,Array,Function,Object,String],deprecates:["total_var"],mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),value:!1}},{}],152:[function(){d3plus.method.type={accepted:function(e){var t=e.shell;return"viz"===t?d3.keys(d3plus.visualization):"form"===t?d3.keys(d3plus.input):null},init:function(e){var t=e.shell;return"viz"===t?"tree_map":"form"===t?"auto":void 0},mode:{accepted:["squarify","slice","dice","slice-dice"],value:"squarify"}}},{}],153:[function(){d3plus.method.ui={accepted:[Array,Boolean],value:!1}},{}],154:[function(){d3plus.method.width={accepted:[!1,Number],secondary:!1,value:!1}},{}],155:[function(){d3plus.method.x=d3plus.method.axis("x")},{}],156:[function(){d3plus.method.y=d3plus.method.axis("y")},{}],157:[function(){d3plus.method.zoom={accepted:[Boolean],behavior:d3.behavior.zoom().scaleExtent([1,1]),click:{accepted:[Boolean],value:!0},direction:function(e){var t=this.getVars(),a=t.id.nesting.length-1,n=t.depth.value,r=d3plus.visualization[t.type.value].nesting===!1;return r?0:e.d3plus.merged||a>n&&(!e||t.id.nesting[t.depth.value+1]in e)?1:n!==a&&(!e||t.id.nesting[t.depth.value+1]in e)||!t.small&&t.tooltip.html.value?0:-1},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],deprecates:"scroll_zoom",value:!0},touchEvent:function(){var e=this.getVars(),t=e.zoom.scale>e.zoom.behavior.scaleExtent()[0],a=d3plus.visualization[e.type.value].zoom&&e.zoom.value&&e.zoom.scroll.value,n=d3.event.touches.length>1&&a;n||t||d3.event.stopPropagation()},value:!0}},{}],158:[function(){d3plus.network.normalize=function(e,t,a){var n,r,i,l,o,s,u,d,c,p,f,v,h,g,m,y,b,x,w,_,z,k,A,E,j,O,M,F,I;if(z=a.target,l=a.directed,o=a.distance,x=a.nodeid,_=a.startpoint,d=a.endpoint,n=a.K,null==n&&(n=1),null==x?x=function(e){return e}:"string"==typeof x&&(x=function(e){return function(t){return t[e]}}(x)),null!=t&&"object"==typeof t&&(t=x(t)),null!=z&&"object"==typeof z&&(z=x(z)),null==_?_=function(e){return e.source}:"string"==typeof _&&(_=function(e){return function(t){return t[e]}}(_)),null==d?d=function(e){return e.target}:"string"==typeof d&&(d=function(e){return function(t){return t[e]}}(d)),null==o)o=function(){return 1
};else if("number"==typeof o)o=function(e){return function(){return e}}(o);else if("string"==typeof o)o=function(e){return function(t){return t[e]}}(o);else if(o instanceof Array){for(u={},p=k=0,j=e.length;j>k;p=++k)s=e[p],r=x(_(s)),i=x(d(s)),u[r+"_"+i]=o[p];o=function(e){return r=x(_(e)),i=x(d(e)),u[r+"_"+i]}}for(w={},A=0,O=e.length;O>A;A++){for(s=e[A],y=_(s),b=d(s),h=x(y),g=x(b),F=[y,b],E=0,M=F.length;M>E;E++)m=F[E],f=x(m),f in w||(w[f]={node:m,outedges:[]});w[h].outedges.push(s),l||w[g].outedges.push(s)}return c=null,0===e.length?c="The length of edges is 0":0>n?c="K can not have negative value":null==o(e[0])?c="Check the distance function/attribute":null==_(e[0])?c="Check the startpoint function/attribute":null==d(e[0])?c="Check the endpoint function/attribute":(v=x(_(e[0])),null==v||"string"!=(I=typeof v)&&"number"!==I?c="Check the nodeid function/attribute":t in w?null==z||z in w||(c="The target is not in the graph"):c="The source is not in the graph"),null!=c?(d3plus.console.error(c),null):[e,t,{target:z,directed:l,distance:o,nodeid:x,startpoint:_,endpoint:d,K:n,nodes:w}]}},{}],159:[function(e){var t;t=e("heap"),d3plus.network.shortestPath=function(e,a,n){var r,i,l,o,s,u,d,c,p,f,v,h,g,m,y,b,x,w,_,z,k,A,E,j,O,M,F,I,B;if((null==n.nodes||"object"!=typeof n.nodes)&&(F=d3plus.network.normalize(e,a,n),e=F[0],a=F[1],n=F[2],null===n))return null;z=n.target,s=n.directed,u=n.distance,m=n.nodeid,_=n.startpoint,c=n.endpoint,r=n.K,y=n.nodes;for(v in y)g=y[v],g.count=0;for(f=new t(function(e,t){return e.distance-t.distance}),A={},null==z&&(A[a]=!0),f.push({edge:null,target:a,distance:0}),h=0,w=[];!f.empty()&&(h=Math.max(h,f.size()),b=f.pop(),k=b.target,y[k].count++,null==z?w.push(b):k===z&&w.push(b),w.length!==r);)if(y[k].count<=r)for(I=y[k].outedges,E=0,O=I.length;O>E;E++){if(d=I[E],i=m(_(d)),o=m(c(d)),s||o!==k||(B=[o,i],i=B[0],o=B[1]),null==z){if(A[o])continue;A[o]=!0}l=b.distance+u(d),f.push({edge:d,previous:b,target:o,distance:l})}for(p=function(t){for(e=[];null!=t.edge;)e.push(t.edge),t=t.previous;return e.reverse()},j=0,M=w.length;M>j;j++)x=w[j],null!=z&&(delete x.target,x.edges=p(x)),delete x.edge,delete x.previous;return w}},{heap:1}],160:[function(){d3plus.network.subgraph=function(e,t,a){var n,r,i,l,o,s,u,d,c,p,f,v;return null!=a.nodes&&"object"==typeof a.nodes||(v=d3plus.network.normalize(e,t,a),e=v[0],t=v[1],a=v[2],null!==a)?(i=a.directed,l=a.distance,d=a.nodeid,p=a.startpoint,s=a.endpoint,n=a.K,c=a.nodes,f={},f[t]=!0,r=function(e,t){var a,o,u,v,h,g,m,y,b;for(m=c[e].outedges,b=[],h=0,g=m.length;g>h;h++)u=m[h],a=d(p(u)),o=d(s(u)),i||o!==e||(y=[o,a],a=y[0],o=y[1]),o in f?b.push(void 0):(v=t+l(u),n>=v?(f[o]=!0,b.push(r(o,v))):b.push(void 0));return b},r(t,0),{nodes:function(){var e;e=[];for(u in f)e.push(c[u].node);return e}(),edges:function(){var t,a,n;for(n=[],t=0,a=e.length;a>t;t++)o=e[t],d(p(o))in f&&d(s(o))in f&&n.push(o);return n}()}):null}},{}],161:[function(){d3plus.number.format=function(e,t,a){if(!a&&"getVars"in this)var a=this.getVars();if(a&&t&&(t===a.x.value&&"log"===a.x.scale.value||t===a.y.value&&"log"===a.y.scale.value)){var n="",r=function(e){return(e+"").split("").map(function(e){return n[e]}).join("")};return"10"+r(Math.round(Math.log(e)/Math.LN10))}if("locale"in this)var i=this.locale.value,l=i.time;else var i=d3plus.locale.en,l=i.time;if(a&&"string"==typeof a.time.value&&l.push(a.time.value),t&&l.indexOf(t.toLowerCase())>=0)return e;if(10>e&&e>-10)return d3.round(e,2);if(e.toString().split(".")[0].length>4){var o=d3.formatPrefix(e).symbol;return o=o.replace("G","B"),e=d3.formatPrefix(e).scale(e),e=parseFloat(d3.format(".3g")(e)),e+o}return"share"==t?d3.format(".2f")(e):d3.format(",f")(e)}},{}],162:[function(){d3plus.object.merge=function(e,t){function a(e,t){for(var n in e)"undefined"!=typeof e[n]&&(d3plus.object.validate(e[n])?("object"!=typeof t[n]&&(t[n]={}),a(e[n],t[n])):t[n]=!d3plus.util.d3selection(e[n])&&e[n]instanceof Array?e[n].slice(0):e[n])}var n={};return e&&a(e,n),t&&a(t,n),n}},{}],163:[function(){d3plus.object.validate=function(e){return null!==e&&"object"==typeof e&&!(e instanceof Array)}},{}],164:[function(){d3plus.string.format=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.unkeyed_index=0,t.replace(/\{(\w*)\}/g,function(a,n){if(""===n&&(n=t.unkeyed_index,t.unkeyed_index++),n==+n)return"undefined"!==e[n]?e[n]:a;for(var r=0;r<e.length;r++)if("object"==typeof e[r]&&"undefined"!=typeof e[r][n])return e[r][n];return a}.bind(t))}},{}],165:[function(){d3plus.string.list=function(e,t,a,n){if(!(e instanceof Array))return e;if(e=e.slice(0),!t)var t=d3plus.locale.en.ui.and;if(!n)var n=d3plus.locale.en.ui.more;if(2===e.length)return e.join(" "+t+" ");if(a&&e.length>a){var r=e.length-a+1;e=e.slice(0,a-1),e[a-1]=d3plus.string.format(n,r)}return e.length>1&&(e[e.length-1]=t+" "+e[e.length-1]),e.join(", ")}},{}],166:[function(){d3plus.string.strip=function(e){var t=["!","@","#","$","%","^","&","*","(",")","[","]","{","}",".",",","/","\\","|","'",'"',";",":","<",">","?","=","+"];return e+="",""+e.replace(/[^A-Za-z0-9\-_]/g,function(e){if(" "==e)return"_";if(t.indexOf(e)>=0)return"";var a=[[/[\300-\306]/g,"A"],[/[\340-\346]/g,"a"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\322-\330]/g,"O"],[/[\362-\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\307]/g,"C"],[/[\347]/g,"c"]],n="";for(var r in a)if(a[r][0].test(e)){n=a[r][1];break}return n})}},{}],167:[function(){d3plus.string.title=function(e){if(!e)return"";if("locale"in this){var t=this.locale.value;"string"==typeof t&&(t=t in d3plus.locale?d3plus.locale[t]:d3plus.locale.en)}else var t=d3plus.locale.en;if("."===e.charAt(e.length-1))return e.charAt(0).toUpperCase()+e.substr(1);var a=t.lowercase,n=t.uppercase;return e.replace(/\w\S*/g,function(t,r){return n.indexOf(t.toLowerCase())>=0?t.toUpperCase():a.indexOf(t.toLowerCase())>=0&&0!==r&&r!==e.length-1?t.toLowerCase():t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}},{}],168:[function(){d3plus.style.default={},d3plus.style.default.fontFamily=["Helvetica Neue","HelveticaNeue","Helvetica","Arial","sans-serif"]},{}],169:[function(){d3plus.style.default.axes={ticks:{color:"#ccc",font:{color:"#888",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:12,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},size:10,width:1}}},{}],170:[function(){d3plus.style.default.background={accepted:[String],value:"#ffffff"}},{}],171:[function(){d3plus.style.default.color={heatmap:["#27366c","#7b91d3","#9ed3e3","#f3d261","#c9853a","#d74b03"],focus:"#444444",missing:"#eeeeee",primary:"#d74b03",range:["#d74b03","#eeeeee","#94b153"],secondary:"#e5b3bb"}},{}],172:[function(){d3plus.style.default.coords={center:[0,0],fit:{accepted:["auto","height","width"],value:"auto"},padding:20,projection:{accepted:["mercator","equirectangular"],value:"mercator"},threshold:.1}},{}],173:[function(){d3plus.style.default.data={donut:{size:.35},large:400,opacity:.9,stroke:{width:1}}},{}],174:[function(){d3plus.style.default.edges={arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",large:100,limit:!1,opacity:1,width:1}},{}],175:[function(){d3plus.style.default.font={align:{accepted:["left","center","right"],process:function(e){return d3plus.rtl?"left"===e?"right":"right"===e?"left":e:e},value:"left"},color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),secondary:{align:{accepted:["left","center","right"],process:function(e){return d3plus.rtl?"left"===e?"right":"right"===e?"left":e:e},value:"left"},color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:12,spacing:0,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},size:12,spacing:0,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200}},{}],176:[function(){d3plus.style.default.footer={font:{align:"center",color:"#444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:11,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},padding:0,position:"bottom"}},{}],177:[function(){d3plus.style.default.height={small:300,max:600}},{}],178:[function(){d3plus.style.default.icon={back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:function(e){var t=this.fallback;return d3plus.style.default.icon.fontCheck(e,t)},rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:function(e){var t=this.fallback;return d3plus.style.default.icon.fontCheck(e,t)},rotate:0,value:!1},drop:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:function(e){var t=this.fallback;return d3plus.style.default.icon.fontCheck(e,t)},rotate:0,value:"fa-angle-down"},fontCheck:function(e,t){return e===!1||0===e.indexOf("fa-")&&d3plus.font.awesome||e.indexOf("fa-")<0?e:t},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:function(e){var t=this.fallback;return d3plus.style.default.icon.fontCheck(e,t)},rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:function(e){var t=this.fallback;return d3plus.style.default.icon.fontCheck(e,t)},rotate:0,value:"fa-check"}}},{}],179:[function(){d3plus.style.default.labels={align:"middle",font:{decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:11,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},padding:7,segments:2}},{}],180:[function(){d3plus.style.default.legend={align:"middle",font:{align:"middle",color:"#444444",family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:10,weight:200},gradient:{height:10},order:{accepted:["color","id","size","text"],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30]}},{}],181:[function(){d3plus.style.default.links={font:{color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},hover:{color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"underline"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200}}},{}],182:[function(){d3plus.style.default.messages={font:{color:"#444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:16,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},padding:5}},{}],183:[function(){d3plus.style.default.nodes={overlap:.6}},{}],184:[function(){d3plus.style.default.shape={interpolate:{accepted:["basis","basis-open","cardinal","cardinal-open","linear","monotone","step","step-before","step-after"],deprecates:"stack_type",value:"linear"},rendering:{accepted:["auto","optimizeSpeed","crispEdges","geometricPrecision"],value:"auto"}}},{}],185:[function(){d3plus.style.default.timeline={align:"middle",background:"#eeeeee",brush:{color:"#ffffff",opacity:1},handles:{accepted:[Boolean],color:"#e5e5e5",hover:"#ffffff",opacity:1,size:3,stroke:"#cccccc",value:!0},height:20,tick:{align:"middle",color:"#e5e5e5",family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:10,weight:200}}},{}],186:[function(){d3plus.style.default.timing={mouseevents:60,transitions:600,ui:200}},{}],187:[function(){d3plus.style.default.title={font:{align:"center",color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:16,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:400},height:!1,padding:2,position:"top",sub:{font:{align:"center",color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:12,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},padding:1,position:"top"},total:{font:{align:"center",color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:12,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},padding:1,position:"top"},width:!1}},{}],188:[function(){d3plus.style.default.tooltip={anchor:"top center",background:"#ffffff",children:{accepted:[Boolean],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},font:{color:"#444",family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:12,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225}},{}],189:[function(){d3plus.style.default.ui={align:{accepted:["left","center","right"],process:function(e){return d3plus.rtl?"left"===e?"right":"right"===e?"left":e:e},value:"center"},border:1,color:{primary:{process:function(e){var t=this.getVars(),a=this.value,n=t.ui.color.secondary.value;return n&&n!==d3.rgb(a).darker(2).toString()||(t.ui.color.secondary.value=d3.rgb(e).darker(2).toString()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:11,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"}}},{}],190:[function(){d3plus.style.default.width={small:400}},{}],191:[function(){d3plus.style.fontFamily=function(e){return{process:d3plus.font.validate,value:e}}},{}],192:[function(e,t){d3plus.style.sheet=function(e){var t,a,n;for(t=0,a=!1;t<document.styleSheets.length;){if(n=document.styleSheets[t],n.href&&n.href.indexOf(e)>=0){a=!0;break}t++}return a},t.exports=d3plus.style.sheet},{}],193:[function(){d3plus.textwrap.flow=function(e){e.text.html.value?this.foreign(e):this.tspan(e)}},{}],194:[function(){d3plus.textwrap.foreign=function(e){var t=e.container.value,a=t.attr("font-family")||t.style("font-family"),n=t.attr("text-anchor")||t.style("text-anchor"),r=t.attr("fill")||t.style("fill"),i=t.attr("opacity")||t.style("opacity");n="end"===n?"right":"middle"===n?"center":"left",d3.select(t.node().parentNode).append("foreignObject").attr("width",e.width.value+"px").attr("height",e.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",a).style("font-size",e.size.value[1]).style("color",r).style("text-align",n).style("opacity",i).text(e.text.current)}},{}],195:[function(){d3plus.textwrap.getDimensions=function(e){if(!e.width.value||!e.height.value){var t=d3.select(e.container.value.node().parentNode),a=t.select("rect"),n=t.select("circle");if(a.empty())if(n.empty())e.width.value||e.self.width(500),e.height.value||e.self.height(500);else{var r=n.attr("r");e.width.value||e.self.width(parseFloat(2*r,10)),e.height.value||e.self.height(parseFloat(2*r,10))}else{if(!e.width.value){var i=a.attr("width")||a.style("width");e.self.width(parseFloat(i,10))}if(!e.height.value){var l=a.attr("height")||a.style("height");e.self.height(parseFloat(l,10))}}}}},{}],196:[function(){d3plus.textwrap.getSize=function(e){if(!e.size.value){var t=e.container.value.attr("font-size")||e.container.value.style("font-size");t=parseFloat(t,10),e.self.size(e.resize.value?[t,2*t]:[t/2,t])}}},{}],197:[function(){d3plus.textwrap.getText=function(e){if(!e.text.value){var t=e.container.value.html();t.indexOf("tspan")>=0&&(t.replace(/\<\/tspan\>\<tspan\>/g," "),t.replace(/\<\/tspan\>/g,""),t.replace(/\<tspan\>/g,"")),e.self.text(t)}e.text.phrases=e.text.value instanceof Array?e.text.value.filter(function(e){return["string","number"].indexOf(typeof e)>=0}):[e.text.value+""],e.container.value.html("")}},{}],198:[function(){d3plus.textwrap.resize=function(e){if(e.resize.value){for(var t=[],a=0;a<e.text.words.length;a++){var n=a===e.text.words.length-1?"":" ";t.push(e.text.words[a]+n)}var r=Math.floor(e.size.value[1]),i="circle"===e.shape.value?.785*e.width.value:e.width.value,l=d3plus.font.sizes(t,{"font-size":r+"px"},e.container.value),o=d3.max(l,function(e){return e.width}),s=1.165+e.width.value/e.height.value*.037,u=d3.sum(l,function(e){return e.width*e.height})*s,d="circle"===e.shape.value?Math.PI*Math.pow(e.width.value/2,2):i*e.height.value;if(o>i||u>d){var c=Math.sqrt(d/u),p=i/o,f=d3.min([c,p]);r=d3.max([e.size.value[0],Math.floor(r*f)])}var v=Math.floor(.8*e.height.value);r>v&&(r=v),o*(r/e.size.value[1])<=i?(r!==e.size.value[1]&&e.self.size([e.size.value[0],r]),e.container.value.attr("font-size",e.size.value[1]+"px"),this.flow(e)):this.wrap(e)}}},{}],199:[function(){d3plus.textwrap.tspan=function(e){var t=e.container.value.attr("x")||"0px",a=e.text.words.slice(0),n=!1,r=e.container.value.append("tspan").text(a[0]).attr("dy",e.size.value[1]+"px"),i=r.node().offsetHeight,l=1,o=function(){return e.container.value.append("tspan").attr("x",t).attr("dy",e.size.value[1]+"px")},s=function(){r.empty()||(a=r.text().match(/[^\s-]+-?/g),u())},u=function(){if(a&&a.length){var t=a.pop(),n=t.charAt(t.length-1);if(1===t.length&&e.text.split.indexOf(t)>=0)u();else{e.text.split.indexOf(n)>=0&&(t=t.substr(0,t.length-1)),r.text(a.join(" ")+" "+t+" ...");var o=(l-1)*i,d="circle"===e.shape.value?2*Math.sqrt(o*(2*(e.width.value/2)-o)):e.width.value;r.node().getComputedTextLength()>d&&u()}}else r.remove(),r=d3.select(e.container.value.node().lastChild),r.empty()||(l--,s())};"circle"===e.shape.value&&e.container.value.attr("text-anchor","middle");for(var d=1;d<a.length;d++){if(l*i>e.height.value){r.remove(),1!==d&&(r=d3.select(e.container.value.node().lastChild),r.empty()||s());break}var c=r.text(),p=(c.slice(-1),e.text.current.charAt(e.text.current.indexOf(c)+c.length)),f=" "==p?" ":"";r.text(c+f+a[d]);var v=(l-1)*i,h="circle"===e.shape.value?2*Math.sqrt(v*(2*(e.width.value/2)-v)):e.width.value;r.node().getComputedTextLength()>h&&(n||(r.text(""),r=o()),r.text(c),r=o(),r.text(a[d]),l++)}}},{}],200:[function(){d3plus.textwrap.wrap=function(e){e.text.phrases.length&&(e.text.current=e.text.phrases.shift()+"",e.text.words=e.text.current.match(e.text.break),e.resize.value?this.resize(e):this.flow(e))}},{}],201:[function(){d3plus.textwrap=function(){var e={shell:"textwrap"};e.self=function(t){return t.each(function(){d3plus.textwrap.getDimensions(e),d3plus.textwrap.getSize(e),e.size.value[0]<=e.height.value&&(d3plus.textwrap.getText(e),d3plus.textwrap.wrap(e))}),e.self};var t=["container","dev","draw","format","height","resize","text","shape","size","width"];return d3plus.method(e,t),e.self}},{}],202:[function(){d3plus.tooltip.app=function(e){function t(t){var o={},p={},f="merged"in n.d3plus?r:r+1,v=a.id.nesting[f],b="merged"in n.d3plus?n.d3plus.merged:n[v],x=d3plus.variable.value(a,n,a.size.value);if(a.tooltip.children.value)if(b instanceof Array){b=b.slice(0),d3plus.object.validate(b[0])&&(b=d3plus.util.uniques(b,v));for(var w="short"===c?3:a.data.large,_=d3.min([b.length,w]),z=0;_>z;z++){var k=b[z],A=d3plus.variable.text(a,k,f)[0],E=d3plus.variable.value(a,k,a.size.value,v),j=d3plus.variable.color(a,k,v);p[A]=E?a.format.value(E,a.size.value):"",j&&(p.d3plus_colors||(p.d3plus_colors={}),p.d3plus_colors[A]=j)}b.length>_&&(p.d3plusMore=b.length-_)}else if(b&&"null"!==b){var A=d3plus.variable.text(a,b,f)[0];p[A]=x?a.format.value(x,a.size.value):""}a.tooltip.size.value&&x&&(!b||b instanceof Array)&&(o[a.size.value]=x);var O=a.active.value?d3plus.variable.value(a,n,a.active.value):n.d3plus.active,M=a.temp.value?d3plus.variable.value(a,n,a.temp.value):n.d3plus.temp,F=a.total.value?d3plus.variable.value(a,n,a.total.value):n.d3plus.total;if("number"==typeof O&&O>0&&F){var I=a.active.value||"active";o[I]=O+"/"+F+" ("+a.format.value(O/F*100,"share")+"%)"}if("number"==typeof M&&M>0&&F){var I=a.temp.value||"temp";o[I]=M+"/"+F+" ("+a.format.value(M/F*100,"share")+"%)"}a.tooltip.share.value&&n.d3plus.share&&(o.share=a.format.value(100*n.d3plus.share,"share")+"%");var f="depth"in e?e.depth:r,B=d3plus.variable.text(a,n,f)[0],S=d3plus.variable.value(a,n,a.icon.value,a.id.nesting[f]),N=d3plus.tooltip.data(a,n,c,o,p,f);if(N.length>0||h||!n.d3plus_label&&"short"==c&&B||n.d3plus_label&&"visible"in n.d3plus_label&&!n.d3plus_label.visible){B||(B=k);var f=n.d3plus&&"depth"in n.d3plus?a.id.nesting[n.d3plus.depth]:a.id.value;if("string"==typeof a.icon.style.value)var V=a.icon.style.value;else if("object"==typeof a.icon.style.value&&a.icon.style.value[f])var V=a.icon.style.value[f];else var V="default";if(e.width)var T=e.width;else if(u||0!=N.length)var T=a.tooltip.small;else var T="auto";d3plus.tooltip.create({align:d,arrow:l,locale:a.format.locale.value,background:a.tooltip.background,curtain:a.tooltip.curtain.color,curtainopacity:a.tooltip.curtain.opacity,fontcolor:a.tooltip.font.color,fontfamily:a.tooltip.font.family.value,fontsize:a.tooltip.font.size,fontweight:a.tooltip.font.weight,data:N,color:d3plus.variable.color(a,n),allColors:!0,footer:e.footer===!1?e.footer:h,fullscreen:u,html:t,icon:S,id:s,max_height:e.maxheight,max_width:a.tooltip.small,mouseevents:i,offset:y,parent:a.container.value,style:V,title:B,width:T,x:g,y:m})}else d3plus.tooltip.remove(s)}"d3plus"in e.data||(e.data.d3plus={});var a=e.vars,n=e.data,r="d3plus"in n&&"depth"in n.d3plus?n.d3plus.depth:a.depth.value,i=(e.ex,e.mouseevents?e.mouseevents:!1),l="arrow"in e?e.arrow:!0,o=d3plus.variable.value(a,n,a.id.value),s=e.id||a.type.value;if(!d3.event||"click"!=d3.event.type||!a.tooltip.html.value&&!a.tooltip.value.long||"fullscreen"in e){var u=!1,d=e.anchor||a.tooltip.anchor,c=e.length||"short",p=a.zoom.direction(n);if(-1===p){var f=a.id.nesting[r-1];d3plus.variable.value(a,o,f)}if(1===p&&a.zoom.value)var v=a.format.value(a.format.locale.value.ui.expand);else if(-1===p&&a.zoom.value&&a.history.states.length)var v=a.format.value(a.format.locale.value.ui.collapse);else if("short"==c&&(a.tooltip.html.value||a.tooltip.value.long)&&a.focus.value!=o)var v=a.format.locale.value.ui.moreInfo;else if("long"==c)var v=a.footer.value||"";else var v="";var h=v.length?a.format.value(v,"footer"):!1}else{var u=!0,l=!1,i=!0,c="long",h=a.footer.value;a.covered=!0}if("x"in e)var g=e.x;else if("follow"==d3plus.visualization[a.type.value].tooltip)var g=d3.mouse(a.container.value.node())[0];else{var g=n.d3plus.x;a.zoom.translate&&a.zoom.scale&&(g=a.zoom.translate[0]+g*a.zoom.scale),g+=a.margin.left}if("y"in e)var m=e.y;else if("follow"==d3plus.visualization[a.type.value].tooltip)var m=d3.mouse(a.container.value.node())[1];else{var m=n.d3plus.y;a.zoom.translate&&a.zoom.scale&&(m=a.zoom.translate[1]+m*a.zoom.scale),m+=a.margin.top}if("offset"in e)var y=e.offset;else if("follow"==d3plus.visualization[a.type.value].tooltip)var y=3;else{var y=n.d3plus.r?n.d3plus.r:n.d3plus.height/2;a.zoom.scale&&(y*=a.zoom.scale)}u?"string"==typeof a.tooltip.html.value?t(a.tooltip.html.value):"function"==typeof a.tooltip.html.value?t(a.tooltip.html.value(o)):a.tooltip.html.value&&"object"==typeof a.tooltip.html.value&&a.tooltip.html.value.url?d3.json(a.tooltip.html.value.url,function(e){var n=a.tooltip.html.value.callback?a.tooltip.html.value.callback(e):e;t(n)}):t(""):t("")}},{}],203:[function(){d3plus.tooltip.arrow=function(e){e.style("bottom",function(e){return"center"==e.anchor.y||e.flip?"auto":"-5px"}).style("top",function(e){return"center"!=e.anchor.y&&e.flip?"-5px":"center"==e.anchor.y?"50%":"auto"}).style("left",function(e){return"center"==e.anchor.y&&e.flip?"-5px":"center"!=e.anchor.y?"50%":"auto"}).style("right",function(e){return"center"!=e.anchor.y||e.flip?"auto":"-5px"}).style("margin-left",function(e){if("center"==e.anchor.y)return"auto";if("right"==e.anchor.x)var t=-e.width/2+e.arrow_offset/2;else if("left"==e.anchor.x)var t=e.width/2-2*e.arrow_offset-5;else var t=-5;if(e.cx-e.width/2-5<t)t=e.cx-e.width/2-5,t<2-e.width/2&&(t=2-e.width/2);else if(-(e.limit[0]-e.cx-e.width/2+5)>t){var t=-(e.limit[0]-e.cx-e.width/2+5);t>e.width/2-11&&(t=e.width/2-11)}return t+"px"}).style("margin-top",function(e){if("center"!=e.anchor.y)return"auto";if("bottom"==e.anchor.y)var t=-e.height/2+e.arrow_offset/2-1;else if("top"==e.anchor.y)var t=e.height/2-2*e.arrow_offset-2;else var t=-9;if(e.cy-e.height/2-e.arrow_offset<t)t=e.cy-e.height/2-e.arrow_offset,t<4-e.height/2&&(t=4-e.height/2);else if(-(e.limit[1]-e.cy-e.height/2+e.arrow_offset)>t){var t=-(e.limit[1]-e.cy-e.height/2+e.arrow_offset);t>e.height/2-22&&(t=e.height/2-22)}return t+"px"})}},{}],204:[function(){d3plus.tooltip.create=function(e){var t=e.fullscreen?250:200,a=d3plus.prefix();if(e.width=e.width||t,e.max_width=e.max_width||386,e.id=e.id||"default",e.size=e.fullscreen||e.html?"large":"small",e.offset=e.offset||0,e.arrow_offset=e.arrow?8:0,e.x=e.x||0,e.y=e.y||0,e.parent=e.parent||d3.select("body"),e.curtain=e.curtain||"#fff",e.curtainopacity=e.curtainopacity||.8,e.background=e.background||"#fff",e.fontcolor=e.fontcolor||"#444",e.fontfamily=e.fontfamily||"sans-serif",e.fontweight=e.fontweight||"normal",e.fontsize=e.fontsize||"12px",e.style=e.style||"default",e.zindex="small"==e.size?2e3:500,e.locale=e.locale||d3plus.locale.en,e.iconsize||(e.iconsize="small"==e.size?22:50),e.limit=[parseFloat(e.parent.style("width"),10),parseFloat(e.parent.style("height"),10)],e.title instanceof Array){var n=e.locale.ui.and,r=e.locale.ui.more;e.title=d3plus.string.list(e.title,n,3,r)}var i=function(){d3.selectAll("div.d3plus_tooltip_data_desc").style("height","0px"),d3.selectAll("div.d3plus_tooltip_data_help").style("background-color","#ccc")};if(d3plus.tooltip.remove(e.id),e.anchor={},e.fullscreen)e.anchor.x="center",e.anchor.y="center",e.x=e.parent?e.parent.node().offsetWidth/2:window.innerWidth/2,e.y=e.parent?e.parent.node().offsetHeight/2:window.innerHeight/2;else if(e.align){var l=e.align.split(" ");e.anchor.y=l[0],e.anchor.x=l[1]?l[1]:"center"}else e.anchor.x="center",e.anchor.y="top";var o=e.width-30;if(e.fullscreen){e.parent.append("div").attr("id","d3plus_tooltip_curtain_"+e.id).attr("class","d3plus_tooltip_curtain").style("background-color",e.curtain).style("opacity",e.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(d3plus.evt.click,function(){d3plus.tooltip.remove(e.id)})}var s=e.parent.append("div").datum(e).attr("id","d3plus_tooltip_id_"+e.id).attr("class","d3plus_tooltip d3plus_tooltip_"+e.size).style("color",e.fontcolor).style("font-family",e.fontfamily).style("font-weight",e.fontweight).style("font-size",e.fontsize+"px").style(a+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("z-index",e.zindex).on(d3plus.evt.out,function(){i()});e.max_height&&s.style("max-height",e.max_height+"px"),e.fixed?(s.style("z-index",500),e.mouseevents=!0):s.style("z-index",2e3);var u=s.append("div").datum(e).attr("class","d3plus_tooltip_container").style("background-color",e.background).style("padding","6px");if(e.fullscreen&&e.html){c=e.parent?.75*e.parent.node().offsetWidth:.75*window.innerWidth,k=e.parent?.75*e.parent.node().offsetHeight:.75*window.innerHeight,u.style("width",c+"px").style("height",k+"px");var d=u.append("div").attr("class","d3plus_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",e.width+"px")}else{if("auto"==e.width){var c="auto";u.style("max-width",e.max_width+"px")}else var c=e.width-14+"px";var d=u.style("width",c)}if(e.title||e.icon)var p=d.append("div").attr("class","d3plus_tooltip_header").style("position","relative").style("z-index",1);if(e.fullscreen){s.append("div").attr("class","d3plus_tooltip_close").style("background-color",e.color).style("color",d3plus.color.text(e.color)).style("position","absolute").style(a+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(d3plus.evt.over,function(){d3.select(this).style("cursor","pointer").style(a+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(d3plus.evt.out,function(){d3.select(this).style("cursor","auto").style(a+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(d3plus.evt.click,function(){d3plus.tooltip.remove(e.id)})}if(e.mouseevents){if(e.mouseevents!==!0){var f=d3.select(e.mouseevents).on(d3plus.evt.out),v=function(){var t=d3.event.toElement||d3.event.relatedTarget;if(t)var a="string"==typeof t.className?t.className:t.className.baseVal,n=0==a.indexOf("d3plus_tooltip");else var n=!1;t&&(h(s.node(),t)||h(e.mouseevents,t)||n)||(f(d3.select(e.mouseevents).datum()),i(),d3.select(e.mouseevents).on(d3plus.evt.out,f))},h=function(e,t){for(var a=t.parentNode;null!==a;){if(a==e)return!0;a=a.parentNode}return!1};d3.select(e.mouseevents).on(d3plus.evt.out,v),s.on(d3plus.evt.out,v);var g=d3.select(e.mouseevents).on(d3plus.evt.move);g&&s.on(d3plus.evt.move,g)}}else s.style("pointer-events","none");if(e.arrow){s.append("div").attr("class","d3plus_tooltip_arrow").style("background-color",e.background).style(a+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom","-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(a+"transform","rotate(45deg)").style("z-index",-1)}if(e.icon){var m=p.append("div").attr("class","d3plus_tooltip_icon").style("width",e.iconsize+"px").style("height",e.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+e.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px");"knockout"==e.style&&m.style("background-color",e.color),o-=m.node().offsetWidth}if(e.title){var y=e.max_width-6;e.icon&&(y-=e.iconsize+6),y+="px";{p.append("div").attr("class","d3plus_tooltip_title").style("max-width",y).style("color",e.icon?e.fontcolor:d3plus.color.legible(e.color)).style("vertical-align","top").style("width",o+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===e.size?"18px":"16px").style("line-height","large"===e.size?"20px":"17px").style("padding","large"===e.size?"3px 6px":"3px").text(e.title)}}if(e.description){d.append("div").attr("class","d3plus_tooltip_description").style("font-size","12px").style("padding","6px").text(e.description)}if(e.data||e.html&&!e.fullscreen)var b=d.append("div").attr("class","d3plus_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(e.data){var x=0,w={},_=null;e.data.forEach(function(t,n){t.group&&_!=t.group&&(_=t.group,b.append("div").attr("class","d3plus_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(t.group));var r=b.append("div").attr("class","d3plus_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(t);
t.highlight===!0?r.style("color",d3plus.color.legible(e.color)):(t.allColors||t.highlight!==e.color)&&r.style("color",d3plus.color.legible(t.highlight));var l=r.append("div").attr("class","d3plus_tooltip_data_name").style("display","inline-block").html(t.name).on(d3plus.evt.out,function(){d3.event.stopPropagation()});if(t.value instanceof Array){var o=e.locale.ui.and,s=e.locale.ui.more;t.value=d3plus.string.list(t.value,o,3,s)}var u=r.append("div").attr("class","d3plus_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").text(t.value).on(d3plus.evt.out,function(){d3.event.stopPropagation()});if(d3plus.rtl?u.style("left","6px"):u.style("right","6px"),e.mouseevents&&t.desc){var d=r.append("div").attr("class","d3plus_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(a+"transition","height 0.5s").style("width","85%").text(t.desc).on(d3plus.evt.out,function(){d3.event.stopPropagation()}),c=d.node().offsetHeight;d.style("height","0px");var p=l.append("div").attr("class","d3plus_tooltip_data_help").style("background-color","#ccc").style(a+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size","8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(prefix+"transition","background-color 0.5s").text("?").on(d3plus.evt.over,function(){var e=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",e),d.style("height",c+"px")}).on(d3plus.evt.out,function(){d3.event.stopPropagation()});l.style("cursor","pointer").on(d3plus.evt.over,function(){i();var e=d3.select(this.parentNode).style("color");p.style("background-color",e),d.style("height",c+"px")}),r.on(d3plus.evt.out,function(){d3.event.stopPropagation(),i()})}var f=parseFloat(u.style("width"),10);f>e.width/2&&(f=e.width/2),f>x&&(x=f),n!=e.data.length-1&&(t.group&&t.group==e.data[n+1].group||!t.group&&!e.data[n+1].group)&&b.append("div").attr("class","d3plus_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")}),b.selectAll(".d3plus_tooltip_data_name").style("width",function(){var e=parseFloat(d3.select(this.parentNode).style("width"),10);return e-x-30+"px"}),b.selectAll(".d3plus_tooltip_data_value").style("width",x+"px").each(function(e){var t=parseFloat(d3.select(this).style("height"),10);w[e.name]=t}),b.selectAll(".d3plus_tooltip_data_name").style("min-height",function(e){return w[e.name]+"px"})}e.html&&!e.fullscreen&&b.append("div").html(e.html);var z=d.append("div").attr("class","d3plus_tooltip_footer").style("font-size","10px").style("position","relative").style("text-align","center");if(e.footer&&z.html(e.footer),e.height=s.node().offsetHeight,e.html&&e.fullscreen){var k=e.height-12,c=s.node().offsetWidth-e.width-44;u.append("div").attr("class","d3plus_tooltip_html").style("width",c+"px").style("height",k+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(e.html)}if(e.width=s.node().offsetWidth,"center"!=e.anchor.y?e.height+=e.arrow_offset:e.width+=e.arrow_offset,e.data||!e.fullscreen&&e.html){if(e.fullscreen)var k=e.height;else var A=e.parent.node().offsetHeight,E=e.fixed?A-e.y-10:A-10,k=e.height<E?e.height:E;k-=parseFloat(u.style("padding-top"),10),k-=parseFloat(u.style("padding-bottom"),10),p&&(k-=p.node().offsetHeight,k-=parseFloat(p.style("padding-top"),10),k-=parseFloat(p.style("padding-bottom"),10)),z&&(k-=z.node().offsetHeight,k-=parseFloat(z.style("padding-top"),10),k-=parseFloat(z.style("padding-bottom"),10)),b.style("max-height",k+"px")}e.height=s.node().offsetHeight,d3plus.tooltip.move(e.x,e.y,e.id)}},{}],205:[function(){d3plus.tooltip.data=function(e,t,a,n,r,i){function l(a,n){if(e.attrs.value[n])var r=n;else var r=null;n&&(n=e.format.value(n));var i=s[a]||d3plus.variable.value(e,t,a,r);if(i!==!1&&null!==i){var l=e.format.value(e.format.locale.value.ui[a]?e.format.locale.value.ui[a]:a),o=d.indexOf(a)>=0;i instanceof Array?i.forEach(function(t){t=e.format.value(t)}):i=e.format.value(i);var u={name:l,value:i,highlight:o,group:n};if(e.descs.value)if("function"==typeof e.descs.value){var c=e.descs.value(a);"string"==typeof c&&(u.desc=c)}else a in e.descs.value&&(u.desc=e.descs.value[a]);i&&p.push(u)}}if(e.small)return[];if(!a)var a="long";if("long"==a)var o="short";else var o="long";var s={};if(n&&"string"==typeof n)n=[n];else if(n&&"object"==typeof n){s=d3plus.object.merge(s,n);var n=[];for(var u in s)n.push(u)}else if(!n)var n=[];var d=[];if(e.tooltip.value instanceof Array)var c=e.tooltip.value;else if("string"==typeof e.tooltip.value)var c=[e.tooltip.value];else{if(e.tooltip.value[e.id.nesting[i]])var c=e.tooltip.value[e.id.nesting[i]];else var c=e.tooltip.value;c instanceof Array||(c=c[a]?c[a]:c[o]?[]:d3plus.object.merge({"":[]},c)),"string"==typeof c?c=[c]:c instanceof Array||(c=d3plus.object.merge({"":[]},c))}var p=[];if(c instanceof Array)n.forEach(function(e){c.indexOf(e)<0&&c.push(e)}),c.forEach(function(e){l(e)});else{if(e.id.nesting.length&&i<e.id.nesting.length-1){var c=d3plus.util.copy(c);e.id.nesting.forEach(function(e,t){t>i&&c[e]&&delete c[e]})}if(e.tooltip.value.long&&"object"==typeof e.tooltip.value.long){var f=[];for(var v in e.tooltip.value.long)n.forEach(function(t){e.tooltip.value.long[v].indexOf(t)>=0&&(c[v]&&c[v].indexOf(t)<0||!c[v])?(c[v]||(c[v]=[]),c[v].push(t),f.push(t)):c[v]&&c[v].indexOf(t)>=0&&f.push(t)});n.forEach(function(e){f.indexOf(e)<0&&(c[""]||(c[""]=[]),c[""].push(e))})}else{var h=[];for(var v in c)n.forEach(function(e){c[v]instanceof Array&&c[v].indexOf(e)>=0?h.push(e):"string"==typeof c[v]&&c[v]==e&&h.push(e)});h.length!=n.length&&(c[""]||(c[""]=[]),n.forEach(function(e){h.indexOf(e)<0&&c[""].push(e)}))}c[""]&&(c[""].forEach(function(e){l(e,"")}),delete c[""]);for(var v in c)c[v]instanceof Array?c[v].forEach(function(e){l(e,v)}):"string"==typeof c[v]&&l(c[v],v)}if(r){var g=e.format.locale.value.ui.including,m=r.d3plus_colors;for(var y in r)if("d3plus_colors"!==y){if("d3plusMore"===y){var b=e.format.locale.value.ui.more,x=d3plus.string.format(b,r[y]),w=!0;r[y]=""}else var x=y,w=m&&m[x]?m[x]:!1;p.push({group:e.format.value(g),highlight:w,name:x,value:r[y]})}}if(e.tooltip.connections.value&&"long"===a){var _=e.edges.connections(t[e.id.value],e.id.value,!0);_.length&&_.forEach(function(t){var a=d3plus.variable.text(e,t)[0],n=d3plus.variable.color(e,t),r=e.tooltip.font.size,i="square"==e.shape.value?0:r;styles=["background-color: "+n,"border-color: "+d3plus.color.legible(n),"border-style: solid","border-width: "+e.data.stroke.width+"px","display: inline-block","height: "+r+"px","left: 0px","position: absolute","width: "+r+"px","top: 0px",d3plus.prefix()+"border-radius: "+i+"px"],node="<div style='"+styles.join("; ")+";'></div>",p.push({group:e.format.value(e.format.locale.value.ui.primary),highlight:!1,name:"<div style='position:relative;padding-left:"+1.5*r+"px;'>"+node+a+"</div>",value:""})})}return p}},{}],206:[function(){d3plus.tooltip.move=function(e,t,a){if(a)var n=d3.select("div#d3plus_tooltip_id_"+a);else var n=d3.select("div#d3plus_tooltip_id_default");if(n.node()){var r=n.datum();r.cx=e,r.cy=t,r.fixed||("center"!=r.anchor.y?("right"==r.anchor.x?r.x=r.cx-r.arrow_offset-4:"center"==r.anchor.x?r.x=r.cx-r.width/2:"left"==r.anchor.x&&(r.x=r.cx-r.width+r.arrow_offset+2),"bottom"==r.anchor.y?r.flip=r.cy+r.height+r.offset<=r.limit[1]:"top"==r.anchor.y&&(r.flip=r.cy-r.height-r.offset<0),r.y=r.flip?r.cy+r.offset+r.arrow_offset:r.cy-r.height-r.offset-r.arrow_offset):(r.y=r.cy-r.height/2,"right"==r.anchor.x?r.flip=r.cx+r.width+r.offset<=r.limit[0]:"left"==r.anchor.x&&(r.flip=r.cx-r.width-r.offset<0),"center"==r.anchor.x?(r.flip=!1,r.x=r.cx-r.width/2):r.x=r.flip?r.cx+r.offset+r.arrow_offset:r.cx-r.width-r.offset),r.x<0?r.x=0:r.x+r.width>r.limit[0]&&(r.x=r.limit[0]-r.width),r.y<0?r.y=0:r.y+r.height>r.limit[1]&&(r.y=r.limit[1]-r.height)),n.style("top",r.y+"px").style("left",r.x+"px"),r.arrow&&n.selectAll(".d3plus_tooltip_arrow").call(d3plus.tooltip.arrow)}}},{}],207:[function(){d3plus.tooltip.remove=function(e){e?(d3.selectAll("div#d3plus_tooltip_curtain_"+e).remove(),d3.selectAll("div#d3plus_tooltip_id_"+e).remove()):(d3.selectAll("div#d3plus_tooltip_curtain").remove(),d3.selectAll("div.d3plus_tooltip").remove())}},{}],208:[function(){d3plus.util.buckets=function(e,t){for(var a=[],n=1/(t-1)*(e[1]-e[0]),r=n,r=e[0];r<=e[1];r+=n)a.push(r);return a.length<t&&(a[t-1]=e[1]),a[a.length-1]<e[1]&&(a[a.length-1]=e[1]),a}},{}],209:[function(){d3plus.util.child=function(e,t){if(!e||!t)return!1;d3plus.util.d3selection(e)&&(e=e.node()),d3plus.util.d3selection(e)&&(t=t.node());for(var a=t.parentNode;null!==a;){if(a==e)return!0;a=a.parentNode}return!1}},{}],210:[function(){d3plus.util.closest=function(e,t){var a=e[0];return e.forEach(function(e){Math.abs(t-e)<Math.abs(t-a)&&(a=e)}),a}},{}],211:[function(){d3plus.util.copy=function(e){if(d3plus.object.validate(e))return d3plus.object.merge(e);if(e instanceof Array){var t=[];return e.forEach(function(e){t.push(d3plus.util.copy(e))}),t}return e}},{}],212:[function(){d3plus.util.d3selection=function(e){return d3plus.ie?"object"==typeof e&&e instanceof Array:e instanceof d3.selection}},{}],213:[function(){d3plus.util.dataurl=function(e,t){var a=new Image;a.src=e,a.crossOrigin="Anonymous",a.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height;var a=e.getContext("2d");a.drawImage(this,0,0),t.call(this,e.toDataURL("image/png")),e=null}}},{}],214:[function(){d3plus.util.distances=function(e,t){var a=[],n=[];return e.forEach(function(r){var i=t?t(r):[r.x,r.y];n.push(r),e.forEach(function(e){if(n.indexOf(e)<0){var r=t?t(e):[e.x,e.y],l=Math.abs(i[0]-r[0]),o=Math.abs(i[1]-r[1]);a.push(Math.sqrt(l*l+o*o))}})}),a.sort(function(e,t){return e-t}),a}},{}],215:[function(){d3plus.util.offset=function(e,t,a){var n={x:0,y:0};if(0>e&&(e=2*Math.PI+e),"square"==a){var r=45*(Math.PI/180);if(e<=Math.PI)if(e<Math.PI/2)if(r>e){n.x+=t;var i=Math.tan(e)*t;n.y+=i}else{n.y+=t;var l=t/Math.tan(e);n.x+=l}else if(e<Math.PI-r){n.y+=t;var l=t/Math.tan(Math.PI-e);n.x-=l}else{n.x-=t;var i=Math.tan(Math.PI-e)*t;n.y+=i}else if(e<3*Math.PI/2)if(e<r+Math.PI){n.x-=t;var i=Math.tan(e-Math.PI)*t;n.y-=i}else{n.y-=t;var l=t/Math.tan(e-Math.PI);n.x-=l}else if(e<2*Math.PI-r){n.y-=t;var l=t/Math.tan(2*Math.PI-e);n.x+=l}else{n.x+=t;var i=Math.tan(2*Math.PI-e)*t;n.y-=i}}else n.x+=t*Math.cos(e),n.y+=t*Math.sin(e);return n}},{}],216:[function(){d3plus.util.uniques=function(e,t){if(void 0===e||void 0===t)return[];var a=!1,n=d3.nest().key(function(e){return"string"==typeof t?(a||"undefined"==typeof e[t]||(a=typeof e[t]),e[t]):"function"==typeof t?(a||"undefined"==typeof t(e)||(a=typeof t(e)),t(e)):e}).entries(e).reduce(function(e,t){return a&&"undefined"!==t.key?e.concat("number"===a?parseFloat(t.key):t.key):e},[]);return"number"===a&&n.sort(function(e,t){return t>e?-1:1}),n}},{}],217:[function(){d3plus.variable.color=function(e,t,a){function n(e){return d3plus.object.validate(e)&&(e=e[a]),d3plus.color.random(e)}if(!a)var a=e.id.value;if(e.color.value){for(var r=e.id.nesting.indexOf(a);r>=0;r--){var i=e.id.nesting[r],l=d3plus.variable.value(e,t,e.color.value,i);if(l)break}return l?e.color.scale?e.color.scale(l):d3plus.color.validate(l)?l:n(l):e.color.value||"function"==typeof e.color.scale?e.color.missing:n(t)}return n(t)}},{}],218:[function(){d3plus.variable.text=function(e,t,a){if("number"!=typeof a)var a=e.depth.value;var n=e.id.nesting[a];if(e.text.nesting&&d3plus.object.validate(e.text.nesting))if(e.text.nesting[n])var r=e.text.nesting[n];else var r=e.text.nesting[d3.keys(e.text.nesting)[0]];else{var r=[];e.text.value&&r.push(e.text.value),r.push(n)}r instanceof Array||(r=[r]);var i=[];return d3plus.object.validate(t)&&"d3plus"in t&&t.d3plus.text&&i.push(t.d3plus.text),r.forEach(function(a){var r=d3plus.variable.value(e,t,a,n);r&&(r instanceof Array?r.forEach(function(t){t=e.format.value(t.toString())}):r=e.format.value(r.toString()),i.push(r))}),i}},{}],219:[function(){d3plus.variable.value=function(e,t,a,n,r){function i(e){if(t instanceof Array){var a=d3plus.util.uniques(t,n);return e.filter(function(e){return a.indexOf(e[n])>=0})}return e.filter(function(e){return e[n]===t})}function l(e){e.children?e.children.forEach(function(e){l(e)}):e[a]&&s.push(e[a])}function o(e){var t=d3plus.util.uniques(e,a);return 1===t.length?t[0]:void 0}if(a&&"function"==typeof a)return a(t);if(!n)if(d3plus.object.validate(a)){if(a[e.id.value])var n=e.id.value;else var n=d3.keys(a)[0];a=a[n]}else var n=e.id.value;if(a===n){if(d3plus.object.validate(t)&&a in t)return t[a];if(!(t instanceof Array))return t}var s=[];if(d3plus.object.validate(t)&&a in t)return t[a];if(d3plus.object.validate(t)&&t.children){if(!r){var r="sum";"string"==typeof e.aggs.value?r=e.aggs.value:e.aggs.value[a]&&(r=e.aggs.value[a])}if(l(t),s.length){if("string"==typeof r)return d3[r](s);if("function"==typeof r)return r(s)}var u=t;t=u[n]}else{if(d3plus.object.validate(t)&&n in t){var d=o(t);if(d)return d;t=t[n]}if(t instanceof Array){var d=o(t);if(d)return d}if(e.data.app instanceof Array){var d=o(i(e.data.app));if(d)return d}}if("attrs"in e&&e.attrs.value)if(e.attrs.value instanceof Array)var c=i(e.attrs.value);else if(n in e.attrs.value)if(e.attrs.value[n]instanceof Array)var c=i(e.attrs.value[n]);else var c=e.attrs.value[n];else var c=e.attrs.value;if(d3plus.object.validate(c)){var p=[];t instanceof Array?t.forEach(function(e){p.push(c[e])}):p.push(c[t]),c=p}if(c&&c.length){var f=d3plus.util.uniques(c,a);if(1===f.length)return f[0]}return null}},{}],220:[function(){d3plus.draw.app=function(e){if(e.group=e.g.apps[e.type.value],e.mouse={},e.internal_error)var t=null;else{var a=e.format.locale.value.visualization[e.type.value];e.dev.value&&d3plus.console.time("running "+a);var t=d3plus.visualization[e.type.value](e);e.dev.value&&d3plus.console.timeEnd("running "+a)}e.returned={nodes:null,edges:null},t instanceof Array?e.returned.nodes=t:t&&(t.nodes&&(e.returned.nodes=t.nodes),t.edges&&(e.returned.edges=t.edges));var n=e.returned.nodes;n&&n instanceof Array&&n.length||(e.returned.nodes=[])}},{}],221:[function(){d3plus.draw.container=function(e){if(e.container.changed){e.container.value.style("position",function(){var e=d3.select(this).style("position"),t=["absolute","fixed"].indexOf(e)>=0;return t?e:"relative"}).html("");var t=["width","height"];t.forEach(function(t){function a(n){if(void 0===n.tagName||["BODY","HTML"].indexOf(n.tagName)>=0){var r=window["inner"+t.charAt(0).toUpperCase()+t.slice(1)],i=document!=n?d3.select(n):null;i&&"width"==t?(r-=parseFloat(i.style("margin-left"),10),r-=parseFloat(i.style("margin-right"),10),r-=parseFloat(i.style("padding-left"),10),r-=parseFloat(i.style("padding-right"),10)):i&&"height"==t&&(r-=parseFloat(i.style("margin-top"),10),r-=parseFloat(i.style("margin-bottom"),10),r-=parseFloat(i.style("padding-top"),10),r-=parseFloat(i.style("padding-bottom"),10)),1==d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"),20>=r&&(r=e[t].small),e[t].value=r}else{var r=parseFloat(d3.select(n).style(t),10);"number"==typeof r&&r>0?e[t].value=r:"BODY"!=n.tagName&&a(n.parentNode)}}e[t].value||a(e.container.value.node())}),e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px")}e.width.viz=e.width.value,e.height.viz=e.height.value}},{}],222:[function(){d3plus.draw.enter=function(e){e.dev.value&&d3plus.console.time("creating SVG elements"),e.svg=e.container.value.selectAll("svg#d3plus").data([0]),e.svg.enter().insert("svg","#d3plus_message").attr("id","d3plus").attr("width",e.width.value).attr("height",e.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xmlns:xlink","http://www.w3.org/1999/xlink"),e.g.bg=e.svg.selectAll("rect#bg").data(["bg"]),e.g.bg.enter().append("rect").attr("id","bg").attr("fill",e.background.value).attr("width",e.width.value).attr("height",e.height.value),e.g.timeline=e.svg.selectAll("g#timeline").data(["timeline"]),e.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+e.height.value+")"),e.g.legend=e.svg.selectAll("g#key").data(["key"]),e.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+e.height.value+")"),e.g.footer=e.svg.selectAll("g#footer").data(["footer"]),e.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+e.height.value+")"),e.g.clipping=e.svg.selectAll("#clipping").data(["clipping"]),e.g.clipping.enter().append("clipPath").attr("id","clipping").append("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container=e.svg.selectAll("g#container").data(["container"]),e.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#clipping)").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),e.g.zoom=e.g.container.selectAll("g#zoom").data(["zoom"]),e.g.zoom.enter().append("g").attr("id","zoom"),e.g.viz=e.g.zoom.selectAll("g#d3plus_viz").data(["d3plus_viz"]),e.g.viz.enter().append("g").attr("id","d3plus_viz"),e.g.overlay=e.g.viz.selectAll("rect#d3plus_overlay").data([{id:"d3plus_overlay"}]),e.g.overlay.enter().append("rect").attr("id","d3plus_overlay").attr("width",e.width.value).attr("height",e.height.value).attr("opacity",0),d3plus.touch?e.g.overlay.on(d3plus.evt.over,e.zoom.touchEvent).on(d3plus.evt.move,e.zoom.touchEvent).on(d3plus.evt.out,e.zoom.touchEvent):e.g.overlay.on(d3plus.evt.move,function(t){t.dragging||(d3plus.visualization[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",d3plus.prefix()+"grab"):d3.select(this).style("cursor","auto"))}).on(d3plus.evt.up,function(t){d3plus.visualization[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?(t.dragging=!1,d3.select(this).style("cursor",d3plus.prefix()+"grab")):d3.select(this).style("cursor","auto")}).on(d3plus.evt.down,function(t){d3plus.visualization[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?(t.dragging=!0,d3.select(this).style("cursor",d3plus.prefix()+"grabbing")):d3.select(this).style("cursor","auto")}),e.g.app=e.g.viz.selectAll("g#app").data(["app"]),e.g.app.enter().append("g").attr("id","app"),e.g.edges=e.g.viz.selectAll("g#edges").data(["edges"]),e.g.edges.enter().append("g").attr("id","edges").attr("opacity",0),e.g.edge_focus=e.g.viz.selectAll("g#focus").data(["focus"]),e.g.edge_focus.enter().append("g").attr("id","focus"),e.g.edge_hover=e.g.viz.selectAll("g#edge_hover").data(["edge_hover"]),e.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0),e.g.data=e.g.viz.selectAll("g#data").data(["data"]),e.g.data.enter().append("g").attr("id","data").attr("opacity",0),e.g.data_focus=e.g.viz.selectAll("g#data_focus").data(["data_focus"]),e.g.data_focus.enter().append("g").attr("id","data_focus"),e.g.labels=e.g.viz.selectAll("g#d3plus_labels").data(["d3plus_labels"]),e.g.labels.enter().append("g").attr("id","d3plus_labels"),e.defs=e.svg.selectAll("defs").data(["defs"]),e.defs.enter().append("defs"),e.dev.value&&d3plus.console.timeEnd("creating SVG elements")}},{}],223:[function(){d3plus.draw.errors=function(e){e.dev.value&&d3plus.console.time("checking for errors");var t=["id"];d3plus.visualization[e.type.value].requirements&&(t=t.concat(d3plus.visualization[e.type.value].requirements));var a=[];if(t.forEach(function(t){e[t].value||a.push('"'+t+'"')}),a.length>1){var n=e.format.locale.value.error.methods,r=e.format.locale.value.visualization[e.type.value],i=e.format.locale.value.ui.and;a=d3plus.string.list(a,i),e.internal_error=d3plus.string.format(n,r,a)}else if(1===a.length){var n=e.format.locale.value.error.method,r=e.format.locale.value.visualization[e.type.value];e.internal_error=d3plus.string.format(n,r,a[0])}if(!e.internal_error&&t.indexOf("edges")>=0&&t.indexOf("focus")>=0){var l=e.edges.connections(e.focus.value,e.id.value);if(0==l.length){var o=d3plus.variable.text(e,e.focus.value,e.depth.value),n=e.format.locale.value.error.connections;e.internal_error=d3plus.string.format(n,'"'+o+'"')}}var t=["d3"];d3plus.visualization[e.type.value].libs&&(t=t.concat(d3plus.visualization[e.type.value].libs));var a=[];if(t.forEach(function(e){window[e]||a.push('"'+e+'"')}),a.length>1){var n=e.format.locale.value.error.libs,r=e.format.locale.value.visualization[e.type.value],i=e.format.locale.value.ui.and;a=d3plus.string.list(a,i),e.internal_error=d3plus.string.format(n,r,a)}else if(1===a.length){var n=e.format.locale.value.error.lib,r=e.format.locale.value.visualization[e.type.value];e.internal_error=d3plus.string.format(n,r,a[0])}if(e.shape.value){if(d3plus.visualization[e.type.value].shapes.indexOf(e.shape.value)<0){var s=d3plus.visualization[e.type.value].shapes.join('", "'),n=e.format.locale.value.error.accepted,u='"'+e.shape.value+'"',d=e.format.locale.value.method.shape,r=e.format.locale.value.visualization[e.type.value];d3plus.console.warning(d3plus.string.format(n,u,d,r,'"'+s+'"'),"shape"),e.shape.previous=e.shape.value,e.shape.value=d3plus.visualization[e.type.value].shapes[0];var n=e.format.locale.value.dev.setLong,u='"'+e.shape.value+'"';e.dev.value&&d3plus.console.log(d3plus.string.format(n,d,u))}}else e.shape.value=d3plus.visualization[e.type.value].shapes[0];if("modes"in d3plus.visualization[e.type.value])if(e.type.mode.value){if(d3plus.visualization[e.type.value].modes.indexOf(e.type.mode.value)<0){var c=d3plus.visualization[e.type.value].modes.join('", "'),n=e.format.locale.value.error.accepted,p='"'+e.type.mode.value+'"',f=e.format.locale.value.method.mode,r=e.format.locale.value.visualization[e.type.value];d3plus.console.warning(d3plus.string.format(n,p,f,r,'"'+c+'"')),e.type.mode.previous=e.type.mode.value,e.type.mode.value=d3plus.visualization[e.type.value].modes[0];var n=e.format.locale.value.dev.setLong,p='"'+e.type.mode.value+'"';e.dev.value&&d3plus.console.log(d3plus.string.format(n,f,p))}}else e.type.mode.value=d3plus.visualization[e.type.value].modes[0];e.dev.value&&d3plus.console.timeEnd("checking for errors")}},{}],224:[function(){d3plus.draw.finish=function(e){d3plus.visualization[e.type.value].zoom&&e.zoom.value?(e.dev.value&&d3plus.console.time("calculating zoom"),e.draw.first&&e.zoom.bounds&&d3plus.zoom.bounds(e,e.zoom.bounds,0),(e.focus.changed||e.height.changed||e.width.changed)&&(e.zoom.viewport?d3plus.zoom.bounds(e,e.zoom.viewport):d3plus.zoom.bounds(e,e.zoom.bounds)),e.dev.value&&d3plus.console.timeEnd("calculating zoom")):e.zoom.scale=1;var t=e.zoom.size?e.zoom.size.width:e.width.viz,a=e.zoom.size?e.zoom.size.height:e.height.viz,n=e.zoom.bounds?e.zoom.bounds[0][0]:0,r=e.zoom.bounds?e.zoom.bounds[0][1]:0;if(e.g.overlay.attr("width",t).attr("height",a).attr("x",n).attr("y",r),e.draw.update?(d3plus.shape.edges(e),(e.draw.timing||!d3plus.visualization[e.type.value].zoom&&!e.draw.timing)&&(d3plus.shape.labels(e,"data"),e.edges.label&&setTimeout(function(){d3plus.shape.labels(e,"edges")},e.draw.timing))):d3plus.visualization[e.type.value].zoom&&e.zoom.value&&e.draw.timing&&setTimeout(function(){d3plus.zoom.labels(e)},e.draw.timing),d3plus.visualization[e.type.value].zoom&&e.zoom.value&&e.focus.value&&!e.draw.timing&&(e.dev.value&&d3plus.console.time("focus labels"),d3plus.shape.labels(e,"data_focus"),e.edges.label&&setTimeout(function(){d3plus.shape.labels(e,"edge_focus")},e.draw.timing),e.dev.value&&d3plus.console.timeEnd("focus labels")),!e.internal_error){var i=d3plus.visualization[e.type.value].requirements.indexOf("data")>=0;e.data.app&&e.returned.nodes.length||!i||(e.internal_error=e.format.locale.value.error.data)}var l=e.type.previous;l&&e.type.value!=l&&e.g.apps[l]&&(e.dev.value&&d3plus.console.time('hiding "'+l+'"'),e.draw.timing?e.g.apps[l].transition().duration(e.draw.timing).attr("opacity",0):e.g.apps[l].attr("opacity",0),e.dev.value&&d3plus.console.timeEnd());var i=d3plus.visualization[e.type.value].requirements.indexOf("data")>=0,o=i&&0==e.data.app.length||e.internal_error?0:e.focus.value&&d3plus.visualization[e.type.value].zoom&&e.zoom.value?.4:1,s=e.group.attr("opacity");if(o!=s){var u=e.draw.timing;e.group.transition().duration(u).attr("opacity",o),e.g.data.transition().duration(u).attr("opacity",o),e.g.edges.transition().duration(u).attr("opacity",o)}e.internal_error?(e.internal_error=d3plus.string.title(e.internal_error),d3plus.console.warning(e.internal_error),d3plus.ui.message(e,e.internal_error),e.internal_error=null):d3plus.ui.message(e),setTimeout(function(){d3plus.data.reset(e),d3plus.visualization[e.type.value].zoom&&e.zoom.value?(e.g.zoom.datum(e).call(e.zoom.behavior.on("zoom",d3plus.zoom.mouse)),e.zoom.scroll.value||e.g.zoom.on("wheel.zoom",null),e.zoom.click.value||e.g.zoom.on("dblclick.zoom",null),e.zoom.pan.value||(e.g.zoom.on("mousemove.zoom",null),e.g.zoom.on("mousedown.zoom",null))):e.g.zoom.call(e.zoom.behavior.on("zoom",null))},e.draw.timing)}},{}],225:[function(){d3plus.draw.focus=function(t){if(t.g.edge_focus.selectAll("g").remove(),t.g.data_focus.selectAll("g").remove(),t.focus.value&&d3plus.visualization[t.type.value].zoom&&t.zoom.value){t.dev.value&&d3plus.console.time("drawing focus elements");var a=t.g.edges.selectAll("g");if(a.size()>0){a.each(function(e){var a=e[t.edges.source][t.id.value],n=e[t.edges.target][t.id.value];if(a==t.focus.value||n==t.focus.value){var r=t.g.edge_focus.node().appendChild(this.cloneNode(!0));d3.select(r).datum(e).attr("opacity",1).selectAll("line, path").datum(e)}});var n=t.edges.arrows.value;t.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",t.color.focus).style("stroke-width",function(){return t.edges.size?d3.select(this).style("stroke-width"):2*t.data.stroke.width}).attr("marker-start",function(e){var a=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var r="_"+e.d3plus.bucket;else var r="";return"source"==a&&n?"url(#d3plus_edge_marker_focus"+r+")":"none"}).attr("marker-end",function(e){var a=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var r="_"+e.d3plus.bucket;else var r="";return"target"==a&&n?"url(#d3plus_edge_marker_focus"+r+")":"none"}),t.g.edge_focus.selectAll("text").style("fill",t.color.focus)}var r=d3plus.util.uniques(t.edges.connections(t.focus.value,t.id.value,!0),t.id.value);r.push(t.focus.value);{var i=[],l=[],o=[0],s=[0];t.g.data.selectAll("g").each(function(a){if(r.indexOf(a[t.id.value])>=0){var n=t.g.data_focus.node().appendChild(this.cloneNode(!0)),n=d3.select(n).datum(a).attr("opacity",1);"coordinates"==t.shape.value?t.zoom.viewport=t.path.bounds(t.zoom.coords[a.d3plus.id]):"d3plus"in a&&("x"in a.d3plus&&i.push(a.d3plus.x),"y"in a.d3plus&&l.push(a.d3plus.y),"r"in a.d3plus?(o.push(a.d3plus.r),s.push(a.d3plus.r)):("width"in a.d3plus&&o.push(a.d3plus.width/2),"height"in a.d3plus&&s.push(a.d3plus.height/2)));for(e in d3plus.evt){var u=d3.select(this).on(d3plus.evt[e]);u&&n.on(d3plus.evt[e],u)}}})}if(i.length&&l.length){var u=d3.extent(i),d=d3.extent(l),c=d3.max(o),p=d3.max(s);t.zoom.viewport=[[u[0]-c,d[0]-p],[u[1]+c,d[1]+p]]}t.g.data_focus.selectAll("path").style("stroke-width",2*t.data.stroke.width),t.dev.value&&d3plus.console.timeEnd("drawing focus elements")}else t.zoom.viewport=null}},{}],226:[function(){d3plus.draw.steps=function(e){var t=[],a=e.type.value,n=e.format.locale.value,r=n.message.ui,i=n.message.draw,l=["data","attrs","coords","nodes","edges"];if(l.forEach(function(a){!e[a].loaded&&e[a].url&&t.push({"function":function(e,t){d3plus.data.url(e,a,t)},message:n.message.loading,wait:!0})}),e.draw.update){var o=n.visualization[a].toLowerCase(),s=d3plus.visualization[a].setup,u=d3plus.visualization[a].requirements,d=d3plus.string.format(n.message.initializing,o),c=n.message.data;"function"==typeof s&&t.push({"function":function(e){if(e.dev.value){var t="running "+o+" setup";d3plus.console.time(t)}s(e),e.dev.value&&d3plus.console.timeEnd(t)},message:d}),e.container.changed&&t.push({"function":d3plus.draw.enter,message:d}),a in e.g.apps||t.push({"function":function(e){if(e.dev.value){var t="creating "+o+" group";d3plus.console.time(t)}e.g.apps[a]=e.g.app.selectAll("g#"+a).data([a]),e.g.apps[a].enter().append("g").attr("id",a).attr("opacity",0),e.dev.value&&d3plus.console.timeEnd(t)},message:d}),e.data.changed&&t.push({"function":function(e){e.data.cache={},delete e.nodes.restricted,delete e.edges.restricted,d3plus.data.keys(e,"data")},message:c}),e.attrs.changed&&t.push({"function":function(e){d3plus.data.keys(e,"attrs")},message:c}),t.push({"function":function(e){if(e.color.changed&&e.color.value){if(e.dev.value){var t="determining color type";d3plus.console.time(t)}var a=e.color.value;d3plus.object.validate(a)&&(a=a[e.id.value]?a[e.id.value]:a[d3.keys(a)[0]]),e.color.type=e.data.keys&&a in e.data.keys?e.data.keys[a]:e.attrs.keys&&a in e.attrs.keys?e.attrs.keys[a]:void 0,e.dev.value&&d3plus.console.timeEnd(t)}else e.color.value||(e.color.type="keys"in e.data?e.data.keys[e.id.value]:!1)},message:c}),u.indexOf("edges")>=0&&e.edges.value&&(!e.edges.linked||e.edges.changed)&&t.push({"function":d3plus.data.edges,message:c}),u.indexOf("nodes")>=0&&e.edges.value&&(!e.nodes.positions||e.nodes.changed)&&t.push({"function":d3plus.data.nodes,message:c}),(e.data.changed||e.time.changed||e.id.changed)&&t.push({"function":d3plus.data.format,message:c}),t.push({"function":function(e){var t=e.time.fixed.value?null:["all"];if(e.dev.value){var a=t?"fetching pool data":"fetching data";d3plus.console.time(a)}e.data.pool=d3plus.data.fetch(e,t),e.dev.value&&d3plus.console.timeEnd(a),t?(e.dev.value&&d3plus.console.time("fetching data for current year"),e.data.app=d3plus.data.fetch(e),e.dev.value&&d3plus.console.timeEnd("fetching data for current year")):e.data.app=e.data.pool},message:c}),t.push({check:function(e){return e.color.value&&"number"===e.color.type&&e.id.nesting.indexOf(e.color.value)<0&&e.data.value&&e.color.value!=e.id.value&&(e.color.changed||e.data.changed||e.depth.changed||e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed))},"function":d3plus.data.color,message:c,otherwise:function(e){"number"!==e.color.type&&(e.color.scale=null)}})}return t.push({"function":function(e){if(e.dev.value){var t=e.format.locale.value.message.tooltipReset;d3plus.console.time(t)}e.type.previous&&a!==e.type.previous&&d3plus.tooltip.remove(e.type.previous),d3plus.tooltip.remove(a),e.dev.value&&d3plus.console.timeEnd(t)},message:r}),t.push({"function":function(e){if(e.margin.process(),d3plus.ui.titles(e),e.draw.update)d3plus.ui.drawer(e),d3plus.ui.timeline(e),d3plus.ui.legend(e);else{e.dev.value&&d3plus.console.time("calculating margins");var t=e.container.value.select("div#d3plus_drawer").node().offsetHeight,a=e.g.timeline.node().getBBox();a=e.timeline.value?a.height+a.y:0;var n=e.g.legend.node().getBBox();n=e.legend.value?n.height+n.y:0,e.margin.bottom+=t+a+n,e.dev.value&&d3plus.console.timeEnd("calculating margins")}d3plus.ui.history(e),e.height.viz-=e.margin.top+e.margin.bottom,e.width.viz-=e.margin.left+e.margin.right},message:r}),t.push({"function":d3plus.ui.focus,message:r}),t.push({"function":d3plus.draw.update,message:i}),e.draw.update&&t.push({"function":[d3plus.draw.errors,d3plus.draw.app,d3plus.shape.draw],message:i}),t.push({"function":[d3plus.draw.focus,d3plus.draw.finish],message:i}),t}},{}],227:[function(){d3plus.draw.update=function(e){e.dev.value&&d3plus.console.time("updating SVG elements"),e.draw.timing?(e.container.value.transition().duration(e.draw.timing).style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value),e.g.bg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value),e.g.clipping.select("rect").transition().duration(e.draw.timing).attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.transition().duration(e.draw.timing).attr("transform","translate("+e.margin.left+","+e.margin.top+")")):(e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.attr("width",e.width.value).attr("height",e.height.value),e.g.bg.attr("width",e.width.value).attr("height",e.height.value),e.g.clipping.select("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.attr("transform","translate("+e.margin.left+","+e.margin.top+")")),e.dev.value&&d3plus.console.timeEnd("updating SVG elements")
}},{}],228:[function(){d3plus.shape.area=function(e,t,a){var n=d3.svg.area().x(function(e){return e.d3plus.x}).y0(function(e){return e.d3plus.y0}).y1(function(e){return e.d3plus.y}).interpolate(e.shape.interpolate.value);a.append("path").attr("class","d3plus_data").attr("d",function(e){return n(e.values)}).call(d3plus.shape.style,e),t.selectAll("path.d3plus_data").data(function(t){if(e.labels.value){var a=[],n=[],r=d3plus.variable.text(e,t);t.values.forEach(function(e){a.push([e.d3plus.x,e.d3plus.y]),n.push([e.d3plus.x,e.d3plus.y0])}),a=a.concat(n.reverse());var i={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value};if(r.length)var l=d3plus.font.sizes(r[0],i),o=l[0].width/l[0].height;else var o=null;var s=d3plus.geom.largestRect(a,{angle:d3.range(-70,71,1),aspectRatio:o,tolerance:0})[0];if(s){var u={w:Math.floor(s.width),h:Math.floor(s.height),x:Math.floor(s.cx),y:Math.floor(s.cy),angle:-1*s.angle,padding:2,names:r};u.translate=0!==s.angle?{x:u.x,y:u.y}:!1,u.w>=10&&u.h>=10&&(t.d3plus_label=u)}}return[t]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).attr("d",function(e){return n(e.values)}).call(d3plus.shape.style,e):t.selectAll("path.d3plus_data").attr("d",function(e){return n(e.values)}).call(d3plus.shape.style,e)}},{}],229:[function(){d3plus.shape.color=function(e,t){var a=e.d3plus?e.d3plus.shapeType:t.shape.value;if("line"==t.shape.value)return"circle"==a?d3plus.variable.color(t,e):"none";if("area"==t.shape.value||"active"==a)return d3plus.variable.color(t,e);if("temp"==a)return"url(#d3plus_hatch_"+e.d3plus.id+")";if("active"==a)return d3plus.variable.color(t,e);if(e.d3plus.static)return d3plus.color.lighter(d3plus.variable.color(t,e),.75);var n=t.active.value?d3plus.variable.value(t,e,t.active.value):e.d3plus.active,r=t.temp.value?d3plus.variable.value(t,e,t.temp.value):e.d3plus.temp,i=t.total.value?d3plus.variable.value(t,e,t.total.value):e.d3plus.total;return!t.active.value&&!t.temp.value||n===!0||n&&i&&n==i&&!r||n&&!i?d3plus.variable.color(t,e):t.active.spotlight.value?"#eee":d3plus.color.lighter(d3plus.variable.color(t,e),.75)}},{}],230:[function(){d3plus.shape.coordinates=function(e,t,a){var n=d3.geo[e.coords.projection.value]().center(e.coords.center);e.zoom.scale||(e.zoom.scale=1),e.zoom.area=1/e.zoom.scale/e.zoom.scale,e.path=d3.geo.path().projection(n),a.append("path").attr("id",function(e){return e.id}).attr("class","d3plus_data").attr("d",e.path).call(d3plus.shape.style,e),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(d3plus.shape.style,e):t.selectAll("path.d3plus_data").call(d3plus.shape.style,e);var r=e.old_height!=e.height.viz||e.height.changed||e.old_width!=e.width.viz||e.width.changed;e.old_height=e.height.viz,e.old_width=e.width.viz,e.coords.changed||r||e.coords.mute.changed||e.coords.solo.changed?(e.zoom.bounds=null,e.zoom.coords={},e.zoom.labels={},t.each(function(t){var a=e.path.bounds(t),n=[];t.geometry.coordinates=t.geometry.coordinates.filter(function(a,r){var i=d3plus.util.copy(t);i.geometry.coordinates=[i.geometry.coordinates[r]];var l=e.path.area(i);return l>=e.coords.threshold?(n.push(l),!0):!1}),n.sort(function(e,t){return e-t});var r=d3plus.util.copy(t),i=d3plus.util.copy(t);r.geometry.coordinates=r.geometry.coordinates.filter(function(a,r){var l=d3plus.util.copy(t);l.geometry.coordinates=[l.geometry.coordinates[r]];var o=e.path.area(l);return o==n[n.length-1]&&(i.geometry.coordinates=l.geometry.coordinates),o>=d3.quantile(n,.9)}),e.zoom.coords[t.d3plus.id]=r;var l=i.geometry.coordinates[0];if(l&&"MultiPolygon"===i.geometry.type&&(l=l[0],i.geometry.coordinates[0]=l,i.geometry.type="Polygon"),l){for(var o=e.path(i).split("M")[1].split("Z")[0].split("L"),s=0;s<o.length;s++)o[s]=o[s].split(","),o[s][0]=parseFloat(o[s][0]),o[s][1]=parseFloat(o[s][1]);var u={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value},d=d3plus.variable.text(e,t);if(d.length&&1===d[0].split(" ").length)var c=d3plus.font.sizes(d[0],u)[0],p=c.width/c.height;else var p=null;var f=d3plus.geom.largestRect(o,{angle:0,aspectRatio:p})[0];if(f){var v={anchor:"middle",valign:"center",group:e.g.labels,h:Math.floor(f.height),w:Math.floor(f.width),x:Math.floor(f.cx),y:Math.floor(f.cy),names:d};e.zoom.labels[t.d3plus.id]=v}else delete e.zoom.labels[t.d3plus.id]}else delete e.zoom.labels[t.d3plus.id];e.zoom.bounds?(e.zoom.bounds[0][0]>a[0][0]&&(e.zoom.bounds[0][0]=a[0][0]),e.zoom.bounds[0][1]>a[0][1]&&(e.zoom.bounds[0][1]=a[0][1]),e.zoom.bounds[1][0]<a[1][0]&&(e.zoom.bounds[1][0]=a[1][0]),e.zoom.bounds[1][1]<a[1][1]&&(e.zoom.bounds[1][1]=a[1][1])):e.zoom.bounds=a})):e.focus.value||(e.zoom.viewport=!1)}},{}],231:[function(){d3plus.shape.donut=function(e,t,a,n){function r(t,a,n,r){if(!a)var a=0;if("number"!=typeof n)var n=void 0;if("number"!=typeof r)var r=void 0;t.attrTween("d",function(t){if(void 0==n)var l=t.d3plus.r?t.d3plus.r:d3.max([t.d3plus.width,t.d3plus.height]);else var l=n;if(void 0==r)var o=t.d3plus.a[t.d3plus.shapeType];else var o=r;e.arcs[t.d3plus.shapeType][t.d3plus.id]||(e.arcs[t.d3plus.shapeType][t.d3plus.id]={r:0},e.arcs[t.d3plus.shapeType][t.d3plus.id].a="donut"==t.d3plus.shapeType?2*Math.PI:0);var s=d3.interpolate(e.arcs[t.d3plus.shapeType][t.d3plus.id].r,l+a),u=d3.interpolate(e.arcs[t.d3plus.shapeType][t.d3plus.id].a,o);return function(a){return e.arcs[t.d3plus.shapeType][t.d3plus.id].r=s(a),e.arcs[t.d3plus.shapeType][t.d3plus.id].a=u(a),i(t)}})}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var i=d3.svg.arc().startAngle(0).endAngle(function(t){var a=e.arcs[t.d3plus.shapeType][t.d3plus.id].a;return a>2*Math.PI?2*Math.PI:a}).innerRadius(function(t){if("donut"!=shape||t.d3plus.static)return 0;var a=e.arcs[t.d3plus.shapeType][t.d3plus.id].r;return a*e.data.donut.size}).outerRadius(function(t){var a=e.arcs[t.d3plus.shapeType][t.d3plus.id].r;return"donut"!=t.d3plus.shapeType?2*a:a});n.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(r,0,0).each("end",function(t){delete e.arcs[t.d3plus.shapeType][t.d3plus.id]}),t.selectAll("path.d3plus_data").data(function(e){return[e]}).transition().duration(e.draw.timing).call(r).call(d3plus.shape.style,e),a.append("path").attr("class","d3plus_data").transition().duration(0).call(r,0,0).call(d3plus.shape.style,e)}},{}],232:[function(){d3plus.shape.draw=function(e){function t(t){var a=t.d3plus.depth?t.d3plus.depth:e.depth.value;return t.d3plus.id=d3plus.variable.value(e,t,e.id.nesting[a]),t.d3plus.id+="_"+a+"_"+s,e.axes.values.forEach(function(a){"continuous"==e[a].scale.value&&(t.d3plus.id+="_"+d3plus.variable.value(e,t,e[a].value))}),t.d3plus.id=d3plus.string.strip(t.d3plus.id),t}function a(t,a){var n=d3plus.visualization[e.type.value].scale;if(a&&n&&n[e.shape.value])var r=n[e.shape.value];else if(a&&n&&"number"==typeof n)var r=n;else var r=1;t.attr("transform",function(e){return["line","area","coordinates"].indexOf(s)<0?"translate("+e.d3plus.x+","+e.d3plus.y+")scale("+r+")":"scale("+r+")"})}function n(t){if(t&&e.g.edges.selectAll("g").size()>0){e.g.edges.selectAll("g").each(function(a){var n=t[e.id.value],r=a[e.edges.source][e.id.value],i=a[e.edges.target][e.id.value];if(r==n||i==n){var l=e.g.edge_hover.node().appendChild(this.cloneNode(!0));d3.select(l).datum(a).attr("opacity",1).selectAll("line, path").datum(a)}});var a=e.edges.arrows.value;e.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",e.color.primary).style("stroke-width",function(){return e.edges.size?d3.select(this).style("stroke-width"):2*e.data.stroke.width}).attr("marker-start",function(t){var n=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var r="_"+t.d3plus.bucket;else var r="";return"source"==n&&a?"url(#d3plus_edge_marker_highlight"+r+")":"none"}).attr("marker-end",function(t){var n=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var r="_"+t.d3plus.bucket;else var r="";return"target"==n&&a?"url(#d3plus_edge_marker_highlight"+r+")":"none"}),e.g.edge_hover.selectAll("text").style("fill",e.color.primary),e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",1),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",.5)):e.g.edge_hover.attr("opacity",1)}else e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",1)):e.g.edge_hover.selectAll("*").remove()}var r=e.returned.nodes||[],i=e.returned.edges||[];e.draw.timing=r.length<e.data.large&&i.length<e.edges.large?e.timing.transitions:0;var l={area:"area",circle:"rect",donut:"donut",line:"line",square:"rect",coordinates:"coordinates"},o={};r.forEach(function(t){if(t.d3plus)if(t.d3plus.shape){var a=t.d3plus.shape;t.d3plus.shapeType=a}else{var a=l[e.shape.value];t.d3plus.shapeType=a}else var a=l[e.shape.value];o[a]||(o[a]=[]),o[a].push(t)});for(s in l)l[s]in o&&0!==d3.keys(o).length||(e.draw.timing?e.g.data.selectAll("g.d3plus_"+l[s]).transition().duration(e.draw.timing).attr("opacity",0).remove():e.g.data.selectAll("g.d3plus_"+l[s]).remove());for(var s in o){var u=e.g.data.selectAll("g.d3plus_"+s).data(o[s],function(a){if(a.d3plus||(a.d3plus={}),"coordinates"===s)return a.d3plus.id=a.id,a.id;if(!a.d3plus.id)if(a.values)a.values.forEach(function(e){e=t(e),e.d3plus.shapeType="circle"}),a.d3plus.id=a.key;else if(a=t(a),!a.d3plus.a){a.d3plus.a={donut:2*Math.PI};var n=e.active.value?a.d3plus[e.active.value]:a.d3plus.active,r=e.temp.value?a.d3plus[e.temp.value]:a.d3plus.temp,i=e.total.value?a.d3plus[e.total.value]:a.d3plus.total;i&&(a.d3plus.a.active=n?n/i*2*Math.PI:0,a.d3plus.a.temp=r?r/i*2*Math.PI+a.d3plus.a.active:0)}return a.d3plus?a.d3plus.id:!1});if(e.draw.timing)var d=u.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();else var d=u.exit().remove();e.draw.timing?u.transition().duration(e.draw.timing).call(a):u.call(a);var c=e.draw.timing?0:1,p=u.enter().append("g").attr("class","d3plus_"+s).attr("opacity",c).call(a);e.draw.timing&&p.transition().duration(e.draw.timing).attr("opacity",1),u.order(),e.dev.value&&d3plus.console.time('drawing "'+s+'" shapes'),d3plus.shape[s](e,u,p,d,a),e.dev.value&&d3plus.console.timeEnd('drawing "'+s+'" shapes'),["rect","donut"].indexOf(s)>=0&&d3plus.visualization[e.type.value].fill&&(e.dev.value&&d3plus.console.time('filling "'+s+'" shapes'),d3plus.shape.fill(e,u,p,d,a),e.dev.value&&d3plus.console.timeEnd('filling "'+s+'" shapes'))}n(),d3plus.touch?e.g.data.selectAll("g").on(d3plus.evt.over,e.zoom.touchEvent).on(d3plus.evt.move,e.zoom.touchEvent).on(d3plus.evt.out,e.zoom.touchEvent):e.g.data.selectAll("g").on(d3plus.evt.over,function(t){if(!(e.draw.frozen||t.d3plus&&t.d3plus.static)){if(d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).call(a,!0),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",1),e.covered=!1,["area","line"].indexOf(e.shape.value)>=0||e.focus.value!=t[e.id.value]){if(e.continuous_axis){var r="x"===e.continuous_axis?0:1,i=d3.mouse(e.container.value.node())[r],l=d3plus.util.uniques(t.values,function(t){return t.d3plus[e.continuous_axis]}),o=d3plus.util.closest(l,i);t.d3plus_data=t.values[l.indexOf(o)],t.d3plus=t.values[l.indexOf(o)].d3plus}var s=t.d3plus_data?t.d3plus_data:t;d3plus.tooltip.app({vars:e,data:s})}"function"==typeof e.mouse?e.mouse(t):e.mouse[d3plus.evt.over]&&e.mouse[d3plus.evt.over](t),n(t)}}).on(d3plus.evt.move,function(t){if(!(e.draw.frozen||t.d3plus&&t.d3plus.static)){if(e.covered=!1,["area","line"].indexOf(e.shape.value)>=0||"follow"==d3plus.visualization[e.type.value].tooltip&&e.focus.value!=t[e.id.value]){if(e.continuous_axis){var a="x"===e.continuous_axis?0:1,n=d3.mouse(e.container.value.node())[a],r=d3plus.util.uniques(t.values,function(t){return t.d3plus[e.continuous_axis]}),i=d3plus.util.closest(r,n);t.d3plus_data=t.values[r.indexOf(i)],t.d3plus=t.values[r.indexOf(i)].d3plus}var l=t.d3plus_data?t.d3plus_data:t;d3plus.tooltip.app({vars:e,data:l})}"function"==typeof e.mouse?e.mouse(t):e.mouse[d3plus.evt.move]&&e.mouse[d3plus.evt.move](t)}}).on(d3plus.evt.out,function(t){var r=d3plus.util.child(this,d3.event.toElement);r||e.draw.frozen||t.d3plus&&t.d3plus.static||(d3.select(this).transition().duration(e.timing.mouseevents).call(a),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),e.covered||d3plus.tooltip.remove(e.type.value),"function"==typeof e.mouse?e.mouse(t):e.mouse[d3plus.evt.out]&&e.mouse[d3plus.evt.out](t),n())}),e.g.data.selectAll("g").on(d3plus.evt.click,function(t){if(!(e.draw.frozen||t.d3plus&&t.d3plus.static)){"function"==typeof e.mouse?e.mouse(t):e.mouse[d3plus.evt.out]?e.mouse[d3plus.evt.out](t):e.mouse[d3plus.evt.click]&&e.mouse[d3plus.evt.click](t);var r=e.zoom.direction(t.d3plus_data||t),i=e.id.solo.value,l=d3plus.variable.text(e,t)[0],o=d3plus.color.legible(d3plus.variable.color(e,t)),s=e.title.sub.value||!1,u=e.title.sub.font.color,d=e.title.total.font.color;if(t.d3plus.threshold&&t.d3plus.merged&&e.zoom.value)e.history.states.push(function(){e.self.id({solo:i}).title({sub:{font:{color:u},value:s},total:{font:{color:d}}}).draw()}),e.self.id({solo:d3plus.util.uniques(t.d3plus.merged,e.id.value)}).title({sub:{font:{color:o},value:l},total:{font:{color:o}}}).draw();else if(1===r&&e.zoom.value){var c=d3plus.variable.value(e,t,e.id.value);e.history.states.push(function(){e.self.depth(e.depth.value-1).id({solo:i}).title({sub:{font:{color:u},value:s},total:{font:{color:d}}}).draw()}),e.self.depth(e.depth.value+1).id({solo:[c]}).title({sub:{font:{color:o},value:l},total:{font:{color:o}}}).draw()}else if(-1===r&&e.zoom.value)e.history.back();else if(d3plus.visualization[e.type.value].zoom&&e.zoom.value)n(),d3.select(this).transition().duration(e.timing.mouseevents).call(a),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),d3plus.tooltip.remove(e.type.value),e.draw.update=!1,t&&t[e.id.value]!=e.focus.value?e.self.focus(t[e.id.value]).draw():e.self.focus(!1).draw();else if(t[e.id.value]!=e.focus.value){n();var p=t.d3plus_data?t.d3plus_data:t;d3plus.tooltip.app({vars:e,data:p})}}})}},{}],233:[function(){d3plus.shape.edges=function(e){function t(t){var a=1==e.edges.opacity?e.edges.opacity:0;t.attr("opacity",a).style("stroke-width",0).style("stroke",e.background.value).style("fill","none")}function a(t){var a=e.edges.arrows.value;t.style("stroke-width",function(t){return e.edges.scale(t[e.edges.size])}).style("stroke",e.edges.color).attr("opacity",e.edges.opacity).attr("marker-start",function(t){var n=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var r="_"+t.d3plus.bucket;else var r="";return"source"==n&&a?"url(#d3plus_edge_marker_default"+r+")":"none"}).attr("marker-end",function(t){var n=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var r="_"+t.d3plus.bucket;else var r="";return"target"==n&&a?"url(#d3plus_edge_marker_default"+r+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function n(t){t.attr("x1",function(t){return t[e.edges.source].d3plus.dx}).attr("y1",function(t){return t[e.edges.source].d3plus.dy}).attr("x2",function(t){return t[e.edges.target].d3plus.dx}).attr("y2",function(t){return t[e.edges.target].d3plus.dy})}function r(t){t.attr("d",function(t){if(t[e.edges.source].d3plus.dr){var a=t[e.edges.source].d3plus.a,n=t[e.edges.source].d3plus.dr,r=t[e.edges.target].d3plus.a,i=t[e.edges.target].d3plus.dr,l={};return l[e.edges.source]={x:a,y:n},l[e.edges.target]={x:r,y:i},p(l)}var a=t[e.edges.source].d3plus.dx,n=t[e.edges.source].d3plus.dy,r=t[e.edges.target].d3plus.dx,i=t[e.edges.target].d3plus.dy,l={};return l[e.edges.source]={x:a,y:n},l[e.edges.target]={x:r,y:i},c(l)}).attr("transform",function(e){if(e.d3plus&&e.d3plus.translate){var t=e.d3plus.translate.x||0,a=e.d3plus.translate.y||0;return"translate("+t+","+a+")"}})}function i(t){if(delete t.d3plus_label,e.g.edges.selectAll("line, path").size()<e.edges.large&&e.edges.label&&t[e.edges.label]){if("spline"in t.d3plus)var a=this.getTotalLength(),n=this.getPointAtLength(a/2),r=this.getPointAtLength(a/2-.1*a),i=this.getPointAtLength(a/2+.1*a),l=Math.atan2(i.y-r.y,i.x-r.x),o=l*(180/Math.PI),s=(this.parentNode.getBBox(),.8*a),u=t.d3plus.translate.x+n.x,d=t.d3plus.translate.y+n.y,c={x:t.d3plus.translate.x+n.x,y:t.d3plus.translate.y+n.y};else{{this.getBBox()}start={x:t[e.edges.source].d3plus.dx,y:t[e.edges.source].d3plus.dy},end={x:t[e.edges.target].d3plus.dx,y:t[e.edges.target].d3plus.dy},xdiff=end.x-start.x,ydiff=end.y-start.y,n={x:end.x-xdiff/2,y:end.y-ydiff/2},l=Math.atan2(ydiff,xdiff),o=l*(180/Math.PI),a=Math.sqrt(xdiff*xdiff+ydiff*ydiff),s=a,u=n.x,d=n.y,c={x:n.x,y:n.y}}s+=2*e.labels.padding;var p=0;e.edges.arrows.value&&(p="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,p/=e.zoom.behavior.scaleExtent()[1],s-=2*p),(-90>o||o>90)&&(o-=180),s*e.zoom.behavior.scaleExtent()[0]>20&&(t.d3plus_label={x:u,y:d,translate:c,w:s,h:15+2*e.labels.padding,angle:o,anchor:"middle",valign:"center",color:e.edges.color,resize:!1,names:[e.format.value(t[e.edges.label])],background:1})}}var l=e.returned.edges||[],o=e.zoom.behavior.scaleExtent()[0];if("string"==typeof e.edges.size){var s=d3.extent(l,function(t){return t[e.edges.size]}),u=.6*d3.min(e.returned.nodes||[],function(e){return e.d3plus.r});e.edges.scale=d3.scale.sqrt().domain(s).range([e.edges.width,u*o])}else{var d="number"==typeof e.edges.size?e.edges.size:e.edges.width;e.edges.scale=function(){return d}}var c=d3.svg.diagonal(),p=d3.svg.diagonal().projection(function(e){var t=e.y,a=e.x;return[t*Math.cos(a),t*Math.sin(a)]}),f=e.edges.arrows.value?"string"==typeof e.edges.size?["default_0","default_1","default_2","highlight_0","highlight_1","highlight_2","focus_0","focus_1","focus_2"]:["default","highlight","focus"]:[];if("string"==typeof e.edges.size)for(var v=d3plus.util.buckets(e.edges.scale.range(),4),h=[],g=0;3>g;g++)h.push(v[g+1]+(v[1]-v[0])*(g+2));else var m="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,h="number"==typeof e.edges.size?e.edges.size/m:m;var y=e.defs.selectAll(".d3plus_edge_marker").data(f,String),b=function(t){t.attr("d",function(t){var a=t.split("_");if(2==a.length&&e.edges.scale){a=parseInt(a[1]);var n=h[a]}else var n=h;return"target"==e.edges.arrows.direction.value?"M 0,-"+n/2+" L "+.85*n+",0 L 0,"+n/2+" L 0,-"+n/2:"M 0,-"+n/2+" L -"+.85*n+",0 L 0,"+n/2+" L 0,-"+n/2}).attr("fill",function(t){var a=t.split("_")[0];return"default"==a?e.edges.color:"focus"==a?e.color.focus:e.color.primary}).attr("transform","scale("+1/o+")")};e.draw.timing?(y.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),y.select("path").transition().duration(e.draw.timing).attr("opacity",1).call(b)):(y.exit().remove(),y.select("path").attr("opacity",1).call(b));var x=e.draw.timing?0:1,w=y.enter().append("marker").attr("id",function(e){return"d3plus_edge_marker_"+e}).attr("class","d3plus_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",x).attr("vector-effect","non-scaling-stroke").call(b);e.draw.timing&&w.transition().duration(e.draw.timing).attr("opacity",1);var _="string"==typeof e.edges.size?d3plus.util.buckets(e.edges.scale.domain(),4):null,z=e.edges.arrows.direction.value,k=l.filter(function(t){if(!t.d3plus||t.d3plus&&t.d3plus.spline!==!0){if(t.d3plus||(t.d3plus={}),_){var a=t[e.edges.size];t.d3plus.bucket=a<_[1]?0:a<_[2]?1:2;var n=.85*h[t.d3plus.bucket]/o}else{delete t.d3plus.bucket;var n=.85*h/o}var r=t[e.edges.source],i=t[e.edges.target],l=Math.atan2(r.d3plus.y-i.d3plus.y,r.d3plus.x-i.d3plus.x),s="source"==z&&e.edges.arrows.value?r.d3plus.r+n:r.d3plus.r,u="target"==z&&e.edges.arrows.value?i.d3plus.r+n:i.d3plus.r,d=d3plus.util.offset(l,s,e.shape.value),c=d3plus.util.offset(l,u,e.shape.value);return r.d3plus.dx=r.d3plus.x-d.x,r.d3plus.dy=r.d3plus.y-d.y,i.d3plus.dx=i.d3plus.x+c.x,i.d3plus.dy=i.d3plus.y+c.y,!0}return!1}),A=e.g.edges.selectAll("g.d3plus_edge_line").data(k,function(t){return t.d3plus||(t.d3plus={}),t.d3plus.id=t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],t.d3plus.id}),E=l.filter(function(t){if(t.d3plus&&t.d3plus.spline){if(_){var a=t[e.edges.size];t.d3plus.bucket=a<_[1]?0:a<_[2]?1:2;var n=.85*h[t.d3plus.bucket]/o}else{delete t.d3plus.bucket;var n=.85*h/o}var r=t[e.edges.source],i=t[e.edges.target],l=2==r.d3plus.depth?-n:n,s=2==i.d3plus.depth?-n:n,u="source"==z&&e.edges.arrows.value?r.d3plus.r+l:r.d3plus.r,d="target"==z&&e.edges.arrows.value?i.d3plus.r+s:i.d3plus.r;return r.d3plus.dr=u,i.d3plus.dr=d,!0}return!1}),j=e.g.edges.selectAll("g.d3plus_edge_path").data(E,function(t){return t.d3plus||(t.d3plus={}),t.d3plus.id=t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],t.d3plus.id});e.draw.timing?(A.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),j.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),A.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),j.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),A.selectAll("line").data(function(e){return[e]}).transition().duration(e.draw.timing).call(n).call(a).each("end",i),j.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(r).call(a).each("end",i),A.enter().append("g").attr("class","d3plus_edge_line").append("line").call(n).call(t).transition().duration(e.draw.timing).call(a).each("end",i),j.enter().append("g").attr("class","d3plus_edge_path").append("path").call(r).call(t).transition().duration(e.draw.timing).call(a).each("end",i)):(A.exit().remove(),j.exit().remove(),A.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),j.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),A.selectAll("line").data(function(e){return[e]}).call(n).call(a).call(i),j.selectAll("path").data(function(e){return[e]}).call(r).call(a).call(i),A.enter().append("g").attr("class","d3plus_edge_line").append("line").call(n).call(t).call(a).call(i),j.enter().append("g").attr("class","d3plus_edge_path").append("path").call(r).call(t).call(a).call(i))}},{}],234:[function(){d3plus.shape.fill=function(e,t){function a(e){e.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function n(t,a){if(!a)var a=0;t.attr("x",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return-t/2-a/2}).attr("y",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return-t/2-a/2}).attr("width",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return t+a}).attr("height",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return t+a}).attr("rx",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,r=["circle","donut"].indexOf(e.shape.value)>=0;return r?(n+a)/2:0}).attr("ry",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height,r=["circle","donut"].indexOf(e.shape.value)>=0;return r?(n+a)/2:0}).attr("shape-rendering",function(){return["square"].indexOf(e.shape.value)>=0?e.shape.rendering.value:"auto"})}function r(t,a,n,r){if(!a)var a=0;if("number"!=typeof n)var n=void 0;if("number"!=typeof r)var r=void 0;t.attrTween("d",function(t){if(void 0==n)var l=t.d3plus.r?t.d3plus.r:d3.max([t.d3plus.width,t.d3plus.height]);else var l=n;if(void 0==r)var o=t.d3plus.a[t.d3plus.shapeType];else var o=r;e.arcs[t.d3plus.shapeType][t.d3plus.id]||(e.arcs[t.d3plus.shapeType][t.d3plus.id]={r:0},e.arcs[t.d3plus.shapeType][t.d3plus.id].a="donut"==t.d3plus.shapeType?2*Math.PI:0);var s=d3.interpolate(e.arcs[t.d3plus.shapeType][t.d3plus.id].r,l+a),u=d3.interpolate(e.arcs[t.d3plus.shapeType][t.d3plus.id].a,o);return function(a){return e.arcs[t.d3plus.shapeType][t.d3plus.id].r=s(a),e.arcs[t.d3plus.shapeType][t.d3plus.id].a=u(a),i(t)}})}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var i=d3.svg.arc().startAngle(0).endAngle(function(t){var a=e.arcs[t.d3plus.shapeType][t.d3plus.id].a;return a>2*Math.PI?2*Math.PI:a}).innerRadius(function(t){if("donut"!=shape||t.d3plus.static)return 0;var a=e.arcs[t.d3plus.shapeType][t.d3plus.id].r;return a*e.data.donut.size}).outerRadius(function(t){var a=e.arcs[t.d3plus.shapeType][t.d3plus.id].r;return"donut"!=t.d3plus.shapeType?2*a:a});t.each(function(t){function i(t){t.attr("stroke",d).attr("stroke-width",1).attr("shape-rendering",e.shape.rendering.value)}var l=e.active.value?t.d3plus[e.active.value]:t.d3plus.active,o=e.temp.value?t.d3plus[e.temp.value]:t.d3plus.temp,s=e.total.value?t.d3plus[e.total.value]:t.d3plus.total,u=d3.select(this),d=d3plus.variable.color(e,t),c=[],p=[];if(s&&d3plus.visualization[e.type.value].fill){if(o){var f=d3plus.util.copy(t);f.d3plus.shapeType="temp",c.push(f),p=["temp"]}if(l&&(s>l||o)){var f=d3plus.util.copy(t);f.d3plus.shapeType="active",c.push(f)}}var v=e.defs.selectAll("pattern#d3plus_hatch_"+t.d3plus.id).data(p);e.draw.timing?(v.selectAll("rect").transition().duration(e.draw.timing).style("fill",d),v.selectAll("line").transition().duration(e.draw.timing).style("stroke",d)):(v.selectAll("rect").style("fill",d),v.selectAll("line").style("stroke",d));var h=v.enter().append("pattern").attr("id","d3plus_hatch_"+t.d3plus.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");h.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",d).attr("fill-opacity",.25),h.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(i),h.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(i),h.append("line").attr("x1","9").attr("x2","11").attr("y1","-1").attr("y2","1").call(i);var g=c.length?[t]:[],m=u.selectAll("#d3plus_clip_"+t.d3plus.id).data(g);m.enter().insert("clipPath",".d3plus_mouse").attr("id","d3plus_clip_"+t.d3plus.id).append("rect").attr("class","d3plus_clipping").call(a),e.draw.timing?(m.selectAll("rect").transition().duration(e.draw.timing).call(n),m.exit().transition().delay(e.draw.timing).remove()):(m.selectAll("rect").call(n),m.exit().remove());var y=u.selectAll("path.d3plus_fill").data(c);y.transition().duration(e.draw.timing).call(d3plus.shape.style,e).call(r),y.enter().insert("path","rect.d3plus_mouse").attr("class","d3plus_fill").attr("clip-path","url(#d3plus_clip_"+t.d3plus.id+")").transition().duration(0).call(r,0,void 0,0).call(d3plus.shape.style,e).transition().duration(e.draw.timing).call(r),y.exit().transition().duration(e.draw.timing).call(r,0,void 0,0).remove()})}},{}],235:[function(){d3plus.shape.labels=function(e,t){var a=e.zoom.behavior.scaleExtent(),n=e.g[t].selectAll("g"),r=function(t){t.attr("opacity",function(t){if(!t)var t={scale:a[1]};var n=parseFloat(d3.select(this).attr("font-size"),10);return t.visible=n/t.scale*e.zoom.scale>=7,t.visible?1:0})};if(remove=function(t){e.draw.timing?t.transition().duration(e.draw.timing).attr("opacity",0).remove():t.remove()},style=function(t,n){function r(t){if("circle"===t.shape)return"0px";var n=t.anchor||e.labels.align,r="tspan"===this.tagName.toLowerCase(),i=r?"d3plus_share"==this.parentNode.className.baseVal:"d3plus_share"==this.className.baseVal,l=d3.select(this).node().getComputedTextLength()/a[1];if("middle"==n||i)var o=t.x-l/2;else if("end"==n&&!d3plus.rtl||"start"==n&&d3plus.rtl)var o=t.x+(t.w-t.padding)/2-l;else var o=t.x-(t.w-t.padding)/2;if(r){var s=this.getComputedTextLength()/a[1];"middle"==n?d3plus.rtl?o-=(l-s)/2:o+=(l-s)/2:"end"==n&&(d3plus.rtl?o-=l-s:o+=l-s)}return d3plus.rtl&&(o+=l),o*a[1]}function i(t){if(d3.select(this).select("tspan").empty())return 0;var n=e.labels.align,r=d3.select(this).node().getBBox().height/a[1],i=parseFloat(d3.select(this).style("font-size"),10)/5/a[1];if("d3plus_share"==this.className.baseVal){var l=d3.select(this.parentNode).datum(),o=l.d3plus.r?2*l.d3plus.r:l.d3plus.height;if(o/=a[1],"end"==n)var s=t.y-o/2+i/2;else var s=t.y+o/2-r-i/2}else if("circle"===t.shape||"middle"===n||"center"===t.valign)var s=t.y-r/2-i/2;else if("end"==n)var s=t.y+(t.h-t.padding)/2-r+i/2;else var s=t.y-(t.h-t.padding)/2-i;return s*a[1]}t.attr("font-weight",e.labels.font.weight).attr("font-family",e.labels.font.family.value).attr("text-anchor",function(e){return"circle"===e.shape?"middle":"start"}).attr("pointer-events",function(e){return e.mouse?"auto":"none"}).attr("fill",function(t){if(t.color)return t.color;var a=d3plus.shape.color(t.parent,e),n=d3plus.color.text(a),r=t.text?.15:1;return d3plus.color.mix(a,n,.2,r)}).attr("x",r).attr("y",i),n&&t.each(function(t){if(t.resize instanceof Array){t.resize[0],t.resize[1]}if(t.text){if(t.resize instanceof Array)var a=t.resize,n=!0;else var a=[9/t.scale,50*t.scale],n=t.resize;d3plus.textwrap().container(d3.select(this)).height(t.h*t.scale-t.padding).resize(n).size(a).text(e.format.value(100*t.text,"share")+"%").width(t.w*t.scale-t.padding).draw()}else{if("middle"!==e.labels.align&&t.share)var r=t.h-t.share-t.padding;else var r=t.h;if(t.resize instanceof Array)var a=t.resize,n=!0;else var a=[9/t.scale,40*t.scale],n=t.resize;var i=t.shape||"square";d3plus.textwrap().container(d3.select(this)).height(r*t.scale-t.padding).resize(n).size(a).shape(i).text(t.names).width(t.w*t.scale-t.padding).draw()}}).attr("x",r).attr("y",i),t.attr("transform",function(e){var t=e.angle||0,n=e.translate&&e.translate.x||0,r=e.translate&&e.translate.y||0;return"rotate("+t+","+n+","+r+")scale("+1/a[1]+")"}).selectAll("tspan").attr("x",r)},e.labels.value){if(e.dev.value){var i="drawing "+t+" labels";d3plus.console.time(i)}n.each(function(n){function i(t){var n="none"===e.background.value?"#ffffff":e.background.value,r="string"==typeof label.background?label.background:n,i=label.angle||0,l=label.translate?g.x+g.width/2:0,o=label.translate?g.y+g.height/2:0,s="scale("+1/a[1]+")rotate("+i+","+l+","+o+")";t.attr("fill",r).attr(g).attr("transform",s)}var l=n.d3plus&&"label"in n.d3plus&&!n.d3plus.label,o=n.d3plus&&"static"in n.d3plus&&n.d3plus.static;if(label=n.d3plus_label?n.d3plus_label:e.zoom.labels?e.zoom.labels[n.d3plus.id]:null,share=n.d3plus_share,names=label&&label.names?label.names:d3plus.variable.text(e,n),t=label&&"group"in label?label.group:d3.select(this),share_size=0,fill=d3plus.visualization[e.type.value].fill,label)if(["line","area"].indexOf(e.shape.value)>=0)var s=!0;else if(n&&"d3plus"in n)var u=e.active.value?n.d3plus[e.active.value]:n.d3plus.active,d=e.temp.value?n.d3plus[e.temp.value]:n.d3plus.temp,c=e.total.value?n.d3plus[e.total.value]:n.d3plus.total,s=!d&&!u||u==c;if(l||!s&&fill||o)delete n.d3plus_label,t.selectAll("text#d3plus_label_"+n.d3plus.id+", rect#d3plus_label_bg_"+n.d3plus.id).call(remove);else{if(share&&n.d3plus.share&&"middle"!=e.labels.align){share.resize=e.labels.resize.value===!1?!1:share&&"resize"in share?share.resize:!0,share.scale=share.resize?a[1]:a[0],share.padding=e.labels.padding/share.scale*2,share.text=n.d3plus.share,share.parent=n;var p=t.selectAll("text#d3plus_share_"+n.d3plus.id).data([share],function(e){return e.w+""+e.h+e.text});e.draw.timing?(p.transition().duration(e.draw.timing/2).call(style),p.enter().append("text").attr("id","d3plus_share_"+n.d3plus.id).attr("class","d3plus_share").attr("opacity",0).call(style,!0).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).attr("opacity",1)):(p.attr("opacity",1).call(style),p.enter().append("text").attr("id","d3plus_share_"+n.d3plus.id).attr("class","d3plus_share").attr("opacity",1).call(style,!0)),share_size=p.node().getBBox().height,p.exit().call(remove)}else t.selectAll("text.d3plus_share").call(remove);if(label){label.resize=e.labels.resize.value===!1?!1:label&&"resize"in label?label.resize:!0,label.scale=label.resize?a[1]:a[0];var f="number"==typeof label.padding?label.padding:e.labels.padding;label.padding=f/label.scale*2}if(label&&label.w*label.scale-label.padding>=20&&label.h*label.scale-label.padding>=10&&names.length){label.names=names,label.share=share_size,label.parent=n;
var p=t.selectAll("text#d3plus_label_"+n.d3plus.id).data([label],function(e){return e?e.w+"_"+e.h+"_"+e.x+"_"+e.y+"_"+e.names.join("_"):!1}),v=label.resize?void 0:e.labels.font.size*label.scale;if(e.draw.timing?(p.transition().duration(e.draw.timing/2).call(style),p.enter().append("text").attr("font-size",v).attr("id","d3plus_label_"+n.d3plus.id).attr("class","d3plus_label").attr("opacity",0).call(style,!0).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).call(r)):(p.attr("opacity",1).call(style),p.enter().append("text").attr("font-size",v).attr("id","d3plus_label_"+n.d3plus.id).attr("class","d3plus_label").call(style,!0).call(r)),p.exit().call(remove),0==p.size()||""==p.html())delete n.d3plus_label,t.selectAll("text#d3plus_label_"+n.d3plus.id+", rect#d3plus_label_bg_"+n.d3plus.id).call(remove);else{if(label.background){var h=["background"],g=p.node().getBBox();g.width+=e.labels.padding*a[0],g.height+=e.labels.padding*a[0],g.x-=e.labels.padding*a[0]/2,g.y-=e.labels.padding*a[0]/2}else var h=[],g={};var m=t.selectAll("rect#d3plus_label_bg_"+n.d3plus.id).data(h),y="number"==typeof label.background?label.background:.6;e.draw.timing?(m.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),m.transition().duration(e.draw.timing).attr("opacity",y).call(i),m.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+n.d3plus.id).attr("class","d3plus_label_bg").attr("opacity",0).call(i).transition().duration(e.draw.timing).attr("opacity",y)):(m.exit().remove(),m.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+n.d3plus.id).attr("class","d3plus_label_bg"),m.attr("opacity",y).call(i))}}else delete n.d3plus_label,t.selectAll("text#d3plus_label_"+n.d3plus.id+", rect#d3plus_label_bg_"+n.d3plus.id).call(remove)}}),e.dev.value&&d3plus.console.timeEnd(i)}else{if(e.dev.value){var i="removing "+t+" labels";d3plus.console.time(i)}n.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(remove),e.g.labels.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(remove),e.dev.value&&d3plus.console.timeEnd(i)}}},{}],236:[function(){d3plus.shape.line=function(e,t){function a(e){e.attr("x",function(e){return e.d3plus.x}).attr("y",function(e){return e.d3plus.y}).attr("width",0).attr("height",0)}function n(e,t){if(!t)var t=0;e.attr("x",function(e){var a=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return e.d3plus.x-(a/2+t/2)}).attr("y",function(e){var a=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return e.d3plus.y-(a/2+t/2)}).attr("width",function(e){var a=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return a+t}).attr("height",function(e){var a=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return a+t}).attr("rx",function(e){var a=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return(a+t)/2}).attr("ry",function(e){var a=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return(a+t)/2})}var r=d3.svg.line().x(function(e){return e.d3plus.x}).y(function(e){return e.d3plus.y}).interpolate(e.shape.interpolate.value),i=e.data.stroke.width;30>i&&(i=30),t.each(function(t){var l=!1,o=[],s=[],u=d3plus.util.copy(t),d=d3.select(this);u.values=[],t.values.forEach(function(a,n,r){s.push(a);var i=a[e[e.continuous_axis].value],d=e.tickValues[e.continuous_axis].indexOf(i);l===!1&&(l=d),n+l===d?(u.values.push(a),u.key+="_"+o.length):(n>0&&(o.push(u),u=d3plus.util.copy(t),u.values=[]),u.values.push(a),u.key+="_"+o.length,l++),n===r.length-1&&o.push(u)});var c=d.selectAll("path.d3plus_line").data(o,function(e){return e.key}),p=d.selectAll("rect.d3plus_anchor").data(s,function(e){return e.d3plus.id});e.draw.timing?(c.transition().duration(e.draw.timing).attr("d",function(e){return r(e.values)}).call(d3plus.shape.style,e),c.enter().append("path").attr("class","d3plus_line").attr("d",function(e){return r(e.values)}).call(d3plus.shape.style,e),p.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(e){return e.d3plus.id}).call(a).call(d3plus.shape.style,e),p.transition().duration(e.draw.timing).call(n).call(d3plus.shape.style,e),p.exit().transition().duration(e.draw.timing).call(a).remove()):(c.enter().append("path").attr("class","d3plus_line"),c.attr("d",function(e){return r(e.values)}).call(d3plus.shape.style,e),p.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(e){return e.d3plus.id}),p.call(n).call(d3plus.shape.style,e));var f=d.selectAll("path.d3plus_mouse").data(o,function(e){return e.key});f.enter().append("path").attr("class","d3plus_mouse").attr("d",function(e){return r(e.values)}).style("stroke","black").style("stroke-width",i).style("fill","none").style("stroke-linecap","round").attr("opacity",0),f.on(d3plus.evt.over,function(){e.draw.frozen||(d3.select(this.parentNode).selectAll("path.d3plus_line").transition().duration(e.timing.mouseevents).style("stroke-width",2*e.data.stroke.width),d3.select(this.parentNode).selectAll("rect").transition().duration(e.timing.mouseevents).style("stroke-width",2*e.data.stroke.width).call(n,2))}).on(d3plus.evt.out,function(){e.draw.frozen||(d3.select(this.parentNode).selectAll("path.d3plus_line").transition().duration(e.timing.mouseevents).style("stroke-width",e.data.stroke.width),d3.select(this.parentNode).selectAll("rect").transition().duration(e.timing.mouseevents).style("stroke-width",e.data.stroke.width).call(n))}),e.draw.timing?f.transition().duration(e.draw.timing).attr("d",function(e){return r(e.values)}).style("stroke-width",i):f.attr("d",function(e){return r(e.values)}).style("stroke-width",i),f.exit().remove()})}},{}],237:[function(){d3plus.shape.rect=function(e,t,a,n){function r(t){if(e.labels.value&&!t.d3plus.label){t.d3plus_label={w:0,h:0,x:0,y:0};var a=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;t.d3plus_share={w:a,h:d3.max([25,n/3]),x:0,y:0},t.d3plus_label.w=a,t.d3plus_label.h=n,t.d3plus_label.shape="circle"===e.shape.value?"circle":"square"}else t.d3plus.label&&(t.d3plus_label=t.d3plus.label);return[t]}function i(e){e.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function l(t){t.attr("x",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return-t/2}).attr("y",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return-t/2}).attr("width",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return t}).attr("height",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return t}).attr("rx",function(t){var a="circle"==e.shape.value,n=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return a?(n+2)/2:0}).attr("ry",function(t){var a="circle"==e.shape.value,n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return a?(n+2)/2:0}).attr("transform",function(e){return"rotate"in e.d3plus?"rotate("+e.d3plus.rotate+")":""}).attr("shape-rendering",function(t){return"square"!=e.shape.value||"rotate"in t.d3plus?"auto":e.shape.rendering.value})}e.draw.timing?a.append("rect").attr("class","d3plus_data").call(i).call(d3plus.shape.style,e):a.append("rect").attr("class","d3plus_data"),e.draw.timing?t.selectAll("rect.d3plus_data").data(r).transition().duration(e.draw.timing).call(l).call(d3plus.shape.style,e):t.selectAll("rect.d3plus_data").data(r).call(l).call(d3plus.shape.style,e),e.draw.timing&&n.selectAll("rect.d3plus_data").transition().duration(e.draw.timing).call(i)}},{}],238:[function(){d3plus.shape.style=function(e,t){e.attr("fill",function(e){return e.d3plus&&e.d3plus.spline?"none":d3plus.shape.color(e,t)}).style("stroke",function(e){if(e.values)var a=d3plus.shape.color(e.values[0],t);else var a=d3plus.shape.color(e,t);return d3.rgb(a).darker(.5)}).style("stroke-width",t.data.stroke.width).attr("opacity",t.data.opacity).attr("vector-effect","non-scaling-stroke")}},{}],239:[function(){d3plus.visualization.bubbles=function(e){function t(t){t.attr("x",function(e){return e.d3plus.x}).attr("y",function(e){return e.d3plus.y-e.r-e.d3plus.label_height-c}).attr("text-anchor","middle").attr("font-weight",e.labels.font.weight).attr("font-family",e.labels.font.family.value).attr("font-size","12px").style("fill",function(t){var a=d3plus.variable.color(e,t);return d3plus.color.legible(a)}).each(function(t){if(t.r>10&&a>10){var n=d3plus.variable.text(e,t,t.depth);d3plus.textwrap().container(d3.select(this)).height(a).text(n).width(o-2*c).draw()}}).attr("y",function(e){return e.d3plus.label_height=d3.select(this).node().getBBox().height,e.d3plus.y-e.r-e.d3plus.label_height-c}).selectAll("tspan").attr("x",function(e){return e.d3plus.x})}var a=e.labels.value&&!e.small?50:0;d3plus.array.sort(e.data.app,e.order.value||e.size.value,e.order.sort.value,e.color.value,e);var n=e.data.app.length;if(4>n)var r=n,i=1;else var l=e.width.viz/e.height.viz,r=Math.ceil(Math.sqrt(n*l)),i=Math.ceil(Math.sqrt(n/l));if(n>0)for(;(i-1)*r>=e.data.app.length;)i--;var o=e.width.viz/r,s=e.height.viz/i,u=d3.min(e.data.app,function(t){return e.size.value?d3plus.variable.value(e,t,e.size.value,null,"min"):0}),d=d3.max(e.data.app,function(t){return e.size.value?d3plus.variable.value(e,t,e.size.value):0}),c=5,p=20,f=d3.min([o,s])/2-2*c;f-=a;var v=e.size.scale.value.domain([u,d]).rangeRound([p,f]),h=d3.layout.pack().size([o-2*c,s-2*c-a]).value(function(t){return e.size.value?d3plus.variable.value(e,t,e.size.value):0}).padding(c).radius(function(e){return v(e)}),g=[],m=0;e.data.app.forEach(function(t,n){var i=h.nodes(t),l=o*n%e.width.viz,u=s*m;i.forEach(function(t){t.xoffset=l,t.yoffset=u+a,t.d3plus.static=t.depth<e.depth.value?!0:!1,t.d3plus.label=1==i.length?!1:!0}),g=g.concat(i),(n+1)%r==0&&m++});var y=f/d3.max(g,function(e){return e.r});g.forEach(function(e){e.x=(e.x-o/2)*y+o/2,e.d3plus.x=e.x+e.xoffset,e.y=(e.y-s/2)*y+s/2,e.d3plus.y=e.y+e.yoffset,e.r=e.r*y,e.d3plus.r=e.r}),g.sort(function(e,t){return e.depth-t.depth});var b=g.filter(function(e){return 0==e.depth}),x=e.group.selectAll("text.d3plus_bubble_label").data(b,function(t){return t.d3plus.label_height||(t.d3plus.label_height=0),t[e.id.nesting[t.depth]]});return x.enter().append("text").attr("class","d3plus_bubble_label").call(t).attr("opacity",0),x.transition().duration(e.draw.timing).call(t).attr("opacity",1),x.exit().attr("opacity",0).remove(),g},d3plus.visualization.bubbles.fill=!0,d3plus.visualization.bubbles.requirements=["data"],d3plus.visualization.bubbles.scale=1.05,d3plus.visualization.bubbles.shapes=["circle","donut"],d3plus.visualization.bubbles.tooltip="static"},{}],240:[function(){d3plus.visualization.chart=function(e){function t(t,a){t.attr("stroke",e.axes.ticks.color).attr("stroke-width",e.axes.ticks.width).attr("shape-rendering",e.shape.rendering.value).style("opacity",function(t){var n="log"==e[a].scale.value&&"1"!=t.toString().charAt(0);return n?.25:1})}function a(t,a){t.attr("x1",function(t){return"x"==a?e.x_scale(t):0}).attr("x2",function(t){return"x"==a?e.x_scale(t):o.width}).attr("y1",function(t){return"y"==a?e.y_scale(t):0}).attr("y2",function(t){return"y"==a?e.y_scale(t):o.height})}function n(e){return"number"==typeof e||"string"==typeof e?null:d3.keys(e)[0]}function r(e){if("number"==typeof e)return e;if("string"==typeof e)return parseFloat(e);var t=e[d3.keys(e)[0]];return"string"==typeof t?parseFloat(t):t}function i(t,a){t.attr("x1",function(e){return"y"==a?0:e.d3plus.x-o.margin.left}).attr("x2",function(e){return"y"==a?-5:e.d3plus.x-o.margin.left}).attr("y1",function(e){return"x"==a?o.height:e.d3plus.y-o.margin.top}).attr("y2",function(e){return"x"==a?o.height+5:e.d3plus.y-o.margin.top}).style("stroke",function(t){return d3plus.color.legible(d3plus.variable.color(e,t))}).style("stroke-width",e.data.stroke.width).attr("shape-rendering",e.shape.rendering.value)}function l(t){function a(e){e.attr("x2",function(e){var t="x"==e.axis?e.x:e.x-e.r;return t}).attr("y2",function(e){var t="y"==e.axis?e.y:e.y+e.r;return t}).style("stroke-width",0).attr("opacity",0)}var n=d3.event.type==d3plus.evt.click&&(e.tooltip.value.long||e.tooltip.html.value),r=[d3plus.evt.over,d3plus.evt.move].indexOf(d3.event.type)>=0;if(!n&&r&&"area"!=e.shape.value){if(t.data)var t=t.data;var i=[d3plus.util.copy(t.d3plus),d3plus.util.copy(t.d3plus)];i[0].axis="x",i[1].axis="y"}else var i=[];var l=M.selectAll("line.d3plus_axis_label").data(i,function(e){return e.axis+"_"+e.id});l.enter().append("line").attr("class","d3plus_axis_label").call(a).attr("x1",function(e){return"x"==e.axis?e.x:e.x-e.r}).attr("y1",function(e){return"y"==e.axis?e.y:e.y+e.r}).style("stroke",function(){return d3plus.variable.color(e,t)}).attr("shape-rendering",e.shape.rendering.value),l.transition().duration(e.timing.mouseevents).attr("class","d3plus_axis_label").attr("x2",function(t){return"x"==t.axis?t.x:o.margin.left-e.axes.ticks.size}).attr("y2",function(t){return"y"==t.axis?t.y:o.height+o.margin.top+e.axes.ticks.size}).style("stroke",function(){return d3plus.color.legible(d3plus.variable.color(e,t))}).style("stroke-width",e.data.stroke.width).attr("opacity",1),l.exit().transition().duration(e.timing.mouseevents).call(a).remove();var s=M.selectAll("text.d3plus_axis_label").data(i,function(e){return e.axis+"_"+e.id});s.enter().append("text").attr("class","d3plus_axis_label").attr("id",function(e){return e.axis+"_"+e.id}).text(function(a){var n=d3plus.variable.value(e,t.d3plus_data||t,e[a.axis].value);return e.format.value(n,e[a.axis].value)}).attr("x",function(t){return"x"==t.axis?t.x:o.margin.left-5-e.axes.ticks.size}).attr("y",function(t){return"y"==t.axis?t.y:o.height+o.margin.top+5+e.axes.ticks.size}).attr("dy",function(t){return"y"==t.axis?.35*e.axes.ticks.font.size:e.axes.ticks.font.size}).attr("text-anchor",function(e){return"y"==e.axis?"end":"middle"}).style("fill",function(){return d3plus.color.legible(d3plus.variable.color(e,t))}).style("font-size",e.axes.ticks.font.size).attr("font-family",e.axes.ticks.font.family.value).attr("font-weight",e.axes.ticks.font.weight).attr("opacity",0),s.transition().duration(e.timing.mouseevents).delay(e.timing.mouseevents).attr("opacity",1),s.exit().transition().duration(e.timing.mouseevents).attr("opacity",0).remove();var u=M.selectAll("rect.d3plus_axis_label").data(i,function(e){return e.axis+"_"+e.id});u.enter().insert("rect","text").attr("class","d3plus_axis_label").attr("x",function(t){var a=d3.select("text#"+t.axis+"_"+t.id).node().getBBox().width,n="x"==t.axis?t.x:o.margin.left-e.axes.ticks.size;return"x"==t.axis?n-a/2-5:n-a-10}).attr("y",function(t){var a=d3.select("text#"+t.axis+"_"+t.id).node().getBBox().height,n="y"==t.axis?t.y:o.height+o.margin.top;return"x"==t.axis?n+e.axes.ticks.size:n-a/2-5}).attr("width",function(e){var t=d3.select("text#"+e.axis+"_"+e.id).node().getBBox();return t.width+10}).attr("height",function(e){var t=d3.select("text#"+e.axis+"_"+e.id).node().getBBox();return t.height+10}).style("stroke",function(){return d3plus.color.legible(d3plus.variable.color(e,t))}).style("fill","white").style("stroke-width",e.data.stroke.width).attr("shape-rendering",e.shape.rendering.value).attr("opacity",0),u.transition().duration(e.timing.mouseevents).delay(e.timing.mouseevents).attr("opacity",1),u.exit().transition().duration(e.timing.mouseevents).attr("opacity",0).remove()}if(e.small)var o={margin:{top:0,right:0,bottom:0,left:0}};else var o={margin:{top:10,right:10,bottom:40,left:40}};if(o.width=e.width.viz-o.margin.left-o.margin.right,o.height=e.height.viz-o.margin.top-o.margin.bottom,e.data.app.length){if(e.tickValues||(e.tickValues={}),e.continuous_axis=null,e.opp_axis=null,e.stacked_axis=null,e.axes.values.forEach(function(t){if(e[t].stacked.value&&(e.stacked_axis=t),e.continuous_axis||"continuous"!=e[t].scale.value||(e.continuous_axis=t,e.opp_axis="x"==t?"y":"x"),e.data.changed||e.depth.changed||!e[t+"_range"]||e.time.fixed.value){if(e.dev.value&&d3plus.console.time("determining "+t+"-axis"),"share"==e[t].scale.value)e[t+"_range"]=[0,1],e.tickValues[t]=d3plus.util.buckets([0,1],11),e.stacked_axis=t;else if(e[t].stacked.value){if(e.time.fixed.value)var a=e.data.app;else var a=e.data.value;var n=d3.nest().key(function(t){return t[e.x.value]}).rollup(function(a){return d3.sum(a,function(a){return parseFloat(d3plus.variable.value(e,a,e[t].value))})}).entries(a);e[t+"_range"]=[0,d3.max(n,function(e){return e.values})]}else if(e[t].domain instanceof Array)e[t+"_range"]=e[t].domain,e.tickValues[t]=d3plus.util.uniques(e.data.app,e[t].value),e.tickValues[t]=e.tickValues[t].filter(function(a){return a>=e[t+"_range"][0]&&a<=e[t+"_range"][1]});else if(e.time.fixed.value)e[t+"_range"]=d3.extent(e.data.app,function(a){return parseFloat(d3plus.variable.value(e,a,e[t].value))}),e.tickValues[t]=d3plus.util.uniques(e.data.app,e[t].value);else{var r=[];for(id in e.id.nesting)r=r.concat(e.data.grouped[e.id.nesting[id]].all);e[t+"_range"]=d3.extent(r,function(a){return parseFloat(d3plus.variable.value(e,a,e[t].value))}),e.tickValues[t]=d3plus.util.uniques(e.data.value,e[t].value)}e[t+"_range"][0]==e[t+"_range"][1]&&(e[t+"_range"][0]-=1,e[t+"_range"][1]+=1),"y"==t&&(e.y_range=e.y_range.reverse()),e.dev.value&&d3plus.console.timeEnd("determining "+t+"-axis")}else e[t+"_range"]||(e[t+"_range"]=[-1,1])}),e.axes.mirror.value){var s=e.y_range.concat(e.x_range);e.x_range=d3.extent(s),e.y_range=d3.extent(s).reverse()}e.dev.value&&d3plus.console.time("removing data outside of axes");var u=e.data.app.length;if("share"==e.y.scale.value)var c=e.data.app;else var c=e.data.app.filter(function(t){var a=parseFloat(d3plus.variable.value(e,t,e.y.value)),n=null!==a&&a<=e.y_range[0]&&a>=e.y_range[1];if(n){var a=parseFloat(d3plus.variable.value(e,t,e.x.value));return null!==a&&a>=e.x_range[0]&&a<=e.x_range[1]}return!1});e.dev.value&&d3plus.console.timeEnd("removing data outside of axes");var p=u-c.length;if(p&&e.dev.value&&d3plus.console.log("removed "+p+" nodes"),c){if(e.dev.value&&d3plus.console.time("determining size scale"),e.size.value){if(e.time.fixed.value)var f=d3.extent(e.data.app,function(t){var a=d3plus.variable.value(e,t,e.size.value);return 0==a?null:a});else{var v=[];for(id in e.id.nesting)v=v.concat(e.data.grouped[e.id.nesting[id]].all);var f=d3.extent(v,function(t){var a=d3plus.variable.value(e,t,e.size.value);return 0==a?null:a})}f[0]&&f[1]||(f=[0,0])}else var f=[0,0];var h=Math.floor(d3.max([d3.min([o.width,o.height])/15,10])),g=10;if(f[0]==f[1])var g=h;var m=[g,h],y=e.size.scale.value.domain(f).rangeRound(m);e.dev.value&&d3plus.console.timeEnd("determining size scale")}e.axes.values.forEach(function(t){var a="x"==t?o.width:o.height;if(["continuous","share"].indexOf(e[t].scale.value)>=0)var n="linear";else var n=e[t].scale.value;if(e[t+"_scale"]=d3.scale[n]().domain(e[t+"_range"]).rangeRound([0,a]),["square","circle","donut"].indexOf(e.shape.value)>=0&&["share"].indexOf(e[t].scale.value)<0){var r=e[t+"_scale"],i=2*y.range()[1],l=r.invert(-i),s=r.invert(a+i);e[t+"_scale"].domain([l,s])}var u="x"==t?"bottom":"left";e[t+"_axis"]=d3.svg.axis().tickSize(e.axes.ticks.size).tickPadding(5).orient(u).scale(e[t+"_scale"]).tickFormat(function(a){var n=!0;if(e[t].value==e.time.value&&a%1!=0&&(n=!1),("log"==e[t].scale.value&&"1"==a.toString().charAt(0)||"log"!=e[t].scale.value)&&n){if("share"==e[t].scale.value)var r=100*a+"%";else var r=e.format.value(a,e[t].value);if(d3.select(this).style("font-size",e.axes.ticks.font.size).style("fill",e.axes.ticks.font.color).attr("font-family",e.axes.ticks.font.family.value).attr("font-weight",e.axes.ticks.font.weight).text(r),"x"==t){var i=this.getBBox().width,l=this.getBBox().height;d3.select(this).attr("transform","translate(18,8)rotate(70)");var s=Math.ceil(Math.cos(25)*i+5);s>o.yoffset&&!e.small&&(o.yoffset=s);var u=Math.ceil(Math.cos(25)*l+5);u>o.rightoffset&&!e.small&&(o.rightoffset=u)}else{var u=this.getBBox().width;u>o.offset&&!e.small&&(o.offset=u)}}else var r=null;return r}),"continuous"==e[t].scale.value&&e.tickValues[t]&&e[t+"_axis"].tickValues(e.tickValues[t])})}if(!c)var c=[];var b=e.group.selectAll("g#plane").data(["plane"]);b.enter().append("g").attr("id","plane").attr("transform","translate("+o.margin.left+","+o.margin.top+")");var x=b.selectAll("rect#background").data(["background"]);x.enter().append("rect").attr("id","background").attr("x",0).attr("y",0).attr("width",o.width).attr("height",o.height).attr("stroke-width",1).attr("stroke","#ccc").attr("shape-rendering",e.shape.rendering.value).style("fill","#fafafa");var w=b.selectAll("path#mirror").data(["mirror"]);w.enter().append("path").attr("id","mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0);var _=e.group.selectAll("g#axes").data(["axes"]);_.enter().append("g").attr("id","axes");var z=b.selectAll("g#xgrid").data(["xgrid"]);z.enter().append("g").attr("id","xgrid");var k=b.selectAll("g#ygrid").data(["ygrid"]);k.enter().append("g").attr("id","ygrid");var A=b.selectAll("g#xaxis").data(["xaxis"]);A.enter().append("g").attr("id","xaxis").attr("transform","translate(0,"+o.height+")");var E=b.selectAll("g#yaxis").data(["yaxis"]);E.enter().append("g").attr("id","yaxis");var j=_.selectAll("text#xlabel").data(e.small?[]:["xlabel"]);j.enter().append("text").attr("id","xlabel").attr("x",e.width.viz/2).attr("y",e.height.viz-10).text(e.format.value(e.x.value)).attr("font-family",e.labels.font.family.value).attr("font-weight",e.labels.font.weight).attr("font-size",e.labels.font.size).attr("fill",e.labels.font.color).attr("text-anchor",e.labels.font.align),j.exit().remove();var O=_.selectAll("text#ylabel").data(e.small?[]:["ylabel"]);O.enter().append("text").attr("id","ylabel").attr("y",15).attr("x",-(o.height/2+o.margin.top)).text(e.format.value(e.y.value)).attr("transform","rotate(-90)").attr("font-family",e.labels.font.family.value).attr("font-weight",e.labels.font.weight).attr("font-size",e.labels.font.size).attr("fill",e.labels.font.color).attr("text-anchor",e.labels.font.align),O.exit().remove();var M=e.group.selectAll("g#mouseevents").data(["mouseevents"]);M.enter().append("g").attr("id","mouseevents"),o.offset=0,E.call(e.y_axis).selectAll("line").call(t,"y"),o.margin.left+=o.offset,o.width-=o.offset,e.x_scale.rangeRound([0,o.width]),o.yoffset=0,o.rightoffset=0,A.call(e.x_axis).selectAll("line").call(t,"x"),o.height-=o.yoffset,o.width-=o.rightoffset,e.x_scale.rangeRound([0,o.width]),e.y_scale.rangeRound([0,o.height]),E.call(e.y_axis),A.call(e.x_axis),b.transition().duration(e.draw.timing).attr("transform","translate("+o.margin.left+","+o.margin.top+")"),x.attr("width",o.width).attr("height",o.height),w.transition().duration(e.draw.timing).attr("opacity",function(){return e.axes.mirror.value?1:0}).attr("d",function(){var e=o.width,t=o.height;return"M "+e+" "+t+" L 0 "+t+" L "+e+" 0 Z"}),E.transition().duration(e.draw.timing).call(e.y_axis.scale(e.y_scale)),E.selectAll("line").transition().duration(e.draw.timing).call(t,"y"),E.selectAll("path").style("fill","none"),A.transition().duration(e.draw.timing).attr("transform","translate(0,"+o.height+")").call(e.x_axis.scale(e.x_scale)).selectAll("g.tick").select("text").style("text-anchor","start"),A.selectAll("line").transition().duration(e.draw.timing).call(t,"x"),A.selectAll("path").style("fill","none");var F="continuous"==e.y.scale.value?e.y_scale.ticks(e.tickValues.y.length):e.y_scale.ticks(),I=k.selectAll("line").data(F);I.enter().append("line").style("opacity",0).call(a,"y").call(t,"y"),I.transition().duration(e.draw.timing).style("opacity",1).call(a,"y").call(t,"y"),I.exit().transition().duration(e.draw.timing).style("opacity",0).remove();var B="continuous"==e.x.scale.value?e.x_scale.ticks(e.tickValues.x.length):e.x_scale.ticks(),S=z.selectAll("line").data(B);S.enter().append("line").style("opacity",0).call(a,"x").call(t,"x"),S.transition().duration(e.draw.timing).style("opacity",1).call(a,"x").call(t,"x"),S.exit().transition().duration(e.draw.timing).style("opacity",0).remove(),j.text(e.format.value(e.x.value)).attr("x",e.width.viz/2).attr("y",e.height.viz-10).attr("opacity",function(){return 0==e.data.app.length?0:1}),O.text(e.format.value(e.y.value)).attr("y",15).attr("x",-(o.height/2+o.margin.top)).attr("opacity",function(){return 0==e.data.app.length?0:1}),e.axes.values.forEach(function(t){var a=b.selectAll("g.d3plus_"+t+"line").data(e[t].lines,function(e){return"number"==typeof e||"string"==typeof e?e:d3.keys(e)[0]}),i=a.enter().append("g").attr("class","d3plus_"+t+"line"),l="x"==t?"height":"width",s="x"==t?o.height-8+"px":"10px",u="x"==t?10:20;i.append("line").attr(t+"1",0).attr(t+"2",o[l]).attr("stroke","#ccc").attr("stroke-width",3).attr("stroke-dasharray","10,10"),i.append("text").style("font-size",e.axes.ticks.font.size).style("fill",e.axes.ticks.font.color).attr("text-align","start").attr(t,s),a.selectAll("line").transition().duration(e.draw.timing).attr(t+"1",function(a){return r(a)?e[t+"_scale"](r(a)):0}).attr(t+"2",function(a){return r(a)?e[t+"_scale"](r(a)):0}).attr("opacity",function(a){var n=r(a)>e[t+"_scale"].domain()[1]&&r(a)<e[t+"_scale"].domain()[0];return null!==r(a)&&n?1:0}),a.selectAll("text").transition().duration(e.draw.timing).text(function(){if(null!==r(d)){var t=e.format.value(r(d),y_name);return n(d)?e.format.value(n(d))+": "+t:t}return null}).attr(t,function(a){return e[t+"_scale"](r(a))+u+"px"})}),["line","area"].indexOf(e.shape.value)>=0&&y.rangeRound([2,2]),e.axis_offset={x:o.margin.left,y:o.margin.top},c.forEach(function(t){t.d3plus.x=e.x_scale(d3plus.variable.value(e,t,e.x.value)),t.d3plus.x+=e.axis_offset.x,t.d3plus.r=y(d3plus.variable.value(e,t,e.size.value)),e.stacked_axis||(t.d3plus.y=e.y_scale(d3plus.variable.value(e,t,e.y.value)),t.d3plus.y+=e.axis_offset.y,"area"==e.shape.value&&(t.d3plus[e.opp_axis+"0"]=e[e.opp_axis+"_scale"].range()[1],t.d3plus[e.opp_axis+"0"]+=e.axis_offset[e.opp_axis]))});var N=e.order.value?e.order.value:e.continuous_axis?e[e.opp_axis].value:e.size.value||e.id.value;if(["line","area"].indexOf(e.shape.value)>=0&&(c=d3.nest().key(function(t){var a=d3plus.variable.value(e,t,e.id.value),n=t.d3plus.depth?t.d3plus.depth:0;return d3plus.string.strip(a)+"_"+n+"_"+e.shape.value}).rollup(function(t){var a=d3plus.util.uniques(t,e[e.continuous_axis].value),n=!1;return e.tickValues[e.continuous_axis].forEach(function(r,i,l){if(a.indexOf(r)<0){var o={};if(o[e[e.continuous_axis].value]=r,o[e.id.value]=t[0][e.id.value],o[e[e.opp_axis].value]=e[e.opp_axis+"_scale"].domain()[1],o.d3plus={},o.d3plus.r=y(y.domain()[0]),o.d3plus[e.continuous_axis]+=e.axis_offset[e.continuous_axis],e.stacked_axis||(o.d3plus[e.opp_axis]=e[e.opp_axis+"_scale"].range()[1],o.d3plus[e.opp_axis]+=e.axis_offset[e.opp_axis],o.d3plus[e.opp_axis+"0"]=o.d3plus[e.opp_axis]),e[e.continuous_axis].zerofill.value||e[e.opp_axis].stacked.value){var s=e[e.continuous_axis+"_scale"](r);s+=e.axis_offset[e.continuous_axis],o.d3plus[e.continuous_axis]=s,t.push(o)}else if("line"!=e.shape.value){if(!n&&i>0){var s=e[e.continuous_axis+"_scale"](l[i-1]);s+=e.axis_offset[e.continuous_axis],o.d3plus[e.continuous_axis]=s,t.push(o)}if(i<l.length-1){var s=e[e.continuous_axis+"_scale"](l[i+1]);s+=e.axis_offset[e.continuous_axis];var u=d3plus.util.copy(o);u.d3plus[e.continuous_axis]=s,t.push(u)}}n=!0}else n=!1}),t.sort(function(t,a){var n=t.d3plus[e.continuous_axis]-a.d3plus[e.continuous_axis];if(n)return n;var r=t[e[e.continuous_axis].value]-a[e[e.continuous_axis].value];return r}),t}).entries(c),c.forEach(function(t){e.id.nesting.forEach(function(a,n){n<=e.depth.value&&!t[a]&&(t[a]=d3plus.util.uniques(t.values,a).filter(function(e){return e&&"undefined"!=e})[0])}),N in t||(t[N]=0,t.values.forEach(function(a){var n=d3plus.variable.value(e,a,N);n&&("number"==typeof n?t[N]+=n:t[N]=n)}))})),N&&d3plus.array.sort(c,N,"desc"===e.order.sort.value?"asc":"desc",e.color.value||[],e),e.stacked_axis)var V=d3.layout.stack().values(function(e){return e.values}).x(function(e){return e.d3plus.x}).x(function(e){return e.d3plus.y}).y(function(t){var a=o.height,n=d3plus.variable.value(e,t,e.y.value);return a-e.y_scale(n)}).out(function(t,a,n){var r=o.height;"share"==e[e.stacked_axis].scale.value?(t.d3plus.y0=(1-a)*r,t.d3plus.y=t.d3plus.y0-n*r):(t.d3plus.y0=r-a,t.d3plus.y=t.d3plus.y0-n),t.d3plus.y+=o.margin.top,t.d3plus.y0+=o.margin.top}),T="share"==e[e.stacked_axis].scale.value?"expand":"zero",c=V.offset(T)(c);else if(["area","line"].indexOf(e.shape.value)<0){var C=b.selectAll("g.d3plus_data_ticks").data(c,function(t){return t[e.id.value]+"_"+t.d3plus.depth}),q=C.enter().append("g").attr("class","d3plus_data_ticks").attr("opacity",0);q.append("line").attr("class","d3plus_data_y").call(i,"y"),C.selectAll("line.d3plus_data_y").call(i,"y"),q.append("line").attr("class","d3plus_data_x").call(i,"x"),C.selectAll("line.d3plus_data_x").call(i,"x"),C.transition().duration(e.draw.timing).attr("opacity",1),C.exit().transition().duration(e.draw.timing).attr("opacity",0).remove()}return e.mouse=l,c},d3plus.visualization.chart.fill=!0,d3plus.visualization.chart.requirements=["data","x","y"],d3plus.visualization.chart.scale={circle:1.1,donut:1.1,square:1.1},d3plus.visualization.chart.shapes=["circle","donut","line","square","area"],d3plus.visualization.chart.tooltip="static"},{}],241:[function(){d3plus.visualization.geo_map=function(e){topojson.presimplify(e.coords.value);var t=e.coords.value,a=d3.keys(t.objects)[0],n=topojson.feature(t,t.objects[a]),r=n.features,r=r.filter(function(t){return t[e.id.value]=t.id,e.coords.solo.value.length?e.coords.solo.value.indexOf(t.id)>=0:e.coords.mute.value.length?e.coords.mute.value.indexOf(t.id)<0:!0});return r},d3plus.visualization.geo_map.libs=["topojson"],d3plus.visualization.geo_map.nesting=!1,d3plus.visualization.geo_map.requirements=["color","coords"],d3plus.visualization.geo_map.scale=1,d3plus.visualization.geo_map.shapes=["coordinates"],d3plus.visualization.geo_map.tooltip="follow",d3plus.visualization.geo_map.zoom=!0},{}],242:[function(){d3plus.visualization.line=function(e){return d3plus.visualization.chart(e)},d3plus.visualization.line.requirements=["data","x","y"],d3plus.visualization.line.setup=function(e){e.self.x({scale:"continuous"})},d3plus.visualization.line.shapes=["line"],d3plus.visualization.line.tooltip="static"},{}],243:[function(){d3plus.visualization.network=function(e){var t=e.nodes.restricted||e.nodes.value,a=e.edges.restricted||e.edges.value,n=d3.extent(t,function(e){return e.x}),r=d3.extent(t,function(e){return e.y}),i=e.size.value?d3.extent(t,function(t){var a=d3plus.variable.value(e,t,e.size.value);return 0===a?null:a}):[1,1];"undefined"==typeof i[0]&&(i=[1,1]);var l=d3.min(d3plus.util.distances(t));if(l*=e.nodes.overlap,e.edges.arrows.value&&(l=.5*l),i[0]===i[1])var o=l;else{var s=n[1]+1.1*l-(n[0]-1.1*l),u=r[1]+1.1*l-(r[0]-1.1*l);if(aspect=s/u,app=e.width.viz/e.height.viz,app>aspect)var d=e.height.viz/u;else var d=e.width.viz/s;var o=.25*l;2>o*d&&(o=2/d)}var c=e.size.scale.value.domain(i).range([o,l]);e.zoom.bounds=[[n[0]-1.1*l,r[0]-1.1*l],[n[1]+1.1*l,r[1]+1.1*l]];var p=[],f={};return t.forEach(function(t){var a=e.data.app.filter(function(a){return a[e.id.value]==t[e.id.value]})[0];if(a)var n=d3plus.object.merge(t,a);else var n=d3plus.util.copy(t);n.d3plus={},n.d3plus.x=t.x,n.d3plus.y=t.y;var r=d3plus.variable.value(e,n,e.size.value);n.d3plus.r=r?c(r):c.range()[0],f[n[e.id.value]]={x:n.d3plus.x,y:n.d3plus.y,r:n.d3plus.r},p.push(n)}),p.sort(function(e,t){return t.d3plus.r-e.d3plus.r}),a.forEach(function(t){t[e.edges.source]=d3plus.util.copy(t[e.edges.source]),t[e.edges.source].d3plus={};var a=f[t[e.edges.source][e.id.value]];t[e.edges.source].d3plus.r=a.r,t[e.edges.source].d3plus.x=a.x,t[e.edges.source].d3plus.y=a.y,t[e.edges.target]=d3plus.util.copy(t[e.edges.target]),t[e.edges.target].d3plus={};var n=f[t[e.edges.target][e.id.value]];t[e.edges.target].d3plus.r=n.r,t[e.edges.target].d3plus.x=n.x,t[e.edges.target].d3plus.y=n.y}),{nodes:p,edges:a}},d3plus.visualization.network.nesting=!1,d3plus.visualization.network.requirements=["nodes","edges"],d3plus.visualization.network.scale=1.05,d3plus.visualization.network.shapes=["circle","square","donut"],d3plus.visualization.network.tooltip="static",d3plus.visualization.network.zoom=!0},{}],244:[function(){d3plus.visualization.rings=function(e){var t=d3.min([e.height.viz,e.width.viz])/2,n=e.small||!e.labels.value?(t-2*e.labels.padding)/2:t/3,r=e.small||!e.labels.value?1.4*n:n,i=2*n,l=[],o=[],s=e.data.app.filter(function(t){return t[e.id.value]===e.focus.value
})[0];s||(s={d3plus:{}},s[e.id.value]=e.focus.value),s.d3plus.x=e.width.viz/2,s.d3plus.y=e.height.viz/2,s.d3plus.r=.65*r;var u=[],d=[e.focus.value];e.edges.connections(e.focus.value,e.id.value).forEach(function(t){var a=t[e.edges.source][e.id.value]==e.focus.value?t[e.edges.target]:t[e.edges.source],n=e.data.app.filter(function(t){return t[e.id.value]===a[e.id.value]})[0];n||(n={d3plus:{}},n[e.id.value]=a[e.id.value]),n.d3plus.edges=e.edges.connections(n[e.id.value],e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!=e.focus.value&&t[e.edges.target][e.id.value]!=e.focus.value}),n.d3plus.edge=t,d.push(n[e.id.value]),u.push(n)});var c=e.order.value||e.color.value||e.size.value||e.id.value;u.sort(function(t,a){var n=t.d3plus.edges.length-a.d3plus.edges.length;return n?n:d3plus.array.sort([t,a],c,e.order.sort.value,e.color.value||[],e)}),"number"==typeof e.edges.limit?u=u.slice(0,e.edges.limit):"function"==typeof e.edges.limit&&(u=e.edges.limit(u));var p=[],f=0;u.forEach(function(t){var a=t[e.id.value];t.d3plus.edges=t.d3plus.edges.filter(function(t){var n=t[e.edges.source][e.id.value],r=t[e.edges.target][e.id.value];return d.indexOf(n)<0&&r==a||d.indexOf(r)<0&&n==a}),f+=t.d3plus.edges.length||1,t.d3plus.edges.forEach(function(t){var n=t[e.edges.source],r=t[e.edges.target],i=r[e.id.value]==a?n:r;d.push(i[e.id.value])})}),d3plus.array.sort(u,c,e.order.sort.value,e.color.value||[],e);var v=0,h=2*Math.PI,g=0;u.forEach(function(t,n){var l=t.d3plus.edges.length||1,o=h/f*l;0==n&&(g=s,v-=o/2);var s=v+o/2;s-=h/4,t.d3plus.radians=s,t.d3plus.x=e.width.viz/2+r*Math.cos(s),t.d3plus.y=e.height.viz/2+r*Math.sin(s),v+=o,t.d3plus.edges.sort(function(a,n){var a=a[e.edges.source][e.id.value]==t[e.id.value]?a[e.edges.target]:a[e.edges.source],n=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source];return d3plus.array.sort([a,n],c,e.order.sort.value,e.color.value||[],e)}),t.d3plus.edges.forEach(function(n,r){var o=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source],u=h/f,d=e.data.app.filter(function(t){return t[e.id.value]===o[e.id.value]})[0];d||(d={d3plus:{}},d[e.id.value]=o[e.id.value]),a=s-u*l/2+u/2+u*r,d.d3plus.radians=a,d.d3plus.x=e.width.viz/2+i*Math.cos(a),d.d3plus.y=e.height.viz/2+i*Math.sin(a),p.push(d)})});var m=d3.min(d3plus.util.distances(u,function(e){return[e.d3plus.x,e.d3plus.y]})),y=d3.min(d3plus.util.distances(p,function(e){return[e.d3plus.x,e.d3plus.y]}));if(m||(m=n/2),y||(y=n/4),8>m/2-4)var b=d3.min([m/2,8]);else var b=m/2-4;if(4>y/2-4)var x=d3.min([y/2,4]);else var x=y/2-4;x>n/10&&(x=n/10),x>b?x=.75*b:b>1.5*x&&(b=1.5*x),b=Math.floor(b),x=Math.floor(x);var w=d3plus.util.uniques(u,e.id.value);w=w.concat(d3plus.util.uniques(p,e.id.value)),w.push(e.focus.value);var _=e.data.app.filter(function(t){return w.indexOf(t[e.id.value])>=0});if(e.size.value){var z=d3.extent(_,function(t){return d3plus.variable.value(e,t,e.size.value)});z[0]==z[1]&&(z[0]=0);var t=d3.scale.linear().domain(z).rangeRound([3,d3.min([b,x])]),k=d3plus.variable.value(e,s,e.size.value);s.d3plus.r=t(k)}else{var t=d3.scale.linear().domain([1,2]).rangeRound([b,x]);e.edges.label&&(s.d3plus.r=1.5*t(1))}return p.forEach(function(a){a.d3plus.ring=2;var n=e.size.value?d3plus.variable.value(e,a,e.size.value):2;a.d3plus.r=t(n)}),u.forEach(function(a){a.d3plus.ring=1;var n=e.size.value?d3plus.variable.value(e,a,e.size.value):1;a.d3plus.r=t(n)}),u.forEach(function(t){var a=[e.edges.source,e.edges.target],n=d3plus.util.copy(t.d3plus.edge);a.forEach(function(a){n[a].d3plus=n[a][e.id.value]==s[e.id.value]?{x:s.d3plus.x,y:s.d3plus.y,r:s.d3plus.r}:{x:t.d3plus.x,y:t.d3plus.y,r:t.d3plus.r}}),delete n.d3plus,l.push(n),e.edges.connections(t[e.id.value],e.id.value).forEach(function(a){var n=d3plus.util.copy(a),o=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source];if(o[e.id.value]!=s[e.id.value]){var d=p.filter(function(t){return t[e.id.value]==o[e.id.value]})[0];if(d)var c=i;else{var c=r;d=u.filter(function(t){return t[e.id.value]==o[e.id.value]})[0]}if(d){n.d3plus={spline:!0,translate:{x:e.width.viz/2,y:e.height.viz/2}};var f=[e.edges.source,e.edges.target];f.forEach(function(a){n[a].d3plus=n[a][e.id.value]==t[e.id.value]?{a:t.d3plus.radians,r:r+t.d3plus.r,depth:1}:{a:d.d3plus.radians,r:c-d.d3plus.r,depth:2}}),l.push(n)}}})}),o=[s].concat(u).concat(p),o.forEach(function(t){if(!e.small&&e.labels.value)if(t[e.id.value]!=e.focus.value){t.d3plus.rotate=t.d3plus.radians*(180/Math.PI);var a=t.d3plus.rotate,i=n-3*e.labels.padding-t.d3plus.r;if(-90>a||a>90){a-=180;var l=-(t.d3plus.r+i/2+e.labels.padding),o="end"}else var l=t.d3plus.r+i/2+e.labels.padding,o="start";var s=u.indexOf(t)>=0?!0:!1,d=1==t.d3plus.ring?m:y;d+=2*e.labels.padding,t.d3plus.label={x:l,y:0,w:i,h:d,angle:a,anchor:o,valign:"center",color:d3plus.color.legible(d3plus.variable.color(e,t[e.id.value])),resize:[8,e.labels.font.size],background:s,mouse:!0}}else if(e.size.value||e.edges.label){var d=r-2*t.d3plus.r-2*e.labels.padding;t.d3plus.label={x:0,y:t.d3plus.r+d/2,w:r,h:d,color:d3plus.color.legible(d3plus.variable.color(e,t[e.id.value])),resize:[10,40],background:!0,mouse:!0}}else delete t.d3plus.rotate,delete t.d3plus.label;else delete t.d3plus.rotate,delete t.d3plus.label}),e.mouse[d3plus.evt.click]=function(t){t[e.id.value]!=e.focus.value&&(d3plus.tooltip.remove(e.type.value),e.self.focus(t[e.id.value]).draw())},{edges:l,nodes:o,data:_}},d3plus.visualization.rings.filter=function(e,t){var a=e.edges.connections(e.focus.value,e.id.value,!0),n=[];a.forEach(function(t){n=n.concat(e.edges.connections(t[e.id.value],e.id.value,!0))});var r=a.concat(n),i=d3plus.util.uniques(r,e.id.value),l=[];return i.forEach(function(a){var n=t.filter(function(t){return t[e.id.value]===a})[0];if(n)l.push(n);else{var r={d3plus:{}};r[e.id.value]=a,l.push(r)}}),l},d3plus.visualization.rings.nesting=!1,d3plus.visualization.rings.scale=1,d3plus.visualization.rings.shapes=["circle","square","donut"],d3plus.visualization.rings.requirements=["edges","focus"],d3plus.visualization.rings.tooltip="static"},{}],245:[function(){d3plus.visualization.scatter=function(e){return d3plus.visualization.chart(e)},d3plus.visualization.scatter.fill=!0,d3plus.visualization.scatter.requirements=["data","x","y"],d3plus.visualization.scatter.scale=d3plus.visualization.chart.scale,d3plus.visualization.scatter.shapes=["circle","square","donut"],d3plus.visualization.scatter.tooltip="static"},{}],246:[function(){d3plus.visualization.stacked=function(e){return d3plus.visualization.chart(e)},d3plus.visualization.stacked.filter=function(e,t){return d3plus.data.threshold(e,t,e.x.value)},d3plus.visualization.stacked.requirements=["data","x","y"],d3plus.visualization.stacked.setup=function(e){e.self.x({scale:"continuous",zerofill:!0}).y({stacked:!0});var t=e.y,a=e.size;!t.value&&a.value||a.changed&&a.previous===t.value?e.self.y(a.value):(!a.value&&t.value||t.changed&&t.previous===a.value)&&e.self.size(t.value)},d3plus.visualization.stacked.shapes=["area"],d3plus.visualization.stacked.threshold=function(e){return 20/e.height.viz},d3plus.visualization.stacked.tooltip="static"},{}],247:[function(){d3plus.visualization.tree_map=function(e){var t=d3.nest();e.id.nesting.forEach(function(a,n){n<e.depth.value&&t.key(function(t){return d3plus.variable.value(e,t.d3plus,a)})});var a=[];e.data.app.forEach(function(t){a.push({d3plus:t,id:t[e.id.value],value:d3plus.variable.value(e,t,e.size.value)})}),t=t.entries(a);var n=d3.layout.treemap().mode(e.type.mode.value).round(!0).size([e.width.viz,e.height.viz]).children(function(e){return e.values}).padding(1).sort(function(e,t){var a=e.value-t.value;return 0===a?e.id<t.id:a}).nodes({name:"root",values:t}).filter(function(e){return!e.values&&e.area});if(n.length){for(var r=n[0];r.parent;)r=r.parent;var i=[];n.forEach(function(e){e.d3plus.d3plus=d3plus.object.merge(e.d3plus.d3plus,{x:e.x+e.dx/2,y:e.y+e.dy/2,width:e.dx,height:e.dy,share:e.value/r.value}),i.push(e.d3plus)})}return i},d3plus.visualization.tree_map.filter=function(e,t){return d3plus.data.threshold(e,t)},d3plus.visualization.tree_map.modes=["squarify","slice","dice","slice-dice"],d3plus.visualization.tree_map.requirements=["data","size"],d3plus.visualization.tree_map.shapes=["square"],d3plus.visualization.tree_map.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},d3plus.visualization.tree_map.tooltip="follow"},{}],248:[function(){d3plus.ui.drawer=function(e){var t=e.ui.value&&e.ui.value.length,a=e.ui.position.value,n=0;e.dev.value&&t&&d3plus.console.time("drawing custom UI elements");var r=e.container.value.selectAll("div#d3plus_drawer").data(["d3plus_drawer"]);r.enter().append("div").attr("id","d3plus_drawer").each(function(){n+=2*e.ui.margin});var i={};e.ui.position.accepted.forEach(function(t){i[t]=t==a?e.margin.bottom+"px":"auto"}),r.style("text-align",e.ui.align.value).style("position","absolute").style("width",e.width.value-2*e.ui.padding+"px").style("height","auto").style(i);var l=r.selectAll("div.d3plus_drawer_ui").data(t?e.ui.value:[],function(e){return e.method||!1});l.enter().append("div").attr("class","d3plus_drawer_ui").style("padding",e.ui.padding+"px").style("display","inline-block").each(function(t){var a=d3.select(this);t.form=d3plus.form().container(a).focus(e[t.method].value,function(a){a!==e[t.method].value&&e.self[t.method](a).draw()}).font(e.ui.font).id("id").text("text").type("auto").width(t.width||!1)}),l.each(function(t){var a=[],n=e.format.locale.value.method[t.method]||t.method;t.value.forEach(function(t){var n={id:t,text:e.format.value(t)};a.push(n)}),t.form.data(a).format(e.format.locale.language).title(e.format.value(n)).ui({align:e.ui.align.value,padding:e.ui.padding,margin:e.ui.margin}).draw()}),l.exit().remove();var o=r.node().offsetHeight;o&&(e.margin[a]+=o+n),e.dev.value&&t&&d3plus.console.timeEnd("drawing custom UI elements")}},{}],249:[function(){d3plus.ui.focus=function(e){if(!e.internal_error&&e.focus.value&&!e.small&&e.focus.tooltip.value){e.dev.value&&d3plus.console.time("drawing focus tooltip");var t=e.data.pool.filter(function(t){return d3plus.variable.value(e,t,e.id.value)==e.focus.value});t.length>=1?t=t[0]:(t={},t[e.id.value]=e.focus.value);var a=e.labels.padding;d3plus.tooltip.app({anchor:"top left",arrow:!1,data:t,length:"long",fullscreen:!1,id:e.type.value+"_focus",maxheight:e.height.viz-2*a,mouseevents:!0,offset:0,vars:e,x:e.width.value-e.margin.right-a,y:e.margin.top+a,width:e.tooltip.large}),d3.select("div#d3plus_tooltip_id_"+e.type.value+"_focus").empty()||(e.width.viz-=e.tooltip.large+2*a),e.dev.value&&d3plus.console.timeEnd("drawing focus tooltip")}else d3plus.tooltip.remove(e.type.value+"_focus")}},{}],250:[function(){d3plus.ui.history=function(e){function t(t){t.style("position","absolute").style("left",e.ui.padding+"px").style("top",e.margin.top/2-n/2+"px").style("color",r).style("font-family",i).style("font-weight",l).style("font-size",n+"px").style("z-index",2e3)}if(!e.small&&e.history.states.length>0){e.dev.value&&d3plus.console.time("drawing back button");var a=e.container.value.selectAll("div#d3plus_back_button").data(["d3plus_back_button"]),n=e.title.value?e.title.font.size:e.title.sub.font.size,r=e.title.sub.value?e.title.sub.font.color:e.title.font.color,i=e.title.sub.value?e.title.sub.font.family.value:e.title.font.family.value,l=e.title.sub.value?e.title.sub.font.weight:e.title.font.weight,o=e.title.sub.value?e.title.sub.padding:e.title.padding,s=n+2*o;e.margin.top<s&&(e.margin.top=s);{a.enter().append("div").attr("id","d3plus_back_button").style("opacity",0).call(t).html(function(){if(d3plus.font.awesome)var t="<span style='font-family:FontAwesome;margin-right:5px;'>&#xf104</span>";else var t="&laquo; ";return t+e.format.value(e.format.locale.value.ui.back)})}a.on(d3plus.evt.over,function(){!e.small&&e.history.states.length>0&&d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("color",d3plus.color.lighter(r,.25))}).on(d3plus.evt.out,function(){!e.small&&e.history.states.length>0&&d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("color",r)}).on(d3plus.evt.click,function(){e.history.back()}).transition().duration(e.draw.timing).style("opacity",1).call(t),e.dev.value&&d3plus.console.timeEnd("drawing back button")}else e.container.value.selectAll("div#d3plus_back_button").transition().duration(e.draw.timing).style("opacity",0).remove()}},{}],251:[function(){d3plus.ui.legend=function(e){function t(t){t.attr("transform",function(t,a){var n=m+a*(e.ui.padding+r);return"translate("+n+","+e.ui.padding+")"})}function a(t){t.attr("width",r).attr("height",r).attr("fill",function(t){d3.select(this.parentNode).selectAll("text").remove();var a=d3plus.variable.value(e,t,e.icon.value,e.id.nesting[t.d3plus.depth]),n=d3plus.variable.color(e,t,e.id.nesting[t.d3plus.depth]);if(a){var i=d3plus.string.strip(a+"_"+n),l=e.defs.selectAll("pattern#"+i).data([i]);if("string"==typeof e.icon.style.value)var o=e.icon.style.value;else if("object"==typeof e.icon.style.value&&e.icon.style.value[icon_depth])var o=e.icon.style.value[icon_depth];else var o="default";var n="knockout"==o?n:"none";l.select("rect").transition().duration(e.draw.timing).attr("fill",n).attr("width",r).attr("height",r),l.select("image").transition().duration(e.draw.timing).attr("width",r).attr("height",r);var s=l.enter().append("pattern").attr("id",i).attr("width",r).attr("height",r);return s.append("rect").attr("fill",n).attr("width",r).attr("height",r),s.append("image").attr("xlink:href",a).attr("width",r).attr("height",r).each(function(){0==a.indexOf("/")||a.indexOf(window.location.hostname)>=0?d3plus.util.dataurl(a,function(e){l.select("image").attr("xlink:href",e)}):l.select("image").attr("xlink:href",a)}),"url(#"+i+")"}var u=d3.select(this.parentNode).append("text");return u.attr("font-size",e.legend.font.size).attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("text-anchor","start").attr("fill",d3plus.color.text(n)).attr("x",0).attr("y",0).each(function(){var a=d3plus.variable.text(e,t,t.d3plus.depth);1===a.length&&a[0].length&&d3plus.textwrap().container(d3.select(this)).height(r-2*e.ui.padding).resize(e.labels.resize.value).text(a[0]).width(r-2*e.ui.padding).draw()}).attr("y",function(){var e=this.getBBox().height,t=parseFloat(d3.select(this).style("font-size"),10)/5;return r/2-e/2-t/2}).selectAll("tspan").attr("x",function(){var e=this.getComputedTextLength();return r/2-e/2}),u.select("tspan").empty()&&u.remove(),n})}var n=!0,r=0,i=e.color.value,l=e.color.value||"d3plus_color";if(i&&!e.small&&e.legend.value)if(e.color.scale)if(e.color.scale){e.dev.value&&d3plus.console.time("drawing color scale"),e.g.legend.selectAll("g.d3plus_color").transition().duration(e.draw.timing).attr("opacity",0).remove();var o=e.color.scale.domain(),s=e.color.scale.range();o.length<=2&&(o=d3plus.util.buckets(o,6));var u=e.g.legend.selectAll("g.d3plus_scale").data(["scale"]);u.enter().append("g").attr("class","d3plus_scale").attr("opacity",0);var c=u.selectAll("#d3plus_legend_heatmap").data(["heatmap"]);c.enter().append("linearGradient").attr("id","d3plus_legend_heatmap").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");var p=c.selectAll("stop").data(d3.range(0,s.length));p.enter().append("stop").attr("stop-opacity",1),p.attr("offset",function(e){return Math.round(e/(s.length-1)*100)+"%"}).attr("stop-color",function(e){return s[e]}),p.exit().remove();var f=u.selectAll("rect#gradient").data(["gradient"]);f.enter().append("rect").attr("id","gradient").attr("x",function(){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.legend.gradient.height).attr("stroke",e.legend.font.color).attr("stroke-width",1).style("fill","url(#d3plus_legend_heatmap)");var v=u.selectAll("text.d3plus_tick").data(d3.range(0,o.length));v.enter().append("text").attr("class","d3plus_tick").attr("x",function(){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",function(){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding});var h=0;v.order().attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("font-size",e.legend.font.size).attr("text-anchor",e.legend.font.align).attr("fill",e.legend.font.color).text(function(t){return e.format.value(o[t],i)}).attr("y",function(){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding}).each(function(){var e=this.offsetWidth;e>h&&(h=e)}),h+=2*e.labels.padding;var g=h*(o.length-1);if(g+h<e.width.value){if(g+h<e.width.value/2&&(g=e.width.value/2,h=g/o.length,g-=h),"start"==e.legend.align)var m=e.ui.padding;else if("end"==e.legend.align)var m=e.width.value-e.ui.padding-g;else var m=e.width.value/2-g/2;v.transition().duration(e.draw.timing).attr("x",function(e){return m+h*e}),v.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();var y=u.selectAll("rect.d3plus_tick").data(d3.range(0,o.length));y.enter().append("rect").attr("class","d3plus_tick").attr("x",function(){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),y.transition().duration(e.draw.timing).attr("x",function(e){var t=0==e?1:0;return m+h*e-t}).attr("y",e.ui.padding).attr("width",1).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),y.exit().transition().duration(e.draw.timing).attr("width",0).remove(),f.transition().duration(e.draw.timing).attr("x",function(){return"middle"==e.legend.align?e.width.value/2-g/2:"end"==e.legend.align?e.width.value-g-e.ui.padding:e.ui.padding}).attr("y",e.ui.padding).attr("width",g).attr("height",e.legend.gradient.height),u.transition().duration(e.draw.timing).attr("opacity",1),e.dev.value&&d3plus.console.timeEnd("drawing color scale")}else n=!1}else n=!1;else{if(e.dev.value&&d3plus.console.time("grouping data by colors"),e.nodes.value&&d3plus.visualization[e.type.value].requirements.indexOf("nodes")>=0){var b=e.nodes.restriced||e.nodes.value;if(e.data.app.length)for(var x=0;x<b.length;x++){var w=e.data.app.filter(function(t){return t[e.id.value]===b[x][e.id.value]});w.length&&(b[x]=d3plus.object.merge(b[x],w[0]))}}else var b=e.data.app;for(var _=0;_<b.length;_++){d=b[_];for(var x=0;x<e.id.nesting.length;x++){var z=e.id.nesting[x];if(!(z in d)){var k=e.id.nesting[x+1];d[z]=d3plus.variable.value(e,d[k],z,k)}}}for(var A=function(t){return d3plus.variable.color(e,t,e.id.nesting[E])},x=0;x<e.id.nesting.length;x++){var E=x,z=e.id.nesting[x],j=d3plus.util.uniques(b,z),O=d3plus.util.uniques(b,A);if(j.length===O.length&&O.length>1)break}for(var s=d3plus.data.nest(e,b,[A],[]),_=0;_<s.length;_++){d=s[_];var k=e.id.nesting[E+1];d[z]=d[z]||d3plus.variable.value(e,d[k],z,k),d[l]=d[l]||d3plus.variable.color(e,d,z),d.d3plus.colorDepth=E}e.dev.value&&d3plus.console.timeEnd("grouping data by color");var M=e.width.value;r=e.legend.size;var g=r*s.length+e.ui.padding*(s.length+1);if(r instanceof Array){e.dev.value&&d3plus.console.time("calculating legend size");for(var x=r[1];x>=r[0];x--)if(g=x*s.length+e.ui.padding*(s.length+1),M>=g){r=x;break}e.dev.value&&d3plus.console.timeEnd("calculating legend size")}else"number"!=typeof r&&r!==!1&&(r=30);if(g>M||1==s.length)n=!1;else{g-=2*e.ui.padding,e.dev.value&&d3plus.console.time("sorting legend");var F=e[e.legend.order.value].value;if(d3plus.array.sort(s,F,e.legend.order.sort.value,l,e),e.dev.value&&d3plus.console.timeEnd("sorting legend"),e.dev.value&&d3plus.console.time("drawing legend"),"start"==e.legend.align)var m=e.ui.padding;else if("end"==e.legend.align)var m=M-e.ui.padding-g;else var m=M/2-g/2;e.g.legend.selectAll("g.d3plus_scale").transition().duration(e.draw.timing).attr("opacity",0).remove();var I=e.g.legend.selectAll("g.d3plus_color").data(s,function(t){return t[e.id.nesting[t.d3plus.colorDepth]]}),B=I.enter().append("g").attr("class","d3plus_color").attr("opacity",0).call(t);B.append("rect").attr("class","d3plus_color").call(a),d3plus.touch||I.on(d3plus.evt.over,function(t,a){d3.select(this).style("cursor","pointer");var n=m+a*(e.ui.padding+r),i=d3.transform(d3.select(this.parentNode).attr("transform")).translate[1];n+=r/2,i+=e.ui.padding+r/2,d3plus.tooltip.app({data:t,footer:!1,vars:e,x:n,y:i})}).on(d3plus.evt.out,function(){d3plus.tooltip.remove(e.type.value)}),I.order().transition().duration(e.draw.timing).attr("opacity",1).call(t),I.selectAll("rect.d3plus_color").transition().duration(e.draw.timing).call(a),I.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.dev.value&&d3plus.console.timeEnd("drawing legend")}}else n=!1;if(e.legend.value&&i&&n){if(e.dev.value&&d3plus.console.time("positioning legend"),r)var S=r+e.ui.padding;else var N=e.g.legend.node().getBBox(),S=N.height+N.y-e.ui.padding;0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=S,e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+(e.height.value-e.margin.bottom)+")"),e.dev.value&&d3plus.console.timeEnd("positioning legend")}else e.dev.value&&d3plus.console.time("hiding legend"),e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")"),e.dev.value&&d3plus.console.timeEnd("hiding legend")}},{}],252:[function(){d3plus.ui.message=function(e,t){function a(t){t.style(r).style("position","absolute").style("background",l).style("text-align","center").style("left",function(){return"center"==i?"50%":"0px"}).style("width",function(){return"center"==i?"auto":e.width.value+"px"}).style("margin-left",function(){var t=e.width.value-e.width.viz;return"center"==i?-(this.offsetWidth/2+t/2)+"px":"0px"}).style("top",function(){return"center"==i?"50%":"top"==i?"0px":"auto"}).style("bottom",function(){return"bottom"==i?"0px":"auto"}).style("margin-top",function(){if("large"==n){var e=this.offsetHeight;return-e/2+"px"}return"0px"})}var t=e.messages.value?t:null,n=t==e.internal_error?"large":e.messages.style;if("large"==n)var r=e.messages,i="center";else{if(e.footer.value)var r=e.footer;else if(e.title.value)var r=e.title;else if(e.title.sub.value)var r=e.title.sub;else if(e.title.total.value)var r=e.title.total;else var r=e.title.sub;var i=r.position}var r={color:r.font.color,"font-family":r.font.family.value,"font-weight":r.font.weight,"font-size":r.font.size+"px",padding:r.padding+"px"},l="none"!=e.background.value?e.background.value:"white";e.g.message=e.container.value.selectAll("div#d3plus_message").data(["message"]),e.g.message.enter().append("div").attr("id","d3plus_message").attr("opacity",0);var o=t?1:0,s=t?t:e.g.message.text(),u=t?"inline-block":"none";e.g.message.text(s).style("opacity",o).style("display",u).call(a)}},{}],253:[function(){d3plus.ui.timeline=function(e){var t=e.data.time;if(!e.small&&t&&t.length>1&&e.timeline.value){if(e.dev.value&&d3plus.console.time("drawing timeline"),e.time.value==e.x.value&&"continuous"==e.x.scale.value||e.time.value==e.y.value&&"continuous"==e.y.scale.value)var a=2;else var a=1;if(e.time.solo.value.length)var n=d3.extent(e.time.solo.value);else var n=d3.extent(t);var r=t[0],i=t[t.length-1],l=n[0],o=n[1],s=[],u=[];t.forEach(function(e,a){0!=a&&u.push(e-t[a-1])});{var d=d3.min(u);d*t.length}t=[];for(var c=r;i>=c;c+=d)t.push(c),s.push(d3.time.year(new Date(parseInt(c),0,1)));s.push(d3.time.year(new Date(parseInt(i+d),0,1)));var p=function(){if(null!==d3.event.sourceEvent){var n=A.extent(),r=d3plus.util.closest(s,d3.time.year.round(n[0])),i=d3plus.util.closest(s,d3.time.year.round(n[1]));r==i&&(r=d3plus.util.closest(s,d3.time.year.floor(n[0])));var l=s.indexOf(r),o=s.indexOf(i);if(o-l>=a)var u=[r,i];else if(l+a<=t.length)var u=[r,s[l+a]];else{for(var u=[r],d=1;a>=d;d++)l+d<=t.length?u.push(s[l+d]):u.unshift(s[l-(l+d-t.length)]);u=[u[0],u[u.length-1]]}d3.select(this).transition().call(A.extent(u)).each("end",function(){var a=d3.range(u[0].getFullYear(),u[1].getFullYear());a=a.filter(function(e){return t.indexOf(e)>=0}),e.self.time({solo:a}).draw()})}},f=e.g.timeline.selectAll("rect.d3plus_timeline_background").data(["background"]);f.enter().append("rect").attr("class","d3plus_timeline_background").attr("opacity",0).attr("fill",e.timeline.background);var v=e.g.timeline.selectAll("g#ticks").data(["ticks"]);v.enter().append("g").attr("id","ticks").attr("transform","translate("+e.width.value/2+","+e.ui.padding+")");var h=e.g.timeline.selectAll("g#brush").data(["brush"]);h.enter().append("g").attr("id","brush");var g=e.g.timeline.selectAll("g#labels").data(["labels"]);g.enter().append("g").attr("id","labels");var m=g.selectAll("text").data(t,function(e,t){return t});m.enter().append("text").attr("y",0).attr("dy",0).attr("x",function(){return"middle"==e.timeline.align?e.width.value/2:"end"==e.timeline.align?e.width.value:0}).attr("y",function(){var t=t=parseFloat(d3.select(this).style("font-size"),10)/5,a=e.ui.padding+e.timeline.height/2+this.getBBox().height/2-t;return a});var y=0,b=0;m.order().attr("font-weight",e.timeline.tick.weight).attr("font-family",e.timeline.tick.family.value).attr("font-size",e.timeline.tick.size).attr("text-anchor",e.timeline.tick.align).attr("opacity",0).text(function(e){return e}).each(function(){var e=this.getBBox().width,t=this.getBBox().height;e>y&&(y=e),t>b&&(b=t)});var x=y+2*e.ui.padding,w=x*t.length,_=e.width.value-2*e.ui.padding,d=1;if(w>_)for(w=_,d=Math.ceil(x/(w/t.length)),x=w/t.length,d;d<t.length-1&&(t.length-1)%d!=0;d++);if("start"==e.timeline.align)var z=e.ui.padding;else if("end"==e.timeline.align)var z=e.width.value-e.ui.padding-w;else var z=e.width.value/2-w/2;m.text(function(e,t){return t%d==0?e:""}).attr("opacity",1).attr("fill",function(t){if(t>=n[0]&&t<=n[1]){var a=e.timeline.background,r=e.timeline.brush.color,i=e.timeline.brush.opacity;return mixed=d3plus.color.mix(r,a,i),d3plus.color.text(mixed)}return d3plus.color.text(e.timeline.background)}).attr("x",function(e,t){return z+x*t+x/2}).attr("y",function(){var t=t=parseFloat(d3.select(this).style("font-size"),10)/5,a=e.ui.padding+e.timeline.height/2-1+this.getBBox().height/2-t;return d>1&&(a+=b+e.ui.padding),a}),m.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),f.transition().duration(e.draw.timing).attr("opacity",1).attr("width",w).attr("height",e.timeline.height-2).attr("x",z).attr("y",e.ui.padding).attr("fill",e.timeline.background);var k=d3.time.scale().domain(d3.extent(s)).rangeRound([0,w]),A=d3.svg.brush().x(k).extent([s[t.indexOf(l)],s[t.indexOf(o)+1]]).on("brushend",p);v.attr("transform","translate("+z+","+e.ui.padding+")").transition().duration(e.draw.timing).call(d3.svg.axis().scale(k).orient("top").ticks(function(){return s}).tickFormat("").tickSize(-(e.timeline.height-2)).tickPadding(0)).selectAll("path").attr("fill","none"),v.selectAll("line").attr("stroke",e.timeline.tick.color).attr("shape-rendering",e.shape.rendering.value),h.attr("transform","translate("+z+","+e.ui.padding+")").attr("opacity",1).call(A),m.attr("pointer-events","none"),h.selectAll("rect.background, rect.extent").attr("height",e.timeline.height-2),h.selectAll("rect.background").attr("fill","none").attr("stroke-width",1).attr("stroke",e.timeline.tick.color).style("visibility","visible").attr("shape-rendering",e.shape.rendering.value),h.selectAll("rect.extent").attr("stroke-width",1).attr("fill",e.timeline.brush.color).attr("fill-opacity",e.timeline.brush.opacity).attr("stroke",e.timeline.tick.color).attr("shape-rendering",e.shape.rendering.value),e.timeline.handles.value?h.selectAll("g.resize").select("rect").attr("fill",e.timeline.handles.color).attr("stroke",e.timeline.handles.stroke).attr("stroke-width",1).attr("x",-e.timeline.handles.size/2).attr("width",e.timeline.handles.size).attr("height",e.timeline.height-2).style("visibility","visible").attr("shape-rendering",e.shape.rendering.value).attr("opacity",e.timeline.handles.opacity):h.selectAll("g.resize").remove(),e.timeline.handles.opacity&&h.selectAll("g.resize").on(d3plus.evt.over,function(){d3.select(this).select("rect").transition().duration(e.timing.mouseevents).attr("fill",e.timeline.handles.hover)}).on(d3plus.evt.out,function(){d3.select(this).select("rect").transition().duration(e.timing.mouseevents).attr("fill",e.timeline.handles.color)}),0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding);var E=e.g.timeline.node().getBBox();e.margin.bottom+=E.height+E.y,e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+(e.height.value-e.margin.bottom-e.ui.padding/2)+")"),e.margin.bottom+=e.ui.padding,e.dev.value&&d3plus.console.time("drawing timeline")}else e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")")}},{}],254:[function(){d3plus.ui.titles=function(e){function t(t){t.attr("text-anchor",function(e){var t=e.style.font.align;return"center"==t?"middle":"left"==t&&!d3plus.rtl||"right"==t&&d3plus.rtl?"start":"left"==t&&d3plus.rtl||"right"==t&&!d3plus.rtl?"end":void 0}).attr("x",function(t){var a=t.style.font.align;return"center"==a?e.width.value/2:"left"==a&&!d3plus.rtl||"right"==a&&d3plus.rtl?e.padding:"left"==a&&d3plus.rtl||"right"==a&&!d3plus.rtl?e.width.value-e.padding:void 0}).attr("y",0)}function a(t){t.attr("font-size",function(e){return e.style.font.size}).attr("fill",function(t){return t.link?e.links.font.color:t.style.font.color}).attr("font-family",function(t){return t.link?e.links.font.family.value:t.style.font.family.value}).attr("font-weight",function(t){return t.link?e.links.font.weight:t.style.font.weight}).style("text-decoration",function(t){return t.link?e.links.font.decoration.value:t.style.font.decoration.value}).style("text-transform",function(t){return t.link?e.links.font.transform.value:t.style.font.transform.value})}var n=e.size.value?e.size.value:"number"===e.color.type?e.color.value:!1;if(e.data.app&&e.title.total.value&&!e.small)if(n){if(e.dev.value&&d3plus.console.time("calculating total value"),e.focus.value){var r=e.data.app.filter(function(t){return t[e.id.value]==e.focus.value});r=d3.sum(r,function(t){return d3plus.variable.value(e,t,n)})}else var r=d3.sum(e.data.pool,function(t){return d3plus.variable.value(e,t,n)});if(0===r&&(r=!1),"number"==typeof r){var i="";if(e.data.mute.length||e.data.solo.length||e.focus.value){var l=d3.sum(e.data.value,function(t){if(e.time.solo.value.length>0)var a=e.time.solo.value.indexOf(d3plus.variable.value(e,t,e.time.value))>=0;else if(e.time.mute.value.length>0)var a=e.time.solo.value.indexOf(d3plus.variable.value(e,t,e.time.value))<0;else var a=!0;return a?d3plus.variable.value(e,t,n):void 0});if(l>r)var i=r/l*100,o=e.format.value(l,e.size.value),i=" ("+e.format.value(i,"share")+"% of "+o+")"}r=e.format.value(r,e.size.value);var s=e.title.total.value,u=s.prefix||e.format.value(e.format.locale.value.ui.total)+": ";r=u+r,s.suffix?r+=s.suffix:null,r+=i}e.dev.value&&d3plus.console.timeEnd("calculating total value")}else var r=!1;else var r=!1;var d=[];e.footer.value&&d.push({link:e.footer.link,style:e.footer,type:"footer",value:e.footer.value}),e.small||(e.title.value&&d.push({link:e.title.link,style:e.title,type:"title",value:e.title.value}),e.title.sub.value&&d.push({link:e.title.sub.link,style:e.title.sub,type:"sub",value:e.title.sub.value}),e.title.total.value&&r&&d.push({link:e.title.total.link,style:e.title.total,type:"total",value:r})),e.dev.value&&d3plus.console.time("drawing titles");var c=e.svg.selectAll("g.d3plus_title").data(d,function(e){return e.type}),p=e.title.width||e.width.value;c.enter().append("g").attr("class","d3plus_title").attr("opacity",0).attr("transform",function(t){var a="top"==t.style.position?0:e.height.value;return"translate(0,"+a+")"}).append("text").call(t).call(a),c.each(function(t){d3plus.textwrap().container(d3.select(this).select("text")).height(e.height.value/8).size(!1).text(t.value).width(p).draw(),t.y=e.margin[t.style.position],e.margin[t.style.position]+=this.getBBox().height+2*t.style.padding
}).on(d3plus.evt.over,function(t){t.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",e.links.hover.color).attr("font-family",e.links.hover.family.value).attr("font-weight",e.links.hover.weight).style("text-decoration",e.links.hover.decoration.value).style("text-transform",e.links.hover.transform.value)}).on(d3plus.evt.out,function(t){t.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","auto").select("text").call(a)}).on(d3plus.evt.click,function(e){if(e.link){var t="/"!=e.link.charAt(0)?"_blank":"_self";window.open(e.link,t)}}).transition().duration(e.draw.timing).attr("opacity",1).attr("transform",function(t){var a=t.style.position,n="top"==a?0+t.y:e.height.value-t.y;return"bottom"==a?n-=this.getBBox().height+t.style.padding:n+=t.style.padding,"translate(0,"+n+")"}).select("text").call(t).call(a),c.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.margin.top>0&&(e.margin.top+=e.title.padding),e.margin.bottom>0&&(e.margin.bottom+=e.title.padding);var f=e.title.height;f&&e.margin[e.title.position]<f&&(e.margin[e.title.position]=f),e.dev.value&&d3plus.console.timeEnd("drawing titles")}},{}],255:[function(){d3plus.viz=function(){var e={g:{apps:{}},shell:"viz"};e.self=function(t){return t.each(function(){function t(){s=o.shift();var t=e.g.message&&r===s.message,a="check"in s?s.check:!0;if("function"==typeof a&&(a=a(e)),a)if(!t&&e.draw.update){e.dev.value&&(r!==!1&&d3plus.console.groupEnd(),d3plus.console.groupCollapsed(s.message)),r="string"==typeof e.messages.value?e.messages.value:s.message;var n="string"==typeof e.messages.value?e.messages.value:e.format.value(s.message);d3plus.ui.message(e,n),setTimeout(d,10)}else d();else"otherwise"in s?setTimeout(function(){d("otherwise")},10):u()}e.draw.frozen=!0,e.internal_error=null,d3plus.draw.container(e),"timing"in e.draw||(e.draw.timing=e.timing.transitions);var a=e.width.value<=e.width.small,n=e.height.value<=e.height.small;e.small=a||n;var r=!1;if(e.error.value){var i=e.draw.timing;e.group.transition().duration(i).attr("opacity",0),e.g.data.transition().duration(i).attr("opacity",0),e.g.edges.transition().duration(i).attr("opacity",0),e.messages.style="large";var l=e.error.value===!0?e.format.value(e.format.locale.value.ui.error):e.error.value;r=l,d3plus.ui.message(e,l)}else{var o=d3plus.draw.steps(e),s=!1;e.container.value.style("cursor","wait"),e.messages.style=e.group&&"1"===e.group.attr("opacity")?"small":"large";var u=function(){o.length?t():(e.methodGroup=!1,e.dev.value&&(d3plus.console.timeEnd("total draw time"),d3plus.console.groupEnd(),d3plus.console.log("\n")),e.container.value.style("cursor","auto"))},d=function(t){var t=t||"function";s[t]instanceof Array?s[t].forEach(function(t){t(e,u)}):"function"==typeof s[t]&&s[t](e,u),s.wait||u()};t()}}),e.self};var t=["active","aggs","attrs","axes","color","container","coords","csv","data","depth","descs","dev","draw","edges","error","focus","footer","format","height","history","icon","id","labels","legend","margin","messages","nodes","order","shape","size","style","temp","text","time","timeline","title","tooltip","total","type","ui","width","x","y","zoom"],a=["axes","background","color","coords","data","edges","font","footer","height","labels","legend","links","messages","nodes","shape","timeline","timing","title","tooltip","ui","width "];return d3plus.method(e,t,a),e.self}},{}],256:[function(){d3plus.zoom.bounds=function(e,t,a){if(!t)var t=e.zoom.bounds;if("number"!=typeof a)var a=e.timing.transitions;e.zoom.size={height:t[1][1]-t[0][1],width:t[1][0]-t[0][0]};var n=e.coords.fit.value;if("auto"==n||d3plus.visualization[e.type.value].requirements.indexOf("coords")<0)var r=d3.max([e.zoom.size.width/e.width.viz,e.zoom.size.height/e.height.viz]);else var r=e.zoom.size[n]/e["app_"+n];var i=d3.min([e.width.viz,e.height.viz]),l=(i-2*e.coords.padding)/i/r,o=e.zoom.behavior.scaleExtent();(o[0]==o[1]||t==e.zoom.bounds)&&e.zoom.behavior.scaleExtent([l,16*l]);var s=e.zoom.behavior.scaleExtent()[1];l>s&&(l=s),e.zoom.scale=l;var u=[];u[0]=e.width.viz/2-e.zoom.size.width*l/2-t[0][0]*l,u[1]=e.height.viz/2-e.zoom.size.height*l/2-t[0][1]*l,e.zoom.translate=u,e.zoom.behavior.translate(u).scale(l),e.zoom.size={height:e.zoom.bounds[1][1]-e.zoom.bounds[0][1],width:e.zoom.bounds[1][0]-e.zoom.bounds[0][0]},d3plus.zoom.transform(e,a)}},{}],257:[function(){d3plus.zoom.controls=function(){if(d3.select("#d3plus.utilsts.zoom_controls").remove(),!vars.small){var e=vars.container.value.append("div").attr("id","d3plus.utilsts.zoom_controls").style("top",vars.margin.top+5+"px");e.append("div").attr("id","zoom_in").attr("unselectable","on").on(d3plus.evt.click,function(){vars.zoom("in")}).text("+"),e.append("div").attr("id","zoom_out").attr("unselectable","on").on(d3plus.evt.click,function(){vars.zoom("out")}).text("-"),e.append("div").attr("id","zoom_reset").attr("unselectable","on").on(d3plus.evt.click,function(){vars.zoom("reset"),vars.draw.update()}).html("&#8634;")}}},{}],258:[function(){d3plus.zoom.labels=function(e){var t=e.zoom.behavior.scaleExtent()[1];e.dev.value&&d3plus.console.time("determining label visibility"),e.draw.timing?e.g.viz.selectAll("text.d3plus_label").transition().duration(e.draw.timing).attr("opacity",function(a){if(!a)var a={scale:t};var n=parseFloat(d3.select(this).attr("font-size"),10);return a.visible=n/a.scale*e.zoom.scale>=7,a.visible?1:0}):e.g.viz.selectAll("text.d3plus_label").attr("opacity",function(a){if(!a)var a={scale:t};var n=parseFloat(d3.select(this).attr("font-size"),10);return a.visible=n/a.scale*e.zoom.scale>=7,a.visible?1:0}),e.dev.value&&d3plus.console.timeEnd("determining label visibility")}},{}],259:[function(){d3plus.zoom.mouse=function(e){var t=d3.event.translate,a=d3.event.scale,n=e.zoom.bounds,r=(e.width.viz-e.zoom.size.width*a)/2,i=r>0?r:0,l=r>0?e.width.viz-r:e.width.viz,o=(e.height.viz-e.zoom.size.height*a)/2,s=o>0?o:0,u=o>0?e.height.viz-o:e.height.viz;if(t[0]+n[0][0]*a>i?t[0]=-n[0][0]*a+i:t[0]+n[1][0]*a<l&&(t[0]=l-n[1][0]*a),t[1]+n[0][1]*a>s?t[1]=-n[0][1]*a+s:t[1]+n[1][1]*a<u&&(t[1]=u-n[1][1]*a),e.zoom.behavior.translate(t).scale(a),e.zoom.translate=t,e.zoom.scale=a,"wheel"==d3.event.sourceEvent.type){var d=e.draw.timing?100:250;clearTimeout(e.zoom.wheel),e.zoom.wheel=setTimeout(function(){d3plus.zoom.labels(e)},d)}else d3plus.zoom.labels(e);"dblclick"===d3.event.sourceEvent.type?d3plus.zoom.transform(e,e.timing.transitions):d3plus.zoom.transform(e,0)}},{}],260:[function(){d3plus.zoom.transform=function(e,t){if("number"!=typeof t)var t=e.timing.transitions;var a=e.zoom.translate,n=e.zoom.scale;t?e.g.viz.transition().duration(t).attr("transform","translate("+a+")scale("+n+")"):e.g.viz.attr("transform","translate("+a+")scale("+n+")")}},{}]},{},[91,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,82,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,83,84,85,86,87,88,89,90,92,93,94,95,104,96,97,98,99,100,101,102,103,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,191,192,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,201,193,194,195,196,197,198,199,200,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,255,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,256,257,258,259,260]);