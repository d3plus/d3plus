"use strict";(self.webpackChunk_d3plus_docs=self.webpackChunk_d3plus_docs||[]).push([[20],{"./charts/Priestley.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BasicExample:()=>BasicExample,GroupingBarsIntoLanes:()=>GroupingBarsIntoLanes,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Priestley_stories});var react=__webpack_require__("./node_modules/react/index.js"),Viz_args=__webpack_require__("./args/Viz.args.js"),src_assign=__webpack_require__("./node_modules/d3plus-common/es/src/assign.js"),min=__webpack_require__("./node_modules/d3-array/src/min.js"),max=__webpack_require__("./node_modules/d3-array/src/max.js"),range=__webpack_require__("./node_modules/d3-array/src/range.js"),src=__webpack_require__("./node_modules/d3-collection/src/index.js"),band=__webpack_require__("./node_modules/d3-scale/src/band.js"),Axis=__webpack_require__("./node_modules/d3plus-axis/es/src/Axis.js"),date=__webpack_require__("./node_modules/d3plus-axis/es/src/date.js"),elem=__webpack_require__("./node_modules/d3plus-common/es/src/elem.js"),configPrep=__webpack_require__("./node_modules/d3plus-common/es/src/configPrep.js"),accessor=__webpack_require__("./node_modules/d3plus-common/es/src/accessor.js"),Rect=__webpack_require__("./node_modules/d3plus-shape/es/src/Shape/Rect.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Priestley_Priestley=function(_Viz){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Priestley,_Viz);var _super=_createSuper(Priestley);function Priestley(){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Priestley),(_this=_super.call(this))._axis=(new Axis.A).align("end").orient("bottom"),_this._axisConfig={scale:"time"},_this._axisTest=(new Axis.A).align("end").gridSize(0).orient("bottom"),_this.end("end"),_this._paddingInner=.05,_this._paddingOuter=.05,_this._shapeConfig=(0,src_assign.A)({},_this._shapeConfig,{ariaLabel:function ariaLabel(d,i){return"".concat(_this._drawLabel(d,i),", ").concat(_this._start(d,i)," - ").concat(_this._end(d,i),".")}}),_this.start("start"),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Priestley,[{key:"_draw",value:function _draw(callback){var _this2=this;if(_get(_getPrototypeOf(Priestley.prototype),"_draw",this).call(this,callback),!this._filteredData)return this;var nestedData,data=this._filteredData.map((function(data,i){return{__d3plus__:!0,data,end:"time"===_this2._axisConfig.scale?(0,date.A)(_this2._end(data,i)):_this2._end(data,i),i,id:_this2._id(data,i),start:"time"===_this2._axisConfig.scale?(0,date.A)(_this2._start(data,i)):_this2._start(data,i)}})).filter((function(d){return d.end-d.start>0})).sort((function(a,b){return a.start-b.start}));if(this._groupBy.length>1&&this._drawDepth>0){for(var dataNest=(0,src.$I)(),_loop=function _loop(i){dataNest.key((function(d){return _this2._groupBy[i](d.data,d.i)}))},i=0;i<this._drawDepth;i++)_loop(i);nestedData=dataNest.entries(data)}else nestedData=[{values:data}];var maxLane=0;nestedData.forEach((function(g){var track=[];g.values.forEach((function(d){var i=(track=track.map((function(t){return!(t<=d.start)&&t}))).indexOf(!1);i<0?(d.lane=maxLane+track.length,track.push(d.end)):(track[i]=d.end,d.lane=maxLane+i)})),maxLane+=track.length}));var axisConfig={domain:[(0,min.A)(data,(function(d){return d.start}))||0,(0,max.A)(data,(function(d){return d.end}))||0],height:this._height-this._margin.top-this._margin.bottom,width:this._width-this._margin.left-this._margin.right},transform="translate(".concat(this._margin.left,", ").concat(this._margin.top,")");this._axisTest.config(axisConfig).config(this._axisConfig).select((0,elem.A)("g.d3plus-priestley-axis-test",{parent:this._select,enter:{opacity:0}}).node()).render(),this._axis.config(axisConfig).config(this._axisConfig).select((0,elem.A)("g.d3plus-priestley-axis",{parent:this._select,enter:{transform},update:{transform}}).node()).render();var axisPad=this._axisTest._padding,xScale=this._axis._d3Scale,yScale=(0,band.A)().domain((0,range.A)(0,maxLane,1)).paddingInner(this._paddingInner).paddingOuter(this._paddingOuter).rangeRound([this._height-this._margin.bottom-this._axisTest.outerBounds().height-axisPad,this._margin.top+axisPad]),bandWidth=yScale.bandwidth();return this._shapes.push((new Rect.A).data(data).duration(this._duration).height(bandWidth).label((function(d,i){return _this2._drawLabel(d.data,i)})).select((0,elem.A)("g.d3plus-priestley-shapes",{parent:this._select}).node()).width((function(d){var w=Math.abs(xScale(d.end)-xScale(d.start));return w>2?w-2:w})).x((function(d){return xScale(d.start)+(xScale(d.end)-xScale(d.start))/2})).y((function(d){return yScale(d.lane)+bandWidth/2})).config(configPrep.A.bind(this)(this._shapeConfig,"shape","Rect")).render()),this}},{key:"axisConfig",value:function axisConfig(_){return arguments.length?(this._axisConfig=(0,src_assign.A)(this._axisConfig,_),this):this._axisConfig}},{key:"end",value:function end(_){return arguments.length?("function"==typeof _?this._end=_:(this._end=(0,accessor.A)(_),this._aggs[_]||(this._aggs[_]=max.A)),this):this._end}},{key:"paddingInner",value:function paddingInner(_){return arguments.length?(this._paddingInner=_,this):this._paddingInner}},{key:"paddingOuter",value:function paddingOuter(_){return arguments.length?(this._paddingOuter=_,this):this._paddingOuter}},{key:"start",value:function start(_){return arguments.length?("function"==typeof _?this._start=_:(this._start=(0,accessor.A)(_),this._aggs[_]||(this._aggs[_]=min.A)),this):this._start}}]),Priestley}(__webpack_require__("./node_modules/d3plus-viz/es/src/Viz.js").A),src_Viz=__webpack_require__("./node_modules/d3plus-react/es/src/Viz.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const src_Priestley=function Priestley(props){return react.createElement(src_Viz.A,_extends({type:Priestley_Priestley},props))},Priestley_args_Priestley=({config})=>react.createElement(src_Priestley,{config}),argTypes=(0,src_assign.A)(Object.keys(Viz_args.A.argTypes).filter((k=>!k.match(/^(discrete|shape|zoom.*)$/))).reduce(((obj,k)=>(obj[k]=Viz_args.A.argTypes[k],obj)),{}),{axisConfig:{type:{summary:"object"},defaultValue:{scale:"time"},table:{defaultValue:{summary:"object",detail:'\n{\n  scale: "time"\n}'}},control:{type:"object"},description:"Sets the config method for the axis."},end:{type:{summary:"string | function"},defaultValue:"end",table:{defaultValue:{summary:"end"}},control:{type:"text"},description:"Sets the end accessor to the specified function or key."},paddingInner:{type:{summary:"number"},defaultValue:.05,table:{defaultValue:{summary:.05}},control:{type:"number"},description:"Sets the inner padding value of the underlining band scale used to determine the height of each bar. Values should be a ratio between 0 and 1 representing the space in between each rectangle."},paddingOuter:{type:{summary:"number"},defaultValue:.05,table:{defaultValue:{summary:.05}},control:{type:"number"},description:"Sets the outer padding value of the underlining band scale used to determine the height of each bar. Values should be a ratio between 0 and 1 representing the space around the outer rectangles."},start:{type:{summary:"string | function"},defaultValue:"start",table:{defaultValue:{summary:"start"}},control:{type:"text"},description:"Sets the start accessor to the specified function or key"}});Priestley_args_Priestley.__docgenInfo={description:"",methods:[],displayName:"Priestley"};var configify=__webpack_require__("./helpers/configify.js"),funcify=__webpack_require__("./helpers/funcify.js");const Priestley_stories={title:"Charts/Priestley",component:Priestley_args_Priestley,argTypes},Template=args=>react.createElement(Priestley_args_Priestley,{config:(0,configify.A)(args,argTypes)}),BasicExample=Template.bind({});BasicExample.args={data:[{element:"alpha",birth:2004,death:2007},{element:"epsilon",birth:2007,death:2012},{element:"beta",birth:2005,death:2010}],end:"death",groupBy:"element",start:"birth"},BasicExample.parameters={controls:{include:["end","start"]}};const GroupingBarsIntoLanes=Template.bind({});GroupingBarsIntoLanes.args={data:[{parent:"Group 1",id:"alpha",start:2004,end:2007},{parent:"Group 2",id:"epsilon",start:2007,end:2012},{parent:"Group 1",id:"beta",start:2005,end:2010},{parent:"Group 1",id:"gamma",start:2008,end:2013},{parent:"Group 2",id:"delta",start:2004,end:2007}],end:"death",groupBy:["parent","id"],shapeConfig:{fill:(0,funcify.A)((d=>"Group 1"===d.parent?"firebrick":"cornflowerblue"),'d => d.parent === "Group 1" ? "firebrick" : "cornflowerblue"')},start:"birth"},GroupingBarsIntoLanes.parameters={controls:{include:["groupBy","shapeConfig"]}};const __namedExportsOrder=["BasicExample","GroupingBarsIntoLanes"];BasicExample.parameters={...BasicExample.parameters,docs:{...BasicExample.parameters?.docs,source:{originalSource:"args => <Viz config={configify(args, argTypes)} />",...BasicExample.parameters?.docs?.source}}},GroupingBarsIntoLanes.parameters={...GroupingBarsIntoLanes.parameters,docs:{...GroupingBarsIntoLanes.parameters?.docs,source:{originalSource:"args => <Viz config={configify(args, argTypes)} />",...GroupingBarsIntoLanes.parameters?.docs?.source}}}},"./helpers/funcify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function __WEBPACK_DEFAULT_EXPORT__(fn,str){return fn.toString=()=>str,fn.toJSON=()=>str,fn}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__})}}]);