"use strict";(self.webpackChunk_d3plus_docs=self.webpackChunk_d3plus_docs||[]).push([[841],{"./node_modules/d3-array/src/mean.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function mean(values,valueof){let count=0,sum=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(++count,sum+=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(++count,sum+=value)}if(count)return sum/count}__webpack_require__.d(__webpack_exports__,{A:()=>mean})},"./node_modules/d3plus-react/es/src/Network.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>src_Network});var react=__webpack_require__("./node_modules/react/index.js"),min=__webpack_require__("./node_modules/d3-array/src/min.js"),extent=__webpack_require__("./node_modules/d3-array/src/extent.js"),max=__webpack_require__("./node_modules/d3-array/src/max.js"),merge=__webpack_require__("./node_modules/d3-array/src/merge.js"),mean=__webpack_require__("./node_modules/d3-array/src/mean.js"),src=__webpack_require__("./node_modules/d3-collection/src/index.js"),dispatch=__webpack_require__("./node_modules/d3-dispatch/src/dispatch.js"),timer=__webpack_require__("./node_modules/d3-timer/src/timer.js");const m=4294967296;function x(d){return d.x}function y(d){return d.y}var initialAngle=Math.PI*(3-Math.sqrt(5));function src_simulation(nodes){var simulation,alpha=1,alphaMin=.001,alphaDecay=1-Math.pow(alphaMin,1/300),alphaTarget=0,velocityDecay=.6,forces=new Map,stepper=(0,timer.O1)(step),event=(0,dispatch.A)("tick","end"),random=function lcg(){let s=1;return()=>(s=(1664525*s+1013904223)%m)/m}();function step(){tick(),event.call("tick",simulation),alpha<alphaMin&&(stepper.stop(),event.call("end",simulation))}function tick(iterations){var i,node,n=nodes.length;void 0===iterations&&(iterations=1);for(var k=0;k<iterations;++k)for(alpha+=(alphaTarget-alpha)*alphaDecay,forces.forEach((function(force){force(alpha)})),i=0;i<n;++i)null==(node=nodes[i]).fx?node.x+=node.vx*=velocityDecay:(node.x=node.fx,node.vx=0),null==node.fy?node.y+=node.vy*=velocityDecay:(node.y=node.fy,node.vy=0);return simulation}function initializeNodes(){for(var node,i=0,n=nodes.length;i<n;++i){if((node=nodes[i]).index=i,null!=node.fx&&(node.x=node.fx),null!=node.fy&&(node.y=node.fy),isNaN(node.x)||isNaN(node.y)){var radius=10*Math.sqrt(.5+i),angle=i*initialAngle;node.x=radius*Math.cos(angle),node.y=radius*Math.sin(angle)}(isNaN(node.vx)||isNaN(node.vy))&&(node.vx=node.vy=0)}}function initializeForce(force){return force.initialize&&force.initialize(nodes,random),force}return null==nodes&&(nodes=[]),initializeNodes(),simulation={tick,restart:function(){return stepper.restart(step),simulation},stop:function(){return stepper.stop(),simulation},nodes:function(_){return arguments.length?(nodes=_,initializeNodes(),forces.forEach(initializeForce),simulation):nodes},alpha:function(_){return arguments.length?(alpha=+_,simulation):alpha},alphaMin:function(_){return arguments.length?(alphaMin=+_,simulation):alphaMin},alphaDecay:function(_){return arguments.length?(alphaDecay=+_,simulation):+alphaDecay},alphaTarget:function(_){return arguments.length?(alphaTarget=+_,simulation):alphaTarget},velocityDecay:function(_){return arguments.length?(velocityDecay=1-_,simulation):1-velocityDecay},randomSource:function(_){return arguments.length?(random=_,forces.forEach(initializeForce),simulation):random},force:function(name,_){return arguments.length>1?(null==_?forces.delete(name):forces.set(name,initializeForce(_)),simulation):forces.get(name)},find:function(x,y,radius){var dx,dy,d2,node,closest,i=0,n=nodes.length;for(null==radius?radius=1/0:radius*=radius,i=0;i<n;++i)(d2=(dx=x-(node=nodes[i]).x)*dx+(dy=y-node.y)*dy)<radius&&(closest=node,radius=d2);return closest},on:function(name,_){return arguments.length>1?(event.on(name,_),simulation):event.on(name)}}}function constant(x){return function(){return x}}function jiggle(random){return 1e-6*(random()-.5)}function index(d){return d.index}function find(nodeById,nodeId){var node=nodeById.get(nodeId);if(!node)throw new Error("node not found: "+nodeId);return node}function add_add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,xm,ym,xp,yp,right,bottom,i,j,node=tree._root,leaf={data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1;if(!node)return tree._root=leaf,tree;for(;node.length;)if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return parent[i]=leaf,tree;if(xp=+tree._x.call(null,node.data),yp=+tree._y.call(null,node.data),x===xp&&y===yp)return leaf.next=node,parent?parent[i]=leaf:tree._root=leaf,tree;do{parent=parent?parent[i]=new Array(4):tree._root=new Array(4),(right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym}while((i=bottom<<1|right)==(j=(yp>=ym)<<1|xp>=xm));return parent[j]=node,parent[i]=leaf,tree}function quad(node,x0,y0,x1,y1){this.node=node,this.x0=x0,this.y0=y0,this.x1=x1,this.y1=y1}function defaultX(d){return d[0]}function defaultY(d){return d[1]}function quadtree(nodes,x,y){var tree=new Quadtree(null==x?defaultX:x,null==y?defaultY:y,NaN,NaN,NaN,NaN);return null==nodes?tree:tree.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){this._x=x,this._y=y,this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this._root=void 0}function leaf_copy(leaf){for(var copy={data:leaf.data},next=copy;leaf=leaf.next;)next=next.next={data:leaf.data};return copy}var treeProto=quadtree.prototype=Quadtree.prototype;function manyBody(){var nodes,node,random,alpha,strengths,strength=constant(-30),distanceMin2=1,distanceMax2=1/0,theta2=.81;function force(_){var i,n=nodes.length,tree=quadtree(nodes,x,y).visitAfter(accumulate);for(alpha=_,i=0;i<n;++i)node=nodes[i],tree.visit(apply)}function initialize(){if(nodes){var i,node,n=nodes.length;for(strengths=new Array(n),i=0;i<n;++i)node=nodes[i],strengths[node.index]=+strength(node,i,nodes)}}function accumulate(quad){var q,c,x,y,i,strength=0,weight=0;if(quad.length){for(x=y=i=0;i<4;++i)(q=quad[i])&&(c=Math.abs(q.value))&&(strength+=q.value,weight+=c,x+=c*q.x,y+=c*q.y);quad.x=x/weight,quad.y=y/weight}else{(q=quad).x=q.data.x,q.y=q.data.y;do{strength+=strengths[q.data.index]}while(q=q.next)}quad.value=strength}function apply(quad,x1,_,x2){if(!quad.value)return!0;var x=quad.x-node.x,y=quad.y-node.y,w=x2-x1,l=x*x+y*y;if(w*w/theta2<l)return l<distanceMax2&&(0===x&&(l+=(x=jiggle(random))*x),0===y&&(l+=(y=jiggle(random))*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)),node.vx+=x*quad.value*alpha/l,node.vy+=y*quad.value*alpha/l),!0;if(!(quad.length||l>=distanceMax2)){(quad.data!==node||quad.next)&&(0===x&&(l+=(x=jiggle(random))*x),0===y&&(l+=(y=jiggle(random))*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)));do{quad.data!==node&&(w=strengths[quad.data.index]*alpha/l,node.vx+=x*w,node.vy+=y*w)}while(quad=quad.next)}}return force.initialize=function(_nodes,_random){nodes=_nodes,random=_random,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant(+_),initialize(),force):strength},force.distanceMin=function(_){return arguments.length?(distanceMin2=_*_,force):Math.sqrt(distanceMin2)},force.distanceMax=function(_){return arguments.length?(distanceMax2=_*_,force):Math.sqrt(distanceMax2)},force.theta=function(_){return arguments.length?(theta2=_*_,force):Math.sqrt(theta2)},force}function cross(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function lexicographicOrder(a,b){return a[0]-b[0]||a[1]-b[1]}function computeUpperHullIndexes(points){const n=points.length,indexes=[0,1];let i,size=2;for(i=2;i<n;++i){for(;size>1&&cross(points[indexes[size-2]],points[indexes[size-1]],points[i])<=0;)--size;indexes[size++]=i}return indexes.slice(0,size)}treeProto.copy=function(){var nodes,child,copy=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root;if(!node)return copy;if(!node.length)return copy._root=leaf_copy(node),copy;for(nodes=[{source:node,target:copy._root=new Array(4)}];node=nodes.pop();)for(var i=0;i<4;++i)(child=node.source[i])&&(child.length?nodes.push({source:child,target:node.target[i]=new Array(4)}):node.target[i]=leaf_copy(child));return copy},treeProto.add=function add(d){const x=+this._x.call(null,d),y=+this._y.call(null,d);return add_add(this.cover(x,y),x,y,d)},treeProto.addAll=function addAll(data){var d,i,x,y,n=data.length,xz=new Array(n),yz=new Array(n),x0=1/0,y0=1/0,x1=-1/0,y1=-1/0;for(i=0;i<n;++i)isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d))||(xz[i]=x,yz[i]=y,x<x0&&(x0=x),x>x1&&(x1=x),y<y0&&(y0=y),y>y1&&(y1=y));if(x0>x1||y0>y1)return this;for(this.cover(x0,y0).cover(x1,y1),i=0;i<n;++i)add_add(this,xz[i],yz[i],data[i]);return this},treeProto.cover=function cover(x,y){if(isNaN(x=+x)||isNaN(y=+y))return this;var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0))x1=(x0=Math.floor(x))+1,y1=(y0=Math.floor(y))+1;else{for(var parent,i,z=x1-x0||1,node=this._root;x0>x||x>=x1||y0>y||y>=y1;)switch(i=(y<y0)<<1|x<x0,(parent=new Array(4))[i]=node,node=parent,z*=2,i){case 0:x1=x0+z,y1=y0+z;break;case 1:x0=x1-z,y1=y0+z;break;case 2:x1=x0+z,y0=y1-z;break;case 3:x0=x1-z,y0=y1-z}this._root&&this._root.length&&(this._root=node)}return this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this},treeProto.data=function data(){var data=[];return this.visit((function(node){if(!node.length)do{data.push(node.data)}while(node=node.next)})),data},treeProto.extent=function src_extent(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},treeProto.find=function src_find(x,y,radius){var data,x1,y1,x2,y2,q,i,x0=this._x0,y0=this._y0,x3=this._x1,y3=this._y1,quads=[],node=this._root;for(node&&quads.push(new quad(node,x0,y0,x3,y3)),null==radius?radius=1/0:(x0=x-radius,y0=y-radius,x3=x+radius,y3=y+radius,radius*=radius);q=quads.pop();)if(!(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0))if(node.length){var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new quad(node[3],xm,ym,x2,y2),new quad(node[2],x1,ym,xm,y2),new quad(node[1],xm,y1,x2,ym),new quad(node[0],x1,y1,xm,ym)),(i=(y>=ym)<<1|x>=xm)&&(q=quads[quads.length-1],quads[quads.length-1]=quads[quads.length-1-i],quads[quads.length-1-i]=q)}else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;if(d2<radius){var d=Math.sqrt(radius=d2);x0=x-d,y0=y-d,x3=x+d,y3=y+d,data=node.data}}return data},treeProto.remove=function remove(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;var parent,retainer,previous,next,x,y,xm,ym,right,bottom,i,j,node=this._root,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(!node)return this;if(node.length)for(;;){if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return this;if(!node.length)break;(parent[i+1&3]||parent[i+2&3]||parent[i+3&3])&&(retainer=parent,j=i)}for(;node.data!==d;)if(previous=node,!(node=node.next))return this;return(next=node.next)&&delete node.next,previous?(next?previous.next=next:delete previous.next,this):parent?(next?parent[i]=next:delete parent[i],(node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length&&(retainer?retainer[j]=node:this._root=node),this):(this._root=next,this)},treeProto.removeAll=function removeAll(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this},treeProto.root=function root(){return this._root},treeProto.size=function size(){var size=0;return this.visit((function(node){if(!node.length)do{++size}while(node=node.next)})),size},treeProto.visit=function visit(callback){var q,child,x0,y0,x1,y1,quads=[],node=this._root;for(node&&quads.push(new quad(node,this._x0,this._y0,this._x1,this._y1));q=quads.pop();)if(!callback(node=q.node,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1)&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[3])&&quads.push(new quad(child,xm,ym,x1,y1)),(child=node[2])&&quads.push(new quad(child,x0,ym,xm,y1)),(child=node[1])&&quads.push(new quad(child,xm,y0,x1,ym)),(child=node[0])&&quads.push(new quad(child,x0,y0,xm,ym))}return this},treeProto.visitAfter=function visitAfter(callback){var q,quads=[],next=[];for(this._root&&quads.push(new quad(this._root,this._x0,this._y0,this._x1,this._y1));q=quads.pop();){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[0])&&quads.push(new quad(child,x0,y0,xm,ym)),(child=node[1])&&quads.push(new quad(child,xm,y0,x1,ym)),(child=node[2])&&quads.push(new quad(child,x0,ym,xm,y1)),(child=node[3])&&quads.push(new quad(child,xm,ym,x1,y1))}next.push(q)}for(;q=next.pop();)callback(q.node,q.x0,q.y0,q.x1,q.y1);return this},treeProto.x=function src_x(_){return arguments.length?(this._x=_,this):this._x},treeProto.y=function src_y(_){return arguments.length?(this._y=_,this):this._y};var linear=__webpack_require__("./node_modules/d3-scale/src/linear.js"),d3_scale_src=__webpack_require__("./node_modules/d3-scale/src/index.js"),d3_zoom_src=__webpack_require__("./node_modules/d3-zoom/src/index.js"),src_constant=__webpack_require__("./node_modules/d3plus-common/es/src/constant.js"),accessor=__webpack_require__("./node_modules/d3plus-common/es/src/accessor.js"),src_assign=__webpack_require__("./node_modules/d3plus-common/es/src/assign.js"),configPrep=__webpack_require__("./node_modules/d3plus-common/es/src/configPrep.js"),elem=__webpack_require__("./node_modules/d3plus-common/es/src/elem.js"),largestRect=__webpack_require__("./node_modules/d3plus-shape/es/src/geom/largestRect.js"),pointRotate=__webpack_require__("./node_modules/d3plus-shape/es/src/geom/pointRotate.js"),pointDistance=__webpack_require__("./node_modules/d3plus-shape/es/src/geom/pointDistance.js"),Path=__webpack_require__("./node_modules/d3plus-shape/es/src/Shape/Path.js"),es=__webpack_require__("./node_modules/d3plus-shape/es/index.js"),addToQueue=__webpack_require__("./node_modules/d3plus-viz/es/src/data/addToQueue.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}(this,result)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function getNodeId(d,i){return"".concat(this._id(d,i)||this._nodeGroupBy[(0,min.A)([this._drawDepth,this._nodeGroupBy.length-1])](d,i))}var Network_Network=function(_Viz){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Network,_Viz);var _super=_createSuper(Network);function Network(){var _this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Network),(_this=_super.call(this))._links=[],_this._linkSize=(0,src_constant.A)(1),_this._linkSizeMin=1,_this._linkSizeScale="sqrt",_this._noDataMessage=!1,_this._nodeGroupBy=[(0,accessor.A)("id")],_this._nodes=[],_this._on["click.shape"]=function(d,i,x,event){if(_this._tooltipClass.data([]).render(),_this._hover&&_this._drawDepth>=_this._groupBy.length-1){var id=getNodeId.bind(_assertThisInitialized(_this))(d,i);if(_this._focus&&_this._focus===id)_this.active(!1),_this._on.mouseenter.bind(_assertThisInitialized(_this))(d,i,x,event),_this._focus=void 0,_this._zoomToBounds(null);else{_this.hover(!1);var links=_this._linkLookup[id],node=_this._nodeLookup[id],filterIds=[id],xDomain=[node.x-node.r,node.x+node.r],yDomain=[node.y-node.r,node.y+node.r];links.forEach((function(l){filterIds.push(l.id),l.x-l.r<xDomain[0]&&(xDomain[0]=l.x-l.r),l.x+l.r>xDomain[1]&&(xDomain[1]=l.x+l.r),l.y-l.r<yDomain[0]&&(yDomain[0]=l.y-l.r),l.y+l.r>yDomain[1]&&(yDomain[1]=l.y+l.r)})),_this.active((function(h,x){return h.source&&h.target?h.source.id===id||h.target.id===id:filterIds.includes(getNodeId.bind(_assertThisInitialized(_this))(h,x))})),_this._focus=id;var t=(0,d3_zoom_src._V)(_this._container.node());xDomain=xDomain.map((function(d){return d*t.k+t.x})),yDomain=yDomain.map((function(d){return d*t.k+t.y})),_this._zoomToBounds([[xDomain[0],yDomain[0]],[xDomain[1],yDomain[1]]])}}},_this._on["click.legend"]=function(d,i,x,event){var ids=_this._id(d),id=_this._ids(d);if(id=id[id.length-1],_this._hover&&_this._drawDepth>=_this._groupBy.length-1){if(_this._focus&&_this._focus===ids)_this.active(!1),_this._focus=void 0,_this._zoomToBounds(null);else{_this.hover(!1);var nodes=ids.map((function(id){return _this._nodeLookup[id]})),filterIds=["".concat(id)],xDomain=[nodes[0].x-nodes[0].r,nodes[0].x+nodes[0].r],yDomain=[nodes[0].y-nodes[0].r,nodes[0].y+nodes[0].r];nodes.forEach((function(l){filterIds.push(l.id),l.x-l.r<xDomain[0]&&(xDomain[0]=l.x-l.r),l.x+l.r>xDomain[1]&&(xDomain[1]=l.x+l.r),l.y-l.r<yDomain[0]&&(yDomain[0]=l.y-l.r),l.y+l.r>yDomain[1]&&(yDomain[1]=l.y+l.r)})),_this.active((function(h,x){if(h.source&&h.target)return filterIds.includes(h.source.id)&&filterIds.includes(h.target.id);var myIds=_this._ids(h,x);return filterIds.includes("".concat(myIds[myIds.length-1]))})),_this._focus=ids;var t=(0,d3_zoom_src._V)(_this._container.node());xDomain=xDomain.map((function(d){return d*t.k+t.x})),yDomain=yDomain.map((function(d){return d*t.k+t.y})),_this._zoomToBounds([[xDomain[0],yDomain[0]],[xDomain[1],yDomain[1]]])}_this._on.mouseenter.bind(_assertThisInitialized(_this))(d,i,x,event),_this._on["mousemove.legend"].bind(_assertThisInitialized(_this))(d,i,x,event)}},_this._on.mouseenter=function(){},_this._on["mouseleave.shape"]=function(){_this.hover(!1)};var defaultMouseMove=_this._on["mousemove.shape"];return _this._on["mousemove.shape"]=function(d,i,x,event){defaultMouseMove(d,i,x,event);var id=getNodeId.bind(_assertThisInitialized(_this))(d,i),links=_this._linkLookup[id]||[],node=_this._nodeLookup[id],filterIds=[id],xDomain=[node.x-node.r,node.x+node.r],yDomain=[node.y-node.r,node.y+node.r];links.forEach((function(l){filterIds.push(l.id),l.x-l.r<xDomain[0]&&(xDomain[0]=l.x-l.r),l.x+l.r>xDomain[1]&&(xDomain[1]=l.x+l.r),l.y-l.r<yDomain[0]&&(yDomain[0]=l.y-l.r),l.y+l.r>yDomain[1]&&(yDomain[1]=l.y+l.r)})),_this.hover((function(h,x){return h.source&&h.target?h.source.id===id||h.target.id===id:filterIds.includes("".concat(_this._ids(h,x)[_this._drawDepth]))}))},_this._sizeMin=5,_this._sizeScale="sqrt",_this._shape=(0,src_constant.A)("Circle"),_this._shapeConfig=(0,src_assign.A)(_this._shapeConfig,{ariaLabel:function ariaLabel(d,i){var validSize=_this._size?", ".concat(_this._size(d,i)):"";return"".concat(_this._drawLabel(d,i)).concat(validSize,".")},labelConfig:{duration:0,fontMin:1,fontResize:!0,labelPadding:0,textAnchor:"middle",verticalAlign:"middle"},Path:{fill:"none",label:!1,stroke:"#eee"}}),_this._x=(0,accessor.A)("x"),_this._y=(0,accessor.A)("y"),_this._zoom=!0,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Network,[{key:"_draw",value:function _draw(callback){var _this2=this;_get(_getPrototypeOf(Network.prototype),"_draw",this).call(this,callback);var duration=this._duration,height=this._height-this._margin.top-this._margin.bottom,transform="translate(".concat(this._margin.left,", ").concat(this._margin.top,")"),width=this._width-this._margin.left-this._margin.right,data=this._filteredData.reduce((function(obj,d,i){return obj[_this2._id(d,i)]=d,obj}),{}),nodes=this._nodes.reduce((function(obj,d,i){return obj[getNodeId.bind(_this2)(d,i)]=d,obj}),{});nodes=Array.from(new Set(Object.keys(data).concat(Object.keys(nodes)))).map((function(id,i){var d=data[id],n=nodes[id];return void 0!==n&&{__d3plus__:!0,data:d||n,i,id,fx:void 0===d||isNaN(_this2._x(d))?_this2._x(n):_this2._x(d),fy:void 0===d||isNaN(_this2._y(d))?_this2._y(n):_this2._y(d),node:n,r:_this2._size?void 0!==d&&void 0!==_this2._size(d)?_this2._size(d):_this2._size(n):_this2._sizeMin,shape:void 0!==d&&void 0!==_this2._shape(d)?_this2._shape(d):_this2._shape(n)}})).filter((function(n){return n}));var nodeLookup=this._nodeLookup=nodes.reduce((function(obj,d){return obj[d.id]=d,obj}),{}),nodeIndices=nodes.map((function(n){return n.node})),links=this._links.map((function(l){var referenceType=_typeof(l.source);return{size:_this2._linkSize(l),source:"number"===referenceType?nodes[nodeIndices.indexOf(_this2._nodes[l.source])]:"string"===referenceType?nodeLookup[l.source]:nodeLookup[l.source.id],target:"number"===referenceType?nodes[nodeIndices.indexOf(_this2._nodes[l.target])]:"string"===referenceType?nodeLookup[l.target]:nodeLookup[l.target.id]}}));if(this._linkLookup=links.reduce((function(obj,d){return obj[d.source.id]||(obj[d.source.id]=[]),obj[d.source.id].push(d.target),obj[d.target.id]||(obj[d.target.id]=[]),obj[d.target.id].push(d.source),obj}),{}),nodes.some((function(n){return void 0===n.fx||void 0===n.fy}))){var linkStrength=linear.A().domain((0,extent.A)(links,(function(d){return d.size}))).range([.1,.5]),simulation=src_simulation().force("link",function src_link(links){var strengths,distances,nodes,count,bias,random,id=index,strength=function defaultStrength(link){return 1/Math.min(count[link.source.index],count[link.target.index])},distance=constant(30),iterations=1;function force(alpha){for(var k=0,n=links.length;k<iterations;++k)for(var link,source,target,x,y,l,b,i=0;i<n;++i)source=(link=links[i]).source,x=(target=link.target).x+target.vx-source.x-source.vx||jiggle(random),y=target.y+target.vy-source.y-source.vy||jiggle(random),x*=l=((l=Math.sqrt(x*x+y*y))-distances[i])/l*alpha*strengths[i],y*=l,target.vx-=x*(b=bias[i]),target.vy-=y*b,source.vx+=x*(b=1-b),source.vy+=y*b}function initialize(){if(nodes){var i,link,n=nodes.length,m=links.length,nodeById=new Map(nodes.map(((d,i)=>[id(d,i,nodes),d])));for(i=0,count=new Array(n);i<m;++i)(link=links[i]).index=i,"object"!=typeof link.source&&(link.source=find(nodeById,link.source)),"object"!=typeof link.target&&(link.target=find(nodeById,link.target)),count[link.source.index]=(count[link.source.index]||0)+1,count[link.target.index]=(count[link.target.index]||0)+1;for(i=0,bias=new Array(m);i<m;++i)link=links[i],bias[i]=count[link.source.index]/(count[link.source.index]+count[link.target.index]);strengths=new Array(m),initializeStrength(),distances=new Array(m),initializeDistance()}}function initializeStrength(){if(nodes)for(var i=0,n=links.length;i<n;++i)strengths[i]=+strength(links[i],i,links)}function initializeDistance(){if(nodes)for(var i=0,n=links.length;i<n;++i)distances[i]=+distance(links[i],i,links)}return null==links&&(links=[]),force.initialize=function(_nodes,_random){nodes=_nodes,random=_random,initialize()},force.links=function(_){return arguments.length?(links=_,initialize(),force):links},force.id=function(_){return arguments.length?(id=_,force):id},force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant(+_),initializeStrength(),force):strength},force.distance=function(_){return arguments.length?(distance="function"==typeof _?_:constant(+_),initializeDistance(),force):distance},force}(links).id((function(d){return d.id})).distance(1).strength((function(d){return linkStrength(d.size)})).iterations(4)).force("charge",manyBody().strength(-1)).stop(),alphaDecay=1-Math.pow(.001,.01);simulation.velocityDecay(0),simulation.alphaMin(.001),simulation.alphaDecay(alphaDecay),simulation.alphaDecay(0),simulation.nodes(nodes),simulation.tick(100).stop();var nodePositions=nodes.map((function(n){return[n.vx,n.vy]})),angle=0,cx=0,cy=0;if(2===nodePositions.length)angle=100;else if(nodePositions.length>2){var hull=function src_hull(points){if((n=points.length)<3)return null;var i,n,sortedPoints=new Array(n),flippedPoints=new Array(n);for(i=0;i<n;++i)sortedPoints[i]=[+points[i][0],+points[i][1],i];for(sortedPoints.sort(lexicographicOrder),i=0;i<n;++i)flippedPoints[i]=[sortedPoints[i][0],-sortedPoints[i][1]];var upperIndexes=computeUpperHullIndexes(sortedPoints),lowerIndexes=computeUpperHullIndexes(flippedPoints),skipLeft=lowerIndexes[0]===upperIndexes[0],skipRight=lowerIndexes[lowerIndexes.length-1]===upperIndexes[upperIndexes.length-1],hull=[];for(i=upperIndexes.length-1;i>=0;--i)hull.push(points[sortedPoints[upperIndexes[i]][2]]);for(i=+skipLeft;i<lowerIndexes.length-skipRight;++i)hull.push(points[sortedPoints[lowerIndexes[i]][2]]);return hull}(nodePositions),rect=largestRect.A(hull,{verbose:!0});angle=rect.angle,cx=rect.cx,cy=rect.cy}nodes.forEach((function(n){var p=pointRotate.A([n.vx,n.vy],Math.PI/180*angle*-1,[cx,cy]);n.fx=p[0],n.fy=p[1]}))}var xExtent=(0,extent.A)(nodes.map((function(n){return n.fx}))),yExtent=(0,extent.A)(nodes.map((function(n){return n.fy}))),x=linear.A().domain(xExtent).range([0,width]),y=linear.A().domain(yExtent).range([0,height]),nodeRatio=(xExtent[1]-xExtent[0])/(yExtent[1]-yExtent[0])||1,screenRatio=width/height;if(nodeRatio>screenRatio){var h=height*screenRatio/nodeRatio;y.range([(height-h)/2,height-(height-h)/2])}else{var w=width*nodeRatio/screenRatio;x.range([(width-w)/2,width-(width-w)/2])}nodes.forEach((function(n){n.x=x(n.fx),n.y=y(n.fy)}));var rExtent=(0,extent.A)(nodes.map((function(n){return n.r}))),rMax=this._sizeMax||(0,max.A)([1,(0,min.A)((0,merge.A)(nodes.map((function(n1){return nodes.map((function(n2){return n1===n2?null:pointDistance.A([n1.x,n1.y],[n2.x,n2.y])}))}))))/2]),r=d3_scale_src["scale".concat(this._sizeScale.charAt(0).toUpperCase()).concat(this._sizeScale.slice(1))]().domain(rExtent).range([rExtent[0]===rExtent[1]?rMax:(0,min.A)([rMax/2,this._sizeMin]),rMax]),xDomain=x.domain(),yDomain=y.domain(),xOldSize=xDomain[1]-xDomain[0],yOldSize=yDomain[1]-yDomain[0];nodes.forEach((function(n){var size=r(n.r);xDomain[0]>x.invert(n.x-size)&&(xDomain[0]=x.invert(n.x-size)),xDomain[1]<x.invert(n.x+size)&&(xDomain[1]=x.invert(n.x+size)),yDomain[0]>y.invert(n.y-size)&&(yDomain[0]=y.invert(n.y-size)),yDomain[1]<y.invert(n.y+size)&&(yDomain[1]=y.invert(n.y+size))}));var xNewSize=xDomain[1]-xDomain[0],yNewSize=yDomain[1]-yDomain[0];rMax*=(0,min.A)([xOldSize/xNewSize,yOldSize/yNewSize]),r.range([rExtent[0]===rExtent[1]?rMax:(0,min.A)([rMax/2,this._sizeMin]),rMax]),x.domain(xDomain),y.domain(yDomain);var fallbackRadius=(nodeRatio>screenRatio?width:height)/2;nodes.forEach((function(n){n.x=x(n.fx),n.fx=n.x,n.y=y(n.fy),n.fy=n.y,n.r=r(n.r)||fallbackRadius,n.width=2*n.r,n.height=2*n.r})),this._container=this._select.selectAll("svg.d3plus-network").data([0]),this._container=this._container.enter().append("svg").attr("class","d3plus-network").attr("opacity",0).attr("width",width).attr("height",height).attr("x",this._margin.left).attr("y",this._margin.top).style("background-color","transparent").merge(this._container),this._container.transition().duration(duration).attr("opacity",1).attr("width",width).attr("height",height).attr("x",this._margin.left).attr("y",this._margin.top);var hitArea=this._container.selectAll("rect.d3plus-network-hitArea").data([0]);hitArea.enter().append("rect").attr("class","d3plus-network-hitArea").merge(hitArea).attr("width",width).attr("height",height).attr("fill","transparent").on("click",(function(){_this2._focus&&(_this2.active(!1),_this2._focus=void 0,_this2._zoomToBounds(null))})),this._zoomGroup=this._container.selectAll("g.d3plus-network-zoomGroup").data([0]);var parent=this._zoomGroup=this._zoomGroup.enter().append("g").attr("class","d3plus-network-zoomGroup").merge(this._zoomGroup),strokeExtent=(0,extent.A)(links,(function(d){return d.size}));if(strokeExtent[0]!==strokeExtent[1]){var strokeScale=d3_scale_src["scale".concat(this._linkSizeScale.charAt(0).toUpperCase()).concat(this._linkSizeScale.slice(1))]().domain(strokeExtent).range([this._linkSizeMin,r.range()[0]]);links.forEach((function(link){link.size=strokeScale(link.size)}))}var linkConfig=configPrep.A.bind(this)(this._shapeConfig,"edge","Path");delete linkConfig.on,this._shapes.push((new Path.A).config(linkConfig).strokeWidth((function(d){return d.size})).activeStyle({"stroke-width":function strokeWidth(d){return d.size}}).d((function(d){return"M".concat(d.source.x,",").concat(d.source.y," ").concat(d.target.x,",").concat(d.target.y)})).data(links).select((0,elem.A)("g.d3plus-network-links",{parent,duration,enter:{transform},update:{transform}}).node()).render());var shapeConfig={label:function label(d){return!!(nodes.length<=_this2._dataCutoff||_this2._hover&&_this2._hover(d)||_this2._active&&_this2._active(d))&&_this2._drawLabel(d.data||d.node,d.i)},select:(0,elem.A)("g.d3plus-network-nodes",{parent,duration,enter:{transform},update:{transform}}).node()};return(0,src.$I)().key((function(d){return d.shape})).entries(nodes).forEach((function(d){_this2._shapes.push((new es[d.key]).config(configPrep.A.bind(_this2)(_this2._shapeConfig,"shape",d.key)).config(shapeConfig).config(shapeConfig[d.key]||{}).data(d.values).render())})),this}},{key:"hover",value:function hover(_){return this._hover=_,this._nodes.length<this._dataCutoff&&(this._shapes.forEach((function(s){return s.hover(_)})),this._legend&&this._legendClass.hover(_)),this}},{key:"links",value:function links(_,f){return arguments.length?(addToQueue.A.bind(this)(_,f,"links"),this):this._links}},{key:"linkSize",value:function linkSize(_){return arguments.length?(this._linkSize="function"==typeof _?_:(0,src_constant.A)(_),this):this._linkSize}},{key:"linkSizeMin",value:function linkSizeMin(_){return arguments.length?(this._linkSizeMin=_,this):this._linkSizeMin}},{key:"linkSizeScale",value:function linkSizeScale(_){return arguments.length?(this._linkSizeScale=_,this):this._linkSizeScale}},{key:"nodeGroupBy",value:function nodeGroupBy(_){var _this3=this;return arguments.length?(_ instanceof Array||(_=[_]),this._nodeGroupBy=_.map((function(k){return"function"==typeof k?k:(_this3._aggs[k]||(_this3._aggs[k]=function(a,c){var v=Array.from(new Set(a.map(c)));return 1===v.length?v[0]:v}),(0,accessor.A)(k))})),this):this._nodeGroupBy}},{key:"nodes",value:function nodes(_,f){return arguments.length?(addToQueue.A.bind(this)(_,f,"nodes"),this):this._nodes}},{key:"size",value:function size(_){return arguments.length?(this._size="function"!=typeof _&&_?(0,accessor.A)(_):_,this):this._size}},{key:"sizeMax",value:function sizeMax(_){return arguments.length?(this._sizeMax=_,this):this._sizeMax}},{key:"sizeMin",value:function sizeMin(_){return arguments.length?(this._sizeMin=_,this):this._sizeMin}},{key:"sizeScale",value:function sizeScale(_){return arguments.length?(this._sizeScale=_,this):this._sizeScale}},{key:"x",value:function x(_){return arguments.length?("function"==typeof _?this._x=_:(this._x=(0,accessor.A)(_),this._aggs[_]||(this._aggs[_]=mean.A)),this):this._x}},{key:"y",value:function y(_){return arguments.length?("function"==typeof _?this._y=_:(this._y=(0,accessor.A)(_),this._aggs[_]||(this._aggs[_]=mean.A)),this):this._y}}]),Network}(__webpack_require__("./node_modules/d3plus-viz/es/src/Viz.js").A),src_Viz=__webpack_require__("./node_modules/d3plus-react/es/src/Viz.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const src_Network=function Network(props){return react.createElement(src_Viz.A,_extends({type:Network_Network},props))}}}]);