"use strict";(self.webpackChunk_d3plus_docs=self.webpackChunk_d3plus_docs||[]).push([[858],{"./node_modules/d3-hierarchy/src/accessors.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function optional(f){return null==f?null:required(f)}function required(f){if("function"!=typeof f)throw new Error;return f}__webpack_require__.d(__webpack_exports__,{l:()=>optional,m:()=>required})},"./node_modules/d3-hierarchy/src/constant.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function constantZero(){return 0}function __WEBPACK_DEFAULT_EXPORT__(x){return function(){return x}}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,P:()=>constantZero})},"./node_modules/d3-hierarchy/src/hierarchy/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function count(node){var sum=0,children=node.children,i=children&&children.length;if(i)for(;--i>=0;)sum+=children[i].value;else sum=1;node.value=sum}function hierarchy(data,children){data instanceof Map?(data=[void 0,data],void 0===children&&(children=mapChildren)):void 0===children&&(children=objectChildren);for(var node,child,childs,i,n,root=new Node(data),nodes=[root];node=nodes.pop();)if((childs=children(node.data))&&(n=(childs=Array.from(childs)).length))for(node.children=childs,i=n-1;i>=0;--i)nodes.push(child=childs[i]=new Node(childs[i])),child.parent=node,child.depth=node.depth+1;return root.eachBefore(computeHeight)}function objectChildren(d){return d.children}function mapChildren(d){return Array.isArray(d)?d[1]:null}function copyData(node){void 0!==node.data.value&&(node.value=node.data.value),node.data=node.data.data}function computeHeight(node){var height=0;do{node.height=height}while((node=node.parent)&&node.height<++height)}function Node(data){this.data=data,this.depth=this.height=0,this.parent=null}__webpack_require__.d(__webpack_exports__,{Ay:()=>hierarchy}),Node.prototype=hierarchy.prototype={constructor:Node,count:function hierarchy_count(){return this.eachAfter(count)},each:function each(callback,that){let index=-1;for(const node of this)callback.call(that,node,++index,this);return this},eachAfter:function eachAfter(callback,that){for(var children,i,n,node=this,nodes=[node],next=[],index=-1;node=nodes.pop();)if(next.push(node),children=node.children)for(i=0,n=children.length;i<n;++i)nodes.push(children[i]);for(;node=next.pop();)callback.call(that,node,++index,this);return this},eachBefore:function eachBefore(callback,that){for(var children,i,node=this,nodes=[node],index=-1;node=nodes.pop();)if(callback.call(that,node,++index,this),children=node.children)for(i=children.length-1;i>=0;--i)nodes.push(children[i]);return this},find:function find(callback,that){let index=-1;for(const node of this)if(callback.call(that,node,++index,this))return node},sum:function sum(value){return this.eachAfter((function(node){for(var sum=+value(node.data)||0,children=node.children,i=children&&children.length;--i>=0;)sum+=children[i].value;node.value=sum}))},sort:function sort(compare){return this.eachBefore((function(node){node.children&&node.children.sort(compare)}))},path:function path(end){for(var start=this,ancestor=function leastCommonAncestor(a,b){if(a===b)return a;var aNodes=a.ancestors(),bNodes=b.ancestors(),c=null;a=aNodes.pop(),b=bNodes.pop();for(;a===b;)c=a,a=aNodes.pop(),b=bNodes.pop();return c}(start,end),nodes=[start];start!==ancestor;)start=start.parent,nodes.push(start);for(var k=nodes.length;end!==ancestor;)nodes.splice(k,0,end),end=end.parent;return nodes},ancestors:function ancestors(){for(var node=this,nodes=[node];node=node.parent;)nodes.push(node);return nodes},descendants:function descendants(){return Array.from(this)},leaves:function leaves(){var leaves=[];return this.eachBefore((function(node){node.children||leaves.push(node)})),leaves},links:function links(){var root=this,links=[];return root.each((function(node){node!==root&&links.push({source:node.parent,target:node})})),links},copy:function node_copy(){return hierarchy(this).eachBefore(copyData)},[Symbol.iterator]:function*iterator(){var current,children,i,n,node=this,next=[node];do{for(current=next.reverse(),next=[];node=current.pop();)if(yield node,children=node.children)for(i=0,n=children.length;i<n;++i)next.push(children[i])}while(next.length)}}},"./node_modules/d3plus-react/es/src/Treemap.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>src_Treemap});var react=__webpack_require__("./node_modules/react/index.js"),sum=__webpack_require__("./node_modules/d3-array/src/sum.js"),src=__webpack_require__("./node_modules/d3-collection/src/index.js");function treemap_round(node){node.x0=Math.round(node.x0),node.y0=Math.round(node.y0),node.x1=Math.round(node.x1),node.y1=Math.round(node.y1)}function dice(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(x1-x0)/parent.value;++i<n;)(node=nodes[i]).y0=y0,node.y1=y1,node.x0=x0,node.x1=x0+=node.value*k}function slice(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(y1-y0)/parent.value;++i<n;)(node=nodes[i]).x0=x0,node.x1=x1,node.y0=y0,node.y1=y0+=node.value*k}var phi=(1+Math.sqrt(5))/2;function squarifyRatio(ratio,parent,x0,y0,x1,y1){for(var row,nodeValue,dx,dy,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta,rows=[],nodes=parent.children,i0=0,i1=0,n=nodes.length,value=parent.value;i0<n;){dx=x1-x0,dy=y1-y0;do{sumValue=nodes[i1++].value}while(!sumValue&&i1<n);for(minValue=maxValue=sumValue,beta=sumValue*sumValue*(alpha=Math.max(dy/dx,dx/dy)/(value*ratio)),minRatio=Math.max(maxValue/beta,beta/minValue);i1<n;++i1){if(sumValue+=nodeValue=nodes[i1].value,nodeValue<minValue&&(minValue=nodeValue),nodeValue>maxValue&&(maxValue=nodeValue),beta=sumValue*sumValue*alpha,(newRatio=Math.max(maxValue/beta,beta/minValue))>minRatio){sumValue-=nodeValue;break}minRatio=newRatio}rows.push(row={value:sumValue,dice:dx<dy,children:nodes.slice(i0,i1)}),row.dice?dice(row,x0,y0,x1,value?y0+=dy*sumValue/value:y1):slice(row,x0,y0,value?x0+=dx*sumValue/value:x1,y1),value-=sumValue,i0=i1}return rows}const squarify=function custom(ratio){function squarify(parent,x0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1)}return squarify.ratio=function(x){return custom((x=+x)>1?x:1)},squarify}(phi);var accessors=__webpack_require__("./node_modules/d3-hierarchy/src/accessors.js"),constant=__webpack_require__("./node_modules/d3-hierarchy/src/constant.js");var hierarchy=__webpack_require__("./node_modules/d3-hierarchy/src/hierarchy/index.js");const resquarify=function custom(ratio){function resquarify(parent,x0,y0,x1,y1){if((rows=parent._squarify)&&rows.ratio===ratio)for(var rows,row,nodes,i,n,j=-1,m=rows.length,value=parent.value;++j<m;){for(nodes=(row=rows[j]).children,i=row.value=0,n=nodes.length;i<n;++i)row.value+=nodes[i].value;row.dice?dice(row,x0,y0,x1,value?y0+=(y1-y0)*row.value/value:y1):slice(row,x0,y0,value?x0+=(x1-x0)*row.value/value:x1,y1),value-=row.value}else parent._squarify=rows=squarifyRatio(ratio,parent,x0,y0,x1,y1),rows.ratio=ratio}return resquarify.ratio=function(x){return custom((x=+x)>1?x:1)},resquarify}(phi);var src_assign=__webpack_require__("./node_modules/d3plus-common/es/src/assign.js"),accessor=__webpack_require__("./node_modules/d3plus-common/es/src/accessor.js"),merge=__webpack_require__("./node_modules/d3plus-common/es/src/merge.js"),configPrep=__webpack_require__("./node_modules/d3plus-common/es/src/configPrep.js"),elem=__webpack_require__("./node_modules/d3plus-common/es/src/elem.js"),src_constant=__webpack_require__("./node_modules/d3plus-common/es/src/constant.js"),formatAbbreviate=__webpack_require__("./node_modules/d3plus-format/es/src/formatAbbreviate.js"),Rect=__webpack_require__("./node_modules/d3plus-shape/es/src/Shape/Rect.js"),Viz=__webpack_require__("./node_modules/d3plus-viz/es/src/Viz.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}(this,result)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var tileMethods={treemapBinary:function binary(parent,x0,y0,x1,y1){var i,sum,nodes=parent.children,n=nodes.length,sums=new Array(n+1);for(sums[0]=sum=i=0;i<n;++i)sums[i+1]=sum+=nodes[i].value;!function partition(i,j,value,x0,y0,x1,y1){if(i>=j-1){var node=nodes[i];return node.x0=x0,node.y0=y0,node.x1=x1,void(node.y1=y1)}var valueOffset=sums[i],valueTarget=value/2+valueOffset,k=i+1,hi=j-1;for(;k<hi;){var mid=k+hi>>>1;sums[mid]<valueTarget?k=mid+1:hi=mid}valueTarget-sums[k-1]<sums[k]-valueTarget&&i+1<k&&--k;var valueLeft=sums[k]-valueOffset,valueRight=value-valueLeft;if(x1-x0>y1-y0){var xk=value?(x0*valueRight+x1*valueLeft)/value:x1;partition(i,k,valueLeft,x0,y0,xk,y1),partition(k,j,valueRight,xk,y0,x1,y1)}else{var yk=value?(y0*valueRight+y1*valueLeft)/value:y1;partition(i,k,valueLeft,x0,y0,x1,yk),partition(k,j,valueRight,x0,yk,x1,y1)}}(0,n,parent.value,x0,y0,x1,y1)},treemapDice:dice,treemapSlice:slice,treemapSliceDice:function sliceDice(parent,x0,y0,x1,y1){(1&parent.depth?slice:dice)(parent,x0,y0,x1,y1)},treemapSquarify:squarify,treemapResquarify:resquarify},Treemap_Treemap=function(_Viz){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Treemap,_Viz);var _super=_createSuper(Treemap);function Treemap(){var _this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Treemap),(_this=_super.call(this))._layoutPadding=1;var defaultLegend=_this._legend;_this._legend=function(config,arr){return arr.length!==_this._filteredData.length&&defaultLegend.bind(_assertThisInitialized(_this))(config,arr)},_this._legendSort=function(a,b){return _this._sum(b)-_this._sum(a)},_this._legendTooltip=(0,src_assign.A)({},_this._legendTooltip,{tbody:[]}),_this._shapeConfig=(0,src_assign.A)({},_this._shapeConfig,{ariaLabel:function ariaLabel(d,i){var rank=_this._rankData?"".concat(_this._rankData.indexOf(d)+1,". "):"";return"".concat(rank).concat(_this._drawLabel(d,i),", ").concat(_this._sum(d,i),".")},labelConfig:{fontMax:40,fontMin:8,fontResize:!0,padding:5}}),_this._sort=function(a,b){var aggA=isAggregated(a),aggB=isAggregated(b);return aggA&&!aggB?1:!aggA&&aggB?-1:b.value-a.value},_this._sum=(0,accessor.A)("value"),_this._thresholdKey=_this._sum,_this._tile=squarify,_this._tooltipConfig=(0,src_assign.A)({},_this._tooltipConfig,{tbody:[[function(){return _this._translate("Share")},function(d,i,x){return"".concat((0,formatAbbreviate.A)(100*x.share,_this._locale),"%")}]]}),_this._treemap=function treemap(){var tile=squarify,round=!1,dx=1,dy=1,paddingStack=[0],paddingInner=constant.P,paddingTop=constant.P,paddingRight=constant.P,paddingBottom=constant.P,paddingLeft=constant.P;function treemap(root){return root.x0=root.y0=0,root.x1=dx,root.y1=dy,root.eachBefore(positionNode),paddingStack=[0],round&&root.eachBefore(treemap_round),root}function positionNode(node){var p=paddingStack[node.depth],x0=node.x0+p,y0=node.y0+p,x1=node.x1-p,y1=node.y1-p;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1,node.children&&(p=paddingStack[node.depth+1]=paddingInner(node)/2,x0+=paddingLeft(node)-p,y0+=paddingTop(node)-p,(x1-=paddingRight(node)-p)<x0&&(x0=x1=(x0+x1)/2),(y1-=paddingBottom(node)-p)<y0&&(y0=y1=(y0+y1)/2),tile(node,x0,y0,x1,y1))}return treemap.round=function(x){return arguments.length?(round=!!x,treemap):round},treemap.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],treemap):[dx,dy]},treemap.tile=function(x){return arguments.length?(tile=(0,accessors.m)(x),treemap):tile},treemap.padding=function(x){return arguments.length?treemap.paddingInner(x).paddingOuter(x):treemap.paddingInner()},treemap.paddingInner=function(x){return arguments.length?(paddingInner="function"==typeof x?x:(0,constant.A)(+x),treemap):paddingInner},treemap.paddingOuter=function(x){return arguments.length?treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):treemap.paddingTop()},treemap.paddingTop=function(x){return arguments.length?(paddingTop="function"==typeof x?x:(0,constant.A)(+x),treemap):paddingTop},treemap.paddingRight=function(x){return arguments.length?(paddingRight="function"==typeof x?x:(0,constant.A)(+x),treemap):paddingRight},treemap.paddingBottom=function(x){return arguments.length?(paddingBottom="function"==typeof x?x:(0,constant.A)(+x),treemap):paddingBottom},treemap.paddingLeft=function(x){return arguments.length?(paddingLeft="function"==typeof x?x:(0,constant.A)(+x),treemap):paddingLeft},treemap}().round(!0);var isAggregated=function isAggregated(leaf){return leaf.children&&1===leaf.children.length&&leaf.children[0].data._isAggregation};return _this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Treemap,[{key:"_draw",value:function _draw(callback){var _this2=this;_get(_getPrototypeOf(Treemap.prototype),"_draw",this).call(this,callback);for(var nestedData=(0,src.$I)(),i=0;i<=this._drawDepth;i++)nestedData.key(this._groupBy[i]);nestedData=nestedData.entries(this._filteredData);var tmapData=this._treemap.padding(this._layoutPadding).size([this._width-this._margin.left-this._margin.right,this._height-this._margin.top-this._margin.bottom]).tile(this._tile)((0,hierarchy.Ay)({values:nestedData},(function(d){return d.values})).sum(this._sum).sort(this._sort)),shapeData=[],that=this;tmapData.children&&function extractLayout(children){for(var _i=0;_i<children.length;_i++){var node=children[_i];if(node.depth<=that._drawDepth)extractLayout(node.children);else{var index=1===node.data.values.length?that._filteredData.indexOf(node.data.values[0]):void 0;node.__d3plus__=!0,node.id=node.data.key,node.i=index>-1?index:void 0,node.data=(0,merge.A)(node.data.values,that._aggs),node.x=node.x0+(node.x1-node.x0)/2,node.y=node.y0+(node.y1-node.y0)/2,shapeData.push(node)}}}(tmapData.children),this._rankData=shapeData.sort(this._sort).map((function(d){return d.data}));var total=tmapData.value;shapeData.forEach((function(d){d.share=_this2._sum(d.data,d.i)/total}));var transform="translate(".concat(this._margin.left,", ").concat(this._margin.top,")"),rectConfig=configPrep.A.bind(this)(this._shapeConfig,"shape","Rect"),fontMax=rectConfig.labelConfig.fontMax,fontMin=rectConfig.labelConfig.fontMin,padding=rectConfig.labelConfig.padding;return this._shapes.push((new Rect.A).data(shapeData).label((function(d){return[_this2._drawLabel(d.data,d.i),"".concat((0,formatAbbreviate.A)(100*d.share,_this2._locale),"%")]})).select((0,elem.A)("g.d3plus-Treemap",{parent:this._select,enter:{transform},update:{transform}}).node()).config({height:function height(d){return d.y1-d.y0},labelBounds:function labelBounds(d,i,s){var h=s.height,sh=Math.min(fontMax,.5*(h-2*padding));return sh<fontMin&&(sh=0),[{width:s.width,height:h-sh,x:-s.width/2,y:-h/2},{width:s.width,height:sh+2*padding,x:-s.width/2,y:h/2-sh-2*padding}]},labelConfig:{textAnchor:function textAnchor(d,i,x){for(var line,parent=x;void 0===line&&parent;)void 0!==parent.l&&(line=parent.l),parent=parent.__d3plusParent__;return line?"middle":"start"},verticalAlign:function verticalAlign(d,i,x){for(var line,parent=x;void 0===line&&parent;)void 0!==parent.l&&(line=parent.l),parent=parent.__d3plusParent__;return line?"bottom":"top"}},width:function width(d){return d.x1-d.x0}}).config(rectConfig).render()),this}},{key:"_thresholdFunction",value:function _thresholdFunction(data){var aggs=this._aggs,drawDepth=this._drawDepth,groupBy=this._groupBy,threshold=this._threshold,thresholdKey=this._thresholdKey,totalSum=(0,sum.A)(data,thresholdKey);if(threshold&&thresholdKey)return function thresholdByDepth(branchData,depth){if(depth<drawDepth)return(0,src.$I)().key(groupBy[depth]).entries(branchData).reduce((function(bulk,leaf){var subBranchData=thresholdByDepth(leaf.values,depth+1);return bulk.concat(subBranchData)}),[]);if(depth===drawDepth){var thresholdPercent=Math.min(1,Math.max(0,threshold(branchData)));if(!isFinite(thresholdPercent)||isNaN(thresholdPercent))return null;for(var removedItems=[],branchDataCopy=branchData.slice(),thresholdValue=thresholdPercent*totalSum,n=branchDataCopy.length;n--;){var datum=branchDataCopy[n];if(thresholdKey(datum)<thresholdValue){var index=branchDataCopy.indexOf(datum);branchDataCopy.splice(index,1),removedItems.push(datum)}}if(removedItems.length>0){var mergedItem=(0,merge.A)(removedItems,aggs);mergedItem._isAggregation=!0,mergedItem._threshold=thresholdPercent,branchDataCopy.push(mergedItem)}return branchDataCopy}throw new Error("Depth is higher than the amount of grouping levels.")}(data,0);return data}},{key:"layoutPadding",value:function layoutPadding(_){return arguments.length?(this._layoutPadding="function"==typeof _?_:(0,src_constant.A)(_),this):this._layoutPadding}},{key:"sort",value:function sort(_){return arguments.length?(this._sort=_,this):this._sort}},{key:"sum",value:function sum(_){return arguments.length?(this._sum="function"==typeof _?_:(0,accessor.A)(_),this._thresholdKey=this._sum,this):this._sum}},{key:"tile",value:function tile(_){return arguments.length?(this._tile="string"==typeof _?tileMethods["treemap".concat(_.charAt(0).toUpperCase()).concat(_.slice(1))]||squarify:_,this):this._tile}}]),Treemap}(Viz.A),src_Viz=__webpack_require__("./node_modules/d3plus-react/es/src/Viz.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const src_Treemap=function Treemap(props){return react.createElement(src_Viz.A,_extends({type:Treemap_Treemap},props))}}}]);