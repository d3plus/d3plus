"use strict";(self.webpackChunk_d3plus_docs=self.webpackChunk_d3plus_docs||[]).push([[595],{"./node_modules/d3plus-color/es/src/legible.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var d3_color__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-color/src/color.js");function __WEBPACK_DEFAULT_EXPORT__(c){return(c=(0,d3_color__WEBPACK_IMPORTED_MODULE_0__.KI)(c)).l>.45&&(c.s>.8&&(c.s=.8),c.l=.45),c.toString()}},"./node_modules/d3plus-react/es/src/Rings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>src_Rings});var react=__webpack_require__("./node_modules/react/index.js"),min=__webpack_require__("./node_modules/d3-array/src/min.js"),max=__webpack_require__("./node_modules/d3-array/src/max.js"),extent=__webpack_require__("./node_modules/d3-array/src/extent.js"),src=__webpack_require__("./node_modules/d3-collection/src/index.js"),linear=__webpack_require__("./node_modules/d3-scale/src/linear.js"),d3_scale_src=__webpack_require__("./node_modules/d3-scale/src/index.js"),constant=__webpack_require__("./node_modules/d3plus-common/es/src/constant.js"),src_assign=__webpack_require__("./node_modules/d3plus-common/es/src/assign.js"),configPrep=__webpack_require__("./node_modules/d3plus-common/es/src/configPrep.js"),elem=__webpack_require__("./node_modules/d3plus-common/es/src/elem.js"),accessor=__webpack_require__("./node_modules/d3plus-common/es/src/accessor.js"),legible=__webpack_require__("./node_modules/d3plus-color/es/src/legible.js"),Path=__webpack_require__("./node_modules/d3plus-shape/es/src/Shape/Path.js"),es=__webpack_require__("./node_modules/d3plus-shape/es/index.js"),addToQueue=__webpack_require__("./node_modules/d3plus-viz/es/src/data/addToQueue.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}(this,result)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Rings_Rings=function(_Viz){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Rings,_Viz);var _super=_createSuper(Rings);function Rings(){var _this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Rings),(_this=_super.call(this))._links=[],_this._linkSize=(0,constant.A)(1),_this._linkSizeMin=1,_this._linkSizeScale="sqrt",_this._noDataMessage=!1,_this._nodes=[],_this._on.mouseenter=function(){},_this._on["mouseleave.shape"]=function(){_this.hover(!1)};var defaultMouseMove=_this._on["mousemove.shape"];return _this._on["mousemove.shape"]=function(d,i,x,event){if(defaultMouseMove(d,i,x,event),_this._focus&&_this._focus===d.id)_this.hover(!1),_this._on.mouseenter.bind(_assertThisInitialized(_this))(d,i,x,event),_this._focus=void 0;else{var id=_this._nodeGroupBy&&_this._nodeGroupBy[_this._drawDepth](d,i)?_this._nodeGroupBy[_this._drawDepth](d,i):_this._id(d,i),links=_this._linkLookup[id],node=_this._nodeLookup[id],filterIds=[node.id],xDomain=[node.x-node.r,node.x+node.r],yDomain=[node.y-node.r,node.y+node.r];links.forEach((function(l){filterIds.push(l.id),l.x-l.r<xDomain[0]&&(xDomain[0]=l.x-l.r),l.x+l.r>xDomain[1]&&(xDomain[1]=l.x+l.r),l.y-l.r<yDomain[0]&&(yDomain[0]=l.y-l.r),l.y+l.r>yDomain[1]&&(yDomain[1]=l.y+l.r)})),_this.hover((function(h,x){return h.source&&h.target?h.source.id===node.id||h.target.id===node.id:filterIds.includes(_this._ids(h,x)[_this._drawDepth])}))}},_this._on["click.shape"]=function(d){_this._center=d.id,_this._margin={bottom:0,left:0,right:0,top:0},_this._padding={bottom:0,left:0,right:0,top:0},_this._draw()},_this._sizeMin=5,_this._sizeScale="sqrt",_this._shape=(0,constant.A)("Circle"),_this._shapeConfig=(0,src_assign.A)(_this._shapeConfig,{ariaLabel:function ariaLabel(d,i){var validSize=_this._size?", ".concat(_this._size(d,i)):"";return"".concat(_this._drawLabel(d,i)).concat(validSize,".")},labelConfig:{duration:0,fontMin:1,fontResize:!0,labelPadding:0,textAnchor:"middle",verticalAlign:"middle"},Path:{fill:"none",label:!1,stroke:"#eee",strokeWidth:1}}),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Rings,[{key:"_draw",value:function _draw(callback){var _this2=this;_get(_getPrototypeOf(Rings.prototype),"_draw",this).call(this,callback);var data=this._filteredData.reduce((function(obj,d,i){return obj[_this2._id(d,i)]=d,obj}),{}),nodes=this._nodes;if(!this._nodes.length&&this._links.length){var nodeIds=Array.from(new Set(this._links.reduce((function(ids,link){return ids.concat([link.source,link.target])}),[])));nodes=nodeIds.map((function(node){return"object"===_typeof(node)?node:{id:node}}))}nodes=nodes.reduce((function(obj,d,i){return obj[_this2._nodeGroupBy?_this2._nodeGroupBy[_this2._drawDepth](d,i):_this2._id(d,i)]=d,obj}),{}),nodes=Array.from(new Set(Object.keys(data).concat(Object.keys(nodes)))).map((function(id,i){var d=data[id],n=nodes[id];return void 0!==n&&{__d3plus__:!0,data:d||n,i,id,node:n,shape:void 0!==d&&void 0!==_this2._shape(d)?_this2._shape(d):_this2._shape(n)}})).filter((function(n){return n}));var nodeLookup=this._nodeLookup=nodes.reduce((function(obj,d){return obj[d.id]=d,obj}),{}),links=this._links.map((function(link){var edge=["source","target"].reduce((function(result,check){return result[check]="number"==typeof link[check]?nodes[link[check]]:nodeLookup[link[check].id||link[check]],result}),{});return edge.size=_this2._linkSize(link),edge})),linkMap=links.reduce((function(map,link){return map[link.source.id]||(map[link.source.id]=[]),map[link.source.id].push(link),map[link.target.id]||(map[link.target.id]=[]),map[link.target.id].push(link),map}),{}),duration=this._duration,height=this._height-this._margin.top-this._margin.bottom,transform="translate(".concat(this._margin.left,", ").concat(this._margin.top,")"),width=this._width-this._margin.left-this._margin.right,edges=[],ringWidth=(0,min.A)([height,width])/2/3,primaryRing=ringWidth,secondaryRing=2*ringWidth,center=nodeLookup[this._center];center.x=width/2,center.y=height/2,center.r=this._sizeMin?(0,max.A)([this._sizeMin,.65*primaryRing]):this._sizeMax?(0,min.A)([this._sizeMax,.65*primaryRing]):.65*primaryRing;var claimed=[center],primaries=[];linkMap[this._center].forEach((function(edge){var node=edge.source.id===_this2._center?edge.target:edge.source;node.edges=linkMap[node.id].filter((function(link){return link.source.id!==_this2._center||link.target.id!==_this2._center})),node.edge=edge,claimed.push(node),primaries.push(node)})),primaries.sort((function(a,b){return a.edges.length-b.edges.length}));var secondaries=[],totalEndNodes=0;primaries.forEach((function(p){var primaryId=p.id;p.edges=p.edges.filter((function(edge){return!claimed.includes(edge.source)&&edge.target.id===primaryId||!claimed.includes(edge.target)&&edge.source.id===primaryId})),totalEndNodes+=p.edges.length||1,p.edges.forEach((function(edge){var source=edge.source,target=edge.target,claim=target.id===primaryId?source:target;claimed.push(claim)}))}));var tau=2*Math.PI,offset=0;primaries.forEach((function(p,i){var children=p.edges.length||1,space=tau/totalEndNodes*children;0===i&&(offset-=space/2);var angle=offset+space/2-tau/4;p.radians=angle,p.x=width/2+primaryRing*Math.cos(angle),p.y=height/2+primaryRing*Math.sin(angle),offset+=space,p.edges.forEach((function(edge,i){var node=edge.source.id===p.id?edge.target:edge.source,s=tau/totalEndNodes,a=angle-s*children/2+s/2+s*i;node.radians=a,node.x=width/2+secondaryRing*Math.cos(a),node.y=height/2+secondaryRing*Math.sin(a),secondaries.push(node)}))}));var primaryDistance=ringWidth/2,secondaryDistance=ringWidth/4,primaryMax=primaryDistance/2-4;primaryDistance/2-4<8&&(primaryMax=(0,min.A)([primaryDistance/2,8]));var radiusFn,secondaryMax=secondaryDistance/2-4;if(secondaryDistance/2-4<4&&(secondaryMax=(0,min.A)([secondaryDistance/2,4])),secondaryMax>ringWidth/10&&(secondaryMax=ringWidth/10),secondaryMax>primaryMax&&secondaryMax>10&&(secondaryMax=.75*primaryMax),primaryMax>1.5*secondaryMax&&(primaryMax=1.5*secondaryMax),primaryMax=Math.floor(primaryMax),secondaryMax=Math.floor(secondaryMax),this._size){var domain=(0,extent.A)(data,(function(d){return d.size}));domain[0]===domain[1]&&(domain[0]=0),radiusFn=linear.A().domain(domain).rangeRound([3,(0,min.A)([primaryMax,secondaryMax])]);var val=center.size;center.r=radiusFn(val)}else radiusFn=linear.A().domain([1,2]).rangeRound([primaryMax,secondaryMax]);secondaries.forEach((function(s){s.ring=2;var val=_this2._size?s.size:2;s.r=_this2._sizeMin?(0,max.A)([_this2._sizeMin,radiusFn(val)]):_this2._sizeMax?(0,min.A)([_this2._sizeMax,radiusFn(val)]):radiusFn(val)})),primaries.forEach((function(p){p.ring=1;var val=_this2._size?p.size:1;p.r=_this2._sizeMin?(0,max.A)([_this2._sizeMin,radiusFn(val)]):_this2._sizeMax?(0,min.A)([_this2._sizeMax,radiusFn(val)]):radiusFn(val)})),nodes=[center].concat(primaries).concat(secondaries),primaries.forEach((function(p){var edge=p.edge;["source","target"].forEach((function(node){edge[node]=nodes.find((function(n){return n.id===edge[node].id}))})),edges.push(edge),linkMap[p.id].forEach((function(edge){var node=edge.source.id===p.id?edge.target:edge.source;if(node.id!==center.id){var target=secondaries.find((function(s){return s.id===node.id}));if(target||(target=primaries.find((function(s){return s.id===node.id}))),target){edge.spline=!0;var centerX=width/2,centerY=height/2,middleRing=primaryRing+.5*(secondaryRing-primaryRing);["source","target"].forEach((function(node,i){edge["".concat(node,"X")]=edge[node].x+Math.cos(2===edge[node].ring?edge[node].radians+Math.PI:edge[node].radians)*edge[node].r,edge["".concat(node,"Y")]=edge[node].y+Math.sin(2===edge[node].ring?edge[node].radians+Math.PI:edge[node].radians)*edge[node].r,edge["".concat(node,"BisectX")]=centerX+middleRing*Math.cos(edge[node].radians),edge["".concat(node,"BisectY")]=centerY+middleRing*Math.sin(edge[node].radians),edge[node]=nodes.find((function(n){return n.id===edge[node].id})),void 0===edge[node].edges&&(edge[node].edges={});var oppId=0===i?edge.target.id:edge.source.id;edge[node].id===p.id?edge[node].edges[oppId]={angle:p.radians+Math.PI,radius:ringWidth/2}:edge[node].edges[oppId]={angle:target.radians,radius:ringWidth/2}})),edges.push(edge)}}}))})),nodes.forEach((function(node){if(node.id!==_this2._center){var lineHeight=1.4*(_this2._shapeConfig.labelConfig.fontSize&&_this2._shapeConfig.labelConfig.fontSize(node)||11),_height=2*lineHeight,_width=ringWidth-node.r,angle=node.radians*(180/Math.PI),x=node.r+5,textAnchor="start";(angle<-90||angle>90)&&(x=-node.r-_width-5,textAnchor="end",angle+=180),node.labelBounds={x,y:-lineHeight/2,width:_width,height:_height},node.rotate=angle,node.textAnchor=textAnchor}else node.labelBounds={x:-primaryRing/2,y:-primaryRing/2,width:primaryRing,height:primaryRing}})),this._linkLookup=links.reduce((function(obj,d){return obj[d.source.id]||(obj[d.source.id]=[]),obj[d.source.id].push(d.target),obj[d.target.id]||(obj[d.target.id]=[]),obj[d.target.id].push(d.source),obj}),{});var strokeExtent=(0,extent.A)(links,(function(d){return d.size}));if(strokeExtent[0]!==strokeExtent[1]){var _radius=(0,min.A)(nodes,(function(d){return d.r})),strokeScale=d3_scale_src["scale".concat(this._linkSizeScale.charAt(0).toUpperCase()).concat(this._linkSizeScale.slice(1))]().domain(strokeExtent).range([this._linkSizeMin,_radius]);links.forEach((function(link){link.size=strokeScale(link.size)}))}var linkConfig=configPrep.A.bind(this)(this._shapeConfig,"edge","Path");delete linkConfig.on,this._shapes.push((new Path.A).config(linkConfig).strokeWidth((function(d){return d.size})).id((function(d){return"".concat(d.source.id,"_").concat(d.target.id)})).d((function(d){return d.spline?"M".concat(d.sourceX,",").concat(d.sourceY,"C").concat(d.sourceBisectX,",").concat(d.sourceBisectY," ").concat(d.targetBisectX,",").concat(d.targetBisectY," ").concat(d.targetX,",").concat(d.targetY):"M".concat(d.source.x,",").concat(d.source.y," ").concat(d.target.x,",").concat(d.target.y)})).data(edges).select((0,elem.A)("g.d3plus-rings-links",{parent:this._select,duration,enter:{transform},update:{transform}}).node()).render());var that=this,shapeConfig={label:function label(d){return!!(nodes.length<=_this2._dataCutoff||_this2._hover&&_this2._hover(d)||_this2._active&&_this2._active(d))&&_this2._drawLabel(d.data||d.node,d.i)},labelBounds:function labelBounds(d){return d.labelBounds},labelConfig:{fontColor:function fontColor(d){return d.id===_this2._center?configPrep.A.bind(that)(that._shapeConfig,"shape",d.key).labelConfig.fontColor(d):(0,legible.A)(configPrep.A.bind(that)(that._shapeConfig,"shape",d.key).fill(d))},fontResize:function fontResize(d){return d.id===_this2._center},padding:0,textAnchor:function textAnchor(d){return nodeLookup[d.id].textAnchor||configPrep.A.bind(that)(that._shapeConfig,"shape",d.key).labelConfig.textAnchor},verticalAlign:function verticalAlign(d){return d.id===_this2._center?"middle":"top"}},rotate:function rotate(d){return nodeLookup[d.id].rotate||0},select:(0,elem.A)("g.d3plus-rings-nodes",{parent:this._select,duration,enter:{transform},update:{transform}}).node()};return(0,src.$I)().key((function(d){return d.shape})).entries(nodes).forEach((function(d){_this2._shapes.push((new es[d.key]).config(configPrep.A.bind(_this2)(_this2._shapeConfig,"shape",d.key)).config(shapeConfig).data(d.values).render())})),this}},{key:"center",value:function center(_){return arguments.length?(this._center=_,this):this._center}},{key:"hover",value:function hover(_){return this._hover=_,this._shapes.forEach((function(s){return s.hover(_)})),this._legend&&this._legendClass.hover(_),this}},{key:"links",value:function links(_,f){return arguments.length?(addToQueue.A.bind(this)(_,f,"links"),this):this._links}},{key:"linkSize",value:function linkSize(_){return arguments.length?(this._linkSize="function"==typeof _?_:(0,constant.A)(_),this):this._linkSize}},{key:"linkSizeMin",value:function linkSizeMin(_){return arguments.length?(this._linkSizeMin=_,this):this._linkSizeMin}},{key:"linkSizeScale",value:function linkSizeScale(_){return arguments.length?(this._linkSizeScale=_,this):this._linkSizeScale}},{key:"nodeGroupBy",value:function nodeGroupBy(_){var _this3=this;return arguments.length?(_ instanceof Array||(_=[_]),this._nodeGroupBy=_.map((function(k){return"function"==typeof k?k:(_this3._aggs[k]||(_this3._aggs[k]=function(a,c){var v=Array.from(new Set(a.map(c)));return 1===v.length?v[0]:v}),(0,accessor.A)(k))})),this):this._nodeGroupBy}},{key:"nodes",value:function nodes(_,f){return arguments.length?(addToQueue.A.bind(this)(_,f,"nodes"),this):this._nodes}},{key:"size",value:function size(_){return arguments.length?(this._size="function"!=typeof _&&_?(0,accessor.A)(_):_,this):this._size}},{key:"sizeMax",value:function sizeMax(_){return arguments.length?(this._sizeMax=_,this):this._sizeMax}},{key:"sizeMin",value:function sizeMin(_){return arguments.length?(this._sizeMin=_,this):this._sizeMin}},{key:"sizeScale",value:function sizeScale(_){return arguments.length?(this._sizeScale=_,this):this._sizeScale}}]),Rings}(__webpack_require__("./node_modules/d3plus-viz/es/src/Viz.js").A),src_Viz=__webpack_require__("./node_modules/d3plus-react/es/src/Viz.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const src_Rings=function Rings(props){return react.createElement(src_Viz.A,_extends({type:Rings_Rings},props))}}}]);