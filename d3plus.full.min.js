!function r(t,e,n){function a(o,l){if(!e[o]){if(!t[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=e[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return a(n?n:e)},u,u.exports,r,t,e,n)}return e[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(t,e,n){function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var a=typeof t;"base64"===e&&"string"===a&&(t=j(t));var i;if("number"===a)i=N(t);else if("string"===a)i=r.byteLength(t,e);else{if("object"!==a)throw new Error("First argument needs to be a number, array or string.");i=N(t.length)}var o;r._useTypedArrays?o=r._augment(new Uint8Array(i)):(o=this,o.length=i,o._isBuffer=!0);var l;if(r._useTypedArrays&&"number"==typeof t.byteLength)o._set(t);else if(F(t))if(r.isBuffer(t))for(l=0;i>l;l++)o[l]=t.readUInt8(l);else for(l=0;i>l;l++)o[l]=(t[l]%256+256)%256;else if("string"===a)o.write(t,0,e);else if("number"===a&&!r._useTypedArrays&&!n)for(l=0;i>l;l++)o[l]=0;return o}function a(t,e,n,r){n=Number(n)||0;var a=t.length-n;r?(r=Number(r),r>a&&(r=a)):r=a;var i=e.length;H(i%2===0,"Invalid hex string"),r>i/2&&(r=i/2);for(var o=0;r>o;o++){var l=parseInt(e.substr(2*o,2),16);H(!isNaN(l),"Invalid hex string"),t[n+o]=l}return o}function i(t,e,n,r){var a=B(q(e),t,n,r);return a}function o(t,e,n,r){var a=B(L(e),t,n,r);return a}function l(t,e,n,r){return o(t,e,n,r)}function s(t,e,n,r){var a=B(I(e),t,n,r);return a}function u(t,e,n,r){var a=B(P(e),t,n,r);return a}function c(t,e,n){return Y.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function d(t,e,n){var r="",a="";n=Math.min(t.length,n);for(var i=e;n>i;i++)t[i]<=127?(r+=V(a)+String.fromCharCode(t[i]),a=""):a+="%"+t[i].toString(16);return r+V(a)}function f(t,e,n){var r="";n=Math.min(t.length,n);for(var a=e;n>a;a++)r+=String.fromCharCode(t[a]);return r}function p(t,e,n){return f(t,e,n)}function h(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var a="",i=e;n>i;i++)a+=T(t[i]);return a}function v(t,e,n){for(var r=t.slice(e,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function g(t,e,n,r){r||(H("boolean"==typeof n,"missing or invalid endian"),H(void 0!==e&&null!==e,"missing offset"),H(e+1<t.length,"Trying to read beyond buffer length"));var a=t.length;if(!(e>=a)){var i;return n?(i=t[e],a>e+1&&(i|=t[e+1]<<8)):(i=t[e]<<8,a>e+1&&(i|=t[e+1])),i}}function m(t,e,n,r){r||(H("boolean"==typeof n,"missing or invalid endian"),H(void 0!==e&&null!==e,"missing offset"),H(e+3<t.length,"Trying to read beyond buffer length"));var a=t.length;if(!(e>=a)){var i;return n?(a>e+2&&(i=t[e+2]<<16),a>e+1&&(i|=t[e+1]<<8),i|=t[e],a>e+3&&(i+=t[e+3]<<24>>>0)):(a>e+1&&(i=t[e+1]<<16),a>e+2&&(i|=t[e+2]<<8),a>e+3&&(i|=t[e+3]),i+=t[e]<<24>>>0),i}}function y(t,e,n,r){r||(H("boolean"==typeof n,"missing or invalid endian"),H(void 0!==e&&null!==e,"missing offset"),H(e+1<t.length,"Trying to read beyond buffer length"));var a=t.length;if(!(e>=a)){var i=g(t,e,n,!0),o=32768&i;return o?-1*(65535-i+1):i}}function x(t,e,n,r){r||(H("boolean"==typeof n,"missing or invalid endian"),H(void 0!==e&&null!==e,"missing offset"),H(e+3<t.length,"Trying to read beyond buffer length"));var a=t.length;if(!(e>=a)){var i=m(t,e,n,!0),o=2147483648&i;return o?-1*(4294967295-i+1):i}}function b(t,e,n,r){return r||(H("boolean"==typeof n,"missing or invalid endian"),H(e+3<t.length,"Trying to read beyond buffer length")),G.read(t,e,n,23,4)}function w(t,e,n,r){return r||(H("boolean"==typeof n,"missing or invalid endian"),H(e+7<t.length,"Trying to read beyond buffer length")),G.read(t,e,n,52,8)}function _(t,e,n,r,a){a||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(void 0!==n&&null!==n,"missing offset"),H(n+1<t.length,"trying to write beyond buffer length"),U(e,65535));var i=t.length;if(!(n>=i)){for(var o=0,l=Math.min(i-n,2);l>o;o++)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o);return n+2}}function z(t,e,n,r,a){a||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(void 0!==n&&null!==n,"missing offset"),H(n+3<t.length,"trying to write beyond buffer length"),U(e,4294967295));var i=t.length;if(!(n>=i)){for(var o=0,l=Math.min(i-n,4);l>o;o++)t[n+o]=e>>>8*(r?o:3-o)&255;return n+4}}function k(t,e,n,r,a){a||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(void 0!==n&&null!==n,"missing offset"),H(n+1<t.length,"Trying to write beyond buffer length"),D(e,32767,-32768));var i=t.length;if(!(n>=i))return e>=0?_(t,e,n,r,a):_(t,65535+e+1,n,r,a),n+2}function M(t,e,n,r,a){a||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(void 0!==n&&null!==n,"missing offset"),H(n+3<t.length,"Trying to write beyond buffer length"),D(e,2147483647,-2147483648));var i=t.length;if(!(n>=i))return e>=0?z(t,e,n,r,a):z(t,4294967295+e+1,n,r,a),n+4}function A(t,e,n,r,a){a||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(void 0!==n&&null!==n,"missing offset"),H(n+3<t.length,"Trying to write beyond buffer length"),R(e,3.4028234663852886e38,-3.4028234663852886e38));var i=t.length;if(!(n>=i))return G.write(t,e,n,r,23,4),n+4}function E(t,e,n,r,a){a||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(void 0!==n&&null!==n,"missing offset"),H(n+7<t.length,"Trying to write beyond buffer length"),R(e,1.7976931348623157e308,-1.7976931348623157e308));var i=t.length;if(!(n>=i))return G.write(t,e,n,r,52,8),n+8}function j(t){for(t=S(t).replace(Z,"");t.length%4!==0;)t+="=";return t}function S(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function C(t,e,n){return"number"!=typeof t?n:(t=~~t,t>=e?e:t>=0?t:(t+=e,t>=0?t:0))}function N(t){return t=~~Math.ceil(+t),0>t?0:t}function O(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function F(t){return O(t)||r.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function T(t){return 16>t?"0"+t.toString(16):t.toString(16)}function q(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(127>=r)e.push(r);else{var a=n;r>=55296&&57343>=r&&n++;for(var i=encodeURIComponent(t.slice(a,n+1)).substr(1).split("%"),o=0;o<i.length;o++)e.push(parseInt(i[o],16))}}return e}function L(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function P(t){for(var e,n,r,a=[],i=0;i<t.length;i++)e=t.charCodeAt(i),n=e>>8,r=e%256,a.push(r),a.push(n);return a}function I(t){return Y.toByteArray(t)}function B(t,e,n,r){for(var a=0;r>a&&!(a+n>=e.length||a>=t.length);a++)e[a+n]=t[a];return a}function V(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function U(t,e){H("number"==typeof t,"cannot write a non-number as a number"),H(t>=0,"specified a negative value for writing an unsigned value"),H(e>=t,"value is larger than maximum value for type"),H(Math.floor(t)===t,"value has a fractional component")}function D(t,e,n){H("number"==typeof t,"cannot write a non-number as a number"),H(e>=t,"value larger than maximum allowed value"),H(t>=n,"value smaller than minimum allowed value"),H(Math.floor(t)===t,"value has a fractional component")}function R(t,e,n){H("number"==typeof t,"cannot write a non-number as a number"),H(e>=t,"value larger than maximum allowed value"),H(t>=n,"value smaller than minimum allowed value")}function H(t,e){if(!t)throw new Error(e||"Failed assertion")}var Y=t("base64-js"),G=t("ieee754");n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192,r._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(n){return!1}}(),r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.isBuffer=function(t){return!(null===t||void 0===t||!t._isBuffer)},r.byteLength=function(t,e){var n;switch(t=t.toString(),e||"utf8"){case"hex":n=t.length/2;break;case"utf8":case"utf-8":n=q(t).length;break;case"ascii":case"binary":case"raw":n=t.length;break;case"base64":n=I(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;default:throw new Error("Unknown encoding")}return n},r.concat=function(t,e){if(H(O(t),"Usage: Buffer.concat(list[, length])"),0===t.length)return new r(0);if(1===t.length)return t[0];var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var a=new r(e),i=0;for(n=0;n<t.length;n++){var o=t[n];o.copy(a,i),i+=o.length}return a},r.compare=function(t,e){H(r.isBuffer(t)&&r.isBuffer(e),"Arguments must be Buffers");for(var n=t.length,a=e.length,i=0,o=Math.min(n,a);o>i&&t[i]===e[i];i++);return i!==o&&(n=t[i],a=e[i]),a>n?-1:n>a?1:0},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var c=r;r=e,e=n,n=c}e=Number(e)||0;var d=this.length-e;n?(n=Number(n),n>d&&(n=d)):n=d,r=String(r||"utf8").toLowerCase();var f;switch(r){case"hex":f=a(this,t,e,n);break;case"utf8":case"utf-8":f=i(this,t,e,n);break;case"ascii":f=o(this,t,e,n);break;case"binary":f=l(this,t,e,n);break;case"base64":f=s(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":f=u(this,t,e,n);break;default:throw new Error("Unknown encoding")}return f},r.prototype.toString=function(t,e,n){var r=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,n=void 0===n?r.length:Number(n),n===e)return"";var a;switch(t){case"hex":a=h(r,e,n);break;case"utf8":case"utf-8":a=d(r,e,n);break;case"ascii":a=f(r,e,n);break;case"binary":a=p(r,e,n);break;case"base64":a=c(r,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=v(r,e,n);break;default:throw new Error("Unknown encoding")}return a},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.equals=function(t){return H(r.isBuffer(t),"Argument must be a Buffer"),0===r.compare(this,t)},r.prototype.compare=function(t){return H(r.isBuffer(t),"Argument must be a Buffer"),r.compare(this,t)},r.prototype.copy=function(t,e,n,a){var i=this;if(n||(n=0),a||0===a||(a=this.length),e||(e=0),a!==n&&0!==t.length&&0!==i.length){H(a>=n,"sourceEnd < sourceStart"),H(e>=0&&e<t.length,"targetStart out of bounds"),H(n>=0&&n<i.length,"sourceStart out of bounds"),H(a>=0&&a<=i.length,"sourceEnd out of bounds"),a>this.length&&(a=this.length),t.length-e<a-n&&(a=t.length-e+n);var o=a-n;if(100>o||!r._useTypedArrays)for(var l=0;o>l;l++)t[l+e]=this[l+n];else t._set(this.subarray(n,n+o),e)}},r.prototype.slice=function(t,e){var n=this.length;if(t=C(t,n,0),e=C(e,n,n),r._useTypedArrays)return r._augment(this.subarray(t,e));for(var a=e-t,i=new r(a,void 0,!0),o=0;a>o;o++)i[o]=this[o+t];return i},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.readUInt8=function(t,e){return e||(H(void 0!==t&&null!==t,"missing offset"),H(t<this.length,"Trying to read beyond buffer length")),t>=this.length?void 0:this[t]},r.prototype.readUInt16LE=function(t,e){return g(this,t,!0,e)},r.prototype.readUInt16BE=function(t,e){return g(this,t,!1,e)},r.prototype.readUInt32LE=function(t,e){return m(this,t,!0,e)},r.prototype.readUInt32BE=function(t,e){return m(this,t,!1,e)},r.prototype.readInt8=function(t,e){if(e||(H(void 0!==t&&null!==t,"missing offset"),H(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length)){var n=128&this[t];return n?-1*(255-this[t]+1):this[t]}},r.prototype.readInt16LE=function(t,e){return y(this,t,!0,e)},r.prototype.readInt16BE=function(t,e){return y(this,t,!1,e)},r.prototype.readInt32LE=function(t,e){return x(this,t,!0,e)},r.prototype.readInt32BE=function(t,e){return x(this,t,!1,e)},r.prototype.readFloatLE=function(t,e){return b(this,t,!0,e)},r.prototype.readFloatBE=function(t,e){return b(this,t,!1,e)},r.prototype.readDoubleLE=function(t,e){return w(this,t,!0,e)},r.prototype.readDoubleBE=function(t,e){return w(this,t,!1,e)},r.prototype.writeUInt8=function(t,e,n){return n||(H(void 0!==t&&null!==t,"missing value"),H(void 0!==e&&null!==e,"missing offset"),H(e<this.length,"trying to write beyond buffer length"),U(t,255)),e>=this.length?void 0:(this[e]=t,e+1)},r.prototype.writeUInt16LE=function(t,e,n){return _(this,t,e,!0,n)},r.prototype.writeUInt16BE=function(t,e,n){return _(this,t,e,!1,n)},r.prototype.writeUInt32LE=function(t,e,n){return z(this,t,e,!0,n)},r.prototype.writeUInt32BE=function(t,e,n){return z(this,t,e,!1,n)},r.prototype.writeInt8=function(t,e,n){return n||(H(void 0!==t&&null!==t,"missing value"),H(void 0!==e&&null!==e,"missing offset"),H(e<this.length,"Trying to write beyond buffer length"),D(t,127,-128)),e>=this.length?void 0:(t>=0?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n),e+1)},r.prototype.writeInt16LE=function(t,e,n){return k(this,t,e,!0,n)},r.prototype.writeInt16BE=function(t,e,n){return k(this,t,e,!1,n)},r.prototype.writeInt32LE=function(t,e,n){return M(this,t,e,!0,n)},r.prototype.writeInt32BE=function(t,e,n){return M(this,t,e,!1,n)},r.prototype.writeFloatLE=function(t,e,n){return A(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){return A(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){return E(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){return E(this,t,e,!1,n)},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),H(n>=e,"end < start"),n!==e&&0!==this.length){H(e>=0&&e<this.length,"start out of bounds"),H(n>=0&&n<=this.length,"end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var a=q(t.toString()),i=a.length;for(r=e;n>r;r++)this[r]=a[r%i]}return this}},r.prototype.inspect=function(){for(var t=[],e=this.length,r=0;e>r;r++)if(t[r]=T(this[r]),r===n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r._useTypedArrays)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var W=r.prototype;r._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=W.get,t.set=W.set,t.write=W.write,t.toString=W.toString,t.toLocaleString=W.toString,t.toJSON=W.toJSON,t.equals=W.equals,t.compare=W.compare,t.copy=W.copy,t.slice=W.slice,t.readUInt8=W.readUInt8,t.readUInt16LE=W.readUInt16LE,t.readUInt16BE=W.readUInt16BE,t.readUInt32LE=W.readUInt32LE,t.readUInt32BE=W.readUInt32BE,t.readInt8=W.readInt8,t.readInt16LE=W.readInt16LE,t.readInt16BE=W.readInt16BE,t.readInt32LE=W.readInt32LE,t.readInt32BE=W.readInt32BE,t.readFloatLE=W.readFloatLE,t.readFloatBE=W.readFloatBE,t.readDoubleLE=W.readDoubleLE,t.readDoubleBE=W.readDoubleBE,t.writeUInt8=W.writeUInt8,t.writeUInt16LE=W.writeUInt16LE,t.writeUInt16BE=W.writeUInt16BE,t.writeUInt32LE=W.writeUInt32LE,t.writeUInt32BE=W.writeUInt32BE,t.writeInt8=W.writeInt8,t.writeInt16LE=W.writeInt16LE,t.writeInt16BE=W.writeInt16BE,t.writeInt32LE=W.writeInt32LE,t.writeInt32BE=W.writeInt32BE,t.writeFloatLE=W.writeFloatLE,t.writeFloatBE=W.writeFloatBE,t.writeDoubleLE=W.writeDoubleLE,t.writeDoubleBE=W.writeDoubleBE,t.fill=W.fill,t.inspect=W.inspect,t.toArrayBuffer=W.toArrayBuffer,t};var Z=/[^+\/0-9A-z]/g},{"base64-js":2,ieee754:3}],2:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===o?62:e===l?63:s>e?-1:s+10>e?e-s+26+26:c+26>e?e-c:u+26>e?e-u+26:void 0}function n(t){function n(t){u[d++]=t}var r,a,o,l,s,u;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;s="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,u=new i(3*t.length/4-s),o=s>0?t.length-4:t.length;var d=0;for(r=0,a=0;o>r;r+=4,a+=3)l=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&l)>>16),n((65280&l)>>8),n(255&l);return 2===s?(l=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&l)):1===s&&(l=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(l>>8&255),n(255&l)),u}function a(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var a,i,o,l=t.length%3,s="";for(a=0,o=t.length-l;o>a;a+=3)i=(t[a]<<16)+(t[a+1]<<8)+t[a+2],s+=n(i);switch(l){case 1:i=t[t.length-1],s+=e(i>>2),s+=e(i<<4&63),s+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],s+=e(i>>10),s+=e(i>>4&63),s+=e(i<<2&63),s+="="}return s}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),l="/".charCodeAt(0),s="0".charCodeAt(0),u="a".charCodeAt(0),c="A".charCodeAt(0);t.toByteArray=n,t.fromByteArray=a}("undefined"==typeof n?this.base64js={}:n)},{}],3:[function(t,e,n){n.read=function(t,e,n,r,a){var i,o,l=8*a-r-1,s=(1<<l)-1,u=s>>1,c=-7,d=n?a-1:0,f=n?-1:1,p=t[e+d];for(d+=f,i=p&(1<<-c)-1,p>>=-c,c+=l;c>0;i=256*i+t[e+d],d+=f,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=r;c>0;o=256*o+t[e+d],d+=f,c-=8);if(0===i)i=1-u;else{if(i===s)return o?0/0:1/0*(p?-1:1);o+=Math.pow(2,r),i-=u}return(p?-1:1)*o*Math.pow(2,i-r)},n.write=function(t,e,n,r,a,i){var o,l,s,u=8*i-a-1,c=(1<<u)-1,d=c>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,v=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(l=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-o))<1&&(o--,s*=2),e+=o+d>=1?f/s:f*Math.pow(2,1-d),e*s>=2&&(o++,s/=2),o+d>=c?(l=0,o=c):o+d>=1?(l=(e*s-1)*Math.pow(2,a),o+=d):(l=e*Math.pow(2,d-1)*Math.pow(2,a),o=0));a>=8;t[n+p]=255&l,p+=h,l/=256,a-=8);for(o=o<<a|l,u+=a;u>0;t[n+p]=255&o,p+=h,o/=256,u-=8);t[n+p-h]|=128*v}},{}],4:[function(t,e){!function(){function t(t,e){return e>t?-1:t>e?1:t>=e?0:0/0}function n(t){return null!=t&&!isNaN(t)}function r(t){return{left:function(e,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=e.length);a>r;){var i=r+a>>>1;t(e[i],n)<0?r=i+1:a=i}return r},right:function(e,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=e.length);a>r;){var i=r+a>>>1;t(e[i],n)>0?a=i:r=i+1}return r}}}function a(t){return t.length}function i(t){for(var e=1;t*e%1;)e*=10;return e}function o(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(r){t.prototype=e}}function l(){}function s(t){return ll+t in this}function u(t){return t=ll+t,t in this&&delete this[t]}function c(){var t=[];return this.forEach(function(e){t.push(e)}),t}function d(){var t=0;for(var e in this)e.charCodeAt(0)===sl&&++t;return t}function f(){for(var t in this)if(t.charCodeAt(0)===sl)return!1;return!0}function p(){}function h(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function v(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var n=0,r=ul.length;r>n;++n){var a=ul[n]+e;if(a in t)return a}}function g(){}function m(){}function y(t){function e(){for(var e,r=n,a=-1,i=r.length;++a<i;)(e=r[a].on)&&e.apply(this,arguments);return t}var n=[],r=new l;return e.on=function(e,a){var i,o=r.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,i=n.indexOf(o)).concat(n.slice(i+1)),r.remove(e)),a&&n.push(r.set(e,{on:a})),t)},e}function x(){Go.event.preventDefault()}function b(){for(var t,e=Go.event;t=e.sourceEvent;)e=t;return e}function w(t){for(var e=new m,n=0,r=arguments.length;++n<r;)e[arguments[n]]=y(e);return e.of=function(n,r){return function(a){try{var i=a.sourceEvent=Go.event;a.target=t,Go.event=a,e[a.type].apply(n,r)}finally{Go.event=i}}},e}function _(t){return dl(t,gl),t}function z(t){return"function"==typeof t?t:function(){return fl(t,this)}}function k(t){return"function"==typeof t?t:function(){return pl(t,this)}}function M(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function a(){this.setAttribute(t,e)}function i(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function l(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=Go.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?l:o:t.local?i:a}function A(t){return t.trim().replace(/\s+/g," ")}function E(t){return new RegExp("(?:^|\\s+)"+Go.requote(t)+"(?:\\s+|$)","g")}function j(t){return(t+"").trim().split(/^|\s+/)}function S(t,e){function n(){for(var n=-1;++n<a;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<a;)t[n](this,r)}t=j(t).map(C);var a=t.length;return"function"==typeof e?r:n}function C(t){var e=E(t);return function(n,r){if(a=n.classList)return r?a.add(t):a.remove(t);var a=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(a)||n.setAttribute("class",A(a+" "+t))):n.setAttribute("class",A(a.replace(e," ")))}}function N(t,e,n){function r(){this.style.removeProperty(t)}function a(){this.style.setProperty(t,e,n)}function i(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?i:a}function O(t,e){function n(){delete this[t]}function r(){this[t]=e}function a(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?a:r}function F(t){return"function"==typeof t?t:(t=Go.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function T(t){return{__data__:t}}function q(t){return function(){return vl(this,t)}}function L(e){return arguments.length||(e=t),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function P(t,e){for(var n=0,r=t.length;r>n;n++)for(var a,i=t[n],o=0,l=i.length;l>o;o++)(a=i[o])&&e(a,o,n);return t}function I(t){return dl(t,yl),t}function B(t){var e,n;return function(r,a,i){var o,l=t[i].update,s=l.length;for(i!=n&&(n=i,e=0),a>=e&&(e=a+1);!(o=l[e])&&++e<s;);return o}}function V(){var t=this.__transition__;t&&++t.active}function U(t,e,n){function r(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}function a(){var a=s(e,Zo(arguments));r.call(this),this.addEventListener(t,this[o]=a,a.$=n),a._=e}function i(){var e,n=new RegExp("^__on([^.]+)"+Go.requote(t)+"$");for(var r in this)if(e=r.match(n)){var a=this[r];this.removeEventListener(e[1],a,a.$),delete this[r]}}var o="__on"+t,l=t.indexOf("."),s=D;l>0&&(t=t.substring(0,l));var u=bl.get(t);return u&&(t=u,s=R),l?e?a:r:e?g:i}function D(t,e){return function(n){var r=Go.event;Go.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{Go.event=r}}}function R(t,e){var n=D(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function H(){var t=".dragsuppress-"+ ++_l,e="click"+t,n=Go.select(Jo).on("touchmove"+t,x).on("dragstart"+t,x).on("selectstart"+t,x);if(wl){var r=$o.style,a=r[wl];r[wl]="none"}return function(i){function o(){n.on(e,null)}n.on(t,null),wl&&(r[wl]=a),i&&(n.on(e,function(){x(),o()},!0),setTimeout(o,0))}}function Y(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>zl&&(Jo.scrollX||Jo.scrollY)){n=Go.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=n[0][0].getScreenCTM();zl=!(a.f||a.e),n.remove()}return zl?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function G(){return Go.event.changedTouches[0].identifier}function W(){return Go.event.target}function Z(){return Jo}function X(t){return t>0?1:0>t?-1:0}function $(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function J(t){return t>1?0:-1>t?kl:Math.acos(t)}function K(t){return t>1?Al:-1>t?-Al:Math.asin(t)}function Q(t){return((t=Math.exp(t))-1/t)/2}function te(t){return((t=Math.exp(t))+1/t)/2}function ee(t){return((t=Math.exp(2*t))-1)/(t+1)}function ne(t){return(t=Math.sin(t/2))*t}function re(){}function ae(t,e,n){return this instanceof ae?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ae?new ae(t.h,t.s,t.l):ye(""+t,xe,ae):new ae(t,e,n)}function ie(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?i+(o-i)*t/60:180>t?o:240>t?i+(o-i)*(240-t)/60:i}function a(t){return Math.round(255*r(t))}var i,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+e):n+e-n*e,i=2*n-o,new he(a(t+120),a(t),a(t-120))}function oe(t,e,n){return this instanceof oe?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof oe?new oe(t.h,t.c,t.l):t instanceof se?ce(t.l,t.a,t.b):ce((t=be((t=Go.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new oe(t,e,n)}function le(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new se(n,Math.cos(t*=Sl)*e,Math.sin(t)*e)}function se(t,e,n){return this instanceof se?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof se?new se(t.l,t.a,t.b):t instanceof oe?le(t.l,t.c,t.h):be((t=he(t)).r,t.g,t.b):new se(t,e,n)}function ue(t,e,n){var r=(t+16)/116,a=r+e/500,i=r-n/200;return a=de(a)*Vl,r=de(r)*Ul,i=de(i)*Dl,new he(pe(3.2404542*a-1.5371385*r-.4985314*i),pe(-.969266*a+1.8760108*r+.041556*i),pe(.0556434*a-.2040259*r+1.0572252*i))}function ce(t,e,n){return t>0?new oe(Math.atan2(n,e)*Cl,Math.sqrt(e*e+n*n),t):new oe(0/0,0/0,t)}function de(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function fe(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function pe(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function he(t,e,n){return this instanceof he?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof he?new he(t.r,t.g,t.b):ye(""+t,he,ie):new he(t,e,n)}function ve(t){return new he(t>>16,t>>8&255,255&t)}function ge(t){return ve(t)+""}function me(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ye(t,e,n){var r,a,i,o=0,l=0,s=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(a=r[2].split(","),r[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return e(_e(a[0]),_e(a[1]),_e(a[2]))}return(i=Yl.get(t))?e(i.r,i.g,i.b):(null==t||"#"!==t.charAt(0)||isNaN(i=parseInt(t.substring(1),16))||(4===t.length?(o=(3840&i)>>4,o=o>>4|o,l=240&i,l=l>>4|l,s=15&i,s=s<<4|s):7===t.length&&(o=(16711680&i)>>16,l=(65280&i)>>8,s=255&i)),e(o,l,s))}function xe(t,e,n){var r,a,i=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),l=o-i,s=(o+i)/2;return l?(a=.5>s?l/(o+i):l/(2-o-i),r=t==o?(e-n)/l+(n>e?6:0):e==o?(n-t)/l+2:(t-e)/l+4,r*=60):(r=0/0,a=s>0&&1>s?0:r),new ae(r,a,s)}function be(t,e,n){t=we(t),e=we(e),n=we(n);var r=fe((.4124564*t+.3575761*e+.1804375*n)/Vl),a=fe((.2126729*t+.7151522*e+.072175*n)/Ul),i=fe((.0193339*t+.119192*e+.9503041*n)/Dl);return se(116*a-16,500*(r-a),200*(a-i))}function we(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function _e(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function ze(t){return"function"==typeof t?t:function(){return t}}function ke(t){return t}function Me(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Ae(e,n,t,r)}}function Ae(t,e,n,r){function a(){var t,e=s.status;if(!e&&s.responseText||e>=200&&300>e||304===e){try{t=n.call(i,s)}catch(r){return void o.error.call(i,r)}o.load.call(i,t)}else o.error.call(i,s)}var i={},o=Go.dispatch("beforesend","progress","load","error"),l={},s=new XMLHttpRequest,u=null;return!Jo.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=a:s.onreadystatechange=function(){s.readyState>3&&a()},s.onprogress=function(t){var e=Go.event;Go.event=t;try{o.progress.call(i,s)}finally{Go.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.responseType=function(t){return arguments.length?(u=t,i):u},i.response=function(t){return n=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(Zo(arguments)))}}),i.send=function(n,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),s.open(n,t,!0),null==e||"accept"in l||(l.accept=e+",*/*"),s.setRequestHeader)for(var c in l)s.setRequestHeader(c,l[c]);return null!=e&&s.overrideMimeType&&s.overrideMimeType(e),null!=u&&(s.responseType=u),null!=a&&i.on("error",a).on("load",function(t){a(null,t)}),o.beforesend.call(i,s),s.send(null==r?null:r),i},i.abort=function(){return s.abort(),i},Go.rebind(i,o,"on"),null==r?i:i.get(Ee(r))}function Ee(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function je(){var t=Se(),e=Ce()-t;e>24?(isFinite(e)&&(clearTimeout(Xl),Xl=setTimeout(je,e)),Zl=0):(Zl=1,Jl(je))}function Se(){var t=Date.now();for($l=Gl;$l;)t>=$l.t&&($l.f=$l.c(t-$l.t)),$l=$l.n;return t}function Ce(){for(var t,e=Gl,n=1/0;e;)e.f?e=t?t.n=e.n:Gl=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return Wl=t,n}function Ne(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Oe(t,e){var n=Math.pow(10,3*ol(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Fe(t){var e=t.decimal,n=t.thousands,r=t.grouping,a=t.currency,i=r?function(t){for(var e=t.length,a=[],i=0,o=r[0];e>0&&o>0;)a.push(t.substring(e-=o,e+o)),o=r[i=(i+1)%r.length];return a.reverse().join(n)}:ke;return function(t){var n=Ql.exec(t),r=n[1]||" ",o=n[2]||">",l=n[3]||"",s=n[4]||"",u=n[5],c=+n[6],d=n[7],f=n[8],p=n[9],h=1,v="",g="",m=!1;switch(f&&(f=+f.substring(1)),(u||"0"===r&&"="===o)&&(u=r="0",o="=",d&&(c-=Math.floor((c-1)/4))),p){case"n":d=!0,p="g";break;case"%":h=100,g="%",p="f";break;case"p":h=100,g="%",p="r";break;case"b":case"o":case"x":case"X":"#"===s&&(v="0"+p.toLowerCase());case"c":case"d":m=!0,f=0;break;case"s":h=-1,p="r"}"$"===s&&(v=a[0],g=a[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):("e"==p||"f"==p)&&(f=Math.max(0,Math.min(20,f)))),p=ts.get(p)||Te;var y=u&&d;return function(t){var n=g;if(m&&t%1)return"";var a=0>t||0===t&&0>1/t?(t=-t,"-"):l;if(0>h){var s=Go.formatPrefix(t,f);t=s.scale(t),n=s.symbol+g}else t*=h;t=p(t,f);var x=t.lastIndexOf("."),b=0>x?t:t.substring(0,x),w=0>x?"":e+t.substring(x+1);!u&&d&&(b=i(b));var _=v.length+b.length+w.length+(y?0:a.length),z=c>_?new Array(_=c-_+1).join(r):"";return y&&(b=i(z+b)),a+=v,t=b+w,("<"===o?a+t+z:">"===o?z+a+t:"^"===o?z.substring(0,_>>=1)+a+t+z.substring(_):a+(y?t:z+t))+n}}}function Te(t){return t+""}function qe(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Le(t,e,n){function r(e){var n=t(e),r=i(n,1);return r-e>e-n?n:r}function a(n){return e(n=t(new ns(n-1)),1),n}function i(t,n){return e(t=new ns(+t),n),t}function o(t,r,i){var o=a(t),l=[];if(i>1)for(;r>o;)n(o)%i||l.push(new Date(+o)),e(o,1);else for(;r>o;)l.push(new Date(+o)),e(o,1);return l}function l(t,e,n){try{ns=qe;var r=new qe;return r._=t,o(r,e,n)}finally{ns=Date}}t.floor=t,t.round=r,t.ceil=a,t.offset=i,t.range=o;var s=t.utc=Pe(t);return s.floor=s,s.round=Pe(r),s.ceil=Pe(a),s.offset=Pe(i),s.range=l,t}function Pe(t){return function(e,n){try{ns=qe;var r=new qe;return r._=e,t(r,n)._}finally{ns=Date}}}function Ie(t){function e(t){function e(e){for(var n,a,i,o=[],l=-1,s=0;++l<r;)37===t.charCodeAt(l)&&(o.push(t.substring(s,l)),null!=(a=as[n=t.charAt(++l)])&&(n=t.charAt(++l)),(i=j[n])&&(n=i(e,null==a?"e"===n?" ":"0":a)),o.push(n),s=l+1);return o.push(t.substring(s,l)),o.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},a=n(r,t,e,0);if(a!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);
var i=null!=r.Z&&ns!==qe,o=new(i?qe:ns);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+Math.floor(r.Z/100),r.M+r.Z%100,r.S,r.L),i?o._:o},e.toString=function(){return t},e}function n(t,e,n,r){for(var a,i,o,l=0,s=e.length,u=n.length;s>l;){if(r>=u)return-1;if(a=e.charCodeAt(l++),37===a){if(o=e.charAt(l++),i=S[o in as?e.charAt(l++):o],!i||(r=i(t,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){_.lastIndex=0;var r=_.exec(e.substring(n));return r?(t.w=z.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){b.lastIndex=0;var r=b.exec(e.substring(n));return r?(t.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){A.lastIndex=0;var r=A.exec(e.substring(n));return r?(t.m=E.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){k.lastIndex=0;var r=k.exec(e.substring(n));return r?(t.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function l(t,e,r){return n(t,j.c.toString(),e,r)}function s(t,e,r){return n(t,j.x.toString(),e,r)}function u(t,e,r){return n(t,j.X.toString(),e,r)}function c(t,e,n){var r=x.get(e.substring(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var d=t.dateTime,f=t.date,p=t.time,h=t.periods,v=t.days,g=t.shortDays,m=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{ns=qe;var e=new ns;return e._=t,r(e)}finally{ns=Date}}var r=e(t);return n.parse=function(t){try{ns=qe;var e=r.parse(t);return e&&e._}finally{ns=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=an;var x=Go.map(),b=Ve(v),w=Ue(v),_=Ve(g),z=Ue(g),k=Ve(m),M=Ue(m),A=Ve(y),E=Ue(y);h.forEach(function(t,e){x.set(t.toLowerCase(),e)});var j={a:function(t){return g[t.getDay()]},A:function(t){return v[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:e(d),d:function(t,e){return Be(t.getDate(),e,2)},e:function(t,e){return Be(t.getDate(),e,2)},H:function(t,e){return Be(t.getHours(),e,2)},I:function(t,e){return Be(t.getHours()%12||12,e,2)},j:function(t,e){return Be(1+es.dayOfYear(t),e,3)},L:function(t,e){return Be(t.getMilliseconds(),e,3)},m:function(t,e){return Be(t.getMonth()+1,e,2)},M:function(t,e){return Be(t.getMinutes(),e,2)},p:function(t){return h[+(t.getHours()>=12)]},S:function(t,e){return Be(t.getSeconds(),e,2)},U:function(t,e){return Be(es.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Be(es.mondayOfYear(t),e,2)},x:e(f),X:e(p),y:function(t,e){return Be(t.getFullYear()%100,e,2)},Y:function(t,e){return Be(t.getFullYear()%1e4,e,4)},Z:nn,"%":function(){return"%"}},S={a:r,A:a,b:i,B:o,c:l,d:$e,e:$e,H:Ke,I:Ke,j:Je,L:en,m:Xe,M:Qe,p:c,S:tn,U:Re,w:De,W:He,x:s,X:u,y:Ge,Y:Ye,Z:We,"%":rn};return e}function Be(t,e,n){var r=0>t?"-":"",a=(r?-t:t)+"",i=a.length;return r+(n>i?new Array(n-i+1).join(e)+a:a)}function Ve(t){return new RegExp("^(?:"+t.map(Go.requote).join("|")+")","i")}function Ue(t){for(var e=new l,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function De(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Re(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n));return r?(t.U=+r[0],n+r[0].length):-1}function He(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n));return r?(t.W=+r[0],n+r[0].length):-1}function Ye(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ge(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n,n+2));return r?(t.y=Ze(+r[0]),n+r[0].length):-1}function We(t,e,n){return/^[+-]\d{4}$/.test(e=e.substring(n,n+5))?(t.Z=-e,n+5):-1}function Ze(t){return t+(t>68?1900:2e3)}function Xe(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function $e(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Je(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function Ke(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Qe(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function tn(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function en(t,e,n){is.lastIndex=0;var r=is.exec(e.substring(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function nn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=~~(ol(e)/60),a=ol(e)%60;return n+Be(r,"0",2)+Be(a,"0",2)}function rn(t,e,n){os.lastIndex=0;var r=os.exec(e.substring(n,n+1));return r?n+r[0].length:-1}function an(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function on(){}function ln(t,e,n){var r=n.s=t+e,a=r-t,i=r-a;n.t=t-i+(e-a)}function sn(t,e){t&&cs.hasOwnProperty(t.type)&&cs[t.type](t,e)}function un(t,e,n){var r,a=-1,i=t.length-n;for(e.lineStart();++a<i;)r=t[a],e.point(r[0],r[1],r[2]);e.lineEnd()}function cn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)un(t[n],e,1);e.polygonEnd()}function dn(){function t(t,e){t*=Sl,e=e*Sl/2+kl/4;var n=t-r,o=n>=0?1:-1,l=o*n,s=Math.cos(e),u=Math.sin(e),c=i*u,d=a*s+c*Math.cos(l),f=c*o*Math.sin(l);fs.add(Math.atan2(f,d)),r=t,a=s,i=u}var e,n,r,a,i;ps.point=function(o,l){ps.point=t,r=(e=o)*Sl,a=Math.cos(l=(n=l)*Sl/2+kl/4),i=Math.sin(l)},ps.lineEnd=function(){t(e,n)}}function fn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function pn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function hn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function vn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function gn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function mn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function yn(t){return[Math.atan2(t[1],t[0]),K(t[2])]}function xn(t,e){return ol(t[0]-e[0])<El&&ol(t[1]-e[1])<El}function bn(t,e){t*=Sl;var n=Math.cos(e*=Sl);wn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function wn(t,e,n){++hs,gs+=(t-gs)/hs,ms+=(e-ms)/hs,ys+=(n-ys)/hs}function _n(){function t(t,a){t*=Sl;var i=Math.cos(a*=Sl),o=i*Math.cos(t),l=i*Math.sin(t),s=Math.sin(a),u=Math.atan2(Math.sqrt((u=n*s-r*l)*u+(u=r*o-e*s)*u+(u=e*l-n*o)*u),e*o+n*l+r*s);vs+=u,xs+=u*(e+(e=o)),bs+=u*(n+(n=l)),ws+=u*(r+(r=s)),wn(e,n,r)}var e,n,r;Ms.point=function(a,i){a*=Sl;var o=Math.cos(i*=Sl);e=o*Math.cos(a),n=o*Math.sin(a),r=Math.sin(i),Ms.point=t,wn(e,n,r)}}function zn(){Ms.point=bn}function kn(){function t(t,e){t*=Sl;var n=Math.cos(e*=Sl),o=n*Math.cos(t),l=n*Math.sin(t),s=Math.sin(e),u=a*s-i*l,c=i*o-r*s,d=r*l-a*o,f=Math.sqrt(u*u+c*c+d*d),p=r*o+a*l+i*s,h=f&&-J(p)/f,v=Math.atan2(f,p);_s+=h*u,zs+=h*c,ks+=h*d,vs+=v,xs+=v*(r+(r=o)),bs+=v*(a+(a=l)),ws+=v*(i+(i=s)),wn(r,a,i)}var e,n,r,a,i;Ms.point=function(o,l){e=o,n=l,Ms.point=t,o*=Sl;var s=Math.cos(l*=Sl);r=s*Math.cos(o),a=s*Math.sin(o),i=Math.sin(l),wn(r,a,i)},Ms.lineEnd=function(){t(e,n),Ms.lineEnd=zn,Ms.point=bn}}function Mn(){return!0}function An(t,e,n,r,a){var i=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(xn(n,r)){a.lineStart();for(var l=0;e>l;++l)a.point((n=t[l])[0],n[1]);return void a.lineEnd()}var s=new jn(n,t,null,!0),u=new jn(n,null,s,!1);s.o=u,i.push(s),o.push(u),s=new jn(r,t,null,!1),u=new jn(r,null,s,!0),s.o=u,i.push(s),o.push(u)}}),o.sort(e),En(i),En(o),i.length){for(var l=0,s=n,u=o.length;u>l;++l)o[l].e=s=!s;for(var c,d,f=i[0];;){for(var p=f,h=!0;p.v;)if((p=p.n)===f)return;c=p.z,a.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(var l=0,u=c.length;u>l;++l)a.point((d=c[l])[0],d[1]);else r(p.x,p.n.x,1,a);p=p.n}else{if(h){c=p.p.z;for(var l=c.length-1;l>=0;--l)a.point((d=c[l])[0],d[1])}else r(p.x,p.p.x,-1,a);p=p.p}p=p.o,c=p.z,h=!h}while(!p.v);a.lineEnd()}}}function En(t){if(e=t.length){for(var e,n,r=0,a=t[0];++r<e;)a.n=n=t[r],n.p=a,a=n;a.n=n=t[0],n.p=a}}function jn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Sn(t,e,n,r){return function(a,i){function o(e,n){var r=a(e,n);t(e=r[0],n=r[1])&&i.point(e,n)}function l(t,e){var n=a(t,e);g.point(n[0],n[1])}function s(){y.point=l,g.lineStart()}function u(){y.point=o,g.lineEnd()}function c(t,e){v.push([t,e]);var n=a(t,e);b.point(n[0],n[1])}function d(){b.lineStart(),v=[]}function f(){c(v[0][0],v[0][1]),b.lineEnd();var t,e=b.clean(),n=x.buffer(),r=n.length;if(v.pop(),h.push(v),v=null,r)if(1&e){t=n[0];var a,r=t.length-1,o=-1;if(r>0){for(w||(i.polygonStart(),w=!0),i.lineStart();++o<r;)i.point((a=t[o])[0],a[1]);i.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Cn))}var p,h,v,g=e(i),m=a.invert(r[0],r[1]),y={point:o,lineStart:s,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=d,y.lineEnd=f,p=[],h=[]},polygonEnd:function(){y.point=o,y.lineStart=s,y.lineEnd=u,p=Go.merge(p);var t=Fn(m,h);p.length?(w||(i.polygonStart(),w=!0),An(p,On,t,n,i)):t&&(w||(i.polygonStart(),w=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),w&&(i.polygonEnd(),w=!1),p=h=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}},x=Nn(),b=e(x),w=!1;return y}}function Cn(t){return t.length>1}function Nn(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:g,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function On(t,e){return((t=t.x)[0]<0?t[1]-Al-El:Al-t[1])-((e=e.x)[0]<0?e[1]-Al-El:Al-e[1])}function Fn(t,e){var n=t[0],r=t[1],a=[Math.sin(n),-Math.cos(n),0],i=0,o=0;fs.reset();for(var l=0,s=e.length;s>l;++l){var u=e[l],c=u.length;if(c)for(var d=u[0],f=d[0],p=d[1]/2+kl/4,h=Math.sin(p),v=Math.cos(p),g=1;;){g===c&&(g=0),t=u[g];var m=t[0],y=t[1]/2+kl/4,x=Math.sin(y),b=Math.cos(y),w=m-f,_=w>=0?1:-1,z=_*w,k=z>kl,M=h*x;if(fs.add(Math.atan2(M*_*Math.sin(z),v*b+M*Math.cos(z))),i+=k?w+_*Ml:w,k^f>=n^m>=n){var A=hn(fn(d),fn(t));mn(A);var E=hn(a,A);mn(E);var j=(k^w>=0?-1:1)*K(E[2]);(r>j||r===j&&(A[0]||A[1]))&&(o+=k^w>=0?1:-1)}if(!g++)break;f=m,h=x,v=b,d=t}}return(-El>i||El>i&&0>fs)^1&o}function Tn(t){var e,n=0/0,r=0/0,a=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(i,o){var l=i>0?kl:-kl,s=ol(i-n);ol(s-kl)<El?(t.point(n,r=(r+o)/2>0?Al:-Al),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(l,r),t.point(i,r),e=0):a!==l&&s>=kl&&(ol(n-a)<El&&(n-=a*El),ol(i-l)<El&&(i-=l*El),r=qn(n,r,i,o),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(l,r),e=0),t.point(n=i,r=o),a=l},lineEnd:function(){t.lineEnd(),n=r=0/0},clean:function(){return 2-e}}}function qn(t,e,n,r){var a,i,o=Math.sin(t-n);return ol(o)>El?Math.atan((Math.sin(e)*(i=Math.cos(r))*Math.sin(n)-Math.sin(r)*(a=Math.cos(e))*Math.sin(t))/(a*i*o)):(e+r)/2}function Ln(t,e,n,r){var a;if(null==t)a=n*Al,r.point(-kl,a),r.point(0,a),r.point(kl,a),r.point(kl,0),r.point(kl,-a),r.point(0,-a),r.point(-kl,-a),r.point(-kl,0),r.point(-kl,a);else if(ol(t[0]-e[0])>El){var i=t[0]<e[0]?kl:-kl;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(e[0],e[1])}function Pn(t){function e(t,e){return Math.cos(t)*Math.cos(e)>i}function n(t){var n,i,s,u,c;return{lineStart:function(){u=s=!1,c=1},point:function(d,f){var p,h=[d,f],v=e(d,f),g=o?v?0:a(d,f):v?a(d+(0>d?kl:-kl),f):0;if(!n&&(u=s=v)&&t.lineStart(),v!==s&&(p=r(n,h),(xn(n,p)||xn(h,p))&&(h[0]+=El,h[1]+=El,v=e(h[0],h[1]))),v!==s)c=0,v?(t.lineStart(),p=r(h,n),t.point(p[0],p[1])):(p=r(n,h),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(l&&n&&o^v){var m;g&i||!(m=r(h,n,!0))||(c=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||n&&xn(n,h)||t.point(h[0],h[1]),n=h,s=v,i=g},lineEnd:function(){s&&t.lineEnd(),n=null},clean:function(){return c|(u&&s)<<1}}}function r(t,e,n){var r=fn(t),a=fn(e),o=[1,0,0],l=hn(r,a),s=pn(l,l),u=l[0],c=s-u*u;if(!c)return!n&&t;var d=i*s/c,f=-i*u/c,p=hn(o,l),h=gn(o,d),v=gn(l,f);vn(h,v);var g=p,m=pn(h,g),y=pn(g,g),x=m*m-y*(pn(h,h)-1);if(!(0>x)){var b=Math.sqrt(x),w=gn(g,(-m-b)/y);if(vn(w,h),w=yn(w),!n)return w;var _,z=t[0],k=e[0],M=t[1],A=e[1];z>k&&(_=z,z=k,k=_);var E=k-z,j=ol(E-kl)<El,S=j||El>E;if(!j&&M>A&&(_=M,M=A,A=_),S?j?M+A>0^w[1]<(ol(w[0]-z)<El?M:A):M<=w[1]&&w[1]<=A:E>kl^(z<=w[0]&&w[0]<=k)){var C=gn(g,(-m+b)/y);return vn(C,h),[w,yn(C)]}}}function a(e,n){var r=o?t:kl-t,a=0;return-r>e?a|=1:e>r&&(a|=2),-r>n?a|=4:n>r&&(a|=8),a}var i=Math.cos(t),o=i>0,l=ol(i)>El,s=dr(t,6*Sl);return Sn(e,n,s,o?[0,-t]:[-kl,t-kl])}function In(t,e,n,r){return function(a){var i,o=a.a,l=a.b,s=o.x,u=o.y,c=l.x,d=l.y,f=0,p=1,h=c-s,v=d-u;if(i=t-s,h||!(i>0)){if(i/=h,0>h){if(f>i)return;p>i&&(p=i)}else if(h>0){if(i>p)return;i>f&&(f=i)}if(i=n-s,h||!(0>i)){if(i/=h,0>h){if(i>p)return;i>f&&(f=i)}else if(h>0){if(f>i)return;p>i&&(p=i)}if(i=e-u,v||!(i>0)){if(i/=v,0>v){if(f>i)return;p>i&&(p=i)}else if(v>0){if(i>p)return;i>f&&(f=i)}if(i=r-u,v||!(0>i)){if(i/=v,0>v){if(i>p)return;i>f&&(f=i)}else if(v>0){if(f>i)return;p>i&&(p=i)}return f>0&&(a.a={x:s+f*h,y:u+f*v}),1>p&&(a.b={x:s+p*h,y:u+p*v}),a}}}}}}function Bn(t,e,n,r){function a(r,a){return ol(r[0]-t)<El?a>0?0:3:ol(r[0]-n)<El?a>0?2:1:ol(r[1]-e)<El?a>0?1:0:a>0?3:2}function i(t,e){return o(t.x,e.x)}function o(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(l){function s(t){for(var e=0,n=g.length,r=t[1],a=0;n>a;++a)for(var i,o=1,l=g[a],s=l.length,u=l[0];s>o;++o)i=l[o],u[1]<=r?i[1]>r&&$(u,i,t)>0&&++e:i[1]<=r&&$(u,i,t)<0&&--e,u=i;return 0!==e}function u(i,l,s,u){var c=0,d=0;if(null==i||(c=a(i,s))!==(d=a(l,s))||o(i,l)<0^s>0){do u.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+s+4)%4)!==d)}else u.point(l[0],l[1])}function c(a,i){return a>=t&&n>=a&&i>=e&&r>=i}function d(t,e){c(t,e)&&l.point(t,e)}function f(){S.point=h,g&&g.push(m=[]),k=!0,z=!1,w=_=0/0}function p(){v&&(h(y,x),b&&z&&E.rejoin(),v.push(E.buffer())),S.point=d,z&&l.lineEnd()}function h(t,e){t=Math.max(-Es,Math.min(Es,t)),e=Math.max(-Es,Math.min(Es,e));var n=c(t,e);if(g&&m.push([t,e]),k)y=t,x=e,b=n,k=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&z)l.point(t,e);else{var r={a:{x:w,y:_},b:{x:t,y:e}};j(r)?(z||(l.lineStart(),l.point(r.a.x,r.a.y)),l.point(r.b.x,r.b.y),n||l.lineEnd(),M=!1):n&&(l.lineStart(),l.point(t,e),M=!1)}w=t,_=e,z=n}var v,g,m,y,x,b,w,_,z,k,M,A=l,E=Nn(),j=In(t,e,n,r),S={point:d,lineStart:f,lineEnd:p,polygonStart:function(){l=E,v=[],g=[],M=!0},polygonEnd:function(){l=A,v=Go.merge(v);var e=s([t,r]),n=M&&e,a=v.length;(n||a)&&(l.polygonStart(),n&&(l.lineStart(),u(null,null,1,l),l.lineEnd()),a&&An(v,i,e,u,l),l.polygonEnd()),v=g=m=null}};return S}}function Vn(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function Un(t){var e=0,n=kl/3,r=rr(t),a=r(e,n);return a.parallels=function(t){return arguments.length?r(e=t[0]*kl/180,n=t[1]*kl/180):[e/kl*180,n/kl*180]},a}function Dn(t,e){function n(t,e){var n=Math.sqrt(i-2*a*Math.sin(e))/a;return[n*Math.sin(t*=a),o-n*Math.cos(t)]}var r=Math.sin(t),a=(r+Math.sin(e))/2,i=1+r*(2*a-r),o=Math.sqrt(i)/a;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/a,K((i-(t*t+n*n)*a*a)/(2*a))]},n}function Rn(){function t(t,e){Ss+=a*t-r*e,r=t,a=e}var e,n,r,a;Ts.point=function(i,o){Ts.point=t,e=r=i,n=a=o},Ts.lineEnd=function(){t(e,n)}}function Hn(t,e){Cs>t&&(Cs=t),t>Os&&(Os=t),Ns>e&&(Ns=e),e>Fs&&(Fs=e)}function Yn(){function t(t,e){o.push("M",t,",",e,i)}function e(t,e){o.push("M",t,",",e),l.point=n}function n(t,e){o.push("L",t,",",e)}function r(){l.point=t}function a(){o.push("Z")}var i=Gn(4.5),o=[],l={point:t,lineStart:function(){l.point=e},lineEnd:r,polygonStart:function(){l.lineEnd=a},polygonEnd:function(){l.lineEnd=r,l.point=t},pointRadius:function(t){return i=Gn(t),l},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return l}function Gn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Wn(t,e){gs+=t,ms+=e,++ys}function Zn(){function t(t,r){var a=t-e,i=r-n,o=Math.sqrt(a*a+i*i);xs+=o*(e+t)/2,bs+=o*(n+r)/2,ws+=o,Wn(e=t,n=r)}var e,n;Ls.point=function(r,a){Ls.point=t,Wn(e=r,n=a)}}function Xn(){Ls.point=Wn}function $n(){function t(t,e){var n=t-r,i=e-a,o=Math.sqrt(n*n+i*i);xs+=o*(r+t)/2,bs+=o*(a+e)/2,ws+=o,o=a*t-r*e,_s+=o*(r+t),zs+=o*(a+e),ks+=3*o,Wn(r=t,a=e)}var e,n,r,a;Ls.point=function(i,o){Ls.point=t,Wn(e=r=i,n=a=o)},Ls.lineEnd=function(){t(e,n)}}function Jn(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,o,0,Ml)}function n(e,n){t.moveTo(e,n),l.point=r}function r(e,n){t.lineTo(e,n)}function a(){l.point=e}function i(){t.closePath()}var o=4.5,l={point:e,lineStart:function(){l.point=n},lineEnd:a,polygonStart:function(){l.lineEnd=i},polygonEnd:function(){l.lineEnd=a,l.point=e},pointRadius:function(t){return o=t,l},result:g};return l}function Kn(t){function e(t){return(l?r:n)(t)}function n(e){return er(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){x=0/0,k.point=i,e.lineStart()}function i(n,r){var i=fn([n,r]),o=t(n,r);a(x,b,y,w,_,z,x=o[0],b=o[1],y=n,w=i[0],_=i[1],z=i[2],l,e),e.point(x,b)}function o(){k.point=n,e.lineEnd()}function s(){r(),k.point=u,k.lineEnd=c}function u(t,e){i(d=t,f=e),p=x,h=b,v=w,g=_,m=z,k.point=i}function c(){a(x,b,y,w,_,z,p,h,d,v,g,m,l,e),k.lineEnd=o,o()}var d,f,p,h,v,g,m,y,x,b,w,_,z,k={point:n,lineStart:r,lineEnd:o,polygonStart:function(){e.polygonStart(),k.lineStart=s},polygonEnd:function(){e.polygonEnd(),k.lineStart=r}};return k}function a(e,n,r,l,s,u,c,d,f,p,h,v,g,m){var y=c-e,x=d-n,b=y*y+x*x;if(b>4*i&&g--){var w=l+p,_=s+h,z=u+v,k=Math.sqrt(w*w+_*_+z*z),M=Math.asin(z/=k),A=ol(ol(z)-1)<El||ol(r-f)<El?(r+f)/2:Math.atan2(_,w),E=t(A,M),j=E[0],S=E[1],C=j-e,N=S-n,O=x*C-y*N;(O*O/b>i||ol((y*C+x*N)/b-.5)>.3||o>l*p+s*h+u*v)&&(a(e,n,r,l,s,u,j,S,A,w/=k,_/=k,z,g,m),m.point(j,S),a(j,S,A,w,_,z,c,d,f,p,h,v,g,m))}}var i=.5,o=Math.cos(30*Sl),l=16;return e.precision=function(t){return arguments.length?(l=(i=t*t)>0&&16,e):Math.sqrt(i)},e}function Qn(t){var e=Kn(function(e,n){return t([e*Cl,n*Cl])});return function(t){return ar(e(t))}}function tr(t){this.stream=t}function er(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function nr(t){return rr(function(){return t})()}function rr(t){function e(t){return t=l(t[0]*Sl,t[1]*Sl),[t[0]*f+s,u-t[1]*f]}function n(t){return t=l.invert((t[0]-s)/f,(u-t[1])/f),t&&[t[0]*Cl,t[1]*Cl]}function r(){l=Vn(o=lr(m,y,x),i);var t=i(v,g);return s=p-t[0]*f,u=h+t[1]*f,a()}function a(){return c&&(c.valid=!1,c=null),e}var i,o,l,s,u,c,d=Kn(function(t,e){return t=i(t,e),[t[0]*f+s,u-t[1]*f]}),f=150,p=480,h=250,v=0,g=0,m=0,y=0,x=0,b=As,w=ke,_=null,z=null;return e.stream=function(t){return c&&(c.valid=!1),c=ar(b(o,d(w(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(b=null==t?(_=t,As):Pn((_=+t)*Sl),a()):_},e.clipExtent=function(t){return arguments.length?(z=t,w=t?Bn(t[0][0],t[0][1],t[1][0],t[1][1]):ke,a()):z},e.scale=function(t){return arguments.length?(f=+t,r()):f},e.translate=function(t){return arguments.length?(p=+t[0],h=+t[1],r()):[p,h]},e.center=function(t){return arguments.length?(v=t[0]%360*Sl,g=t[1]%360*Sl,r()):[v*Cl,g*Cl]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Sl,y=t[1]%360*Sl,x=t.length>2?t[2]%360*Sl:0,r()):[m*Cl,y*Cl,x*Cl]},Go.rebind(e,d,"precision"),function(){return i=t.apply(this,arguments),e.invert=i.invert&&n,r()}}function ar(t){return er(t,function(e,n){t.point(e*Sl,n*Sl)})}function ir(t,e){return[t,e]}function or(t,e){return[t>kl?t-Ml:-kl>t?t+Ml:t,e]}function lr(t,e,n){return t?e||n?Vn(ur(t),cr(e,n)):ur(t):e||n?cr(e,n):or}function sr(t){return function(e,n){return e+=t,[e>kl?e-Ml:-kl>e?e+Ml:e,n]}}function ur(t){var e=sr(t);return e.invert=sr(-t),e}function cr(t,e){function n(t,e){var n=Math.cos(e),l=Math.cos(t)*n,s=Math.sin(t)*n,u=Math.sin(e),c=u*r+l*a;return[Math.atan2(s*i-c*o,l*r-u*a),K(c*i+s*o)]}var r=Math.cos(t),a=Math.sin(t),i=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),l=Math.cos(t)*n,s=Math.sin(t)*n,u=Math.sin(e),c=u*i-s*o;return[Math.atan2(s*i+u*o,l*r+c*a),K(c*r-l*a)]},n}function dr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(a,i,o,l){var s=o*e;null!=a?(a=fr(n,a),i=fr(n,i),(o>0?i>a:a>i)&&(a+=o*Ml)):(a=t+o*Ml,i=t-.5*s);for(var u,c=a;o>0?c>i:i>c;c-=s)l.point((u=yn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function fr(t,e){var n=fn(e);n[0]-=t,mn(n);var r=J(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-El)%(2*Math.PI)}function pr(t,e,n){var r=Go.range(t,e-El,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function hr(t,e,n){var r=Go.range(t,e-El,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function vr(t){return t.source}function gr(t){return t.target}function mr(t,e,n,r){var a=Math.cos(e),i=Math.sin(e),o=Math.cos(r),l=Math.sin(r),s=a*Math.cos(t),u=a*Math.sin(t),c=o*Math.cos(n),d=o*Math.sin(n),f=2*Math.asin(Math.sqrt(ne(r-e)+a*o*ne(n-t))),p=1/Math.sin(f),h=f?function(t){var e=Math.sin(t*=f)*p,n=Math.sin(f-t)*p,r=n*s+e*c,a=n*u+e*d,o=n*i+e*l;return[Math.atan2(a,r)*Cl,Math.atan2(o,Math.sqrt(r*r+a*a))*Cl]}:function(){return[t*Cl,e*Cl]};return h.distance=f,h}function yr(){function t(t,a){var i=Math.sin(a*=Sl),o=Math.cos(a),l=ol((t*=Sl)-e),s=Math.cos(l);Ps+=Math.atan2(Math.sqrt((l=o*Math.sin(l))*l+(l=r*i-n*o*s)*l),n*i+r*o*s),e=t,n=i,r=o}var e,n,r;Is.point=function(a,i){e=a*Sl,n=Math.sin(i*=Sl),r=Math.cos(i),Is.point=t},Is.lineEnd=function(){Is.point=Is.lineEnd=g}}function xr(t,e){function n(e,n){var r=Math.cos(e),a=Math.cos(n),i=t(r*a);return[i*a*Math.sin(e),i*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),a=e(r),i=Math.sin(a),o=Math.cos(a);return[Math.atan2(t*i,r*o),Math.asin(r&&n*i/r)]},n}function br(t,e){function n(t,e){o>0?-Al+El>e&&(e=-Al+El):e>Al-El&&(e=Al-El);var n=o/Math.pow(a(e),i);return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),a=function(t){return Math.tan(kl/4+t/2)},i=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(a(e)/a(t)),o=r*Math.pow(a(t),i)/i;return i?(n.invert=function(t,e){var n=o-e,r=X(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(o/r,1/i))-Al]},n):_r}function wr(t,e){function n(t,e){var n=i-e;return[n*Math.sin(a*t),i-n*Math.cos(a*t)]}var r=Math.cos(t),a=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),i=r/a+t;return ol(a)<El?ir:(n.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/a,i-X(a)*Math.sqrt(t*t+n*n)]},n)}function _r(t,e){return[t,Math.log(Math.tan(kl/4+e/2))]}function zr(t){var e,n=nr(t),r=n.scale,a=n.translate,i=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=a.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=i.apply(n,arguments);if(o===n){if(e=null==t){var l=kl*r(),s=a();i([[s[0]-l,s[1]-l],[s[0]+l,s[1]+l]])}}else e&&(o=null);return o},n.clipExtent(null)}function kr(t,e){return[Math.log(Math.tan(kl/4+e/2)),-t]}function Mr(t){return t[0]}function Ar(t){return t[1]}function Er(t){for(var e=t.length,n=[0,1],r=2,a=2;e>a;a++){for(;r>1&&$(t[n[r-2]],t[n[r-1]],t[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function jr(t,e){return t[0]-e[0]||t[1]-e[1]}function Sr(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Cr(t,e,n,r){var a=t[0],i=n[0],o=e[0]-a,l=r[0]-i,s=t[1],u=n[1],c=e[1]-s,d=r[1]-u,f=(l*(s-u)-d*(a-i))/(d*o-l*c);return[a+f*o,s+f*c]}function Nr(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Or(){Qr(this),this.edge=this.site=this.circle=null}function Fr(t){var e=$s.pop()||new Or;return e.site=t,e}function Tr(t){Hr(t),Ws.remove(t),$s.push(t),Qr(t)}function qr(t){var e=t.circle,n=e.x,r=e.cy,a={x:n,y:r},i=t.P,o=t.N,l=[t];Tr(t);for(var s=i;s.circle&&ol(n-s.circle.x)<El&&ol(r-s.circle.cy)<El;)i=s.P,l.unshift(s),Tr(s),s=i;l.unshift(s),Hr(s);for(var u=o;u.circle&&ol(n-u.circle.x)<El&&ol(r-u.circle.cy)<El;)o=u.N,l.push(u),Tr(u),u=o;l.push(u),Hr(u);var c,d=l.length;for(c=1;d>c;++c)u=l[c],s=l[c-1],$r(u.edge,s.site,u.site,a);s=l[0],u=l[d-1],u.edge=Zr(s.site,u.site,null,a),Rr(s),Rr(u)}function Lr(t){for(var e,n,r,a,i=t.x,o=t.y,l=Ws._;l;)if(r=Pr(l,o)-i,r>El)l=l.L;else{if(a=i-Ir(l,o),!(a>El)){r>-El?(e=l.P,n=l):a>-El?(e=l,n=l.N):e=n=l;break}if(!l.R){e=l;break}l=l.R}var s=Fr(t);if(Ws.insert(e,s),e||n){if(e===n)return Hr(e),n=Fr(e.site),Ws.insert(s,n),s.edge=n.edge=Zr(e.site,s.site),Rr(e),void Rr(n);if(!n)return void(s.edge=Zr(e.site,s.site));Hr(e),Hr(n);var u=e.site,c=u.x,d=u.y,f=t.x-c,p=t.y-d,h=n.site,v=h.x-c,g=h.y-d,m=2*(f*g-p*v),y=f*f+p*p,x=v*v+g*g,b={x:(g*y-p*x)/m+c,y:(f*x-v*y)/m+d};$r(n.edge,u,h,b),s.edge=Zr(u,t,null,b),n.edge=Zr(t,h,null,b),Rr(e),Rr(n)}}function Pr(t,e){var n=t.site,r=n.x,a=n.y,i=a-e;if(!i)return r;var o=t.P;if(!o)return-1/0;n=o.site;var l=n.x,s=n.y,u=s-e;if(!u)return l;var c=l-r,d=1/i-1/u,f=c/u;return d?(-f+Math.sqrt(f*f-2*d*(c*c/(-2*u)-s+u/2+a-i/2)))/d+r:(r+l)/2}function Ir(t,e){var n=t.N;if(n)return Pr(n,e);var r=t.site;return r.y===e?r.x:1/0}function Br(t){this.site=t,this.edges=[]}function Vr(t){for(var e,n,r,a,i,o,l,s,u,c,d=t[0][0],f=t[1][0],p=t[0][1],h=t[1][1],v=Gs,g=v.length;g--;)if(i=v[g],i&&i.prepare())for(l=i.edges,s=l.length,o=0;s>o;)c=l[o].end(),r=c.x,a=c.y,u=l[++o%s].start(),e=u.x,n=u.y,(ol(r-e)>El||ol(a-n)>El)&&(l.splice(o,0,new Jr(Xr(i.site,c,ol(r-d)<El&&h-a>El?{x:d,y:ol(e-d)<El?n:h}:ol(a-h)<El&&f-r>El?{x:ol(n-h)<El?e:f,y:h}:ol(r-f)<El&&a-p>El?{x:f,y:ol(e-f)<El?n:p}:ol(a-p)<El&&r-d>El?{x:ol(n-p)<El?e:d,y:p}:null),i.site,null)),++s)}function Ur(t,e){return e.angle-t.angle}function Dr(){Qr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Rr(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,a=t.site,i=n.site;if(r!==i){var o=a.x,l=a.y,s=r.x-o,u=r.y-l,c=i.x-o,d=i.y-l,f=2*(s*d-u*c);if(!(f>=-jl)){var p=s*s+u*u,h=c*c+d*d,v=(d*p-u*h)/f,g=(s*h-c*p)/f,d=g+l,m=Js.pop()||new Dr;m.arc=t,m.site=a,m.x=v+o,m.y=d+Math.sqrt(v*v+g*g),m.cy=d,t.circle=m;for(var y=null,x=Xs._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}Xs.insert(y,m),y||(Zs=m)}}}}function Hr(t){var e=t.circle;e&&(e.P||(Zs=e.N),Xs.remove(e),Js.push(e),Qr(e),t.circle=null)}function Yr(t){for(var e,n=Ys,r=In(t[0][0],t[0][1],t[1][0],t[1][1]),a=n.length;a--;)e=n[a],(!Gr(e,t)||!r(e)||ol(e.a.x-e.b.x)<El&&ol(e.a.y-e.b.y)<El)&&(e.a=e.b=null,n.splice(a,1))}function Gr(t,e){var n=t.b;if(n)return!0;var r,a,i=t.a,o=e[0][0],l=e[1][0],s=e[0][1],u=e[1][1],c=t.l,d=t.r,f=c.x,p=c.y,h=d.x,v=d.y,g=(f+h)/2,m=(p+v)/2;if(v===p){if(o>g||g>=l)return;if(f>h){if(i){if(i.y>=u)return}else i={x:g,y:s};n={x:g,y:u}}else{if(i){if(i.y<s)return}else i={x:g,y:u};n={x:g,y:s}}}else if(r=(f-h)/(v-p),a=m-r*g,-1>r||r>1)if(f>h){if(i){if(i.y>=u)return}else i={x:(s-a)/r,y:s};n={x:(u-a)/r,y:u}}else{if(i){if(i.y<s)return}else i={x:(u-a)/r,y:u};n={x:(s-a)/r,y:s}}else if(v>p){if(i){if(i.x>=l)return}else i={x:o,y:r*o+a};n={x:l,y:r*l+a}}else{if(i){if(i.x<o)return}else i={x:l,y:r*l+a};n={x:o,y:r*o+a}}return t.a=i,t.b=n,!0}function Wr(t,e){this.l=t,this.r=e,this.a=this.b=null}function Zr(t,e,n,r){var a=new Wr(t,e);return Ys.push(a),n&&$r(a,t,e,n),r&&$r(a,e,t,r),Gs[t.i].edges.push(new Jr(a,t,e)),Gs[e.i].edges.push(new Jr(a,e,t)),a}function Xr(t,e,n){var r=new Wr(t,null);return r.a=e,r.b=n,Ys.push(r),r}function $r(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Jr(t,e,n){var r=t.a,a=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function Kr(){this._=null}function Qr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ta(t,e){var n=e,r=e.R,a=n.U;a?a.L===n?a.L=r:a.R=r:t._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ea(t,e){var n=e,r=e.L,a=n.U;a?a.L===n?a.L=r:a.R=r:t._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function na(t){for(;t.L;)t=t.L;return t}function ra(t,e){var n,r,a,i=t.sort(aa).pop();for(Ys=[],Gs=new Array(t.length),Ws=new Kr,Xs=new Kr;;)if(a=Zs,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))(i.x!==n||i.y!==r)&&(Gs[i.i]=new Br(i),Lr(i),n=i.x,r=i.y),i=t.pop();else{if(!a)break;qr(a.arc)}e&&(Yr(e),Vr(e));var o={cells:Gs,edges:Ys};return Ws=Xs=Ys=Gs=null,o}function aa(t,e){return e.y-t.y||e.x-t.x}function ia(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function oa(t){return t.x}function la(t){return t.y}function sa(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ua(t,e,n,r,a,i){if(!t(e,n,r,a,i)){var o=.5*(n+a),l=.5*(r+i),s=e.nodes;s[0]&&ua(t,s[0],n,r,o,l),s[1]&&ua(t,s[1],o,r,a,l),s[2]&&ua(t,s[2],n,l,o,i),s[3]&&ua(t,s[3],o,l,a,i)}}function ca(t,e){t=Go.rgb(t),e=Go.rgb(e);var n=t.r,r=t.g,a=t.b,i=e.r-n,o=e.g-r,l=e.b-a;return function(t){return"#"+me(Math.round(n+i*t))+me(Math.round(r+o*t))+me(Math.round(a+l*t))}}function da(t,e){var n,r={},a={};for(n in t)n in e?r[n]=ha(t[n],e[n]):a[n]=t[n];for(n in e)n in t||(a[n]=e[n]);return function(t){for(n in r)a[n]=r[n](t);return a}}function fa(t,e){return e-=t=+t,function(n){return t+e*n}}function pa(t,e){var n,r,a,i=Qs.lastIndex=tu.lastIndex=0,o=-1,l=[],s=[];for(t+="",e+="";(n=Qs.exec(t))&&(r=tu.exec(e));)(a=r.index)>i&&(a=e.substring(i,a),l[o]?l[o]+=a:l[++o]=a),(n=n[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,s.push({i:o,x:fa(n,r)})),i=tu.lastIndex;return i<e.length&&(a=e.substring(i),l[o]?l[o]+=a:l[++o]=a),l.length<2?s[0]?(e=s[0].x,function(t){return e(t)+""}):function(){return e}:(e=s.length,function(t){for(var n,r=0;e>r;++r)l[(n=s[r]).i]=n.x(t);return l.join("")})}function ha(t,e){for(var n,r=Go.interpolators.length;--r>=0&&!(n=Go.interpolators[r](t,e)););return n}function va(t,e){var n,r=[],a=[],i=t.length,o=e.length,l=Math.min(t.length,e.length);for(n=0;l>n;++n)r.push(ha(t[n],e[n]));for(;i>n;++n)a[n]=t[n];for(;o>n;++n)a[n]=e[n];return function(t){for(n=0;l>n;++n)a[n]=r[n](t);return a}}function ga(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function ma(t){return function(e){return 1-t(1-e)}}function ya(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function xa(t){return t*t}function ba(t){return t*t*t}function wa(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function _a(t){return function(e){return Math.pow(e,t)}}function za(t){return 1-Math.cos(t*Al)}function ka(t){return Math.pow(2,10*(t-1))}function Ma(t){return 1-Math.sqrt(1-t*t)}function Aa(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Ml*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Ml/e)}}function Ea(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function ja(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Sa(t,e){t=Go.hcl(t),e=Go.hcl(e);var n=t.h,r=t.c,a=t.l,i=e.h-n,o=e.c-r,l=e.l-a;return isNaN(o)&&(o=0,r=isNaN(r)?e.c:r),isNaN(i)?(i=0,n=isNaN(n)?e.h:n):i>180?i-=360:-180>i&&(i+=360),function(t){return le(n+i*t,r+o*t,a+l*t)+""}}function Ca(t,e){t=Go.hsl(t),e=Go.hsl(e);var n=t.h,r=t.s,a=t.l,i=e.h-n,o=e.s-r,l=e.l-a;return isNaN(o)&&(o=0,r=isNaN(r)?e.s:r),isNaN(i)?(i=0,n=isNaN(n)?e.h:n):i>180?i-=360:-180>i&&(i+=360),function(t){return ie(n+i*t,r+o*t,a+l*t)+""}}function Na(t,e){t=Go.lab(t),e=Go.lab(e);var n=t.l,r=t.a,a=t.b,i=e.l-n,o=e.a-r,l=e.b-a;return function(t){return ue(n+i*t,r+o*t,a+l*t)+""}}function Oa(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Fa(t){var e=[t.a,t.b],n=[t.c,t.d],r=qa(e),a=Ta(e,n),i=qa(La(n,e,-a))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,a*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Cl,this.translate=[t.e,t.f],this.scale=[r,i],this.skew=i?Math.atan2(a,i)*Cl:0}function Ta(t,e){return t[0]*e[0]+t[1]*e[1]}function qa(t){var e=Math.sqrt(Ta(t,t));return e&&(t[0]/=e,t[1]/=e),e}function La(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Pa(t,e){var n,r=[],a=[],i=Go.transform(t),o=Go.transform(e),l=i.translate,s=o.translate,u=i.rotate,c=o.rotate,d=i.skew,f=o.skew,p=i.scale,h=o.scale;
return l[0]!=s[0]||l[1]!=s[1]?(r.push("translate(",null,",",null,")"),a.push({i:1,x:fa(l[0],s[0])},{i:3,x:fa(l[1],s[1])})):r.push(s[0]||s[1]?"translate("+s+")":""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),a.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:fa(u,c)})):c&&r.push(r.pop()+"rotate("+c+")"),d!=f?a.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:fa(d,f)}):f&&r.push(r.pop()+"skewX("+f+")"),p[0]!=h[0]||p[1]!=h[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),a.push({i:n-4,x:fa(p[0],h[0])},{i:n-2,x:fa(p[1],h[1])})):(1!=h[0]||1!=h[1])&&r.push(r.pop()+"scale("+h+")"),n=a.length,function(t){for(var e,i=-1;++i<n;)r[(e=a[i]).i]=e.x(t);return r.join("")}}function Ia(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function Ba(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function Va(t){for(var e=t.source,n=t.target,r=Da(e,n),a=[e];e!==r;)e=e.parent,a.push(e);for(var i=a.length;n!==r;)a.splice(i,0,n),n=n.parent;return a}function Ua(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Da(t,e){if(t===e)return t;for(var n=Ua(t),r=Ua(e),a=n.pop(),i=r.pop(),o=null;a===i;)o=a,a=n.pop(),i=r.pop();return o}function Ra(t){t.fixed|=2}function Ha(t){t.fixed&=-7}function Ya(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Ga(t){t.fixed&=-5}function Wa(t,e,n){var r=0,a=0;if(t.charge=0,!t.leaf)for(var i,o=t.nodes,l=o.length,s=-1;++s<l;)i=o[s],null!=i&&(Wa(i,e,n),t.charge+=i.charge,r+=i.charge*i.cx,a+=i.charge*i.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,r+=u*t.point.x,a+=u*t.point.y}t.cx=r/t.charge,t.cy=a/t.charge}function Za(t,e){return Go.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=ti,t}function Xa(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(a=t.children)&&(r=a.length))for(var r,a;--r>=0;)n.push(a[r])}function $a(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(i=t.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)n.push(i[o]);for(;null!=(t=r.pop());)e(t)}function Ja(t){return t.children}function Ka(t){return t.value}function Qa(t,e){return e.value-t.value}function ti(t){return Go.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function ei(t){return t.x}function ni(t){return t.y}function ri(t,e,n){t.y0=e,t.y=n}function ai(t){return Go.range(t.length)}function ii(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function oi(t){for(var e,n=1,r=0,a=t[0][1],i=t.length;i>n;++n)(e=t[n][1])>a&&(r=n,a=e);return r}function li(t){return t.reduce(si,0)}function si(t,e){return t+e[1]}function ui(t,e){return ci(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ci(t,e){for(var n=-1,r=+t[0],a=(t[1]-r)/e,i=[];++n<=e;)i[n]=a*n+r;return i}function di(t){return[Go.min(t),Go.max(t)]}function fi(t,e){return t.value-e.value}function pi(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function hi(t,e){t._pack_next=e,e._pack_prev=t}function vi(t,e){var n=e.x-t.x,r=e.y-t.y,a=t.r+e.r;return.999*a*a>n*n+r*r}function gi(t){function e(t){c=Math.min(t.x-t.r,c),d=Math.max(t.x+t.r,d),f=Math.min(t.y-t.r,f),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(u=n.length)){var n,r,a,i,o,l,s,u,c=1/0,d=-1/0,f=1/0,p=-1/0;if(n.forEach(mi),r=n[0],r.x=-r.r,r.y=0,e(r),u>1&&(a=n[1],a.x=a.r,a.y=0,e(a),u>2))for(i=n[2],bi(r,a,i),e(i),pi(r,i),r._pack_prev=i,pi(i,a),a=r._pack_next,o=3;u>o;o++){bi(r,a,i=n[o]);var h=0,v=1,g=1;for(l=a._pack_next;l!==a;l=l._pack_next,v++)if(vi(l,i)){h=1;break}if(1==h)for(s=r._pack_prev;s!==l._pack_prev&&!vi(s,i);s=s._pack_prev,g++);h?(g>v||v==g&&a.r<r.r?hi(r,a=l):hi(r=s,a),o--):(pi(r,i),a=i,e(i))}var m=(c+d)/2,y=(f+p)/2,x=0;for(o=0;u>o;o++)i=n[o],i.x-=m,i.y-=y,x=Math.max(x,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=x,n.forEach(yi)}}function mi(t){t._pack_next=t._pack_prev=t}function yi(t){delete t._pack_next,delete t._pack_prev}function xi(t,e,n,r){var a=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,a)for(var i=-1,o=a.length;++i<o;)xi(a[i],e,n,r)}function bi(t,e,n){var r=t.r+n.r,a=e.x-t.x,i=e.y-t.y;if(r&&(a||i)){var o=e.r+n.r,l=a*a+i*i;o*=o,r*=r;var s=.5+(r-o)/(2*l),u=Math.sqrt(Math.max(0,2*o*(r+l)-(r-=l)*r-o*o))/(2*l);n.x=t.x+s*a+u*i,n.y=t.y+s*i-u*a}else n.x=t.x+r,n.y=t.y}function wi(t,e){return t.parent==e.parent?1:2}function _i(t){var e=t.children;return e.length?e[0]:t.t}function zi(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function ki(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Mi(t){for(var e,n=0,r=0,a=t.children,i=a.length;--i>=0;)e=a[i],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Ai(t,e,n){return t.a.parent===e.parent?t.a:n}function Ei(t){return 1+Go.max(t,function(t){return t.y})}function ji(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Si(t){var e=t.children;return e&&e.length?Si(e[0]):t}function Ci(t){var e,n=t.children;return n&&(e=n.length)?Ci(n[e-1]):t}function Ni(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Oi(t,e){var n=t.x+e[3],r=t.y+e[0],a=t.dx-e[1]-e[3],i=t.dy-e[0]-e[2];return 0>a&&(n+=a/2,a=0),0>i&&(r+=i/2,i=0),{x:n,y:r,dx:a,dy:i}}function Fi(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Ti(t){return t.rangeExtent?t.rangeExtent():Fi(t.range())}function qi(t,e,n,r){var a=n(t[0],t[1]),i=r(e[0],e[1]);return function(t){return i(a(t))}}function Li(t,e){var n,r=0,a=t.length-1,i=t[r],o=t[a];return i>o&&(n=r,r=a,a=n,n=i,i=o,o=n),t[r]=e.floor(i),t[a]=e.ceil(o),t}function Pi(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:du}function Ii(t,e,n,r){var a=[],i=[],o=0,l=Math.min(t.length,e.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=l;)a.push(n(t[o-1],t[o])),i.push(r(e[o-1],e[o]));return function(e){var n=Go.bisect(t,e,1,l)-1;return i[n](a[n](e))}}function Bi(t,e,n,r){function a(){var a=Math.min(t.length,e.length)>2?Ii:qi,s=r?Ba:Ia;return o=a(t,e,s,n),l=a(e,t,s,ha),i}function i(t){return o(t)}var o,l;return i.invert=function(t){return l(t)},i.domain=function(e){return arguments.length?(t=e.map(Number),a()):t},i.range=function(t){return arguments.length?(e=t,a()):e},i.rangeRound=function(t){return i.range(t).interpolate(Oa)},i.clamp=function(t){return arguments.length?(r=t,a()):r},i.interpolate=function(t){return arguments.length?(n=t,a()):n},i.ticks=function(e){return Ri(t,e)},i.tickFormat=function(e,n){return Hi(t,e,n)},i.nice=function(e){return Ui(t,e),a()},i.copy=function(){return Bi(t,e,n,r)},a()}function Vi(t,e){return Go.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ui(t,e){return Li(t,Pi(Di(t,e)[2]))}function Di(t,e){null==e&&(e=10);var n=Fi(t),r=n[1]-n[0],a=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),i=e/r*a;return.15>=i?a*=10:.35>=i?a*=5:.75>=i&&(a*=2),n[0]=Math.ceil(n[0]/a)*a,n[1]=Math.floor(n[1]/a)*a+.5*a,n[2]=a,n}function Ri(t,e){return Go.range.apply(Go,Di(t,e))}function Hi(t,e,n){var r=Di(t,e);if(n){var a=Ql.exec(n);if(a.shift(),"s"===a[8]){var i=Go.formatPrefix(Math.max(ol(r[0]),ol(r[1])));return a[7]||(a[7]="."+Yi(i.scale(r[2]))),a[8]="f",n=Go.format(a.join("")),function(t){return n(i.scale(t))+i.symbol}}a[7]||(a[7]="."+Gi(a[8],r)),n=a.join("")}else n=",."+Yi(r[2])+"f";return Go.format(n)}function Yi(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Gi(t,e){var n=Yi(e[2]);return t in fu?Math.abs(n-Yi(Math.max(ol(e[0]),ol(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Wi(t,e,n,r){function a(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function i(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(a(e))}return o.invert=function(e){return i(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(a)),o):r},o.base=function(n){return arguments.length?(e=+n,t.domain(r.map(a)),o):e},o.nice=function(){var e=Li(r.map(a),n?Math:hu);return t.domain(e),r=e.map(i),o},o.ticks=function(){var t=Fi(r),o=[],l=t[0],s=t[1],u=Math.floor(a(l)),c=Math.ceil(a(s)),d=e%1?2:e;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var f=1;d>f;f++)o.push(i(u)*f);o.push(i(u))}else for(o.push(i(u));u++<c;)for(var f=d-1;f>0;f--)o.push(i(u)*f);for(u=0;o[u]<l;u++);for(c=o.length;o[c-1]>s;c--);o=o.slice(u,c)}return o},o.tickFormat=function(t,e){if(!arguments.length)return pu;arguments.length<2?e=pu:"function"!=typeof e&&(e=Go.format(e));var r,l=Math.max(.1,t/o.ticks().length),s=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(t){return t/i(s(a(t)+r))<=l?e(t):""}},o.copy=function(){return Wi(t.copy(),e,n,r)},Vi(o,t)}function Zi(t,e,n){function r(e){return t(a(e))}var a=Xi(e),i=Xi(1/e);return r.invert=function(e){return i(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(a)),r):n},r.ticks=function(t){return Ri(n,t)},r.tickFormat=function(t,e){return Hi(n,t,e)},r.nice=function(t){return r.domain(Ui(n,t))},r.exponent=function(o){return arguments.length?(a=Xi(e=o),i=Xi(1/e),t.domain(n.map(a)),r):e},r.copy=function(){return Zi(t.copy(),e,n)},Vi(r,t)}function Xi(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function $i(t,e){function n(n){return i[((a.get(n)||("range"===e.t?a.set(n,t.push(n)):0/0))-1)%i.length]}function r(e,n){return Go.range(t.length).map(function(t){return e+n*t})}var a,i,o;return n.domain=function(r){if(!arguments.length)return t;t=[],a=new l;for(var i,o=-1,s=r.length;++o<s;)a.has(i=r[o])||a.set(i,t.push(i));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(i=t,o=0,e={t:"range",a:arguments},n):i},n.rangePoints=function(a,l){arguments.length<2&&(l=0);var s=a[0],u=a[1],c=(u-s)/(Math.max(1,t.length-1)+l);return i=r(t.length<2?(s+u)/2:s+c*l/2,c),o=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(a,l,s){arguments.length<2&&(l=0),arguments.length<3&&(s=l);var u=a[1]<a[0],c=a[u-0],d=a[1-u],f=(d-c)/(t.length-l+2*s);return i=r(c+f*s,f),u&&i.reverse(),o=f*(1-l),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(a,l,s){arguments.length<2&&(l=0),arguments.length<3&&(s=l);var u=a[1]<a[0],c=a[u-0],d=a[1-u],f=Math.floor((d-c)/(t.length-l+2*s)),p=d-c-(t.length-l)*f;return i=r(c+Math.round(p/2),f),u&&i.reverse(),o=Math.round(f*(1-l)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Fi(e.a[0])},n.copy=function(){return $i(t,e)},n.domain(t)}function Ji(e,r){function a(){var t=0,n=r.length;for(o=[];++t<n;)o[t-1]=Go.quantile(e,t/n);return i}function i(t){return isNaN(t=+t)?void 0:r[Go.bisect(o,t)]}var o;return i.domain=function(r){return arguments.length?(e=r.filter(n).sort(t),a()):e},i.range=function(t){return arguments.length?(r=t,a()):r},i.quantiles=function(){return o},i.invertExtent=function(t){return t=r.indexOf(t),0>t?[0/0,0/0]:[t>0?o[t-1]:e[0],t<o.length?o[t]:e[e.length-1]]},i.copy=function(){return Ji(e,r)},a()}function Ki(t,e,n){function r(e){return n[Math.max(0,Math.min(o,Math.floor(i*(e-t))))]}function a(){return i=n.length/(e-t),o=n.length-1,r}var i,o;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],a()):[t,e]},r.range=function(t){return arguments.length?(n=t,a()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?0/0:e/i+t,[e,e+1/i]},r.copy=function(){return Ki(t,e,n)},a()}function Qi(t,e){function n(n){return n>=n?e[Go.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return Qi(t,e)},n}function to(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Ri(t,e)},e.tickFormat=function(e,n){return Hi(t,e,n)},e.copy=function(){return to(t)},e}function eo(t){return t.innerRadius}function no(t){return t.outerRadius}function ro(t){return t.startAngle}function ao(t){return t.endAngle}function io(t){function e(e){function o(){u.push("M",i(t(c),l))}for(var s,u=[],c=[],d=-1,f=e.length,p=ze(n),h=ze(r);++d<f;)a.call(this,s=e[d],d)?c.push([+p.call(this,s,d),+h.call(this,s,d)]):c.length&&(o(),c=[]);return c.length&&o(),u.length?u.join(""):null}var n=Mr,r=Ar,a=Mn,i=oo,o=i.key,l=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=wu.get(t)||oo).key,e):o},e.tension=function(t){return arguments.length?(l=t,e):l},e}function oo(t){return t.join("L")}function lo(t){return oo(t)+"Z"}function so(t){for(var e=0,n=t.length,r=t[0],a=[r[0],",",r[1]];++e<n;)a.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&a.push("H",r[0]),a.join("")}function uo(t){for(var e=0,n=t.length,r=t[0],a=[r[0],",",r[1]];++e<n;)a.push("V",(r=t[e])[1],"H",r[0]);return a.join("")}function co(t){for(var e=0,n=t.length,r=t[0],a=[r[0],",",r[1]];++e<n;)a.push("H",(r=t[e])[0],"V",r[1]);return a.join("")}function fo(t,e){return t.length<4?oo(t):t[1]+vo(t.slice(1,t.length-1),go(t,e))}function po(t,e){return t.length<3?oo(t):t[0]+vo((t.push(t[0]),t),go([t[t.length-2]].concat(t,[t[1]]),e))}function ho(t,e){return t.length<3?oo(t):t[0]+vo(t,go(t,e))}function vo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return oo(t);var n=t.length!=e.length,r="",a=t[0],i=t[1],o=e[0],l=o,s=1;if(n&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=t[1],s=2),e.length>1){l=e[1],i=t[s],s++,r+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1];for(var u=2;u<e.length;u++,s++)i=t[s],l=e[u],r+="S"+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1]}if(n){var c=t[s];r+="Q"+(i[0]+2*l[0]/3)+","+(i[1]+2*l[1]/3)+","+c[0]+","+c[1]}return r}function go(t,e){for(var n,r=[],a=(1-e)/2,i=t[0],o=t[1],l=1,s=t.length;++l<s;)n=i,i=o,o=t[l],r.push([a*(o[0]-n[0]),a*(o[1]-n[1])]);return r}function mo(t){if(t.length<3)return oo(t);var e=1,n=t.length,r=t[0],a=r[0],i=r[1],o=[a,a,a,(r=t[1])[0]],l=[i,i,i,r[1]],s=[a,",",i,"L",wo(ku,o),",",wo(ku,l)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),l.shift(),l.push(r[1]),_o(s,o,l);return t.pop(),s.push("L",r),s.join("")}function yo(t){if(t.length<4)return oo(t);for(var e,n=[],r=-1,a=t.length,i=[0],o=[0];++r<3;)e=t[r],i.push(e[0]),o.push(e[1]);for(n.push(wo(ku,i)+","+wo(ku,o)),--r;++r<a;)e=t[r],i.shift(),i.push(e[0]),o.shift(),o.push(e[1]),_o(n,i,o);return n.join("")}function xo(t){for(var e,n,r=-1,a=t.length,i=a+4,o=[],l=[];++r<4;)n=t[r%a],o.push(n[0]),l.push(n[1]);for(e=[wo(ku,o),",",wo(ku,l)],--r;++r<i;)n=t[r%a],o.shift(),o.push(n[0]),l.shift(),l.push(n[1]),_o(e,o,l);return e.join("")}function bo(t,e){var n=t.length-1;if(n)for(var r,a,i=t[0][0],o=t[0][1],l=t[n][0]-i,s=t[n][1]-o,u=-1;++u<=n;)r=t[u],a=u/n,r[0]=e*r[0]+(1-e)*(i+a*l),r[1]=e*r[1]+(1-e)*(o+a*s);return mo(t)}function wo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function _o(t,e,n){t.push("C",wo(_u,e),",",wo(_u,n),",",wo(zu,e),",",wo(zu,n),",",wo(ku,e),",",wo(ku,n))}function zo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function ko(t){for(var e=0,n=t.length-1,r=[],a=t[0],i=t[1],o=r[0]=zo(a,i);++e<n;)r[e]=(o+(o=zo(a=i,i=t[e+1])))/2;return r[e]=o,r}function Mo(t){for(var e,n,r,a,i=[],o=ko(t),l=-1,s=t.length-1;++l<s;)e=zo(t[l],t[l+1]),ol(e)<El?o[l]=o[l+1]=0:(n=o[l]/e,r=o[l+1]/e,a=n*n+r*r,a>9&&(a=3*e/Math.sqrt(a),o[l]=a*n,o[l+1]=a*r));for(l=-1;++l<=s;)a=(t[Math.min(s,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+o[l]*o[l])),i.push([a||0,o[l]*a||0]);return i}function Ao(t){return t.length<3?oo(t):t[0]+vo(t,Mo(t))}function Eo(t){for(var e,n,r,a=-1,i=t.length;++a<i;)e=t[a],n=e[0],r=e[1]+xu,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function jo(t){function e(e){function s(){v.push("M",l(t(m),d),c,u(t(g.reverse()),d),"Z")}for(var f,p,h,v=[],g=[],m=[],y=-1,x=e.length,b=ze(n),w=ze(a),_=n===r?function(){return p}:ze(r),z=a===i?function(){return h}:ze(i);++y<x;)o.call(this,f=e[y],y)?(g.push([p=+b.call(this,f,y),h=+w.call(this,f,y)]),m.push([+_.call(this,f,y),+z.call(this,f,y)])):g.length&&(s(),g=[],m=[]);return g.length&&s(),v.length?v.join(""):null}var n=Mr,r=Mr,a=0,i=Ar,o=Mn,l=oo,s=l.key,u=l,c="L",d=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(a=i=t,e):i},e.y0=function(t){return arguments.length?(a=t,e):a},e.y1=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?l=t:(l=wu.get(t)||oo).key,u=l.reverse||l,c=l.closed?"M":"L",e):s},e.tension=function(t){return arguments.length?(d=t,e):d},e}function So(t){return t.radius}function Co(t){return[t.x,t.y]}function No(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]+xu;return[n*Math.cos(r),n*Math.sin(r)]}}function Oo(){return 64}function Fo(){return"circle"}function To(t){var e=Math.sqrt(t/kl);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function qo(t,e){return dl(t,Cu),t.id=e,t}function Lo(t,e,n,r){var a=t.id;return P(t,"function"==typeof n?function(t,i,o){t.__transition__[a].tween.set(e,r(n.call(t,t.__data__,i,o)))}:(n=r(n),function(t){t.__transition__[a].tween.set(e,n)}))}function Po(t){return null==t&&(t=""),function(){this.textContent=t}}function Io(t,e,n,r){var a=t.__transition__||(t.__transition__={active:0,count:0}),i=a[n];if(!i){var o=r.time;i=a[n]={tween:new l,time:o,ease:r.ease,delay:r.delay,duration:r.duration},++a.count,Go.timer(function(r){function l(r){return a.active>n?u():(a.active=n,i.event&&i.event.start.call(t,c,e),i.tween.forEach(function(n,r){(r=r.call(t,c,e))&&v.push(r)}),void Go.timer(function(){return h.c=s(r||1)?Mn:s,1},0,o))}function s(r){if(a.active!==n)return u();for(var o=r/p,l=d(o),s=v.length;s>0;)v[--s].call(t,l);return o>=1?(i.event&&i.event.end.call(t,c,e),u()):void 0}function u(){return--a.count?delete a[n]:delete t.__transition__,1}var c=t.__data__,d=i.ease,f=i.delay,p=i.duration,h=$l,v=[];return h.t=f+o,r>=f?l(r-f):void(h.c=l)},0,o)}}function Bo(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Vo(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Uo(t){return t.toISOString()}function Do(t,e,n){function r(e){return t(e)}function a(t,n){var r=t[1]-t[0],a=r/n,i=Go.bisect(Bu,a);return i==Bu.length?[e.year,Di(t.map(function(t){return t/31536e6}),n)[2]]:i?e[a/Bu[i-1]<Bu[i]/a?i-1:i]:[Du,Di(t,n)[2]]}return r.invert=function(e){return Ro(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Ro)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Ro(+n+1),e).length}var i=r.domain(),o=Fi(i),l=null==t?a(o,10):"number"==typeof t&&a(o,t);return l&&(t=l[0],e=l[1]),r.domain(Li(i,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Ro(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Ro(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Fi(r.domain()),i=null==t?a(n,10):"number"==typeof t?a(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],Ro(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Do(t.copy(),e,n)},Vi(r,t)}function Ro(t){return new Date(t)}function Ho(t){return JSON.parse(t.responseText)}function Yo(t){var e=Xo.createRange();return e.selectNode(Xo.body),e.createContextualFragment(t.responseText)}var Go={version:"3.4.9"};Date.now||(Date.now=function(){return+new Date});var Wo=[].slice,Zo=function(t){return Wo.call(t)},Xo=document,$o=Xo.documentElement,Jo=window;try{Zo($o.childNodes)[0].nodeType}catch(Ko){Zo=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{Xo.createElement("div").style.setProperty("opacity",0,"")}catch(Qo){var tl=Jo.Element.prototype,el=tl.setAttribute,nl=tl.setAttributeNS,rl=Jo.CSSStyleDeclaration.prototype,al=rl.setProperty;tl.setAttribute=function(t,e){el.call(this,t,e+"")},tl.setAttributeNS=function(t,e,n){nl.call(this,t,e,n+"")},rl.setProperty=function(t,e,n){al.call(this,t,e+"",n)}}Go.ascending=t,Go.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},Go.min=function(t,e){var n,r,a=-1,i=t.length;if(1===arguments.length){for(;++a<i&&!(null!=(n=t[a])&&n>=n);)n=void 0;for(;++a<i;)null!=(r=t[a])&&n>r&&(n=r)}else{for(;++a<i&&!(null!=(n=e.call(t,t[a],a))&&n>=n);)n=void 0;for(;++a<i;)null!=(r=e.call(t,t[a],a))&&n>r&&(n=r)}return n},Go.max=function(t,e){var n,r,a=-1,i=t.length;if(1===arguments.length){for(;++a<i&&!(null!=(n=t[a])&&n>=n);)n=void 0;for(;++a<i;)null!=(r=t[a])&&r>n&&(n=r)}else{for(;++a<i&&!(null!=(n=e.call(t,t[a],a))&&n>=n);)n=void 0;for(;++a<i;)null!=(r=e.call(t,t[a],a))&&r>n&&(n=r)}return n},Go.extent=function(t,e){var n,r,a,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&!(null!=(n=a=t[i])&&n>=n);)n=a=void 0;for(;++i<o;)null!=(r=t[i])&&(n>r&&(n=r),r>a&&(a=r))}else{for(;++i<o&&!(null!=(n=a=e.call(t,t[i],i))&&n>=n);)n=void 0;for(;++i<o;)null!=(r=e.call(t,t[i],i))&&(n>r&&(n=r),r>a&&(a=r))}return[n,a]},Go.sum=function(t,e){var n,r=0,a=t.length,i=-1;if(1===arguments.length)for(;++i<a;)isNaN(n=+t[i])||(r+=n);else for(;++i<a;)isNaN(n=+e.call(t,t[i],i))||(r+=n);return r},Go.mean=function(t,e){var r,a=0,i=t.length,o=-1,l=i;if(1===arguments.length)for(;++o<i;)n(r=t[o])?a+=r:--l;else for(;++o<i;)n(r=e.call(t,t[o],o))?a+=r:--l;return l?a/l:void 0},Go.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),a=+t[r-1],i=n-r;return i?a+i*(t[r]-a):a},Go.median=function(e,r){return arguments.length>1&&(e=e.map(r)),e=e.filter(n),e.length?Go.quantile(e.sort(t),.5):void 0};var il=r(t);Go.bisectLeft=il.left,Go.bisect=Go.bisectRight=il.right,Go.bisector=function(e){return r(1===e.length?function(n,r){return t(e(n),r)}:e)},Go.shuffle=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t},Go.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},Go.pairs=function(t){for(var e,n=0,r=t.length-1,a=t[0],i=new Array(0>r?0:r);r>n;)i[n]=[e=a,a=t[++n]];return i},Go.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=Go.min(arguments,a),n=new Array(e);++t<e;)for(var r,i=-1,o=n[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return n},Go.transpose=function(t){return Go.zip.apply(Go,t)},Go.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Go.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Go.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Go.merge=function(t){for(var e,n,r,a=t.length,i=-1,o=0;++i<a;)o+=t[i].length;for(n=new Array(o);--a>=0;)for(r=t[a],e=r.length;--e>=0;)n[--o]=r[e];return n};var ol=Math.abs;Go.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,a=[],o=i(ol(n)),l=-1;if(t*=o,e*=o,n*=o,0>n)for(;(r=t+n*++l)>e;)a.push(r/o);else for(;(r=t+n*++l)<e;)a.push(r/o);return a},Go.map=function(t){var e=new l;if(t instanceof l)t.forEach(function(t,n){e.set(t,n)});else for(var n in t)e.set(n,t[n]);return e},o(l,{has:s,get:function(t){return this[ll+t]},set:function(t,e){return this[ll+t]=e},remove:u,keys:c,values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},size:d,empty:f,forEach:function(t){for(var e in this)e.charCodeAt(0)===sl&&t.call(this,e.substring(1),this[e])}});var ll="\x00",sl=ll.charCodeAt(0);Go.nest=function(){function t(e,o,s){if(s>=i.length)return r?r.call(a,o):n?o.sort(n):o;for(var u,c,d,f,p=-1,h=o.length,v=i[s++],g=new l;++p<h;)(f=g.get(u=v(c=o[p])))?f.push(c):g.set(u,[c]);return e?(c=e(),d=function(n,r){c.set(n,t(e,r,s))}):(c={},d=function(n,r){c[n]=t(e,r,s)}),g.forEach(d),c}function e(t,n){if(n>=i.length)return t;var r=[],a=o[n++];return t.forEach(function(t,a){r.push({key:t,values:e(a,n)})}),a?r.sort(function(t,e){return a(t.key,e.key)}):r}var n,r,a={},i=[],o=[];return a.map=function(e,n){return t(n,e,0)},a.entries=function(n){return e(t(Go.map,n,0),0)},a.key=function(t){return i.push(t),a},a.sortKeys=function(t){return o[i.length-1]=t,a},a.sortValues=function(t){return n=t,a},a.rollup=function(t){return r=t,a},a},Go.set=function(t){var e=new p;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},o(p,{has:s,add:function(t){return this[ll+t]=!0,t},remove:function(t){return t=ll+t,t in this&&delete this[t]},values:c,size:d,empty:f,forEach:function(t){for(var e in this)e.charCodeAt(0)===sl&&t.call(this,e.substring(1))}}),Go.behavior={},Go.rebind=function(t,e){for(var n,r=1,a=arguments.length;++r<a;)t[n=arguments[r]]=h(t,e,e[n]);return t};var ul=["webkit","ms","moz","Moz","o","O"];Go.dispatch=function(){for(var t=new m,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=y(t);return t},m.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.substring(n+1),t=t.substring(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},Go.event=null,Go.requote=function(t){return t.replace(cl,"\\$&")};var cl=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,dl={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},fl=function(t,e){return e.querySelector(t)},pl=function(t,e){return e.querySelectorAll(t)},hl=$o.matches||$o[v($o,"matchesSelector")],vl=function(t,e){return hl.call(t,e)};"function"==typeof Sizzle&&(fl=function(t,e){return Sizzle(t,e)[0]||null},pl=Sizzle,vl=Sizzle.matchesSelector),Go.selection=function(){return xl};var gl=Go.selection.prototype=[];gl.select=function(t){var e,n,r,a,i=[];t=z(t);for(var o=-1,l=this.length;++o<l;){i.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var s=-1,u=r.length;++s<u;)(a=r[s])?(e.push(n=t.call(a,a.__data__,s,o)),n&&"__data__"in a&&(n.__data__=a.__data__)):e.push(null)}return _(i)},gl.selectAll=function(t){var e,n,r=[];t=k(t);for(var a=-1,i=this.length;++a<i;)for(var o=this[a],l=-1,s=o.length;++l<s;)(n=o[l])&&(r.push(e=Zo(t.call(n,n.__data__,l,a))),e.parentNode=n);return _(r)};var ml={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Go.ns={prefix:ml,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),ml.hasOwnProperty(n)?{space:ml[n],local:t}:t}},gl.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=Go.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(M(e,t[e]));return this}return this.each(M(t,e))},gl.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=j(t)).length,a=-1;if(e=n.classList){for(;++a<r;)if(!e.contains(t[a]))return!1}else for(e=n.getAttribute("class");++a<r;)if(!E(t[a]).test(e))return!1;return!0}for(e in t)this.each(S(e,t[e]));return this}return this.each(S(t,e))},gl.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(N(n,t[n],e));return this}if(2>r)return Jo.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(N(t,e,n))},gl.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(O(e,t[e]));return this}return this.each(O(t,e))},gl.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},gl.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},gl.append=function(t){return t=F(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},gl.insert=function(t,e){return t=F(t),e=z(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},gl.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},gl.data=function(t,e){function n(t,n){var r,a,i,o=t.length,d=n.length,f=Math.min(o,d),p=new Array(d),h=new Array(d),v=new Array(o);if(e){var g,m=new l,y=new l,x=[];for(r=-1;++r<o;)g=e.call(a=t[r],a.__data__,r),m.has(g)?v[r]=a:m.set(g,a),x.push(g);for(r=-1;++r<d;)g=e.call(n,i=n[r],r),(a=m.get(g))?(p[r]=a,a.__data__=i):y.has(g)||(h[r]=T(i)),y.set(g,i),m.remove(g);for(r=-1;++r<o;)m.has(x[r])&&(v[r]=t[r])}else{for(r=-1;++r<f;)a=t[r],i=n[r],a?(a.__data__=i,p[r]=a):h[r]=T(i);for(;d>r;++r)h[r]=T(n[r]);for(;o>r;++r)v[r]=t[r]}h.update=p,h.parentNode=p.parentNode=v.parentNode=t.parentNode,s.push(h),u.push(p),c.push(v)}var r,a,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(r=this[0]).length);++i<o;)(a=r[i])&&(t[i]=a.__data__);return t}var s=I([]),u=_([]),c=_([]);if("function"==typeof t)for(;++i<o;)n(r=this[i],t.call(r,r.parentNode.__data__,i));else for(;++i<o;)n(r=this[i],t);return u.enter=function(){return s},u.exit=function(){return c},u},gl.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},gl.filter=function(t){var e,n,r,a=[];"function"!=typeof t&&(t=q(t));for(var i=0,o=this.length;o>i;i++){a.push(e=[]),e.parentNode=(n=this[i]).parentNode;for(var l=0,s=n.length;s>l;l++)(r=n[l])&&t.call(r,r.__data__,l,i)&&e.push(r)}return _(a)},gl.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],a=r.length-1,i=r[a];--a>=0;)(n=r[a])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},gl.sort=function(t){t=L.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},gl.each=function(t){return P(this,function(e,n,r){t.call(e,e.__data__,n,r)})},gl.call=function(t){var e=Zo(arguments);return t.apply(e[0]=this,e),this},gl.empty=function(){return!this.node()},gl.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,a=n.length;a>r;r++){var i=n[r];if(i)return i}return null},gl.size=function(){var t=0;return this.each(function(){++t}),t};var yl=[];Go.selection.enter=I,Go.selection.enter.prototype=yl,yl.append=gl.append,yl.empty=gl.empty,yl.node=gl.node,yl.call=gl.call,yl.size=gl.size,yl.select=function(t){for(var e,n,r,a,i,o=[],l=-1,s=this.length;++l<s;){r=(a=this[l]).update,o.push(e=[]),e.parentNode=a.parentNode;for(var u=-1,c=a.length;++u<c;)(i=a[u])?(e.push(r[u]=n=t.call(a.parentNode,i.__data__,u,l)),n.__data__=i.__data__):e.push(null)}return _(o)},yl.insert=function(t,e){return arguments.length<2&&(e=B(this)),gl.insert.call(this,t,e)},gl.transition=function(){for(var t,e,n=Au||++Nu,r=[],a=Eu||{time:Date.now(),ease:wa,delay:0,duration:250},i=-1,o=this.length;++i<o;){r.push(t=[]);for(var l=this[i],s=-1,u=l.length;++s<u;)(e=l[s])&&Io(e,s,n,a),t.push(e)}return qo(r,n)},gl.interrupt=function(){return this.each(V)},Go.select=function(t){var e=["string"==typeof t?fl(t,Xo):t];return e.parentNode=$o,_([e])},Go.selectAll=function(t){var e=Zo("string"==typeof t?pl(t,Xo):t);return e.parentNode=$o,_([e])};var xl=Go.select($o);gl.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(U(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(U(t,e,n))};var bl=Go.map({mouseenter:"mouseover",mouseleave:"mouseout"});bl.forEach(function(t){"on"+t in Xo&&bl.remove(t)});var wl="onselectstart"in Xo?null:v($o.style,"userSelect"),_l=0;Go.mouse=function(t){return Y(t,b())};var zl=/WebKit/.test(Jo.navigator.userAgent)?-1:0;Go.touches=function(t,e){return arguments.length<2&&(e=b().touches),e?Zo(e).map(function(e){var n=Y(t,e);return n.identifier=e.identifier,n}):[]},Go.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",i)}function e(t,e,a,i,o){return function(){function l(){var t,n,r=e(f,v);
r&&(t=r[0]-x[0],n=r[1]-x[1],h|=t|n,x=r,p({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:t,dy:n}))}function s(){e(f,v)&&(m.on(i+g,null).on(o+g,null),y(h&&Go.event.target===d),p({type:"dragend"}))}var u,c=this,d=Go.event.target,f=c.parentNode,p=n.of(c,arguments),h=0,v=t(),g=".drag"+(null==v?"":"-"+v),m=Go.select(a()).on(i+g,l).on(o+g,s),y=H(),x=e(f,v);r?(u=r.apply(c,arguments),u=[u.x-x[0],u.y-x[1]]):u=[0,0],p({type:"dragstart"})}}var n=w(t,"drag","dragstart","dragend"),r=null,a=e(g,Go.mouse,Z,"mousemove","mouseup"),i=e(G,Go.touch,W,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},Go.rebind(t,n,"on")};var kl=Math.PI,Ml=2*kl,Al=kl/2,El=1e-6,jl=El*El,Sl=kl/180,Cl=180/kl,Nl=Math.SQRT2,Ol=2,Fl=4;Go.interpolateZoom=function(t,e){function n(t){var e=t*y;if(m){var n=te(v),o=i/(Ol*f)*(n*ee(Nl*e+v)-Q(v));return[r+o*u,a+o*c,i*n/te(Nl*e+v)]}return[r+t*u,a+t*c,i*Math.exp(Nl*e)]}var r=t[0],a=t[1],i=t[2],o=e[0],l=e[1],s=e[2],u=o-r,c=l-a,d=u*u+c*c,f=Math.sqrt(d),p=(s*s-i*i+Fl*d)/(2*i*Ol*f),h=(s*s-i*i-Fl*d)/(2*s*Ol*f),v=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(h*h+1)-h),m=g-v,y=(m||Math.log(s/i))/Nl;return n.duration=1e3*y,n},Go.behavior.zoom=function(){function t(t){t.on(E,u).on(Ll+".zoom",d).on(j,f).on("dblclick.zoom",p).on(C,c)}function e(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function n(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}function r(t){k.k=Math.max(A[0],Math.min(A[1],t))}function a(t,e){e=n(e),k.x+=t[0]-e[0],k.y+=t[1]-e[1]}function i(){b&&b.domain(y.range().map(function(t){return(t-k.x)/k.k}).map(y.invert)),z&&z.domain(_.range().map(function(t){return(t-k.y)/k.k}).map(_.invert))}function o(t){t({type:"zoomstart"})}function l(t){i(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function s(t){t({type:"zoomend"})}function u(){function t(){c=1,a(Go.mouse(r),p),l(u)}function n(){d.on(j,Jo===r?f:null).on(S,null),h(c&&Go.event.target===i),s(u)}var r=this,i=Go.event.target,u=N.of(r,arguments),c=0,d=Go.select(Jo).on(j,t).on(S,n),p=e(Go.mouse(r)),h=H();V.call(r),o(u)}function c(){function t(){var t=Go.touches(p);return f=k.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=e(t))}),t}function n(){var e=Go.event.target;Go.select(e).on(b,i).on(w,d),_.push(e);for(var n=Go.event.changedTouches,o=0,s=n.length;s>o;++o)v[n[o].identifier]=null;var u=t(),c=Date.now();if(1===u.length){if(500>c-m){var f=u[0],p=v[f.identifier];r(2*k.k),a(f,p),x(),l(h)}m=c}else if(u.length>1){var f=u[0],y=u[1],z=f[0]-y[0],M=f[1]-y[1];g=z*z+M*M}}function i(){for(var t,e,n,i,o=Go.touches(p),s=0,u=o.length;u>s;++s,i=null)if(n=o[s],i=v[n.identifier]){if(e)break;t=n,e=i}if(i){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,d=g&&Math.sqrt(c/g);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],r(d*f)}m=null,a(t,e),l(h)}function d(){if(Go.event.touches.length){for(var e=Go.event.changedTouches,n=0,r=e.length;r>n;++n)delete v[e[n].identifier];for(var a in v)return void t()}Go.selectAll(_).on(y,null),z.on(E,u).on(C,c),M(),s(h)}var f,p=this,h=N.of(p,arguments),v={},g=0,y=".zoom-"+Go.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,_=[],z=Go.select(p).on(E,null).on(C,n),M=H();V.call(p),n(),o(h)}function d(){var t=N.of(this,arguments);g?clearTimeout(g):(V.call(this),o(t)),g=setTimeout(function(){g=null,s(t)},50),x();var n=v||Go.mouse(this);h||(h=e(n)),r(Math.pow(2,.002*Tl())*k.k),a(n,h),l(t)}function f(){h=null}function p(){var t=N.of(this,arguments),n=Go.mouse(this),i=e(n),u=Math.log(k.k)/Math.LN2;o(t),r(Math.pow(2,Go.event.shiftKey?Math.ceil(u)-1:Math.floor(u)+1)),a(n,i),l(t),s(t)}var h,v,g,m,y,b,_,z,k={x:0,y:0,k:1},M=[960,500],A=ql,E="mousedown.zoom",j="mousemove.zoom",S="mouseup.zoom",C="touchstart.zoom",N=w(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=N.of(this,arguments),e=k;Au?Go.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},o(t)}).tween("zoom:zoom",function(){var n=M[0],r=M[1],a=n/2,i=r/2,o=Go.interpolateZoom([(a-k.x)/k.k,(i-k.y)/k.k,n/k.k],[(a-e.x)/e.k,(i-e.y)/e.k,n/e.k]);return function(e){var r=o(e),s=n/r[2];this.__chart__=k={x:a-r[0]*s,y:i-r[1]*s,k:s},l(t)}}).each("end.zoom",function(){s(t)}):(this.__chart__=k,o(t),l(t),s(t))})},t.translate=function(e){return arguments.length?(k={x:+e[0],y:+e[1],k:k.k},i(),t):[k.x,k.y]},t.scale=function(e){return arguments.length?(k={x:k.x,y:k.y,k:+e},i(),t):k.k},t.scaleExtent=function(e){return arguments.length?(A=null==e?ql:[+e[0],+e[1]],t):A},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(M=e&&[+e[0],+e[1]],t):M},t.x=function(e){return arguments.length?(b=e,y=e.copy(),k={x:0,y:0,k:1},t):b},t.y=function(e){return arguments.length?(z=e,_=e.copy(),k={x:0,y:0,k:1},t):z},Go.rebind(t,N,"on")};var Tl,ql=[0,1/0],Ll="onwheel"in Xo?(Tl=function(){return-Go.event.deltaY*(Go.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Xo?(Tl=function(){return Go.event.wheelDelta},"mousewheel"):(Tl=function(){return-Go.event.detail},"MozMousePixelScroll");Go.color=re,re.prototype.toString=function(){return this.rgb()+""},Go.hsl=ae;var Pl=ae.prototype=new re;Pl.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ae(this.h,this.s,this.l/t)},Pl.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ae(this.h,this.s,t*this.l)},Pl.rgb=function(){return ie(this.h,this.s,this.l)},Go.hcl=oe;var Il=oe.prototype=new re;Il.brighter=function(t){return new oe(this.h,this.c,Math.min(100,this.l+Bl*(arguments.length?t:1)))},Il.darker=function(t){return new oe(this.h,this.c,Math.max(0,this.l-Bl*(arguments.length?t:1)))},Il.rgb=function(){return le(this.h,this.c,this.l).rgb()},Go.lab=se;var Bl=18,Vl=.95047,Ul=1,Dl=1.08883,Rl=se.prototype=new re;Rl.brighter=function(t){return new se(Math.min(100,this.l+Bl*(arguments.length?t:1)),this.a,this.b)},Rl.darker=function(t){return new se(Math.max(0,this.l-Bl*(arguments.length?t:1)),this.a,this.b)},Rl.rgb=function(){return ue(this.l,this.a,this.b)},Go.rgb=he;var Hl=he.prototype=new re;Hl.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,a=30;return e||n||r?(e&&a>e&&(e=a),n&&a>n&&(n=a),r&&a>r&&(r=a),new he(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new he(a,a,a)},Hl.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new he(t*this.r,t*this.g,t*this.b)},Hl.hsl=function(){return xe(this.r,this.g,this.b)},Hl.toString=function(){return"#"+me(this.r)+me(this.g)+me(this.b)};var Yl=Go.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Yl.forEach(function(t,e){Yl.set(t,ve(e))}),Go.functor=ze,Go.xhr=Me(ke),Go.dsv=function(t,e){function n(t,n,i){arguments.length<3&&(i=n,n=null);var o=Ae(t,e,null==n?r:a(n),i);return o.row=function(t){return arguments.length?o.response(null==(n=t)?r:a(t)):n},o}function r(t){return n.parse(t.responseText)}function a(t){return function(e){return n.parse(e.responseText,t)}}function i(e){return e.map(o).join(t)}function o(t){return l.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var l=new RegExp('["'+t+"\n]"),s=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var a=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(a(t),n)}:a})},n.parseRows=function(t,e){function n(){if(c>=u)return o;if(a)return a=!1,i;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(a=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(a=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;u>c;){var r=t.charCodeAt(c++),l=1;if(10===r)a=!0;else if(13===r)a=!0,10===t.charCodeAt(c)&&(++c,++l);else if(r!==s)continue;return t.substring(e,c-l)}return t.substring(e)}for(var r,a,i={},o={},l=[],u=t.length,c=0,d=0;(r=n())!==o;){for(var f=[];r!==i&&r!==o;)f.push(r),r=n();(!e||(f=e(f,d++)))&&l.push(f)}return l},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new p,a=[];return e.forEach(function(t){for(var e in t)r.has(e)||a.push(r.add(e))}),[a.map(o).join(t)].concat(e.map(function(e){return a.map(function(t){return o(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(i).join("\n")},n},Go.csv=Go.dsv(",","text/csv"),Go.tsv=Go.dsv("	","text/tab-separated-values"),Go.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=b().changedTouches),e)for(var r,a=0,i=e.length;i>a;++a)if((r=e[a]).identifier===n)return Y(t,r)};var Gl,Wl,Zl,Xl,$l,Jl=Jo[v(Jo,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Go.timer=function(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var a=n+e,i={c:t,t:a,f:!1,n:null};Wl?Wl.n=i:Gl=i,Wl=i,Zl||(Xl=clearTimeout(Xl),Zl=1,Jl(je))},Go.timer.flush=function(){Se(),Ce()},Go.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Kl=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Oe);Go.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=Go.round(t,Ne(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Kl[8+n/3]};var Ql=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ts=Go.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Go.round(t,Ne(t,e))).toFixed(Math.max(0,Math.min(20,Ne(t*(1+1e-15),e))))}}),es=Go.time={},ns=Date;qe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){rs.setUTCDate.apply(this._,arguments)},setDay:function(){rs.setUTCDay.apply(this._,arguments)},setFullYear:function(){rs.setUTCFullYear.apply(this._,arguments)},setHours:function(){rs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){rs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){rs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){rs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){rs.setUTCSeconds.apply(this._,arguments)},setTime:function(){rs.setTime.apply(this._,arguments)}};var rs=Date.prototype;es.year=Le(function(t){return t=es.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),es.years=es.year.range,es.years.utc=es.year.utc.range,es.day=Le(function(t){var e=new ns(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),es.days=es.day.range,es.days.utc=es.day.utc.range,es.dayOfYear=function(t){var e=es.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=es[t]=Le(function(t){return(t=es.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=es.year(t).getDay();return Math.floor((es.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});es[t+"s"]=n.range,es[t+"s"].utc=n.utc.range,es[t+"OfYear"]=function(t){var n=es.year(t).getDay();return Math.floor((es.dayOfYear(t)+(n+e)%7)/7)}}),es.week=es.sunday,es.weeks=es.sunday.range,es.weeks.utc=es.sunday.utc.range,es.weekOfYear=es.sundayOfYear;var as={"-":"",_:" ",0:"0"},is=/^\s*\d+/,os=/^%/;Go.locale=function(t){return{numberFormat:Fe(t),timeFormat:Ie(t)}};var ls=Go.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Go.format=ls.numberFormat,Go.geo={},on.prototype={s:0,t:0,add:function(t){ln(t,this.t,ss),ln(ss.s,this.s,this),this.s?this.t+=ss.t:this.s=ss.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ss=new on;Go.geo.stream=function(t,e){t&&us.hasOwnProperty(t.type)?us[t.type](t,e):sn(t,e)};var us={Feature:function(t,e){sn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,a=n.length;++r<a;)sn(n[r].geometry,e)}},cs={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){un(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)un(n[r],e,0)},Polygon:function(t,e){cn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)cn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,a=n.length;++r<a;)sn(n[r],e)}};Go.geo.area=function(t){return ds=0,Go.geo.stream(t,ps),ds};var ds,fs=new on,ps={sphere:function(){ds+=4*kl},point:g,lineStart:g,lineEnd:g,polygonStart:function(){fs.reset(),ps.lineStart=dn},polygonEnd:function(){var t=2*fs;ds+=0>t?4*kl+t:t,ps.lineStart=ps.lineEnd=ps.point=g}};Go.geo.bounds=function(){function t(t,e){x.push(b=[c=t,f=t]),d>e&&(d=e),e>p&&(p=e)}function e(e,n){var r=fn([e*Sl,n*Sl]);if(m){var a=hn(m,r),i=[a[1],-a[0],0],o=hn(i,a);mn(o),o=yn(o);var s=e-h,u=s>0?1:-1,v=o[0]*Cl*u,g=ol(s)>180;if(g^(v>u*h&&u*e>v)){var y=o[1]*Cl;y>p&&(p=y)}else if(v=(v+360)%360-180,g^(v>u*h&&u*e>v)){var y=-o[1]*Cl;d>y&&(d=y)}else d>n&&(d=n),n>p&&(p=n);g?h>e?l(c,e)>l(c,f)&&(f=e):l(e,f)>l(c,f)&&(c=e):f>=c?(c>e&&(c=e),e>f&&(f=e)):e>h?l(c,e)>l(c,f)&&(f=e):l(e,f)>l(c,f)&&(c=e)}else t(e,n);m=r,h=e}function n(){w.point=e}function r(){b[0]=c,b[1]=f,w.point=t,m=null}function a(t,n){if(m){var r=t-h;y+=ol(r)>180?r+(r>0?360:-360):r}else v=t,g=n;ps.point(t,n),e(t,n)}function i(){ps.lineStart()}function o(){a(v,g),ps.lineEnd(),ol(y)>El&&(c=-(f=180)),b[0]=c,b[1]=f,m=null}function l(t,e){return(e-=t)<0?e+360:e}function s(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,d,f,p,h,v,g,m,y,x,b,w={point:t,lineStart:n,lineEnd:r,polygonStart:function(){w.point=a,w.lineStart=i,w.lineEnd=o,y=0,ps.polygonStart()},polygonEnd:function(){ps.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=r,0>fs?(c=-(f=180),d=-(p=90)):y>El?p=90:-El>y&&(d=-90),b[0]=c,b[1]=f}};return function(t){p=f=-(c=d=1/0),x=[],Go.geo.stream(t,w);var e=x.length;if(e){x.sort(s);for(var n,r=1,a=x[0],i=[a];e>r;++r)n=x[r],u(n[0],a)||u(n[1],a)?(l(a[0],n[1])>l(a[0],a[1])&&(a[1]=n[1]),l(n[0],a[1])>l(a[0],a[1])&&(a[0]=n[0])):i.push(a=n);for(var o,n,h=-1/0,e=i.length-1,r=0,a=i[e];e>=r;a=n,++r)n=i[r],(o=l(a[1],n[0]))>h&&(h=o,c=n[0],f=a[1])}return x=b=null,1/0===c||1/0===d?[[0/0,0/0],[0/0,0/0]]:[[c,d],[f,p]]}}(),Go.geo.centroid=function(t){hs=vs=gs=ms=ys=xs=bs=ws=_s=zs=ks=0,Go.geo.stream(t,Ms);var e=_s,n=zs,r=ks,a=e*e+n*n+r*r;return jl>a&&(e=xs,n=bs,r=ws,El>vs&&(e=gs,n=ms,r=ys),a=e*e+n*n+r*r,jl>a)?[0/0,0/0]:[Math.atan2(n,e)*Cl,K(r/Math.sqrt(a))*Cl]};var hs,vs,gs,ms,ys,xs,bs,ws,_s,zs,ks,Ms={sphere:g,point:bn,lineStart:_n,lineEnd:zn,polygonStart:function(){Ms.lineStart=kn},polygonEnd:function(){Ms.lineStart=_n}},As=Sn(Mn,Tn,Ln,[-kl,-kl/2]),Es=1e9;Go.geo.clipExtent=function(){var t,e,n,r,a,i,o={stream:function(t){return a&&(a.valid=!1),a=i(t),a.valid=!0,a},extent:function(l){return arguments.length?(i=Bn(t=+l[0][0],e=+l[0][1],n=+l[1][0],r=+l[1][1]),a&&(a.valid=!1,a=null),o):[[t,e],[n,r]]}};return o.extent([[0,0],[960,500]])},(Go.geo.conicEqualArea=function(){return Un(Dn)}).raw=Dn,Go.geo.albers=function(){return Go.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Go.geo.albersUsa=function(){function t(t){var i=t[0],o=t[1];return e=null,n(i,o),e||(r(i,o),e)||a(i,o),e}var e,n,r,a,i=Go.geo.albers(),o=Go.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Go.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=i.scale(),n=i.translate(),r=(t[0]-n[0])/e,a=(t[1]-n[1])/e;return(a>=.12&&.234>a&&r>=-.425&&-.214>r?o:a>=.166&&.234>a&&r>=-.214&&-.115>r?l:i).invert(t)},t.stream=function(t){var e=i.stream(t),n=o.stream(t),r=l.stream(t);return{point:function(t,a){e.point(t,a),n.point(t,a),r.point(t,a)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(i.precision(e),o.precision(e),l.precision(e),t):i.precision()},t.scale=function(e){return arguments.length?(i.scale(e),o.scale(.35*e),l.scale(e),t.translate(i.translate())):i.scale()},t.translate=function(e){if(!arguments.length)return i.translate();var u=i.scale(),c=+e[0],d=+e[1];return n=i.translate(e).clipExtent([[c-.455*u,d-.238*u],[c+.455*u,d+.238*u]]).stream(s).point,r=o.translate([c-.307*u,d+.201*u]).clipExtent([[c-.425*u+El,d+.12*u+El],[c-.214*u-El,d+.234*u-El]]).stream(s).point,a=l.translate([c-.205*u,d+.212*u]).clipExtent([[c-.214*u+El,d+.166*u+El],[c-.115*u-El,d+.234*u-El]]).stream(s).point,t},t.scale(1070)};var js,Ss,Cs,Ns,Os,Fs,Ts={point:g,lineStart:g,lineEnd:g,polygonStart:function(){Ss=0,Ts.lineStart=Rn},polygonEnd:function(){Ts.lineStart=Ts.lineEnd=Ts.point=g,js+=ol(Ss/2)}},qs={point:Hn,lineStart:g,lineEnd:g,polygonStart:g,polygonEnd:g},Ls={point:Wn,lineStart:Zn,lineEnd:Xn,polygonStart:function(){Ls.lineStart=$n},polygonEnd:function(){Ls.point=Wn,Ls.lineStart=Zn,Ls.lineEnd=Xn}};Go.geo.path=function(){function t(t){return t&&("function"==typeof l&&i.pointRadius(+l.apply(this,arguments)),o&&o.valid||(o=a(i)),Go.geo.stream(t,o)),i.result()}function e(){return o=null,t}var n,r,a,i,o,l=4.5;return t.area=function(t){return js=0,Go.geo.stream(t,a(Ts)),js},t.centroid=function(t){return gs=ms=ys=xs=bs=ws=_s=zs=ks=0,Go.geo.stream(t,a(Ls)),ks?[_s/ks,zs/ks]:ws?[xs/ws,bs/ws]:ys?[gs/ys,ms/ys]:[0/0,0/0]},t.bounds=function(t){return Os=Fs=-(Cs=Ns=1/0),Go.geo.stream(t,a(qs)),[[Cs,Ns],[Os,Fs]]},t.projection=function(t){return arguments.length?(a=(n=t)?t.stream||Qn(t):ke,e()):n},t.context=function(t){return arguments.length?(i=null==(r=t)?new Yn:new Jn(t),"function"!=typeof l&&i.pointRadius(l),e()):r},t.pointRadius=function(e){return arguments.length?(l="function"==typeof e?e:(i.pointRadius(+e),+e),t):l},t.projection(Go.geo.albersUsa()).context(null)},Go.geo.transform=function(t){return{stream:function(e){var n=new tr(e);for(var r in t)n[r]=t[r];return n}}},tr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Go.geo.projection=nr,Go.geo.projectionMutator=rr,(Go.geo.equirectangular=function(){return nr(ir)}).raw=ir.invert=ir,Go.geo.rotation=function(t){function e(e){return e=t(e[0]*Sl,e[1]*Sl),e[0]*=Cl,e[1]*=Cl,e}return t=lr(t[0]%360*Sl,t[1]*Sl,t.length>2?t[2]*Sl:0),e.invert=function(e){return e=t.invert(e[0]*Sl,e[1]*Sl),e[0]*=Cl,e[1]*=Cl,e},e},or.invert=ir,Go.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=lr(-t[0]*Sl,-t[1]*Sl,0).invert,a=[];return n(null,null,1,{point:function(t,n){a.push(t=e(t,n)),t[0]*=Cl,t[1]*=Cl}}),{type:"Polygon",coordinates:[a]}}var e,n,r=[0,0],a=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=dr((e=+r)*Sl,a*Sl),t):e},t.precision=function(r){return arguments.length?(n=dr(e*Sl,(a=+r)*Sl),t):a},t.angle(90)},Go.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Sl,a=t[1]*Sl,i=e[1]*Sl,o=Math.sin(r),l=Math.cos(r),s=Math.sin(a),u=Math.cos(a),c=Math.sin(i),d=Math.cos(i);return Math.atan2(Math.sqrt((n=d*o)*n+(n=u*c-s*d*l)*n),s*c+u*d*l)},Go.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Go.range(Math.ceil(i/g)*g,a,g).map(f).concat(Go.range(Math.ceil(u/m)*m,s,m).map(p)).concat(Go.range(Math.ceil(r/h)*h,n,h).filter(function(t){return ol(t%g)>El}).map(c)).concat(Go.range(Math.ceil(l/v)*v,o,v).filter(function(t){return ol(t%m)>El}).map(d))}var n,r,a,i,o,l,s,u,c,d,f,p,h=10,v=h,g=90,m=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(p(s).slice(1),f(a).reverse().slice(1),p(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(i=+e[0][0],a=+e[1][0],u=+e[0][1],s=+e[1][1],i>a&&(e=i,i=a,a=e),u>s&&(e=u,u=s,s=e),t.precision(y)):[[i,u],[a,s]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],l=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),l>o&&(e=l,l=o,o=e),t.precision(y)):[[r,l],[n,o]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(g=+e[0],m=+e[1],t):[g,m]},t.minorStep=function(e){return arguments.length?(h=+e[0],v=+e[1],t):[h,v]},t.precision=function(e){return arguments.length?(y=+e,c=pr(l,o,90),d=hr(r,n,y),f=pr(u,s,90),p=hr(i,a,y),t):y},t.majorExtent([[-180,-90+El],[180,90-El]]).minorExtent([[-180,-80-El],[180,80+El]])},Go.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||a.apply(this,arguments)]}}var e,n,r=vr,a=gr;return t.distance=function(){return Go.geo.distance(e||r.apply(this,arguments),n||a.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(a=e,n="function"==typeof e?null:e,t):a},t.precision=function(){return arguments.length?t:0},t},Go.geo.interpolate=function(t,e){return mr(t[0]*Sl,t[1]*Sl,e[0]*Sl,e[1]*Sl)},Go.geo.length=function(t){return Ps=0,Go.geo.stream(t,Is),Ps};var Ps,Is={sphere:g,point:g,lineStart:yr,lineEnd:g,polygonStart:g,polygonEnd:g},Bs=xr(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Go.geo.azimuthalEqualArea=function(){return nr(Bs)}).raw=Bs;var Vs=xr(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},ke);(Go.geo.azimuthalEquidistant=function(){return nr(Vs)}).raw=Vs,(Go.geo.conicConformal=function(){return Un(br)}).raw=br,(Go.geo.conicEquidistant=function(){return Un(wr)}).raw=wr;var Us=xr(function(t){return 1/t},Math.atan);(Go.geo.gnomonic=function(){return nr(Us)}).raw=Us,_r.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Al]},(Go.geo.mercator=function(){return zr(_r)}).raw=_r;var Ds=xr(function(){return 1},Math.asin);(Go.geo.orthographic=function(){return nr(Ds)}).raw=Ds;var Rs=xr(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Go.geo.stereographic=function(){return nr(Rs)}).raw=Rs,kr.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Al]},(Go.geo.transverseMercator=function(){var t=zr(kr),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[-t[1],t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},t.rotate([0,0])}).raw=kr,Go.geom={},Go.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,a=ze(n),i=ze(r),o=t.length,l=[],s=[];for(e=0;o>e;e++)l.push([+a.call(this,t[e],e),+i.call(this,t[e],e),e]);for(l.sort(jr),e=0;o>e;e++)s.push([l[e][0],-l[e][1]]);var u=Er(l),c=Er(s),d=c[0]===u[0],f=c[c.length-1]===u[u.length-1],p=[];for(e=u.length-1;e>=0;--e)p.push(t[l[u[e]][2]]);for(e=+d;e<c.length-f;++e)p.push(t[l[c[e]][2]]);return p}var n=Mr,r=Ar;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},Go.geom.polygon=function(t){return dl(t,Hs),t};var Hs=Go.geom.polygon.prototype=[];Hs.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],a=0;++e<n;)t=r,r=this[e],a+=t[1]*r[0]-t[0]*r[1];return.5*a},Hs.centroid=function(t){var e,n,r=-1,a=this.length,i=0,o=0,l=this[a-1];for(arguments.length||(t=-1/(6*this.area()));++r<a;)e=l,l=this[r],n=e[0]*l[1]-l[0]*e[1],i+=(e[0]+l[0])*n,o+=(e[1]+l[1])*n;return[i*t,o*t]},Hs.clip=function(t){for(var e,n,r,a,i,o,l=Nr(t),s=-1,u=this.length-Nr(this),c=this[u-1];++s<u;){for(e=t.slice(),t.length=0,a=this[s],i=e[(r=e.length-l)-1],n=-1;++n<r;)o=e[n],Sr(o,c,a)?(Sr(i,c,a)||t.push(Cr(i,o,c,a)),t.push(o)):Sr(i,c,a)&&t.push(Cr(i,o,c,a)),i=o;l&&t.push(t[0]),c=a}return t};var Ys,Gs,Ws,Zs,Xs,$s=[],Js=[];Br.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Ur),e.length},Jr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Kr.prototype={insert:function(t,e){var n,r,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=na(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(a=r.R,a&&a.C?(n.C=a.C=!1,r.C=!0,t=r):(t===n.R&&(ta(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ea(this,r))):(a=r.L,a&&a.C?(n.C=a.C=!1,r.C=!0,t=r):(t===n.L&&(ea(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ta(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,a=t.U,i=t.L,o=t.R;if(n=i?o?na(o):i:o,a?a.L===t?a.L=n:a.R=n:this._=n,i&&o?(r=n.C,n.C=t.C,n.L=i,i.U=n,n!==o?(a=n.U,n.U=t.U,t=n.R,a.L=t,n.R=o,o.U=n):(n.U=a,a=n,t=n.R)):(r=t.C,t=n),t&&(t.U=a),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===a.L){if(e=a.R,e.C&&(e.C=!1,a.C=!0,ta(this,a),e=a.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ea(this,e),e=a.R),e.C=a.C,a.C=e.R.C=!1,ta(this,a),t=this._;break}}else if(e=a.L,e.C&&(e.C=!1,a.C=!0,ea(this,a),e=a.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ta(this,e),e=a.L),e.C=a.C,a.C=e.L.C=!1,ea(this,a),t=this._;break}e.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}},Go.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=l[0][0],a=l[0][1],i=l[1][0],o=l[1][1];return ra(n(t),l).cells.forEach(function(n,l){var s=n.edges,u=n.site,c=e[l]=s.length?s.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=r&&u.x<=i&&u.y>=a&&u.y<=o?[[r,o],[i,o],[i,a],[r,a]]:[];c.point=t[l]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/El)*El,y:Math.round(o(t,e)/El)*El,i:e}})}var r=Mr,a=Ar,i=r,o=a,l=Ks;return t?e(t):(e.links=function(t){return ra(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return ra(n(t)).cells.forEach(function(n,r){for(var a,i,o=n.site,l=n.edges.sort(Ur),s=-1,u=l.length,c=l[u-1].edge,d=c.l===o?c.r:c.l;++s<u;)a=c,i=d,c=l[s].edge,d=c.l===o?c.r:c.l,r<i.i&&r<d.i&&ia(o,i,d)<0&&e.push([t[r],t[i.i],t[d.i]])}),e},e.x=function(t){return arguments.length?(i=ze(r=t),e):r},e.y=function(t){return arguments.length?(o=ze(a=t),e):a},e.clipExtent=function(t){return arguments.length?(l=null==t?Ks:t,e):l===Ks?null:l},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):l===Ks?null:l&&l[1]},e)};var Ks=[[-1e6,-1e6],[1e6,1e6]];Go.geom.delaunay=function(t){return Go.geom.voronoi().triangles(t)},Go.geom.quadtree=function(t,e,n,r,a){function i(t){function i(t,e,n,r,a,i,o,l){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var s=t.x,c=t.y;if(null!=s)if(ol(s-n)+ol(c-r)<.01)u(t,e,n,r,a,i,o,l);else{var d=t.point;t.x=t.y=t.point=null,u(t,d,s,c,a,i,o,l),u(t,e,n,r,a,i,o,l)}else t.x=n,t.y=r,t.point=e}else u(t,e,n,r,a,i,o,l)}function u(t,e,n,r,a,o,l,s){var u=.5*(a+l),c=.5*(o+s),d=n>=u,f=r>=c,p=(f<<1)+d;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=sa()),d?a=u:l=u,f?o=c:s=c,i(t,e,n,r,a,o,l,s)}var c,d,f,p,h,v,g,m,y,x=ze(l),b=ze(s);if(null!=e)v=e,g=n,m=r,y=a;else if(m=y=-(v=g=1/0),d=[],f=[],h=t.length,o)for(p=0;h>p;++p)c=t[p],c.x<v&&(v=c.x),c.y<g&&(g=c.y),c.x>m&&(m=c.x),c.y>y&&(y=c.y),d.push(c.x),f.push(c.y);else for(p=0;h>p;++p){var w=+x(c=t[p],p),_=+b(c,p);v>w&&(v=w),g>_&&(g=_),w>m&&(m=w),_>y&&(y=_),d.push(w),f.push(_)}var z=m-v,k=y-g;z>k?y=g+z:m=v+k;var M=sa();if(M.add=function(t){i(M,t,+x(t,++p),+b(t,p),v,g,m,y)},M.visit=function(t){ua(t,M,v,g,m,y)},p=-1,null==e){for(;++p<h;)i(M,t[p],d[p],f[p],v,g,m,y);--p}else t.forEach(M.add);return d=f=t=c=null,M}var o,l=Mr,s=Ar;return(o=arguments.length)?(l=oa,s=la,3===o&&(a=n,r=e,n=e=0),i(t)):(i.x=function(t){return arguments.length?(l=t,i):l
},i.y=function(t){return arguments.length?(s=t,i):s},i.extent=function(t){return arguments.length?(null==t?e=n=r=a=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],a=+t[1][1]),i):null==e?null:[[e,n],[r,a]]},i.size=function(t){return arguments.length?(null==t?e=n=r=a=null:(e=n=0,r=+t[0],a=+t[1]),i):null==e?null:[r-e,a-n]},i)},Go.interpolateRgb=ca,Go.interpolateObject=da,Go.interpolateNumber=fa,Go.interpolateString=pa;var Qs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tu=new RegExp(Qs.source,"g");Go.interpolate=ha,Go.interpolators=[function(t,e){var n=typeof e;return("string"===n?Yl.has(e)||/^(#|rgb\(|hsl\()/.test(e)?ca:pa:e instanceof re?ca:Array.isArray(e)?va:"object"===n&&isNaN(e)?da:fa)(t,e)}],Go.interpolateArray=va;var eu=function(){return ke},nu=Go.map({linear:eu,poly:_a,quad:function(){return xa},cubic:function(){return ba},sin:function(){return za},exp:function(){return ka},circle:function(){return Ma},elastic:Aa,back:Ea,bounce:function(){return ja}}),ru=Go.map({"in":ke,out:ma,"in-out":ya,"out-in":function(t){return ya(ma(t))}});Go.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,r=e>=0?t.substring(e+1):"in";return n=nu.get(n)||eu,r=ru.get(r)||ke,ga(r(n.apply(null,Wo.call(arguments,1))))},Go.interpolateHcl=Sa,Go.interpolateHsl=Ca,Go.interpolateLab=Na,Go.interpolateRound=Oa,Go.transform=function(t){var e=Xo.createElementNS(Go.ns.prefix.svg,"g");return(Go.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Fa(n?n.matrix:au)})(t)},Fa.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var au={a:1,b:0,c:0,d:1,e:0,f:0};Go.interpolateTransform=Pa,Go.layout={},Go.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Va(t[n]));return e}},Go.layout.chord=function(){function t(){var t,u,d,f,p,h={},v=[],g=Go.range(i),m=[];for(n=[],r=[],t=0,f=-1;++f<i;){for(u=0,p=-1;++p<i;)u+=a[f][p];v.push(u),m.push(Go.range(i)),t+=u}for(o&&g.sort(function(t,e){return o(v[t],v[e])}),l&&m.forEach(function(t,e){t.sort(function(t,n){return l(a[e][t],a[e][n])})}),t=(Ml-c*i)/t,u=0,f=-1;++f<i;){for(d=u,p=-1;++p<i;){var y=g[f],x=m[y][p],b=a[y][x],w=u,_=u+=b*t;h[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:_,value:b}}r[y]={index:y,startAngle:d,endAngle:u,value:(u-d)/t},u+=c}for(f=-1;++f<i;)for(p=f-1;++p<i;){var z=h[f+"-"+p],k=h[p+"-"+f];(z.value||k.value)&&n.push(z.value<k.value?{source:k,target:z}:{source:z,target:k})}s&&e()}function e(){n.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,a,i,o,l,s,u={},c=0;return u.matrix=function(t){return arguments.length?(i=(a=t)&&a.length,n=r=null,u):a},u.padding=function(t){return arguments.length?(c=t,n=r=null,u):c},u.sortGroups=function(t){return arguments.length?(o=t,n=r=null,u):o},u.sortSubgroups=function(t){return arguments.length?(l=t,n=null,u):l},u.sortChords=function(t){return arguments.length?(s=t,n&&e(),u):s},u.chords=function(){return n||t(),n},u.groups=function(){return r||t(),r},u},Go.layout.force=function(){function t(t){return function(e,n,r,a){if(e.point!==t){var i=e.cx-t.x,o=e.cy-t.y,l=a-n,s=i*i+o*o;if(s>l*l/g){if(h>s){var u=e.charge/s;t.px-=i*u,t.py-=o*u}return!0}if(e.point&&s&&h>s){var u=e.pointCharge/s;t.px-=i*u,t.py-=o*u}}return!e.charge}}function e(t){t.px=Go.event.x,t.py=Go.event.y,l.resume()}var n,r,a,i,o,l={},s=Go.dispatch("start","tick","end"),u=[1,1],c=.9,d=iu,f=ou,p=-30,h=lu,v=.1,g=.64,m=[],y=[];return l.tick=function(){if((r*=.99)<.005)return s.end({type:"end",alpha:r=0}),!0;var e,n,l,d,f,h,g,x,b,w=m.length,_=y.length;for(n=0;_>n;++n)l=y[n],d=l.source,f=l.target,x=f.x-d.x,b=f.y-d.y,(h=x*x+b*b)&&(h=r*i[n]*((h=Math.sqrt(h))-a[n])/h,x*=h,b*=h,f.x-=x*(g=d.weight/(f.weight+d.weight)),f.y-=b*g,d.x+=x*(g=1-g),d.y+=b*g);if((g=r*v)&&(x=u[0]/2,b=u[1]/2,n=-1,g))for(;++n<w;)l=m[n],l.x+=(x-l.x)*g,l.y+=(b-l.y)*g;if(p)for(Wa(e=Go.geom.quadtree(m),r,o),n=-1;++n<w;)(l=m[n]).fixed||e.visit(t(l));for(n=-1;++n<w;)l=m[n],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*c,l.y-=(l.py-(l.py=l.y))*c);s.tick({type:"tick",alpha:r})},l.nodes=function(t){return arguments.length?(m=t,l):m},l.links=function(t){return arguments.length?(y=t,l):y},l.size=function(t){return arguments.length?(u=t,l):u},l.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,l):f},l.friction=function(t){return arguments.length?(c=+t,l):c},l.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.chargeDistance=function(t){return arguments.length?(h=t*t,l):Math.sqrt(h)},l.gravity=function(t){return arguments.length?(v=+t,l):v},l.theta=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.alpha=function(t){return arguments.length?(t=+t,r?r=t>0?t:0:t>0&&(s.start({type:"start",alpha:r=t}),Go.timer(l.tick)),l):r},l.start=function(){function t(t,r){if(!n){for(n=new Array(s),l=0;s>l;++l)n[l]=[];for(l=0;u>l;++l){var a=y[l];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var i,o=n[e],l=-1,u=o.length;++l<u;)if(!isNaN(i=o[l][t]))return i;return Math.random()*r}var e,n,r,s=m.length,c=y.length,h=u[0],v=u[1];for(e=0;s>e;++e)(r=m[e]).index=e,r.weight=0;for(e=0;c>e;++e)r=y[e],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(e=0;s>e;++e)r=m[e],isNaN(r.x)&&(r.x=t("x",h)),isNaN(r.y)&&(r.y=t("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof d)for(e=0;c>e;++e)a[e]=+d.call(this,y[e],e);else for(e=0;c>e;++e)a[e]=d;if(i=[],"function"==typeof f)for(e=0;c>e;++e)i[e]=+f.call(this,y[e],e);else for(e=0;c>e;++e)i[e]=f;if(o=[],"function"==typeof p)for(e=0;s>e;++e)o[e]=+p.call(this,m[e],e);else for(e=0;s>e;++e)o[e]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return n||(n=Go.behavior.drag().origin(ke).on("dragstart.force",Ra).on("drag.force",e).on("dragend.force",Ha)),arguments.length?void this.on("mouseover.force",Ya).on("mouseout.force",Ga).call(n):n},Go.rebind(l,s,"on")};var iu=20,ou=1,lu=1/0;Go.layout.hierarchy=function(){function t(a){var i,o=[a],l=[];for(a.depth=0;null!=(i=o.pop());)if(l.push(i),(u=n.call(t,i,i.depth))&&(s=u.length)){for(var s,u,c;--s>=0;)o.push(c=u[s]),c.parent=i,c.depth=i.depth+1;r&&(i.value=0),i.children=u}else r&&(i.value=+r.call(t,i,i.depth)||0),delete i.children;return $a(a,function(t){var n,a;e&&(n=t.children)&&n.sort(e),r&&(a=t.parent)&&(a.value+=t.value)}),l}var e=Qa,n=Ja,r=Ka;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(Xa(e,function(t){t.children&&(t.value=0)}),$a(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},Go.layout.partition=function(){function t(e,n,r,a){var i=e.children;if(e.x=n,e.y=e.depth*a,e.dx=r,e.dy=a,i&&(o=i.length)){var o,l,s,u=-1;for(r=e.value?r/e.value:0;++u<o;)t(l=i[u],n,s=l.value*r,a),n+=s}}function e(t){var n=t.children,r=0;if(n&&(a=n.length))for(var a,i=-1;++i<a;)r=Math.max(r,e(n[i]));return 1+r}function n(n,i){var o=r.call(this,n,i);return t(o[0],0,a[0],a[1]/e(o[0])),o}var r=Go.layout.hierarchy(),a=[1,1];return n.size=function(t){return arguments.length?(a=t,n):a},Za(n,r)},Go.layout.pie=function(){function t(i){var o=i.map(function(n,r){return+e.call(t,n,r)}),l=+("function"==typeof r?r.apply(this,arguments):r),s=(("function"==typeof a?a.apply(this,arguments):a)-l)/Go.sum(o),u=Go.range(i.length);null!=n&&u.sort(n===su?function(t,e){return o[e]-o[t]}:function(t,e){return n(i[t],i[e])});var c=[];return u.forEach(function(t){var e;c[t]={data:i[t],value:e=o[t],startAngle:l,endAngle:l+=e*s}}),c}var e=Number,n=su,r=0,a=Ml;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(a=e,t):a},t};var su={};Go.layout.stack=function(){function t(l,s){var u=l.map(function(n,r){return e.call(t,n,r)}),c=u.map(function(e){return e.map(function(e,n){return[i.call(t,e,n),o.call(t,e,n)]})}),d=n.call(t,c,s);u=Go.permute(u,d),c=Go.permute(c,d);var f,p,h,v=r.call(t,c,s),g=u.length,m=u[0].length;for(p=0;m>p;++p)for(a.call(t,u[0][p],h=v[p],c[0][p][1]),f=1;g>f;++f)a.call(t,u[f][p],h+=c[f-1][p][1],c[f][p][1]);return l}var e=ke,n=ai,r=ii,a=ri,i=ei,o=ni;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:uu.get(e)||ai,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:cu.get(e)||ii,t):r},t.x=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(a=e,t):a},t};var uu=Go.map({"inside-out":function(t){var e,n,r=t.length,a=t.map(oi),i=t.map(li),o=Go.range(r).sort(function(t,e){return a[t]-a[e]}),l=0,s=0,u=[],c=[];for(e=0;r>e;++e)n=o[e],s>l?(l+=i[n],u.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return Go.range(t.length).reverse()},"default":ai}),cu=Go.map({silhouette:function(t){var e,n,r,a=t.length,i=t[0].length,o=[],l=0,s=[];for(n=0;i>n;++n){for(e=0,r=0;a>e;e++)r+=t[e][n][1];r>l&&(l=r),o.push(r)}for(n=0;i>n;++n)s[n]=(l-o[n])/2;return s},wiggle:function(t){var e,n,r,a,i,o,l,s,u,c=t.length,d=t[0],f=d.length,p=[];for(p[0]=s=u=0,n=1;f>n;++n){for(e=0,a=0;c>e;++e)a+=t[e][n][1];for(e=0,i=0,l=d[n][0]-d[n-1][0];c>e;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*l);e>r;++r)o+=(t[r][n][1]-t[r][n-1][1])/l;i+=o*t[e][n][1]}p[n]=s-=a?i/a*l:0,u>s&&(u=s)}for(n=0;f>n;++n)p[n]-=u;return p},expand:function(t){var e,n,r,a=t.length,i=t[0].length,o=1/a,l=[];for(n=0;i>n;++n){for(e=0,r=0;a>e;e++)r+=t[e][n][1];if(r)for(e=0;a>e;e++)t[e][n][1]/=r;else for(e=0;a>e;e++)t[e][n][1]=o}for(n=0;i>n;++n)l[n]=0;return l},zero:ii});Go.layout.histogram=function(){function t(t,i){for(var o,l,s=[],u=t.map(n,this),c=r.call(this,u,i),d=a.call(this,c,u,i),i=-1,f=u.length,p=d.length-1,h=e?1:1/f;++i<p;)o=s[i]=[],o.dx=d[i+1]-(o.x=d[i]),o.y=0;if(p>0)for(i=-1;++i<f;)l=u[i],l>=c[0]&&l<=c[1]&&(o=s[Go.bisect(d,l,1,p)-1],o.y+=h,o.push(t[i]));return s}var e=!0,n=Number,r=di,a=ui;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=ze(e),t):r},t.bins=function(e){return arguments.length?(a="number"==typeof e?function(t){return ci(t,e)}:ze(e),t):a},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},Go.layout.pack=function(){function t(t,i){var o=n.call(this,t,i),l=o[0],s=a[0],u=a[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(l.x=l.y=0,$a(l,function(t){t.r=+c(t.value)}),$a(l,gi),r){var d=r*(e?1:Math.max(2*l.r/s,2*l.r/u))/2;$a(l,function(t){t.r+=d}),$a(l,gi),$a(l,function(t){t.r-=d})}return xi(l,s/2,u/2,e?1:1/Math.max(2*l.r/s,2*l.r/u)),o}var e,n=Go.layout.hierarchy().sort(fi),r=0,a=[1,1];return t.size=function(e){return arguments.length?(a=e,t):a},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},Za(t,n)},Go.layout.tree=function(){function t(t,a){var c=o.call(this,t,a),d=c[0],f=e(d);if($a(f,n),f.parent.m=-f.z,Xa(f,r),u)Xa(d,i);else{var p=d,h=d,v=d;Xa(d,function(t){t.x<p.x&&(p=t),t.x>h.x&&(h=t),t.depth>v.depth&&(v=t)});var g=l(p,h)/2-p.x,m=s[0]/(h.x+l(h,p)/2+g),y=s[1]/(v.depth||1);Xa(d,function(t){t.x=(t.x+g)*m,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var a,i=e.children,o=0,l=i.length;l>o;++o)r.push((i[o]=a={_:i[o],parent:e,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Mi(t);var i=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+l(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+l(t._,r._));t.parent.A=a(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t,e,n){if(e){for(var r,a=t,i=t,o=e,s=a.parent.children[0],u=a.m,c=i.m,d=o.m,f=s.m;o=zi(o),a=_i(a),o&&a;)s=_i(s),i=zi(i),i.a=t,r=o.z+d-a.z-u+l(o._,a._),r>0&&(ki(Ai(o,t,n),t,r),u+=r,c+=r),d+=o.m,u+=a.m,f+=s.m,c+=i.m;o&&!zi(i)&&(i.t=o,i.m+=d-c),a&&!_i(s)&&(s.t=a,s.m+=u-f,n=t)}return n}function i(t){t.x*=s[0],t.y=t.depth*s[1]}var o=Go.layout.hierarchy().sort(null).value(null),l=wi,s=[1,1],u=null;return t.separation=function(e){return arguments.length?(l=e,t):l},t.size=function(e){return arguments.length?(u=null==(s=e)?i:null,t):u?null:s},t.nodeSize=function(e){return arguments.length?(u=null==(s=e)?null:i,t):u?s:null},Za(t,o)},Go.layout.cluster=function(){function t(t,i){var o,l=e.call(this,t,i),s=l[0],u=0;$a(s,function(t){var e=t.children;e&&e.length?(t.x=ji(e),t.y=Ei(e)):(t.x=o?u+=n(t,o):0,t.y=0,o=t)});var c=Si(s),d=Ci(s),f=c.x-n(c,d)/2,p=d.x+n(d,c)/2;return $a(s,a?function(t){t.x=(t.x-s.x)*r[0],t.y=(s.y-t.y)*r[1]}:function(t){t.x=(t.x-f)/(p-f)*r[0],t.y=(1-(s.y?t.y/s.y:1))*r[1]}),l}var e=Go.layout.hierarchy().sort(null).value(null),n=wi,r=[1,1],a=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(a=null==(r=e),t):a?null:r},t.nodeSize=function(e){return arguments.length?(a=null!=(r=e),t):a?r:null},Za(t,e)},Go.layout.treemap=function(){function t(t,e){for(var n,r,a=-1,i=t.length;++a<i;)r=(n=t[a]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var i=n.children;if(i&&i.length){var o,l,s,u=d(n),c=[],f=i.slice(),h=1/0,v="slice"===p?u.dx:"dice"===p?u.dy:"slice-dice"===p?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(f,u.dx*u.dy/n.value),c.area=0;(s=f.length)>0;)c.push(o=f[s-1]),c.area+=o.area,"squarify"!==p||(l=r(c,v))<=h?(f.pop(),h=l):(c.area-=c.pop().area,a(c,v,u,!1),v=Math.min(u.dx,u.dy),c.length=c.area=0,h=1/0);c.length&&(a(c,v,u,!0),c.length=c.area=0),i.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var i,o=d(e),l=r.slice(),s=[];for(t(l,o.dx*o.dy/e.value),s.area=0;i=l.pop();)s.push(i),s.area+=i.area,null!=i.z&&(a(s,i.z?o.dx:o.dy,o,!l.length),s.length=s.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,a=0,i=1/0,o=-1,l=t.length;++o<l;)(n=t[o].area)&&(i>n&&(i=n),n>a&&(a=n));return r*=r,e*=e,r?Math.max(e*a*h/r,r/(e*i*h)):1/0}function a(t,e,n,r){var a,i=-1,o=t.length,l=n.x,u=n.y,c=e?s(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++i<o;)a=t[i],a.x=l,a.y=u,a.dy=c,l+=a.dx=Math.min(n.x+n.dx-l,c?s(a.area/c):0);a.z=!0,a.dx+=n.x+n.dx-l,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++i<o;)a=t[i],a.x=l,a.y=u,a.dx=c,u+=a.dy=Math.min(n.y+n.dy-u,c?s(a.area/c):0);a.z=!1,a.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function i(r){var a=o||l(r),i=a[0];return i.x=0,i.y=0,i.dx=u[0],i.dy=u[1],o&&l.revalue(i),t([i],i.dx*i.dy/i.value),(o?n:e)(i),f&&(o=a),a}var o,l=Go.layout.hierarchy(),s=Math.round,u=[1,1],c=null,d=Ni,f=!1,p="squarify",h=.5*(1+Math.sqrt(5));return i.size=function(t){return arguments.length?(u=t,i):u},i.padding=function(t){function e(e){var n=t.call(i,e,e.depth);return null==n?Ni(e):Oi(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Oi(e,t)}if(!arguments.length)return c;var r;return d=null==(c=t)?Ni:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,i},i.round=function(t){return arguments.length?(s=t?Math.round:Number,i):s!=Number},i.sticky=function(t){return arguments.length?(f=t,o=null,i):f},i.ratio=function(t){return arguments.length?(h=t,i):h},i.mode=function(t){return arguments.length?(p=t+"",i):p},Za(i,l)},Go.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,a;do n=2*Math.random()-1,r=2*Math.random()-1,a=n*n+r*r;while(!a||a>1);return t+e*n*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var t=Go.random.normal.apply(Go,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Go.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},Go.scale={};var du={floor:ke,ceil:ke};Go.scale.linear=function(){return Bi([0,1],[0,1],ha,!1)};var fu={s:1,g:1,p:1,r:1,e:1};Go.scale.log=function(){return Wi(Go.scale.linear().domain([0,1]),10,!0,[1,10])};var pu=Go.format(".0e"),hu={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Go.scale.pow=function(){return Zi(Go.scale.linear(),1,[0,1])},Go.scale.sqrt=function(){return Go.scale.pow().exponent(.5)},Go.scale.ordinal=function(){return $i([],{t:"range",a:[[]]})},Go.scale.category10=function(){return Go.scale.ordinal().range(vu)},Go.scale.category20=function(){return Go.scale.ordinal().range(gu)},Go.scale.category20b=function(){return Go.scale.ordinal().range(mu)},Go.scale.category20c=function(){return Go.scale.ordinal().range(yu)};var vu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ge),gu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ge),mu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ge),yu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ge);Go.scale.quantile=function(){return Ji([],[])},Go.scale.quantize=function(){return Ki(0,1,[0,1])},Go.scale.threshold=function(){return Qi([.5],[0,1])},Go.scale.identity=function(){return to([0,1])},Go.svg={},Go.svg.arc=function(){function t(){var t=e.apply(this,arguments),i=n.apply(this,arguments),o=r.apply(this,arguments)+xu,l=a.apply(this,arguments)+xu,s=(o>l&&(s=o,o=l,l=s),l-o),u=kl>s?"0":"1",c=Math.cos(o),d=Math.sin(o),f=Math.cos(l),p=Math.sin(l);return s>=bu?t?"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"Z":t?"M"+i*c+","+i*d+"A"+i+","+i+" 0 "+u+",1 "+i*f+","+i*p+"L"+t*f+","+t*p+"A"+t+","+t+" 0 "+u+",0 "+t*c+","+t*d+"Z":"M"+i*c+","+i*d+"A"+i+","+i+" 0 "+u+",1 "+i*f+","+i*p+"L0,0Z"}var e=eo,n=no,r=ro,a=ao;return t.innerRadius=function(n){return arguments.length?(e=ze(n),t):e},t.outerRadius=function(e){return arguments.length?(n=ze(e),t):n},t.startAngle=function(e){return arguments.length?(r=ze(e),t):r},t.endAngle=function(e){return arguments.length?(a=ze(e),t):a},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,i=(r.apply(this,arguments)+a.apply(this,arguments))/2+xu;return[Math.cos(i)*t,Math.sin(i)*t]},t};var xu=-Al,bu=Ml-El;Go.svg.line=function(){return io(ke)};var wu=Go.map({linear:oo,"linear-closed":lo,step:so,"step-before":uo,"step-after":co,basis:mo,"basis-open":yo,"basis-closed":xo,bundle:bo,cardinal:ho,"cardinal-open":fo,"cardinal-closed":po,monotone:Ao});wu.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var _u=[0,2/3,1/3,0],zu=[0,1/3,2/3,0],ku=[0,1/6,2/3,1/6];Go.svg.line.radial=function(){var t=io(Eo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},uo.reverse=co,co.reverse=uo,Go.svg.area=function(){return jo(ke)},Go.svg.area.radial=function(){var t=jo(Eo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Go.svg.chord=function(){function t(t,l){var s=e(this,i,t,l),u=e(this,o,t,l);return"M"+s.p0+r(s.r,s.p1,s.a1-s.a0)+(n(s,u)?a(s.r,s.p1,s.r,s.p0):a(s.r,s.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+a(u.r,u.p1,s.r,s.p0))+"Z"}function e(t,e,n,r){var a=e.call(t,n,r),i=l.call(t,a,r),o=s.call(t,a,r)+xu,c=u.call(t,a,r)+xu;return{r:i,a0:o,a1:c,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(c),i*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>kl)+",1 "+e}function a(t,e,n,r){return"Q 0,0 "+r}var i=vr,o=gr,l=So,s=ro,u=ao;return t.radius=function(e){return arguments.length?(l=ze(e),t):l},t.source=function(e){return arguments.length?(i=ze(e),t):i},t.target=function(e){return arguments.length?(o=ze(e),t):o},t.startAngle=function(e){return arguments.length?(s=ze(e),t):s},t.endAngle=function(e){return arguments.length?(u=ze(e),t):u},t},Go.svg.diagonal=function(){function t(t,a){var i=e.call(this,t,a),o=n.call(this,t,a),l=(i.y+o.y)/2,s=[i,{x:i.x,y:l},{x:o.x,y:l},o];return s=s.map(r),"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var e=vr,n=gr,r=Co;return t.source=function(n){return arguments.length?(e=ze(n),t):e},t.target=function(e){return arguments.length?(n=ze(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},Go.svg.diagonal.radial=function(){var t=Go.svg.diagonal(),e=Co,n=t.projection;return t.projection=function(t){return arguments.length?n(No(e=t)):e},t},Go.svg.symbol=function(){function t(t,r){return(Mu.get(e.call(this,t,r))||To)(n.call(this,t,r))}var e=Fo,n=Oo;return t.type=function(n){return arguments.length?(e=ze(n),t):e},t.size=function(e){return arguments.length?(n=ze(e),t):n},t};var Mu=Go.map({circle:To,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Su)),n=e*Su;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/ju),n=e*ju/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ju),n=e*ju/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Go.svg.symbolTypes=Mu.keys();var Au,Eu,ju=Math.sqrt(3),Su=Math.tan(30*Sl),Cu=[],Nu=0;Cu.call=gl.call,Cu.empty=gl.empty,Cu.node=gl.node,Cu.size=gl.size,Go.transition=function(t){return arguments.length?Au?t.transition():t:xl.transition()},Go.transition.prototype=Cu,Cu.select=function(t){var e,n,r,a=this.id,i=[];t=z(t);for(var o=-1,l=this.length;++o<l;){i.push(e=[]);for(var s=this[o],u=-1,c=s.length;++u<c;)(r=s[u])&&(n=t.call(r,r.__data__,u,o))?("__data__"in r&&(n.__data__=r.__data__),Io(n,u,a,r.__transition__[a]),e.push(n)):e.push(null)}return qo(i,a)},Cu.selectAll=function(t){var e,n,r,a,i,o=this.id,l=[];t=k(t);for(var s=-1,u=this.length;++s<u;)for(var c=this[s],d=-1,f=c.length;++d<f;)if(r=c[d]){i=r.__transition__[o],n=t.call(r,r.__data__,d,s),l.push(e=[]);for(var p=-1,h=n.length;++p<h;)(a=n[p])&&Io(a,p,o,i),e.push(a)}return qo(l,o)},Cu.filter=function(t){var e,n,r,a=[];"function"!=typeof t&&(t=q(t));for(var i=0,o=this.length;o>i;i++){a.push(e=[]);for(var n=this[i],l=0,s=n.length;s>l;l++)(r=n[l])&&t.call(r,r.__data__,l,i)&&e.push(r)}return qo(a,this.id)},Cu.tween=function(t,e){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(t):P(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(r){r.__transition__[n].tween.set(t,e)})},Cu.attr=function(t,e){function n(){this.removeAttribute(l)}function r(){this.removeAttributeNS(l.space,l.local)}function a(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(l);return n!==t&&(e=o(n,t),function(t){this.setAttribute(l,e(t))})})}function i(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(l.space,l.local);return n!==t&&(e=o(n,t),function(t){this.setAttributeNS(l.space,l.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var o="transform"==t?Pa:ha,l=Go.ns.qualify(t);return Lo(this,"attr."+t,e,l.local?i:a)},Cu.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(a));return r&&function(t){this.setAttribute(a,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(a.space,a.local));return r&&function(t){this.setAttributeNS(a.space,a.local,r(t))}}var a=Go.ns.qualify(t);return this.tween("attr."+t,a.local?r:n)},Cu.style=function(t,e,n){function r(){this.style.removeProperty(t)}function a(e){return null==e?r:(e+="",function(){var r,a=Jo.getComputedStyle(this,null).getPropertyValue(t);return a!==e&&(r=ha(a,e),function(e){this.style.setProperty(t,r(e),n)})})}var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return Lo(this,"style."+t,e,a)},Cu.styleTween=function(t,e,n){function r(r,a){var i=e.call(this,r,a,Jo.getComputedStyle(this,null).getPropertyValue(t));return i&&function(e){this.style.setProperty(t,i(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},Cu.text=function(t){return Lo(this,"text",t,Po)},Cu.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},Cu.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=Go.ease.apply(Go,arguments)),P(this,function(n){n.__transition__[e].ease=t}))},Cu.delay=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].delay:P(this,"function"==typeof t?function(n,r,a){n.__transition__[e].delay=+t.call(n,n.__data__,r,a)}:(t=+t,function(n){n.__transition__[e].delay=t}))},Cu.duration=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].duration:P(this,"function"==typeof t?function(n,r,a){n.__transition__[e].duration=Math.max(1,t.call(n,n.__data__,r,a))}:(t=Math.max(1,t),function(n){n.__transition__[e].duration=t}))},Cu.each=function(t,e){var n=this.id;if(arguments.length<2){var r=Eu,a=Au;Au=n,P(this,function(e,r,a){Eu=e.__transition__[n],t.call(e,e.__data__,r,a)}),Eu=r,Au=a}else P(this,function(r){var a=r.__transition__[n];(a.event||(a.event=Go.dispatch("start","end"))).on(t,e)});return this},Cu.transition=function(){for(var t,e,n,r,a=this.id,i=++Nu,o=[],l=0,s=this.length;s>l;l++){o.push(t=[]);for(var e=this[l],u=0,c=e.length;c>u;u++)(n=e[u])&&(r=Object.create(n.__transition__[a]),r.delay+=r.duration,Io(n,u,i,r)),t.push(n)}return qo(o,i)},Go.svg.axis=function(){function t(t){t.each(function(){var t,u=Go.select(this),c=this.__chart__||n,d=this.__chart__=n.copy(),f=null==s?d.ticks?d.ticks.apply(d,l):d.domain():s,p=null==e?d.tickFormat?d.tickFormat.apply(d,l):ke:e,h=u.selectAll(".tick").data(f,d),v=h.enter().insert("g",".domain").attr("class","tick").style("opacity",El),g=Go.transition(h.exit()).style("opacity",El).remove(),m=Go.transition(h.order()).style("opacity",1),y=Ti(d),x=u.selectAll(".domain").data([0]),b=(x.enter().append("path").attr("class","domain"),Go.transition(x));v.append("line"),v.append("text");var w=v.select("line"),_=m.select("line"),z=h.select("text").text(p),k=v.select("text"),M=m.select("text");switch(r){case"bottom":t=Bo,w.attr("y2",a),k.attr("y",Math.max(a,0)+o),_.attr("x2",0).attr("y2",a),M.attr("x",0).attr("y",Math.max(a,0)+o),z.attr("dy",".71em").style("text-anchor","middle"),b.attr("d","M"+y[0]+","+i+"V0H"+y[1]+"V"+i);break;case"top":t=Bo,w.attr("y2",-a),k.attr("y",-(Math.max(a,0)+o)),_.attr("x2",0).attr("y2",-a),M.attr("x",0).attr("y",-(Math.max(a,0)+o)),z.attr("dy","0em").style("text-anchor","middle"),b.attr("d","M"+y[0]+","+-i+"V0H"+y[1]+"V"+-i);break;case"left":t=Vo,w.attr("x2",-a),k.attr("x",-(Math.max(a,0)+o)),_.attr("x2",-a).attr("y2",0),M.attr("x",-(Math.max(a,0)+o)).attr("y",0),z.attr("dy",".32em").style("text-anchor","end"),b.attr("d","M"+-i+","+y[0]+"H0V"+y[1]+"H"+-i);break;case"right":t=Vo,w.attr("x2",a),k.attr("x",Math.max(a,0)+o),_.attr("x2",a).attr("y2",0),M.attr("x",Math.max(a,0)+o).attr("y",0),z.attr("dy",".32em").style("text-anchor","start"),b.attr("d","M"+i+","+y[0]+"H0V"+y[1]+"H"+i)}if(d.rangeBand){var A=d,E=A.rangeBand()/2;c=d=function(t){return A(t)+E}}else c.rangeBand?c=d:g.call(t,d);v.call(t,c),m.call(t,d)})}var e,n=Go.scale.linear(),r=Ou,a=6,i=6,o=3,l=[10],s=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Fu?e+"":Ou,t):r},t.ticks=function(){return arguments.length?(l=arguments,t):l},t.tickValues=function(e){return arguments.length?(s=e,t):s},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(a=+e,i=+arguments[n-1],t):a},t.innerTickSize=function(e){return arguments.length?(a=+e,t):a},t.outerTickSize=function(e){return arguments.length?(i=+e,t):i},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Ou="bottom",Fu={top:1,right:1,bottom:1,left:1};Go.svg.brush=function(){function t(i){i.each(function(){var i=Go.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=i.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var l=i.selectAll(".resize").data(h,ke);l.exit().remove(),l.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Tu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),l.style("display",t.empty()?"none":null);var c,d=Go.transition(i),f=Go.transition(o);s&&(c=Ti(s),f.attr("x",c[0]).attr("width",c[1]-c[0]),n(d)),u&&(c=Ti(u),f.attr("y",c[0]).attr("height",c[1]-c[0]),r(d)),e(d)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)]+","+d[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",c[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function r(t){t.select(".extent").attr("y",d[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function a(){function a(){32==Go.event.keyCode&&(j||(y=null,C[0]-=c[1],C[1]-=d[1],j=2),x())}function h(){32==Go.event.keyCode&&2==j&&(C[0]+=c[1],C[1]+=d[1],j=0,x())}function v(){var t=Go.mouse(w),a=!1;b&&(t[0]+=b[0],t[1]+=b[1]),j||(Go.event.altKey?(y||(y=[(c[0]+c[1])/2,(d[0]+d[1])/2]),C[0]=c[+(t[0]<y[0])],C[1]=d[+(t[1]<y[1])]):y=null),A&&g(t,s,0)&&(n(k),a=!0),E&&g(t,u,1)&&(r(k),a=!0),a&&(e(k),z({type:"brush",mode:j?"move":"resize"}))}function g(t,e,n){var r,a,l=Ti(e),s=l[0],u=l[1],h=C[n],v=n?d:c,g=v[1]-v[0];return j&&(s-=h,u-=g+h),r=(n?p:f)?Math.max(s,Math.min(u,t[n])):t[n],j?a=(r+=h)+g:(y&&(h=Math.max(s,Math.min(u,2*y[n]-r))),r>h?(a=r,r=h):a=h),v[0]!=r||v[1]!=a?(n?o=null:i=null,v[0]=r,v[1]=a,!0):void 0}function m(){v(),k.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Go.select("body").style("cursor",null),N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),S(),z({type:"brushend"})}var y,b,w=this,_=Go.select(Go.event.target),z=l.of(w,arguments),k=Go.select(w),M=_.datum(),A=!/^(n|s)$/.test(M)&&s,E=!/^(e|w)$/.test(M)&&u,j=_.classed("extent"),S=H(),C=Go.mouse(w),N=Go.select(Jo).on("keydown.brush",a).on("keyup.brush",h);if(Go.event.changedTouches?N.on("touchmove.brush",v).on("touchend.brush",m):N.on("mousemove.brush",v).on("mouseup.brush",m),k.interrupt().selectAll("*").interrupt(),j)C[0]=c[0]-C[0],C[1]=d[0]-C[1];else if(M){var O=+/w$/.test(M),F=+/^n/.test(M);b=[c[1-O]-C[0],d[1-F]-C[1]],C[0]=c[O],C[1]=d[F]}else Go.event.altKey&&(y=C.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),Go.select("body").style("cursor",_.style("cursor")),z({type:"brushstart"}),v()}var i,o,l=w(t,"brushstart","brush","brushend"),s=null,u=null,c=[0,0],d=[0,0],f=!0,p=!0,h=qu[0];
return t.event=function(t){t.each(function(){var t=l.of(this,arguments),e={x:c,y:d,i:i,j:o},n=this.__chart__||e;this.__chart__=e,Au?Go.select(this).transition().each("start.brush",function(){i=n.i,o=n.j,c=n.x,d=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=va(c,e.x),r=va(d,e.y);return i=o=null,function(a){c=e.x=n(a),d=e.y=r(a),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=e.i,o=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(s=e,h=qu[!s<<1|!u],t):s},t.y=function(e){return arguments.length?(u=e,h=qu[!s<<1|!u],t):u},t.clamp=function(e){return arguments.length?(s&&u?(f=!!e[0],p=!!e[1]):s?f=!!e:u&&(p=!!e),t):s&&u?[f,p]:s?f:u?p:null},t.extent=function(e){var n,r,a,l,f;return arguments.length?(s&&(n=e[0],r=e[1],u&&(n=n[0],r=r[0]),i=[n,r],s.invert&&(n=s(n),r=s(r)),n>r&&(f=n,n=r,r=f),(n!=c[0]||r!=c[1])&&(c=[n,r])),u&&(a=e[0],l=e[1],s&&(a=a[1],l=l[1]),o=[a,l],u.invert&&(a=u(a),l=u(l)),a>l&&(f=a,a=l,l=f),(a!=d[0]||l!=d[1])&&(d=[a,l])),t):(s&&(i?(n=i[0],r=i[1]):(n=c[0],r=c[1],s.invert&&(n=s.invert(n),r=s.invert(r)),n>r&&(f=n,n=r,r=f))),u&&(o?(a=o[0],l=o[1]):(a=d[0],l=d[1],u.invert&&(a=u.invert(a),l=u.invert(l)),a>l&&(f=a,a=l,l=f))),s&&u?[[n,a],[r,l]]:s?[n,r]:u&&[a,l])},t.clear=function(){return t.empty()||(c=[0,0],d=[0,0],i=o=null),t},t.empty=function(){return!!s&&c[0]==c[1]||!!u&&d[0]==d[1]},Go.rebind(t,l,"on")};var Tu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},qu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Lu=es.format=ls.timeFormat,Pu=Lu.utc,Iu=Pu("%Y-%m-%dT%H:%M:%S.%LZ");Lu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Uo:Iu,Uo.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Uo.toString=Iu.toString,es.second=Le(function(t){return new ns(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),es.seconds=es.second.range,es.seconds.utc=es.second.utc.range,es.minute=Le(function(t){return new ns(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),es.minutes=es.minute.range,es.minutes.utc=es.minute.utc.range,es.hour=Le(function(t){var e=t.getTimezoneOffset()/60;return new ns(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),es.hours=es.hour.range,es.hours.utc=es.hour.utc.range,es.month=Le(function(t){return t=es.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),es.months=es.month.range,es.months.utc=es.month.utc.range;var Bu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Vu=[[es.second,1],[es.second,5],[es.second,15],[es.second,30],[es.minute,1],[es.minute,5],[es.minute,15],[es.minute,30],[es.hour,1],[es.hour,3],[es.hour,6],[es.hour,12],[es.day,1],[es.day,2],[es.week,1],[es.month,1],[es.month,3],[es.year,1]],Uu=Lu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Mn]]),Du={range:function(t,e,n){return Go.range(Math.ceil(t/n)*n,+e,n).map(Ro)},floor:ke,ceil:ke};Vu.year=es.year,es.scale=function(){return Do(Go.scale.linear(),Vu,Uu)};var Ru=Vu.map(function(t){return[t[0].utc,t[1]]}),Hu=Pu.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Mn]]);Ru.year=es.year.utc,es.scale.utc=function(){return Do(Go.scale.linear(),Ru,Hu)},Go.text=Me(function(t){return t.responseText}),Go.json=function(t,e){return Ae(t,"application/json",Ho,e)},Go.html=function(t,e){return Ae(t,"text/html",Yo,e)},Go.xml=Me(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(Go):"object"==typeof e&&e.exports?e.exports=Go:this.d3=Go}()},{}],5:[function(t,e){e.exports=t("./lib/heap")},{"./lib/heap":6}],6:[function(t,e){(function(){var t,n,r,a,i,o,l,s,u,c,d,f,p,h,v;r=Math.floor,c=Math.min,n=function(t,e){return e>t?-1:t>e?1:0},u=function(t,e,a,i,o){var l;if(null==a&&(a=0),null==o&&(o=n),0>a)throw new Error("lo must be non-negative");for(null==i&&(i=t.length);i>a;)l=r((a+i)/2),o(e,t[l])<0?i=l:a=l+1;return[].splice.apply(t,[a,a-a].concat(e)),e},o=function(t,e,r){return null==r&&(r=n),t.push(e),h(t,0,t.length-1,r)},i=function(t,e){var r,a;return null==e&&(e=n),r=t.pop(),t.length?(a=t[0],t[0]=r,v(t,0,e)):a=r,a},s=function(t,e,r){var a;return null==r&&(r=n),a=t[0],t[0]=e,v(t,0,r),a},l=function(t,e,r){var a;return null==r&&(r=n),t.length&&r(t[0],e)<0&&(a=[t[0],e],e=a[0],t[0]=a[1],v(t,0,r)),e},a=function(t,e){var a,i,o,l,s,u;for(null==e&&(e=n),l=function(){u=[];for(var e=0,n=r(t.length/2);n>=0?n>e:e>n;n>=0?e++:e--)u.push(e);return u}.apply(this).reverse(),s=[],i=0,o=l.length;o>i;i++)a=l[i],s.push(v(t,a,e));return s},p=function(t,e,r){var a;return null==r&&(r=n),a=t.indexOf(e),-1!==a?(h(t,0,a,r),v(t,a,r)):void 0},d=function(t,e,r){var i,o,s,u,c;if(null==r&&(r=n),o=t.slice(0,e),!o.length)return o;for(a(o,r),c=t.slice(e),s=0,u=c.length;u>s;s++)i=c[s],l(o,i,r);return o.sort(r).reverse()},f=function(t,e,r){var o,l,s,d,f,p,h,v,g,m;if(null==r&&(r=n),10*e<=t.length){if(d=t.slice(0,e).sort(r),!d.length)return d;for(s=d[d.length-1],v=t.slice(e),f=0,h=v.length;h>f;f++)o=v[f],r(o,s)<0&&(u(d,o,0,null,r),d.pop(),s=d[d.length-1]);return d}for(a(t,r),m=[],l=p=0,g=c(e,t.length);g>=0?g>p:p>g;l=g>=0?++p:--p)m.push(i(t,r));return m},h=function(t,e,r,a){var i,o,l;for(null==a&&(a=n),i=t[r];r>e&&(l=r-1>>1,o=t[l],a(i,o)<0);)t[r]=o,r=l;return t[r]=i},v=function(t,e,r){var a,i,o,l,s;for(null==r&&(r=n),i=t.length,s=e,o=t[e],a=2*e+1;i>a;)l=a+1,i>l&&!(r(t[a],t[l])<0)&&(a=l),t[e]=t[a],e=a,a=2*e+1;return t[e]=o,h(t,s,e,r)},t=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=o,t.pop=i,t.replace=s,t.pushpop=l,t.heapify=a,t.nlargest=d,t.nsmallest=f,t.prototype.push=function(t){return o(this.nodes,t,this.cmp)},t.prototype.pop=function(){return i(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return l(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return a(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return p(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),("undefined"!=typeof e&&null!==e?e.exports:void 0)?e.exports=t:window.Heap=t}).call(this)},{}],7:[function(t,e){!function(){"use strict";function t(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function n(t,e,n){var r=e.x,a=e.y,i=n.x-r,o=n.y-a;if(0!==i||0!==o){var l=((t.x-r)*i+(t.y-a)*o)/(i*i+o*o);l>1?(r=n.x,a=n.y):l>0&&(r+=i*l,a+=o*l)}return i=t.x-r,o=t.y-a,i*i+o*o}function r(e,n){for(var r,a=e[0],i=[a],o=1,l=e.length;l>o;o++)r=e[o],t(r,a)>n&&(i.push(r),a=r);return a!==r&&i.push(r),i}function a(t,e){var r,a,i,o,l=t.length,s="undefined"!=typeof Uint8Array?Uint8Array:Array,u=new s(l),c=0,d=l-1,f=[],p=[];for(u[c]=u[d]=1;d;){for(a=0,r=c+1;d>r;r++)i=n(t[r],t[c],t[d]),i>a&&(o=r,a=i);a>e&&(u[o]=1,f.push(c,o,o,d)),d=f.pop(),c=f.pop()}for(r=0;l>r;r++)u[r]&&p.push(t[r]);return p}function i(t,e,n){var i=void 0!==e?e*e:1;return t=n?t:r(t,i),t=a(t,i)}"function"==typeof define&&define.amd?define(function(){return i}):"undefined"!=typeof e?e.exports=i:"undefined"!=typeof self?self.simplify=i:window.simplify=i}()},{}],8:[function(t,e){"use strict";function n(t,e,n,r){this.points=t,this.ids=e,this.dimension=r,this.length=n}function r(t){var e,r,a;if(Array.isArray(t)){if(e=t.length,0===e)return new n(null,null,0,0);r=t[0].length,a=i(c.mallocDouble(e*(r+1)),[e,r+1]),l(t,a.hi(e,r))}else{e=t.shape[0],r=t.shape[1];var p=t.dtype;p="int8"===p||"int16"===p||"int32"===p?"int32":"uint8"===p||"uint8_clamped"===p||"buffer"===p||"uint16"===p||"uint32"===p?"uint32":"float32"===p?"float32":"float64",a=i(c.malloc(e*(r+1)),[e,r+1]),s.assign(a.hi(e,r),t)}for(var h=0;e>h;++h)a.set(h,r,h);for(var v=u.malloc([e,r],t.dtype),g=c.mallocInt32(e),m=0,y=v.data,x=a.data,b=(f.log2(f.nextPow2(e)),o.compile(a.order,!0,a.dtype)),w=[a];e>m;){var _=w.shift(),z=_,k=0|z.shape[0];if(k>1){var M,A=f.log2(m+1)%r,E=d.root(k);M=b(z,E,function(t,e){return t.get(A)-e.get(A)});for(var j=v.index(m,0),S=M.offset,h=0;r>h;++h)y[j++]=x[S++];g[m]=x[S],m+=1,w.push(z.hi(E)),k>2&&w.push(z.lo(E+1))}else{for(var S=z.offset,j=v.index(m,0),h=0;r>h;++h)y[j+h]=x[S++];g[m]=x[S],m+=1}}return c.free(a.data),new n(v,g,e,r)}function a(t){var e=t.p,r=t.i;if(e){for(var a=e.length,o=c.mallocFloat64(a),l=0;a>l;++l)o[l]=e[l];for(var s=r.length,u=c.mallocInt32(s),l=0;s>l;++l)u[l]=r[l];var d=a/s|0;return new n(i(o,[s,d]),u,s,d)}return new n(null,null,0,t.d)}e.exports=r,e.exports.deserialize=a;var i=t("ndarray"),o=t("ndarray-select"),l=t("ndarray-pack"),s=t("ndarray-ops"),u=t("ndarray-scratch"),c=t("typedarray-pool"),d=t("inorder-tree-layout"),f=t("bit-twiddle"),p=t("./lib/heap.js"),h=n.prototype;h.serialize=function(){return this.length>0?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},h.range=function(t,e,n){var r=this.length;if(!(1>r)){for(var a=this.dimension,i=0;a>i;++i)if(e[i]<t[i])return;var o,s=this.points,d=this.ids,p=u.malloc([r,2,a]),h=c.mallocInt32(r),v=p.data,g=s.data,m=1,y=0;for(h[0]=0,l(t,p.pick(0,0)),l(e,p.pick(0,1));m>y;){for(var x=h[y],b=f.log2(x+1)%a,w=p.index(y,0,0),_=p.index(y,1,0),z=s.index(x,0),k=!0,i=0;a>i;++i){var M=g[z+i];if(M<v[w+i]||v[_+i]<M){k=!1;break}}if(k&&(o=n(d[x]),void 0!==o))break;var A=g[z+b],E=v[_+b],j=v[w+b];if(A>=j){var S=2*x+1;if(r>S){h[m]=S;for(var C=p.index(m,0,0),i=0;a>i;++i)v[C+i]=v[w+i];for(var N=p.index(m,1,0),i=0;a>i;++i)v[N+i]=v[_+i];v[N+b]=Math.min(E,A),m+=1}}if(E>=A){var O=2*(x+1);if(r>O){h[m]=O;for(var C=p.index(m,0,0),i=0;a>i;++i)v[C+i]=v[w+i];for(var N=p.index(m,1,0),i=0;a>i;++i)v[N+i]=v[_+i];v[C+b]=Math.max(j,A),m+=1}}y+=1}return u.free(p),c.free(h),o}},h.rnn=function(t,e,n){if(!(0>e)){var r=this.length;if(!(1>r)){var a,i=this.dimension,o=this.points,l=this.ids,s=u.malloc([r,i]),d=c.mallocInt32(r),p=s.data,h=o.data,v=1,g=0,m=e*e;d[0]=0;for(var y=0;i>y;++y)s.set(0,y,0);for(;v>g;){for(var x=d[g],b=o.index(x,0),w=0,y=0;i>y;++y)w+=Math.pow(t[y]-h[b+y],2);if(m>=w&&(a=n(l[x]),void 0!==a))break;for(var _=f.log2(x+1)%i,z=0,k=s.index(g,0),y=0;i>y;++y)y!==_&&(z+=p[k+y]);var M=t[_],A=h[b+_],E=p[k+_],j=E,S=E;A>M?S=Math.max(E,Math.pow(A-M,2)):j=Math.max(E,Math.pow(A-M,2));var C=j+z,N=S+z;if(m>=C){var O=2*x+1;if(r>O){d[v]=O;for(var F=s.index(v,0),y=0;i>y;++y)p[F+y]=p[k+y];p[F+_]=j,v+=1}}if(m>=N){var T=2*(x+1);if(r>T){d[v]=T;for(var F=s.index(v,0),y=0;i>y;++y)p[F+y]=p[k+y];p[F+_]=S,v+=1}}g+=1}return u.free(s),c.free(d),a}}},h.nn=function(t,e){var n=this.length;if(1>n)return-1;if("number"==typeof e){if(0>e)return-1}else e=1/0;var r=this.dimension,a=this.points,i=a.data,o=c.mallocFloat64(r),l=new p(n,r+1),s=l.index,u=l.data;s[0]=0;for(var d=0;r>=d;++d)u[d]=0;l.count+=1;for(var h=-1,v=e;l.count>0&&!(u[0]>=v);){for(var g=s[0],m=a.index(g,0),y=0,d=0;r>d;++d)y+=Math.pow(t[d]-i[m+d],2);v>y&&(v=y,h=g);for(var x=f.log2(g+1)%r,b=0,d=0;r>d;++d){var w=u[d+1];d!==x&&(b+=w),o[d]=w}var _=t[x],z=i[m+x],k=o[x],M=k,A=k;z>_?A=Math.max(k,Math.pow(z-_,2)):M=Math.max(k,Math.pow(z-_,2));var E=M+b,j=A+b;if(l.pop(),v>E){var S=2*g+1;if(n>S){var C=l.count;s[C]=S;var N=C*(r+1);u[N]=E;for(var d=1;r>=d;++d)u[N+d]=o[d-1];u[N+x+1]=M,l.push()}}if(v>j){var O=2*(g+1);if(n>O){var C=l.count;s[C]=O;var N=C*(r+1);u[N]=j;for(var d=1;r>=d;++d)u[N+d]=o[d-1];u[N+x+1]=A,l.push()}}}return c.freeFloat64(o),l.dispose(),0>h?-1:this.ids[h]},h.knn=function(t,e,n){if("number"==typeof n){if(0>n)return[]}else n=1/0;var r=this.length;if(1>r)return[];if("number"==typeof e){if(0>=e)return[];e=0|Math.min(e,r)}else e=r;var a=this.ids,i=this.dimension,o=this.points,l=o.data,s=c.mallocFloat64(i),u=new p(e,1),d=u.index,h=u.data,v=new p(r,i+1),g=v.index,m=v.data;g[0]=0;for(var y=0;i>=y;++y)m[y]=0;v.count+=1;for(var x=n;v.count>0&&!(m[0]>=x);){for(var b=g[0],w=o.index(b,0),_=0,y=0;i>y;++y)_+=Math.pow(t[y]-l[w+y],2);if(x>_){u.count>=e&&u.pop();var z=u.count;d[z]=b,h[z]=-_,u.push(),u.count>=e&&(x=-h[0])}for(var k=f.log2(b+1)%i,M=0,y=0;i>y;++y){var A=m[y+1];y!==k&&(M+=A),s[y]=A}var E=t[k],j=l[w+k],S=s[k],C=S,N=S;j>E?N=Math.max(S,Math.pow(j-E,2)):C=Math.max(S,Math.pow(j-E,2));var O=C+M,F=N+M;if(v.pop(),x>O){var T=2*b+1;if(r>T){var q=v.count;g[q]=T;var L=q*(i+1);m[L]=O;for(var y=1;i>=y;++y)m[L+y]=s[y-1];m[L+k+1]=C,v.push()}}if(x>F){var P=2*(b+1);if(r>P){var q=v.count;g[q]=P;var L=q*(i+1);m[L]=F;for(var y=1;i>=y;++y)m[L+y]=s[y-1];m[L+k+1]=N,v.push()}}}c.freeFloat64(s),v.dispose();for(var I=new Array(u.count),a=this.ids,y=u.count-1;y>=0;--y)I[y]=a[d[0]],u.pop();return u.dispose(),I},h.dispose=function(){c.free(this.points.data),c.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0}},{"./lib/heap.js":9,"bit-twiddle":10,"inorder-tree-layout":11,ndarray:26,"ndarray-ops":13,"ndarray-pack":18,"ndarray-scratch":24,"ndarray-select":25,"typedarray-pool":29}],9:[function(t,e){"use strict";function n(t){return 1&t?t-1>>1:(t>>1)-1}function r(t,e){this.count=0,this.dataSize=e,this.index=a.mallocInt32(t),this.data=a.mallocFloat64(t*e)}e.exports=r;var a=t("typedarray-pool"),i=r.prototype;i.heapSwap=function(t,e){var n=this.data,r=this.index,a=this.dataSize,i=r[t];r[t]=r[e],r[e]=i;for(var o=a*t,l=a*e,s=0;a>s;++s){var u=n[o];n[o]=n[l],n[l]=u,o+=1,l+=1}},i.heapUp=function(t){for(var e=this.dataSize,r=(this.index,this.data),a=r[e*t];t>0;){var i=n(t);if(i>=0){var o=r[e*i];if(o>a){this.heapSwap(t,i),t=i;continue}}break}},i.heapDown=function(t){for(var e=this.dataSize,n=(this.index,this.data),r=this.count,a=n[e*t];;){var i=a,o=2*t+1,l=2*(t+1),s=t;if(r>o){var u=n[e*o];i>u&&(s=o,i=u)}if(r>l){var c=n[e*l];i>c&&(s=l)}if(s===t)break;this.heapSwap(t,s),t=s}},i.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},i.push=function(){this.heapUp(this.count),this.count+=1},i.dispose=function(){a.freeInt32(this.index),a.freeFloat64(this.data)}},{"typedarray-pool":29}],10:[function(t,e,n){"use strict";"use restrict";function r(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var a=32;n.INT_BITS=a,n.INT_MAX=2147483647,n.INT_MIN=-1<<a-1,n.sign=function(t){return(t>0)-(0>t)},n.abs=function(t){var e=t>>a-1;return(t^e)-e},n.min=function(t,e){return e^(t^e)&-(e>t)},n.max=function(t,e){return t^(t^e)&-(e>t)},n.isPow2=function(t){return!(t&t-1||!t)},n.log2=function(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1},n.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},n.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},n.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},n.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var i=new Array(256);!function(t){for(var e=0;256>e;++e){var n=e,r=e,a=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--a;t[e]=r<<a&255}}(i),n.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},n.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},n.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},n.interleave3=function(t,e,n){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t|n<<2},n.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},n.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},{}],11:[function(t,e,n){"use strict";function r(t){var e=(v.nextPow2(t+1)>>>1)-1,n=t-e;return v.nextPow2(n)-1>=e?e:(e>>>1)+n}function a(){return 0}function i(t){return t-1}function o(t,e){if(0>=t)return 0;var n=r(t);return e>n?o(t-n-1,e-n-1):e===n?v.log2(t):o(n,e)}function l(t,e){return Math.max(e-1,0)}function s(t,e){return Math.min(e+1,t-1)}function u(t,e){if(0>=t)return-1;var n=r(t);if(e>n){var a=u(t-n-1,e-n-1);return 0>a?n:a+n+1}if(e===n)return-1;var a=u(n,e);return 0>a?n:a}function c(t,e){if(0>=t)return 0;var n=r(t);return e>n?c(t-n-1,e-n-1)+n+1:e===n?r(e):c(n,e)}function d(t,e){if(0>=t)return 0;var n=r(t);return e>n?d(t-n-1,e-n-1)+n+1:e===n?r(t-n-1)+n+1:d(n,e)}function f(t,e){return 0===o(t,e)}function p(t,e){t|=0,e|=0;for(var n=0;t>1;){var a=r(t);if(e>a)n+=a+1,t-=a+1,e-=a+1;else{if(e===a)break;t=a}}return n}function h(t,e){t|=0,e|=0;for(var n=0;t>1;){var a=r(t);if(e>a)n+=a+1,t-=a+1,e-=a+1;else{if(e===a){n+=t-1;break}t=a}}return n}var v=t("bit-twiddle");n.root=r,n.begin=a,n.end=i,n.height=o,n.prev=l,n.next=s,n.parent=u,n.left=c,n.right=d,n.leaf=f,n.lo=p,n.hi=h},{"bit-twiddle":12}],12:[function(t,e){e.exports=t(10)},{}],13:[function(t,e,n){"use strict";function r(t){if(!t)return l;for(var e=0;e<t.args.length;++e){var n=t.args[e];t.args[e]=0===e?{name:n,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function a(t){return o({args:t.args,pre:r(t.pre),body:r(t.body),post:r(t.proc),funcName:t.funcName})}function i(t){for(var e=[],n=0;n<t.args.length;++n)e.push("a"+n);var r=new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""));return r(a(t))}var o=t("cwise-compiler"),l={body:"",args:[],thisVars:[],localVars:[]},s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in s){var e=s[t];n[t]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),n[t+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:t+"eq"}),n[t+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),n[t+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:t+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in u){var e=u[t];n[t]=i({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:t}),n[t+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in c){var e=c[t];n[t]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),n[t+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),n[t+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var d=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<d.length;++t){var e=d[t];n[e]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),n[e+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var t=0;t<f.length;++t){var e=f[t];n[e]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),n[e+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),n[e+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}}();var p=["atan2","pow"];!function(){for(var t=0;t<p.length;++t){var e=p[t];n[e+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),n[e+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),n[e+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),n[e+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}}(),n.any=o({args:["array"],pre:l,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=o({args:["array"],pre:l,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=o({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=o({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=o({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=o({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=i({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=o({args:["array","array"],pre:l,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":14}],14:[function(t,e){"use strict";function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function r(t){var e=new n;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var i=0;i<r.length;++i){var o=r[i];if("array"===o){if(e.arrayArgs.push(i),e.shimArgs.push("array"+i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)e.scalarArgs.push(i),e.shimArgs.push("scalar"+i);else if("index"===o){if(e.indexArgs.push(i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(e.shapeArgs.push(i),i<e.pre.args.length&&e.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<e.post.args.length&&e.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+r[i]);e.argTypes[i]="offset",e.offsetArgs.push({array:o.array,offset:o.offset}),e.offsetArgIndex.push(i)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,a(e)}var a=t("./lib/thunk.js");e.exports=r},{"./lib/thunk.js":16}],15:[function(t,e){"use strict";function n(t,e,n){var r,a,i=t.length,o=e.arrayArgs.length,l=e.indexArgs.length>0,s=[],u=[],c=0,d=0;for(r=0;i>r;++r)u.push(["i",r,"=0"].join(""));for(a=0;o>a;++a)for(r=0;i>r;++r)d=c,c=t[r],u.push(0===r?["d",a,"s",r,"=t",a,"p",c].join(""):["d",a,"s",r,"=(t",a,"p",c,"-s",d,"*t",a,"p",d,")"].join(""));for(s.push("var "+u.join(",")),r=i-1;r>=0;--r)c=t[r],s.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(s.push(n),r=0;i>r;++r){for(d=c,c=t[r],a=0;o>a;++a)s.push(["p",a,"+=d",a,"s",r].join(""));l&&(r>0&&s.push(["index[",d,"]-=s",d].join("")),s.push(["++index[",c,"]"].join(""))),s.push("}")}return s.join("\n")}function r(t,e,r,a){for(var i=e.length,o=r.arrayArgs.length,l=r.blockSize,s=r.indexArgs.length>0,u=[],c=0;o>c;++c)u.push(["var offset",c,"=p",c].join(""));for(var c=t;i>c;++c)u.push(["for(var j"+c+"=SS[",e[c],"]|0;j",c,">0;){"].join("")),u.push(["if(j",c,"<",l,"){"].join("")),u.push(["s",e[c],"=j",c].join("")),u.push(["j",c,"=0"].join("")),u.push(["}else{s",e[c],"=",l].join("")),u.push(["j",c,"-=",l,"}"].join("")),s&&u.push(["index[",e[c],"]=j",c].join(""));for(var c=0;o>c;++c){for(var d=["offset"+c],f=t;i>f;++f)d.push(["j",f,"*t",c,"p",e[f]].join(""));u.push(["p",c,"=(",d.join("+"),")"].join(""))}u.push(n(e,r,a));for(var c=t;i>c;++c)u.push("}");return u.join("\n")}function a(t){for(var e=0,n=t[0].length;n>e;){for(var r=1;r<t.length;++r)if(t[r][e]!==t[0][e])return e;++e}return e}function i(t,e,n){for(var r=t.body,a=[],i=[],o=0;o<t.args.length;++o){var l=t.args[o];if(!(l.count<=0)){var s=new RegExp(l.name,"g"),u="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var d=e.offsetArgIndex.indexOf(o),f=e.offsetArgs[d];c=f.array,u="+q"+d;case"array":u="p"+c+u;var p="l"+o,h="a"+c;1===l.count?"generic"===n[c]?l.lvalue?(a.push(["var ",p,"=",h,".get(",u,")"].join("")),r=r.replace(s,p),i.push([h,".set(",u,",",p,")"].join(""))):r=r.replace(s,[h,".get(",u,")"].join("")):r=r.replace(s,[h,"[",u,"]"].join("")):"generic"===n[c]?(a.push(["var ",p,"=",h,".get(",u,")"].join("")),r=r.replace(s,p),l.lvalue&&i.push([h,".set(",u,",",p,")"].join(""))):(a.push(["var ",p,"=",h,"[",u,"]"].join("")),r=r.replace(s,p),l.lvalue&&i.push([h,"[",u,"]=",p].join("")));
break;case"scalar":r=r.replace(s,"Y"+e.scalarArgs.indexOf(o));break;case"index":r=r.replace(s,"index");break;case"shape":r=r.replace(s,"shape")}}}return[a.join("\n"),r,i.join("\n")].join("\n").trim()}function o(t){for(var e=new Array(t.length),n=!0,r=0;r<t.length;++r){var a=t[r],i=a.match(/\d+/);i=i?i[0]:"",e[r]=0===a.charAt(0)?"u"+a.charAt(1)+i:a.charAt(0)+i,r>0&&(n=n&&e[r]===e[r-1])}return n?e[0]:e.join("")}function l(t,e){for(var l=0|e[1].length,u=new Array(t.arrayArgs.length),c=new Array(t.arrayArgs.length),d=["SS"],f=["'use strict'"],p=[],h=0;l>h;++h)p.push(["s",h,"=SS[",h,"]"].join(""));for(var v=0;v<t.arrayArgs.length;++v){d.push("a"+v),d.push("t"+v),d.push("p"+v),c[v]=e[2*v],u[v]=e[2*v+1];for(var h=0;l>h;++h)p.push(["t",v,"p",h,"=t",v,"[",h,"]"].join(""))}for(var v=0;v<t.scalarArgs.length;++v)d.push("Y"+v);if(t.shapeArgs.length>0&&p.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var g=new Array(l),v=0;l>v;++v)g[v]="0";p.push(["index=[",g.join(","),"]"].join(""))}for(var v=0;v<t.offsetArgs.length;++v){for(var m=t.offsetArgs[v],y=[],h=0;h<m.offset.length;++h)0!==m.offset[h]&&y.push(1===m.offset[h]?["t",m.array,"p",h].join(""):[m.offset[h],"*t",m.array,"p",h].join(""));p.push(0===y.length?"q"+v+"=0":["q",v,"=",y.join("+")].join(""))}var x=s([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));p=p.concat(x),f.push("var "+p.join(","));for(var v=0;v<t.arrayArgs.length;++v)f.push("p"+v+"|=0");t.pre.body.length>3&&f.push(i(t.pre,t,c));var b=i(t.body,t,c),w=a(u);f.push(l>w?r(w,u[0],t,b):n(u[0],t,b)),t.post.body.length>3&&f.push(i(t.post,t,c)),t.debug&&console.log("Generated cwise routine for ",e,":\n\n",f.join("\n"));var _=[t.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",w,o(c)].join(""),z=new Function(["function ",_,"(",d.join(","),"){",f.join("\n"),"} return ",_].join(""));return z()}var s=t("uniq");e.exports=l},{uniq:17}],16:[function(t,e){"use strict";function n(t){var e=["'use strict'","var CACHED={}"],n=[],a=t.funcName+"_cwise_thunk";e.push(["return function ",a,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],o=[],l=[["array",t.arrayArgs[0],".shape"].join("")],s=0;s<t.arrayArgs.length;++s){var u=t.arrayArgs[s];n.push(["t",u,"=array",u,".dtype,","r",u,"=array",u,".order"].join("")),i.push("t"+u),i.push("r"+u),o.push("t"+u),o.push("r"+u+".join()"),l.push("array"+u+".data"),l.push("array"+u+".stride"),l.push("array"+u+".offset|0")}for(var s=0;s<t.scalarArgs.length;++s)l.push("scalar"+t.scalarArgs[s]);n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),e.push("var "+n.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",l.join(","),")}"].join("")),t.debug&&console.log("Generated thunk:",e.join("\n"));var c=new Function("compile",e.join("\n"));return c(r.bind(void 0,t))}var r=t("./compile.js");e.exports=n},{"./compile.js":15}],17:[function(t,e){"use strict";function n(t,e){for(var n=1,r=t.length,a=t[0],i=t[0],o=1;r>o;++o)if(i=a,a=t[o],e(a,i)){if(o===n){n++;continue}t[n++]=a}return t.length=n,t}function r(t){for(var e=1,n=t.length,r=t[0],a=t[0],i=1;n>i;++i,a=r)if(a=r,r=t[i],r!==a){if(i===e){e++;continue}t[e++]=r}return t.length=e,t}function a(t,e,a){return 0===t.length?t:e?(a||t.sort(e),n(t,e)):(a||t.sort(),r(t))}e.exports=a},{}],18:[function(t,e){"use strict";var n=t("ndarray"),r=t("./doConvert.js");e.exports=function(t,e){for(var a=[],i=t,o=1;i instanceof Array;)a.push(i.length),o*=i.length,i=i[0];return 0===a.length?n():(e||(e=n(new Float64Array(o),a)),r(e,t),e)}},{"./doConvert.js":19,ndarray:26}],19:[function(t,e){e.exports=t("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":20}],20:[function(t,e){"use strict";function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function r(t){var e=new n;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r.slice(0);for(var i=0;i<r.length;++i){var o=r[i];if("array"===o){if(e.arrayArgs.push(i),e.shimArgs.push("array"+i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)e.scalarArgs.push(i),e.shimArgs.push("scalar"+i);else if("index"===o){if(e.indexArgs.push(i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(e.shapeArgs.push(i),i<e.pre.args.length&&e.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<e.post.args.length&&e.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+r[i]);e.argTypes[i]="offset",e.offsetArgs.push({array:o.array,offset:o.offset}),e.offsetArgIndex.push(i)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,a(e)}var a=t("./lib/thunk.js");e.exports=r},{"./lib/thunk.js":22}],21:[function(t,e){"use strict";function n(t,e,n){var r,a,i=t.length,o=e.arrayArgs.length,l=e.indexArgs.length>0,s=[],u=[],c=0,d=0;for(r=0;i>r;++r)u.push(["i",r,"=0"].join(""));for(a=0;o>a;++a)for(r=0;i>r;++r)d=c,c=t[r],u.push(0===r?["d",a,"s",r,"=t",a,"[",c,"]"].join(""):["d",a,"s",r,"=(t",a,"[",c,"]-s",d,"*t",a,"[",d,"])"].join(""));for(s.push("var "+u.join(",")),r=i-1;r>=0;--r)c=t[r],s.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(s.push(n),r=0;i>r;++r){for(d=c,c=t[r],a=0;o>a;++a)s.push(["p",a,"+=d",a,"s",r].join(""));l&&(r>0&&s.push(["index[",d,"]-=s",d].join("")),s.push(["++index[",c,"]"].join(""))),s.push("}")}return s.join("\n")}function r(t,e,r,a){for(var i=e.length,o=r.arrayArgs.length,l=r.blockSize,s=r.indexArgs.length>0,u=[],c=0;o>c;++c)u.push(["var offset",c,"=p",c].join(""));for(var c=t;i>c;++c)u.push(["for(var j"+c+"=SS[",e[c],"]|0;j",c,">0;){"].join("")),u.push(["if(j",c,"<",l,"){"].join("")),u.push(["s",e[c],"=j",c].join("")),u.push(["j",c,"=0"].join("")),u.push(["}else{s",e[c],"=",l].join("")),u.push(["j",c,"-=",l,"}"].join("")),s&&u.push(["index[",e[c],"]=j",c].join(""));for(var c=0;o>c;++c){for(var d=["offset"+c],f=t;i>f;++f)d.push(["j",f,"*t",c,"[",e[f],"]"].join(""));u.push(["p",c,"=(",d.join("+"),")"].join(""))}u.push(n(e,r,a));for(var c=t;i>c;++c)u.push("}");return u.join("\n")}function a(t){for(var e=0,n=t[0].length;n>e;){for(var r=1;r<t.length;++r)if(t[r][e]!==t[0][e])return e;++e}return e}function i(t,e,n){for(var r=t.body,a=[],i=[],o=0;o<t.args.length;++o){var l=t.args[o];if(!(l.count<=0)){var s=new RegExp(l.name,"g"),u="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var d=e.offsetArgIndex.indexOf(o),f=e.offsetArgs[d];c=f.array,u="+q"+d;case"array":u="p"+c+u;var p="l"+o,h="a"+c;1===l.count?"generic"===n[c]?l.lvalue?(a.push(["var ",p,"=",h,".get(",u,")"].join("")),r=r.replace(s,p),i.push([h,".set(",u,",",p,")"].join(""))):r=r.replace(s,[h,".get(",u,")"].join("")):r=r.replace(s,[h,"[",u,"]"].join("")):"generic"===n[c]?(a.push(["var ",p,"=",h,".get(",u,")"].join("")),r=r.replace(s,p),l.lvalue&&i.push([h,".set(",u,",",p,")"].join(""))):(a.push(["var ",p,"=",h,"[",u,"]"].join("")),r=r.replace(s,p),l.lvalue&&i.push([h,"[",u,"]=",p].join("")));break;case"scalar":r=r.replace(s,"Y"+e.scalarArgs.indexOf(o));break;case"index":r=r.replace(s,"index");break;case"shape":r=r.replace(s,"shape")}}}return[a.join("\n"),r,i.join("\n")].join("\n").trim()}function o(t){for(var e=new Array(t.length),n=!0,r=0;r<t.length;++r){var a=t[r],i=a.match(/\d+/);i=i?i[0]:"",e[r]=0===a.charAt(0)?"u"+a.charAt(1)+i:a.charAt(0)+i,r>0&&(n=n&&e[r]===e[r-1])}return n?e[0]:e.join("")}function l(t,e){for(var l=0|e[1].length,u=new Array(t.arrayArgs.length),c=new Array(t.arrayArgs.length),d=["SS"],f=["'use strict'"],p=[],h=0;l>h;++h)p.push(["s",h,"=SS[",h,"]"].join(""));for(var v=0;v<t.arrayArgs.length;++v)d.push("a"+v),d.push("t"+v),d.push("p"+v),c[v]=e[2*v],u[v]=e[2*v+1];for(var v=0;v<t.scalarArgs.length;++v)d.push("Y"+v);if(t.shapeArgs.length>0&&p.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var g=new Array(l),v=0;l>v;++v)g[v]="0";p.push(["index=[",g.join(","),"]"].join(""))}for(var v=0;v<t.offsetArgs.length;++v){for(var m=t.offsetArgs[v],y=[],h=0;h<m.offset.length;++h)0!==m.offset[h]&&y.push(1===m.offset[h]?["t",m.array,"[",h,"]"].join(""):[m.offset[h],"*t",m.array,"[",h,"]"].join(""));p.push(0===y.length?"q"+v+"=0":["q",v,"=(",y.join("+"),")|0"].join(""))}var x=s([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));p=p.concat(x),f.push("var "+p.join(","));for(var v=0;v<t.arrayArgs.length;++v)f.push("p"+v+"|=0");t.pre.body.length>3&&f.push(i(t.pre,t,c));var b=i(t.body,t,c),w=a(u);f.push(l>w?r(w,u[0],t,b):n(u[0],t,b)),t.post.body.length>3&&f.push(i(t.post,t,c)),t.debug&&console.log("Generated cwise routine for ",e,":\n\n",f.join("\n"));var _=[t.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",w,o(c)].join(""),z=new Function(["function ",_,"(",d.join(","),"){",f.join("\n"),"} return ",_].join(""));return z()}var s=t("uniq");e.exports=l},{uniq:23}],22:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./compile.js":21}],23:[function(t,e){"use strict";function n(t,e){for(var n=1,r=t.length,a=t[0],i=t[0],o=1;r>o;++o)if(i=a,a=t[o],e(a,i)){if(o===n){n++;continue}t[n++]=a}return t.length=n,t}function r(t){for(var e=1,n=t.length,r=t[0],a=t[0],i=1;n>i;++i,a=r)if(a=r,r=t[i],r!==a){if(i===e){e++;continue}t[e++]=r}return t.length=e,t}function a(t,e,a){return 0===t.length?[]:e?(a||t.sort(e),n(t,e)):(a||t.sort(),r(t))}e.exports=a},{}],24:[function(t,e,n){"use strict";function r(t){var e=t.dtype;("generic"===e||"array"===e)&&(e="double");var n=u.malloc(t.size,e),r=l(n,t.shape);return s.assign(r,t),r}function a(t,e){e||(e="double");for(var n=1,r=new Array(t.length),a=t.length-1;a>=0;--a)r[a]=n,n*=t[a];return l(u.malloc(n,e),t,r,0)}function i(t){"generic"!==t.dtype&&"array"!==t.dtype&&u.free(t.data)}function o(t,e){e||(e="double");for(var n=1,r=new Array(t.length),a=t.length-1;a>=0;--a)r[a]=n,n*=t[a];for(var i=u.malloc(n,e),a=0;n>a;++a)i[a]=0;return l(i,t,r,0)}var l=t("ndarray"),s=t("ndarray-ops"),u=t("typedarray-pool");n.clone=r,n.malloc=a,n.free=i,n.zeros=o},{ndarray:26,"ndarray-ops":13,"typedarray-pool":29}],25:[function(t,e){"use strict";function n(t){return"s"+t}function r(t){return"t"+t}function a(t){return"u"+t}function i(t){return"v"+t}function o(t){return"i"+t}function l(t){return"p"+t}function s(t){return"x"+t}function u(t){var e=t.slice();return e.splice(t.indexOf(0),1),e.unshift(0),e}function c(t,e,c){function d(a,u,c){if(e)A.push(l(0),".offset=",m,"+",r(t[0]),"*(",u,");",l(1),".offset=",m,"+",r(t[0]),"*(",c,");",a,"=",v,"(",l(0),",",l(1),");");else{A.push(s(0),"=",m,"+",r(0),"*(",u,");",s(1),"=",m,"+",r(0),"*(",c,");"),z>1&&A.push("_cmp:");for(var d=z-1;d>0;--d)A.push("for(",o(d),"=0;",o(d),"<",n(d),";",o(d),"++){");k?A.push(a,"=",g,".get(",s(0),")-",g,".get(",s(1),");"):A.push(a,"=",g,"[",s(0),"]-",g,"[",s(1),"];"),z>1&&A.push("if(",a,")break _cmp;");for(var d=1;z>d;++d)A.push(s(0),"+=",i(d),";",s(1),"+=",i(d),"}")}}function f(e,i){A.push(s(0),"=",m,"+",r(t[0]),"*(",e,");",s(1),"=",m,"+",r(t[0]),"*(",i,");");for(var l=z-1;l>0;--l)A.push("for(",o(t[l]),"=0;",o(t[l]),"<",n(t[l]),";",o(t[l]),"++){");k?A.push(x,"=",g,".get(",s(0),");",g,".set(",s(0),",",g,".get(",s(1),"));",g,".set(",s(1),",",x,");"):A.push(x,"=",g,"[",s(0),"];",g,"[",s(0),"]=",g,"[",s(1),"];",g,"[",s(1),"]=",x,";");for(var l=1;z>l;++l)A.push(s(0),"+=",a(t[l]),";",s(1),"+=",a(t[l]),"}")}t=u(t);var z=t.length,k="generic"===c,M="ndSelect"+c+t.join("_")+"_"+(e?"cmp":"lex"),A=[],E=[p,h];e&&E.push(v);for(var j=[g+"="+p+".data",m+"="+p+".offset|0",y+"=Math.random",x],S=0;2>S;++S)j.push(s(S)+"=0");for(var S=0;z>S;++S)j.push(n(S)+"="+p+".shape["+S+"]|0",r(S)+"="+p+".stride["+S+"]|0",o(S)+"=0");for(var S=1;z>S;++S)z-1>S?j.push(i(S)+"=("+r(S)+"-"+n(S+1)+"*"+r(S+1)+")|0",a(t[S])+"=("+r(t[S])+"-"+n(t[S+1])+"*"+r(t[S+1])+")|0"):j.push(i(S)+"="+r(S),a(t[S])+"="+r(t[S]));if(e)for(var S=0;2>S;++S)j.push(l(S)+"="+p+".pick(0)");j.push(_+"=0",b+"=0",w+"="+n(t[0])+"-1"),A.push("while(",b,"<",w,"){",_,"=(",y,"()*(",w,"-",b,"+1)+",b,")|0;"),f(_,w),A.push(_,"=",b,";","for(",o(0),"=",b,";",o(0),"<",w,";",o(0),"++){"),d(x,o(0),w),A.push("if(",x,"<0){"),f(_,o(0)),A.push(_,"++;"),A.push("}}"),f(_,w),A.push("if(",_,"===",h,"){",b,"=",_,";","break;","}else if(",h,"<",_,"){",w,"=",_,"-1;","}else{",b,"=",_,"+1;","}","}"),e?A.push(l(0),".offset=",m,"+",b,"*",r(0),";","return ",l(0),";"):A.push("return ",p,".pick(",b,");");var C=["'use strict';function ",M,"(",E,"){","var ",j.join(),";",A.join(""),"};return ",M].join(""),N=new Function(C);return N()}function d(t,e,n){var r=t.join()+e+n,a=z[r];return a?a:z[r]=c(t,e,n)}function f(t,e,n){if(e|=0,0===t.dimension||t.shape[0]<=e||0>e)return null;var r=!!n,a=d(t.order,r,t.dtype);return r?a(t,e,n):a(t,e)}e.exports=f,e.exports.compile=d;var p="a",h="K",v="C",g="d",m="o",y="R",x="T",b="L",w="H",_="X",z={}},{}],26:[function(t,e){(function(n){function r(t,e){return t[0]-e[0]}function a(){var t,e=this.stride,n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(e[t]),t];n.sort(r);var a=new Array(n.length);for(t=0;t<a.length;++t)a[t]=n[t][1];return a}function i(t,e){var n=["View",e,"d",t].join("");0>e&&(n="View_Nil"+t);var r="generic"===t;if(-1===e){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",o=new Function(i);return o()}if(0===e){var i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",o=new Function("TrivialArray",i);return o(f[t][0])}var i=["'use strict'"],l=s(e),c=l.map(function(t){return"i"+t}),d="this.offset+"+l.map(function(t){return"this._stride"+t+"*i"+t}).join("+");i.push("function "+n+"(a,"+l.map(function(t){return"b"+t}).join(",")+","+l.map(function(t){return"c"+t}).join(",")+",d){this.data=a");for(var p=0;e>p;++p)i.push("this._shape"+p+"=b"+p+"|0");for(var p=0;e>p;++p)i.push("this._stride"+p+"=c"+p+"|0");i.push("this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e);var h="VStride"+e+"d"+t,v="VShape"+e+"d"+t,g={stride:h,shape:v};for(var m in g){var y=g[m];i.push("function "+y+"(v) {this._v=v} var aproto="+y+".prototype","aproto.length="+e);for(var x=[],p=0;e>p;++p)x.push(["this._v._",m,p].join(""));i.push("aproto.toJSON=function "+y+"_toJSON(){return ["+x.join(",")+"]}","aproto.valueOf=aproto.toString=function "+y+"_toString(){return ["+x.join(",")+"].join()}");for(var p=0;e>p;++p)i.push("Object.defineProperty(aproto,"+p+",{get:function(){return this._v._"+m+p+"},set:function(v){return this._v._"+m+p+"=v|0},enumerable:true})");for(var p=0;p<u.length;++p)u[p]in Array.prototype&&i.push("aproto."+u[p]+"=Array.prototype."+u[p]);i.push(["Object.defineProperty(proto,'",m,"',{get:function ",y,"_get(){return new ",y,"(this)},set: function ",y,"_set(v){"].join(""));for(var p=0;e>p;++p)i.push("this._"+m+p+"=v["+p+"]|0");i.push("return v}})")}i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+l.map(function(t){return"this._shape"+t}).join("*"),"}})"),1===e?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),4>e?(i.push("function "+n+"_order(){"),2===e?i.push("return (Math.abs(this._stride0)>Math.abs(this._stride1))?[1,0]:[0,1]}})"):3===e&&i.push("var s0=Math.abs(this._stride0),s1=Math.abs(this._stride1),s2=Math.abs(this._stride2);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),i.push(r?"return this.data.set("+d+",v)}":"return this.data["+d+"]=v}"),i.push("proto.get=function "+n+"_get("+c.join(",")+"){"),i.push(r?"return this.data.get("+d+")}":"return this.data["+d+"]}"),i.push("proto.index=function "+n+"_index(",c.join(),"){return "+d+"}"),i.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+l.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this._shape",t,":i",t,"|0"].join("")}).join(",")+","+l.map(function(t){return"this._stride"+t}).join(",")+",this.offset)}");var b=l.map(function(t){return"a"+t+"=this._shape"+t}),w=l.map(function(t){return"c"+t+"=this._stride"+t});i.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+b.join(",")+","+w.join(","));for(var p=0;e>p;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){d=i"+p+"|0;b+=c"+p+"*d;a"+p+"-=d}");i.push("return new "+n+"(this.data,"+l.map(function(t){return"a"+t}).join(",")+","+l.map(function(t){return"c"+t}).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+l.map(function(t){return"a"+t+"=this._shape"+t}).join(",")+","+l.map(function(t){return"b"+t+"=this._stride"+t}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var p=0;e>p;++p)i.push("if(typeof i"+p+"==='number'){d=i"+p+"|0;if(d<0){c+=b"+p+"*(a"+p+"-1);a"+p+"=ceil(-a"+p+"/d)}else{a"+p+"=ceil(a"+p+"/d)}b"+p+"*=d}");i.push("return new "+n+"(this.data,"+l.map(function(t){return"a"+t}).join(",")+","+l.map(function(t){return"b"+t}).join(",")+",c)}");for(var _=new Array(e),z=new Array(e),p=0;e>p;++p)_[p]="a[i"+p+"]",z[p]="b[i"+p+"]";i.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+_.join(",")+","+z.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var p=0;e>p;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){c=(c+this._stride"+p+"*i"+p+")|0}else{a.push(this._shape"+p+");b.push(this._stride"+p+")}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+l.map(function(t){return"shape["+t+"]"}).join(",")+","+l.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",i.join("\n"));return o(f[t],a)}function o(t){if(d&&n.isBuffer(t))return"buffer";if(c)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}function l(t,e,n,r){if(void 0===t){var a=f.array[0];return a([])}"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var l=e.length;if(void 0===n){n=new Array(l);for(var s=l-1,u=1;s>=0;--s)n[s]=u,u*=e[s]}if(void 0===r){r=0;for(var s=0;l>s;++s)n[s]<0&&(r-=(e[s]-1)*n[s])}for(var c=o(t),d=f[c];d.length<=l+1;)d.push(i(c,d.length-1));var a=d[l+1];return a(t,e,n,r)}var s=t("iota-array"),u=["concat","join","slice","toString","indexOf","lastIndexOf","forEach","every","some","filter","map","reduce","reduceRight"],c="undefined"!=typeof Float64Array,d="undefined"!=typeof n,f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=l}).call(this,t("buffer").Buffer)},{buffer:1,"iota-array":27}],27:[function(t,e){"use strict";function n(t){for(var e=new Array(t),n=0;t>n;++n)e[n]=n;return e}e.exports=n},{}],28:[function(t,e){"use strict";function n(t,e,r){var a=0|t[r];if(0>=a)return[];var i,o=new Array(a);if(r===t.length-1)for(i=0;a>i;++i)o[i]=e;else for(i=0;a>i;++i)o[i]=n(t,e,r+1);return o}function r(t,e){var n,r;for(n=new Array(t),r=0;t>r;++r)n[r]=e;return n}function a(t,e){switch("undefined"==typeof e&&(e=0),typeof t){case"number":if(t>0)return r(0|t,e);break;case"object":if("number"==typeof t.length)return n(t,e,0)}return[]}e.exports=a},{}],29:[function(t,e,n){(function(e,r){var a=t("bit-twiddle"),i=t("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var o="undefined"!=typeof Uint8ClampedArray,l=e.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=i([32,0])),l.BUFFER||(l.BUFFER=i([32,0]));var s=l.UINT8,u=l.UINT16,c=l.UINT32,d=l.INT8,f=l.INT16,p=l.INT32,h=l.FLOAT,v=l.DOUBLE,g=l.DATA,m=l.UINT8C,y=l.BUFFER;n.free=function(t){var e=0|t.length,n=a.log2(e);if(r.isBuffer(t))y[n].push(t);else switch(Object.prototype.toString.call(t)){case"[object Uint8Array]":s[n].push(t);break;case"[object Uint16Array]":u[n].push(t);break;case"[object Uint32Array]":c[n].push(t);break;case"[object Int8Array]":d[n].push(t);break;case"[object Int16Array]":f[n].push(t);break;case"[object Int32Array]":p[n].push(t);break;case"[object Uint8ClampedArray]":m[n].push(t);break;case"[object Float32Array]":h[n].push(t);break;case"[object Float64Array]":v[n].push(t);break;case"[object ArrayBuffer]":g[n].push(t);break;default:throw new Error("typedarray-pool: Unspecified array type")}},n.freeUint8=function(t){s[a.log2(t.length)].push(t)},n.freeUint16=function(t){u[a.log2(t.length)].push(t)},n.freeUint32=function(t){c[a.log2(t.length)].push(t)},n.freeInt8=function(t){d[a.log2(t.length)].push(t)},n.freeInt16=function(t){f[a.log2(t.length)].push(t)},n.freeInt32=function(t){p[a.log2(t.length)].push(t)},n.freeFloat32=n.freeFloat=function(t){h[a.log2(t.length)].push(t)},n.freeFloat64=n.freeDouble=function(t){v[a.log2(t.length)].push(t)},n.freeArrayBuffer=function(t){g[a.log2(t.length)].push(t)},n.freeUint8Clamped=o?function(t){m[a.log2(t.length)].push(t)}:n.freeUint8,n.freeBuffer=function(t){y[a.log2(t.length)].push(t)},n.malloc=function(t,e){t=a.nextPow2(t);var n=a.log2(t);if(void 0===e||"arraybuffer"===e){var i=g[n];if(i.length>0){var l=i[i.length-1];return i.pop(),l}return new ArrayBuffer(t)}switch(e){case"uint8":var x=s[n];return x.length>0?x.pop():new Uint8Array(t);case"uint16":var b=u[n];return b.length>0?b.pop():new Uint16Array(t);case"uint32":var w=c[n];return w.length>0?w.pop():new Uint32Array(t);case"int8":var _=d[n];return _.length>0?_.pop():new Int8Array(t);case"int16":var z=f[n];return z.length>0?z.pop():new Int16Array(t);case"int32":var k=p[n];return k.length>0?k.pop():new Int32Array(t);case"float":case"float32":var M=h[n];return M.length>0?M.pop():new Float32Array(t);case"double":case"float64":var A=v[n];return A.length>0?A.pop():new Float64Array(t);case"uint8_clamped":if(o){var E=m[n];return E.length>0?E.pop():new Uint8ClampedArray(t)}var x=s[n];return x.length>0?x.pop():new Uint8Array(t);case"buffer":var j=y[n];return j.length>0?j.pop():new r(t);default:return null}return null},n.mallocUint8=function(t){t=a.nextPow2(t);var e=a.log2(t),n=s[e];return n.length>0?n.pop():new Uint8Array(t)},n.mallocUint16=function(t){t=a.nextPow2(t);var e=a.log2(t),n=u[e];return n.length>0?n.pop():new Uint16Array(t)},n.mallocUint32=function(t){t=a.nextPow2(t);var e=a.log2(t),n=c[e];return n.length>0?n.pop():new Uint32Array(t)},n.mallocInt8=function(t){t=a.nextPow2(t);var e=a.log2(t),n=d[e];return n.length>0?n.pop():new Int8Array(t)},n.mallocInt16=function(t){t=a.nextPow2(t);var e=a.log2(t),n=f[e];return n.length>0?n.pop():new Int16Array(t)},n.mallocInt32=function(t){t=a.nextPow2(t);var e=a.log2(t),n=p[e];return n.length>0?n.pop():new Int32Array(t)},n.mallocFloat32=n.mallocFloat=function(t){t=a.nextPow2(t);var e=a.log2(t),n=h[e];return n.length>0?n.pop():new Float32Array(t)},n.mallocFloat64=n.mallocDouble=function(t){t=a.nextPow2(t);var e=a.log2(t),n=v[e];return n.length>0?n.pop():new Float64Array(t)},n.mallocArrayBuffer=function(t){t=a.nextPow2(t);var e=a.log2(t),n=g[e];return n.length>0?n.pop():new ArrayBuffer(t)},n.mallocUint8Clamped=o?function(t){t=a.nextPow2(t);var e=a.log2(t),n=m[e];return n.length>0?n.pop():new Uint8ClampedArray(t)}:n.mallocUint8,n.mallocBuffer=function(t){t=a.nextPow2(t);var e=a.log2(t),n=y[e];return n.length>0?n.pop():new r(t)},n.clearCache=function(){for(var t=0;32>t;++t)s[t].length=0,u[t].length=0,c[t].length=0,d[t].length=0,f[t].length=0,p[t].length=0,h[t].length=0,v[t].length=0,g[t].length=0,m[t].length=0,y[t].length=0}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"bit-twiddle":10,buffer:1,dup:28}],30:[function(t,e){var n=e.exports=t("./topojson");n.topology=t("./lib/topojson/topology"),n.simplify=t("./lib/topojson/simplify"),n.clockwise=t("./lib/topojson/clockwise"),n.filter=t("./lib/topojson/filter"),n.prune=t("./lib/topojson/prune"),n.stitch=t("./lib/topojson/stitch"),n.scale=t("./lib/topojson/scale")},{"./lib/topojson/clockwise":33,"./lib/topojson/filter":37,"./lib/topojson/prune":41,"./lib/topojson/scale":43,"./lib/topojson/simplify":44,"./lib/topojson/stitch":46,"./lib/topojson/topology":47,"./topojson":59}],31:[function(t,e){e.exports=function(t){function e(t){t&&u.hasOwnProperty(t.type)&&u[t.type](t)}function n(t){var e=t[0],n=t[1];i>e&&(i=e),e>l&&(l=e),o>n&&(o=n),n>s&&(s=n)}function r(t){t.forEach(n)}function a(t){t.forEach(r)}var i=1/0,o=1/0,l=-1/0,s=-1/0,u={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.coordinates)},MultiLineString:function(t){t.coordinates.forEach(r)},Polygon:function(t){t.coordinates.forEach(r)},MultiPolygon:function(t){t.coordinates.forEach(a)}};for(var c in t)e(t[c]);return[i,o,l,s]}},{}],32:[function(t,e,n){function r(t){return t.toString()}function a(t){for(var e,n=-1,r=t.length,a=t[r-1],i=0;++n<r;)e=a,a=t[n],i+=e[0]*a[1]-e[1]*a[0];return.5*i}function i(t){return Math.abs((t[0][0]-t[2][0])*(t[1][1]-t[0][1])-(t[0][0]-t[1][0])*(t[2][1]-t[0][1]))}function o(t,e,n,r){var a=t-n,i=e-r;return Math.sqrt(a*a+i*i)}n.name="cartesian",n.formatDistance=r,n.ringArea=a,n.absoluteArea=Math.abs,n.triangleArea=i,n.distance=o},{}],33:[function(t,e){function n(t,e){function n(t){t.reverse()}var r=null;e&&"coordinate-system"in e&&(r=l[e["coordinate-system"]]);var s=a(r.ringArea,n);o({LineString:i,MultiLineString:i,Point:i,MultiPoint:i,Polygon:function(t){s(t.coordinates)},MultiPolygon:function(t){t.coordinates.forEach(s)}}).object(t)}function r(t,e){function n(e){return u.ringArea(s.feature(t,{type:"Polygon",arcs:[e]}).geometry.coordinates[0])}function r(t){var e=-1,n=t.length;for(t.reverse();++e<n;)t[e]=~t[e]}var u=null;e&&"coordinate-system"in e&&(u=l[e["coordinate-system"]]);var c=a(n,r),d=o({LineString:i,MultiLineString:i,Point:i,MultiPoint:i,Polygon:function(t){c(t.arcs)},MultiPolygon:function(t){t.arcs.forEach(c)}});for(var f in t.objects)d.object(t.objects[f])}function a(t,e){return function(n){if(r=n.length){for(var r,a,i,o,l=new Array(r),s=-1/0,u=0;r>u;++u){var i=Math.abs(l[u]=t(n[u]));i>s&&(s=i,a=u)}a&&(o=n[a],n[a]=n[0],n[0]=o,o=l[a],l[a]=l[0],l[0]=o),l[0]<0&&e(n[0]);for(var u=1;r>u;++u)l[u]>0&&e(n[u])}}}function i(){}var o=t("./type"),l=t("./coordinate-systems"),s=t("../../topojson");e.exports=function(t,e){"Topology"===t.type?r(t,e):n(t,e)}},{"../../topojson":59,"./coordinate-systems":35,"./type":58}],34:[function(t,e){e.exports=function(t,e){function n(t){t&&a.hasOwnProperty(t.type)&&a[t.type](t)}function r(t){var n=e(t);null==n?delete t.id:t.id=n}arguments.length<2&&(e=function(t){return t.id});var a={Feature:r,FeatureCollection:function(t){t.features.forEach(r)}};for(var i in t)n(t[i]);return t}},{}],35:[function(t,e){e.exports={cartesian:t("./cartesian"),spherical:t("./spherical")}},{"./cartesian":32,"./spherical":45}],36:[function(t,e){e.exports=function(t){for(var e=t.arcs,n=-1,r=e.length;++n<r;)for(var a,i,o=e[n],l=0,s=o.length,u=o[0],c=u[0],d=u[1];++l<s;)u=o[l],a=u[0],i=u[1],o[l]=[a-c,i-d],c=a,d=i;return t}},{}],37:[function(t,e){function n(){}function r(){return!1}var a=t("./type"),i=t("./prune"),o=t("./clockwise"),l=t("./coordinate-systems"),s=t("../../topojson");e.exports=function(t,e){function u(t){return t.length&&c(t[0])?[t.shift()].concat(t.filter(d)):null}function c(t){return m(t)||h.absoluteArea(f(t))>=p}function d(t){return m(t)||h.absoluteArea(-f(t))>=p}function f(e){return h.ringArea(s.feature(t,{type:"Polygon",arcs:[e]}).geometry.coordinates[0])}var p,h=null,v=!0,g=!0,m=r;if(e&&("coordinate-system"in e&&(h=l[e["coordinate-system"]]),"minimum-area"in e&&(p=+e["minimum-area"]),"preserve-attached"in e&&(g=!!e["preserve-attached"]),"force-clockwise"in e&&(v=!!e["force-clockwise"])),v&&o(t,e),p>0||(p=Number.MIN_VALUE),g){var y={},x=0,b=a({LineString:n,MultiLineString:n,Point:n,MultiPoint:n,MultiPolygon:function(t){for(var e=t.arcs,n=-1,r=e.length;++n<r;)this.polygon(e[n])},Polygon:function(t){this.polygon(t.arcs)},polygon:function(t){for(var e=0,n=t.length;n>e;++e,++x)for(var r=t[e],a=0,i=r.length;i>a;++a){var o=r[a];0>o&&(o=~o);var l=y[o];y[o]=l>=0&&l!==x?-1:x}}});m=function(t){for(var e=0,n=t.length;n>e;++e){var r=t[e];if(y[0>r?~r:r]<0)return!0}};for(var w in t.objects)b.object(t.objects[w])}var _=a({LineString:n,MultiLineString:n,Point:n,MultiPoint:n,Polygon:function(t){t.arcs=u(t.arcs),t.arcs&&t.arcs.length||(t.type=null,delete t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(u).filter(function(t){return t&&t.length}),t.arcs.length||(t.type=null,delete t.arcs)},GeometryCollection:function(t){this.defaults.GeometryCollection.call(this,t),t.geometries=t.geometries.filter(function(t){return null!=t.type}),t.geometries.length||(t.type=null,delete t.geometries)}});for(var w in t.objects)_.object(t.objects[w]);
i(t,e)}},{"../../topojson":59,"./clockwise":33,"./coordinate-systems":35,"./prune":41,"./type":58}],38:[function(t,e){e.exports=function(t){function e(t){return(t&&a.hasOwnProperty(t.type)?a[t.type]:r)(t)}function n(t){var e=t.geometry;return null==e?t.type=null:(r(e),t.type=e.type,e.geometries?t.geometries=e.geometries:e.coordinates&&(t.coordinates=e.coordinates)),delete t.geometry,t}function r(t){return t?(i.hasOwnProperty(t.type)&&i[t.type](t),t):{type:null}}var a={Feature:n,FeatureCollection:function(t){return t.type="GeometryCollection",t.geometries=t.features,t.features.forEach(n),delete t.features,t}},i={GeometryCollection:function(t){for(var e=t.geometries,n=-1,a=e.length;++n<a;)e[n]=r(e[n])},MultiPoint:function(t){t.coordinates.length?t.coordinates.length<2&&(t.type="Point",t.coordinates=t.coordinates[0]):(t.type=null,delete t.coordinates)},LineString:function(t){t.coordinates.length||(t.type=null,delete t.coordinates)},MultiLineString:function(t){for(var e=t.coordinates,n=0,r=0,a=e.length;a>n;++n){var i=e[n];i.length&&(e[r++]=i)}r?2>r?(t.type="LineString",t.coordinates=e[0]):t.coordinates.length=r:(t.type=null,delete t.coordinates)},Polygon:function(t){for(var e=t.coordinates,n=0,r=0,a=e.length;a>n;++n){var i=e[n];i.length&&(e[r++]=i)}r?t.coordinates.length=r:(t.type=null,delete t.coordinates)},MultiPolygon:function(t){for(var e=t.coordinates,n=0,r=0,a=e.length;a>n;++n){for(var i=e[n],o=0,l=0,s=i.length;s>o;++o){var u=i[o];u.length&&(i[l++]=u)}l&&(i.length=l,e[r++]=i)}r?2>r?(t.type="Polygon",t.coordinates=e[0]):e.length=r:(t.type=null,delete t.coordinates)}};for(var o in t)t[o]=e(t[o]);return t}},{}],39:[function(t,e){var n=t("./quantize");e.exports=function(t,e,r){function a(t){t&&h.hasOwnProperty(t.type)&&h[t.type](t)}if(e){if(r===e||!t.bbox.every(isFinite))return t;var i=r/e,o=n(0,0,i,i);t.transform.scale[0]/=i,t.transform.scale[1]/=i}else{var l=t.bbox,s=isFinite(l[0])?l[0]:0,u=isFinite(l[1])?l[1]:0,c=isFinite(l[2])?l[2]:0,d=isFinite(l[3])?l[3]:0,f=c-s?(r-1)/(c-s):1,p=d-u?(r-1)/(d-u):1,o=n(-s,-u,f,p);t.transform=o.transform}var h={GeometryCollection:function(t){t.geometries.forEach(a)},Point:function(t){o.point(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(o.point)}};for(var v in t.objects)a(t.objects[v]);return t.arcs=t.arcs.map(function(t){return o.line(t=t.map(function(t){return t.slice()})),t.length<2&&t.push(t[0]),t}),t}},{"./quantize":42}],40:[function(t,e){var n=t("./quantize");e.exports=function(t,e,r,a){function i(t){t&&p.hasOwnProperty(t.type)&&p[t.type](t)}arguments.length<4&&(a=r);var o=isFinite(e[0])?e[0]:0,l=isFinite(e[1])?e[1]:0,s=isFinite(e[2])?e[2]:0,u=isFinite(e[3])?e[3]:0,c=s-o?(a-1)/(s-o)*r/a:1,d=u-l?(a-1)/(u-l)*r/a:1,f=n(-o,-l,c,d),p={GeometryCollection:function(t){t.geometries.forEach(i)},Point:function(t){f.point(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(f.point)},LineString:function(t){var e=t.coordinates;f.line(e),e.length<2&&(e[1]=e[0])},MultiLineString:function(t){for(var e=t.coordinates,n=0,r=e.length;r>n;++n){var a=e[n];f.line(a),a.length<2&&(a[1]=a[0])}},Polygon:function(t){for(var e=t.coordinates,n=0,r=e.length;r>n;++n){var a=e[n];for(f.line(a);a.length<4;)a.push(a[0])}},MultiPolygon:function(t){for(var e=t.coordinates,n=0,r=e.length;r>n;++n)for(var a=e[n],i=0,o=a.length;o>i;++i){var l=a[i];for(f.line(l);l.length<4;)l.push(l[0])}}};for(var h in t)i(t[h]);return f.transform}},{"./quantize":42}],41:[function(t,e){e.exports=function(t,e){function n(t){t&&f.hasOwnProperty(t.type)&&f[t.type](t)}function r(t){for(var e=0,n=t.length;n>e;++e){var r,a=t[e],i=0>a&&(a=~a,!0);null==(r=d[a])&&(d[a]=r=c++,u[r]=l[a]),t[e]=i?~r:r}}function a(t){t.forEach(r)}var i=!1,o=t.objects,l=t.arcs,s=l.length,u=t.arcs=[],c=0,d=new Array(l.length);e&&"verbose"in e&&(i=!!e.verbose);var f={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(a)}};for(var p in o)n(o[p]);return i&&console.warn("prune: retained "+c+" / "+s+" arcs ("+Math.round(c/s*100)+"%)"),t}},{}],42:[function(t,e){e.exports=function(t,e,n,r){function a(a){return a[0]=Math.round((a[0]+t)*n),a[1]=Math.round((a[1]+e)*r),a}function i(t){for(var e,n,r,i=0,o=1,l=t.length,s=a(t[0]),u=s[0],c=s[1];++i<l;)s=a(t[i]),n=s[0],r=s[1],(n!==u||r!==c)&&(e=t[o++],e[0]=u=n,e[1]=c=r);t.length=o}return{point:a,line:i,transform:{scale:[1/n,1/r],translate:[-t,-e]}}}},{}],43:[function(t,e){function n(){}var r=t("./type");e.exports=function(t,e){function a(t){return[t[0]*u+(i/2-p*u)+l,t[1]*g+(o/2-h*g)+l]}var i,o,l=0,s=!0;e&&("width"in e&&(i=+e.width),"height"in e&&(o=+e.height),"margin"in e&&(l=+e.margin),"invert"in e&&(s=!!e.invert));var u,c=t.bbox,d=c[2]-c[0],f=c[3]-c[1],p=(c[2]+c[0])/2,h=(c[3]+c[1])/2;i=Math.max(0,i-2*l),o=Math.max(0,o-2*l),i&&o?u=Math.min(i/d,o/f):i?(u=i/d,o=u*f):(u=o/f,i=u*d);var v,g=s?-u:u,m=a([c[0],c[1]]),y=a([c[2],c[3]]);if(t.bbox=s?[m[0],y[1],y[0],m[1]]:[m[0],m[1],y[0],y[1]],v=t.transform)v.scale[0]*=u,v.scale[1]*=g,v.translate[0]=i/2+l-(p-v.translate[0])*u,v.translate[1]=o/2+l-(h-v.translate[1])*g;else{var x=r({LineString:n,MultiLineString:n,Point:function(t){t.coordinates=a(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(a)},Polygon:n,MultiPolygon:n});for(var b in t.objects)x.object(t.objects[b]);t.arcs=t.arcs.map(function(t){return t.map(a)})}return t}},{"./type":58}],44:[function(t,e){var n=t("../../topojson"),r=t("./coordinate-systems");e.exports=function(t,e){var a,i=0,o=!1,l=null,s=t.arcs.reduce(function(t,e){return t+e.length},0),u=0;if(e&&("minimum-area"in e&&(i=+e["minimum-area"]),"coordinate-system"in e&&(l=r[e["coordinate-system"]]),"retain-proportion"in e&&(a=+e["retain-proportion"]),"verbose"in e&&(o=!!e.verbose)),n.presimplify(t,l.triangleArea),a){var c=[];t.arcs.forEach(function(t){t.forEach(function(t){isFinite(t[2])&&c.push(t[2])})}),e["minimum-area"]=i=s?c.sort(function(t,e){return e-t})[Math.ceil((s-1)*a)]:0,o&&console.warn("simplification: effective minimum area "+i.toPrecision(3))}return t.arcs.forEach(t.transform?function(t){for(var e,n,r=0,a=0,o=-1,l=-1,s=t.length;++o<s;)e=t[o],e[2]>=i?(n=t[++l],n[0]=e[0]+r,n[1]=e[1]+a,r=a=0):(r+=e[0],a+=e[1]);t.length=++l}:function(t){for(var e,n=-1,r=-1,a=t.length;++n<a;)e=t[n],e[2]>=i&&(t[++r]=e);t.length=++r}),t.arcs.forEach(t.transform?function(t){var e=0,n=0,r=t.length,a=t[0];for(a.length=2;++e<r;)a=t[e],a.length=2,(a[0]||a[1])&&(t[++n]=a);u+=t.length=(n||1)+1}:function(t){var e,n,r=0,a=0,i=t.length,o=t[0],l=o[0],s=o[1];for(o.length=2;++r<i;)o=t[r],e=o[0],n=o[1],o.length=2,(l!==e||s!==n)&&(t[++a]=o,l=e,s=n);u+=t.length=(a||1)+1}),o&&console.warn("simplification: retained "+u+" / "+s+" points ("+Math.round(u/s*100)+"%)"),t}},{"../../topojson":59,"./coordinate-systems":35}],45:[function(t,e,n){function r(t){var e=t*f*6371;return(e>1?e.toFixed(3)+"km":(1e3*e).toPrecision(3)+"m")+" ("+t.toPrecision(3)+")"}function a(t){if(!t.length)return 0;for(var e=0,n=t[0],r=n[0]*f,a=n[1]*f/2+d,i=r,o=Math.cos(a),l=Math.sin(a),s=1,u=t.length;u>s;++s){n=t[s],r=n[0]*f,a=n[1]*f/2+d;var p=r-i,h=Math.cos(a),v=Math.sin(a),g=l*v,m=o*h+g*Math.cos(p),y=g*Math.sin(p);e+=Math.atan2(y,m),i=r,o=h,l=v}return 2*(e>c?e-2*c:-c>e?e+2*c:e)}function i(t){return 0>t?t+4*c:t}function o(t){var e=l(t[0],t[1]),n=l(t[1],t[2]),r=l(t[2],t[0]),a=(e+n+r)/2;return 4*Math.atan(Math.sqrt(Math.max(0,Math.tan(a/2)*Math.tan((a-e)/2)*Math.tan((a-n)/2)*Math.tan((a-r)/2))))}function l(t,e){var n,r=(e[0]-t[0])*f,a=Math.sin(r),i=Math.cos(r),o=Math.sin(t[1]*f),l=Math.cos(t[1]*f),s=Math.sin(e[1]*f),u=Math.cos(e[1]*f);return Math.atan2(Math.sqrt((n=u*a)*n+(n=l*s-o*u*i)*n),o*s+l*u*i)}function s(t,e,n,r){return t*=f,e*=f,n*=f,r*=f,2*Math.asin(Math.sqrt(u(r-e)+Math.cos(e)*Math.cos(r)*u(n-t)))}function u(t){return(t=Math.sin(t/2))*t}var c=Math.PI,d=c/4,f=c/180;n.name="spherical",n.formatDistance=r,n.ringArea=a,n.absoluteArea=i,n.triangleArea=o,n.distance=s},{}],46:[function(t,e){var n=t("./type");e.exports=function(t,e){function r(t){return d>=t?[0,c]:t>=p?[0,f]:[o,t]}function a(t){for(var e=[],n=0,a=t.length;a>n;++n){for(var i=t[n],o=0,s=i.length;s>o;++o){var c=i[o];c.polygon=i,e.push(c);for(var f=0,h=c.length;h>f;++f){var v=c[f],g=v[0],m=v[1];if(l>=g||g>=u||d>=m||m>=p){for(var y=f+1;h>y;++y){var x=c[y],b=x[0],w=x[1];if(b>l&&u>b&&w>d&&p>w)break}if(y===f+1)continue;if(f){var _=c.slice(0,f+1);_.polygon=i,_[_.length-1]=r(m),e[e.length-1]=_}else e.pop();if(y>=h)break;e.push(c=c.slice(y-1)),c[0]=r(c[0][1]),c.polygon=i,f=-1,h=c.length}}}i.length=0}for(var z={},k={},f=0,h=e.length;h>f;++f){var M=e[f],A=M[0],E=M[M.length-1];A[0]!==E[0]||A[1]!==E[1]?(M.index=f,z[A]=k[E]=M):(M.polygon.push(M),e[f]=null)}for(var f=0;h>f;++f){var M=e[f];if(M){var A=M[0],E=M[M.length-1],j=k[A],S=z[E];if(delete z[A],delete k[E],A[0]===E[0]&&A[1]===E[1]){M.polygon.push(M);continue}j?(delete k[A],delete z[j[0]],j.pop(),e[j.index]=null,M=j.concat(M),M.polygon=j.polygon,j===S?M.polygon.push(M):(M.index=h++,e.push(z[M[0]]=k[M[M.length-1]]=M))):S?(delete z[E],delete k[S[S.length-1]],M.pop(),M=M.concat(S),M.polygon=S.polygon,M.index=h++,e[S.index]=null,e.push(z[M[0]]=k[M[M.length-1]]=M)):(M.push(M[0]),M.polygon.push(M))}}}var i=.01,o=-180,l=o+i,s=180,u=s-i,c=-90,d=c+i,f=90,p=f-i;if(e){var h=e.scale[0],v=e.scale[1],g=e.translate[0],m=e.translate[1];o=Math.round((o-g)/h),s=Math.round((s-g)/h),c=Math.round((c-m)/v),f=Math.round((f-m)/v),l=Math.round((l-g)/h),u=Math.round((u-g)/h),d=Math.round((d-m)/v),p=Math.round((p-m)/v)}var y=n({Polygon:function(t){a([t.coordinates])},MultiPolygon:function(t){a(t.coordinates)}});for(var x in t)y.object(t[x])}},{"./type":58}],47:[function(t,e){var n=(t("./type"),t("./stitch")),r=t("./coordinate-systems"),a=t("./topology/index"),i=t("./delta"),o=t("./geomify"),l=t("./pre-quantize"),s=t("./post-quantize"),u=t("./bounds"),c=t("./compute-id"),d=t("./transform-properties"),f=1e-6;e.exports=function(t,e){var p,h=1e4,v=1e4,g=function(t){return t.id},m=function(){},y=0,x=!0,b=!1,w=null;if(e&&("verbose"in e&&(b=!!e.verbose),"stitch-poles"in e&&(x=!!e["stitch-poles"]),"coordinate-system"in e&&(w=r[e["coordinate-system"]]),"minimum-area"in e&&(y=+e["minimum-area"]),"quantization"in e&&(h=v=+e.quantization),"pre-quantization"in e&&(h=+e["pre-quantization"]),"post-quantization"in e&&(v=+e["post-quantization"]),"id"in e&&(g=e.id),"property-transform"in e&&(m=e["property-transform"])),h/v%1)throw new Error("post-quantization is not a divisor of pre-quantization");if(h&&!v)throw new Error("post-quantization is required when input is already quantized");c(t,g),d(t,m),o(t);var _=u(t),z=_[0]<-180-f||_[1]<-90-f||_[2]>180+f||_[3]>90+f;if(w||(w=r[z?"cartesian":"spherical"],e&&(e["coordinate-system"]=w.name)),w===r.spherical){if(z)throw new Error("spherical coordinates outside of [180, 90]");_[0]<-180+f&&(_[0]=-180),_[1]<-90+f&&(_[1]=-90),_[2]>180-f&&(_[2]=180),_[3]>90-f&&(_[3]=90)}b&&console.warn("bounds: "+_.join(" ")+" ("+w.name+")"),h&&(p=l(t,_,h,v),b&&console.warn("pre-quantization: "+p.scale.map(function(t){return w.formatDistance(t)}).join(" "))),w===r.spherical&&x&&n(t,p);var k=a(t);return h&&(k.transform=p),k.bbox=_,b&&console.warn("topology: "+k.arcs.length+" arcs, "+k.arcs.reduce(function(t,e){return t+e.length},0)+" points"),v&&v!==h&&(s(k,h,v),p=k.transform,b&&console.warn("post-quantization: "+p.scale.map(function(t){return w.formatDistance(t)}).join(" "))),v&&i(k),k}},{"./bounds":31,"./compute-id":34,"./coordinate-systems":35,"./delta":36,"./geomify":38,"./post-quantize":39,"./pre-quantize":40,"./stitch":46,"./topology/index":53,"./transform-properties":57,"./type":58}],48:[function(t,e){function n(t,e,n,a){r(t,e,n),r(t,e,e+a),r(t,e+a,n)}function r(t,e,n){for(var r,a=e+(n-- -e>>1);a>e;++e,--n)r=t[e],t[e]=t[n],t[n]=r}var a=t("./join");e.exports=function(t){for(var e=a(t),r=t.coordinates,i=t.lines,o=t.rings,l=0,s=i.length;s>l;++l)for(var u=i[l],c=u[0],d=u[1];++c<d;)if(e.has(r[c])){var f={0:c,1:u[1]};u[1]=c,u=u.next=f}for(var l=0,s=o.length;s>l;++l)for(var p=o[l],h=p[0],v=h,g=p[1],m=e.has(r[h]);++v<g;)if(e.has(r[v]))if(m){var f={0:v,1:p[1]};p[1]=v,p=p.next=f}else n(r,h,g,g-v),r[g]=r[h],m=!0,v=h;return t}},{"./join":54}],49:[function(t,e){var n=(t("./join"),t("./hashmap")),r=t("./point-hash"),a=t("./point-equal");e.exports=function(t){function e(t){var e,n,r,a;if(r=x.get(e=d[t[0]]))for(var i=0,s=r.length;s>i;++i){var u=r[i];if(o(u,t))return t[0]=u[0],void(t[1]=u[1])}if(a=x.get(n=d[t[1]]))for(var i=0,s=a.length;s>i;++i){var c=a[i];if(l(c,t))return t[1]=c[0],void(t[0]=c[1])}r?r.push(t):x.set(e,[t]),a?a.push(t):x.set(n,[t]),b.push(t)}function i(t){var e,n;if(n=x.get(e=d[t[0]]))for(var r=0,a=n.length;a>r;++r){var i=n[r];if(s(i,t))return t[0]=i[0],void(t[1]=i[1]);if(u(i,t))return t[0]=i[1],void(t[1]=i[0])}if(n=x.get(e=d[t[0]+c(t)]))for(var r=0,a=n.length;a>r;++r){var i=n[r];if(s(i,t))return t[0]=i[0],void(t[1]=i[1]);if(u(i,t))return t[0]=i[1],void(t[1]=i[0])}n?n.push(t):x.set(e,[t]),b.push(t)}function o(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!==r-o)return!1;for(;i>=n;++n,++r)if(!a(d[n],d[r]))return!1;return!0}function l(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!==r-o)return!1;for(;i>=n;++n,--o)if(!a(d[n],d[o]))return!1;return!0}function s(t,e){var n=t[0],r=e[0],i=t[1],o=e[1],l=i-n;if(l!==o-r)return!1;for(var s=c(t),u=c(e),f=0;l>f;++f)if(!a(d[n+(f+s)%l],d[r+(f+u)%l]))return!1;return!0}function u(t,e){var n=t[0],r=e[0],i=t[1],o=e[1],l=i-n;if(l!==o-r)return!1;for(var s=c(t),u=l-c(e),f=0;l>f;++f)if(!a(d[n+(f+s)%l],d[o-(f+u)%l]))return!1;return!0}function c(t){for(var e=t[0],n=t[1],r=e,a=r,i=d[r];++r<n;){var o=d[r];(o[0]<i[0]||o[0]===i[0]&&o[1]<i[1])&&(a=r,i=o)}return a-e}var d=t.coordinates,f=t.lines,p=t.rings,h=f.length+p.length;delete t.lines,delete t.rings;for(var v=0,g=f.length;g>v;++v)for(var m=f[v];m=m.next;)++h;for(var v=0,g=p.length;g>v;++v)for(var y=p[v];y=y.next;)++h;for(var x=n(2*h*1.4,r,a),b=t.arcs=[],v=0,g=f.length;g>v;++v){var m=f[v];do e(m);while(m=m.next)}for(var v=0,g=p.length;g>v;++v){var y=p[v];if(y.next){do e(y);while(y=y.next)}else i(y)}return t}},{"./hashmap":51,"./join":54,"./point-equal":55,"./point-hash":56}],50:[function(t,e){e.exports=function(t){function e(t){t&&u.hasOwnProperty(t.type)&&u[t.type](t)}function n(t){for(var e=0,n=t.length;n>e;++e)s[++i]=t[e];var r={0:i-n+1,1:i};return o.push(r),r}function r(t){for(var e=0,n=t.length;n>e;++e)s[++i]=t[e];var r={0:i-n+1,1:i};return l.push(r),r}function a(t){return t.map(r)}var i=-1,o=[],l=[],s=[],u={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.coordinates),delete t.coordinates},MultiLineString:function(t){t.arcs=t.coordinates.map(n),delete t.coordinates},Polygon:function(t){t.arcs=t.coordinates.map(r),delete t.coordinates},MultiPolygon:function(t){t.arcs=t.coordinates.map(a),delete t.coordinates}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:s,lines:o,rings:l,objects:t}}},{}],51:[function(t,e){e.exports=function(t,e,n,r,a,i){function o(r,i){for(var o=e(r)&f,l=c[o],s=0;l!=a;){if(n(l,r))return d[o]=i;if(++s>=t)throw new Error("full hashmap");l=c[o=o+1&f]}return c[o]=r,d[o]=i,--p,i}function l(r,i){for(var o=e(r)&f,l=c[o],s=0;l!=a;){if(n(l,r))return d[o];if(++s>=t)throw new Error("full hashmap");l=c[o=o+1&f]}return c[o]=r,d[o]=i,--p,i}function s(r,i){for(var o=e(r)&f,l=c[o],s=0;l!=a;){if(n(l,r))return d[o];if(++s>=t)break;l=c[o=o+1&f]}return i}function u(){for(var t=[],e=0,n=c.length;n>e;++e){var r=c[e];r!=a&&t.push(r)}return t}3===arguments.length&&(r=i=Array,a=null);for(var c=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),d=new i(t),f=t-1,p=t,h=0;t>h;++h)c[h]=a;return{set:o,maybeSet:l,get:s,keys:u}}},{}],52:[function(t,e){e.exports=function(t,e,n,r,a){function i(r){for(var i=e(r)&u,o=s[i],l=0;o!=a;){if(n(o,r))return!0;if(++l>=t)throw new Error("full hashset");o=s[i=i+1&u]}return s[i]=r,--c,!0}function o(r){for(var i=e(r)&u,o=s[i],l=0;o!=a;){if(n(o,r))return!0;if(++l>=t)break;o=s[i=i+1&u]}return!1}function l(){for(var t=[],e=0,n=s.length;n>e;++e){var r=s[e];r!=a&&t.push(r)}return t}3===arguments.length&&(r=Array,a=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),u=t-1,c=t,d=0;t>d;++d)s[d]=a;return{add:i,has:o,values:l}}},{}],53:[function(t,e){function n(t){var e,n=t[0],r=t[1];return n>r&&(e=n,n=r,r=e),n+31*r}function r(t,e){var n,r=t[0],a=t[1],i=e[0],o=e[1];return r>a&&(n=r,r=a,a=n),i>o&&(n=i,i=o,o=n),r===i&&a===o}var a=t("./hashmap"),i=t("./extract"),o=t("./cut"),l=t("./dedup");e.exports=function(t){function e(t){t&&p.hasOwnProperty(t.type)&&p[t.type](t)}function s(t){var e=[];do{var n=f.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function u(t){return t.map(s)}var c=l(o(i(t))),d=c.coordinates,f=a(1.4*c.arcs.length,n,r);t=c.objects,c.arcs=c.arcs.map(function(t,e){return f.set(t,e),d.slice(t[0],t[1]+1)}),delete c.coordinates,d=null;var p={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=s(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(s)},Polygon:function(t){t.arcs=t.arcs.map(s)},MultiPolygon:function(t){t.arcs=t.arcs.map(u)}};for(var h in t)e(t[h]);return c}},{"./cut":48,"./dedup":49,"./extract":50,"./hashmap":51}],54:[function(t,e){var n=t("./hashset"),r=t("./hashmap"),a=t("./point-hash"),i=t("./point-equal");e.exports=function(t){function e(t,e,n,r){if(p[n]!==t){p[n]=t;var a=h[n];if(a>=0){var i=v[n];a===e&&i===r||a===r&&i===e||(++m,g[n]=1)}else h[n]=e,v[n]=r}}function o(){for(var t=r(1.4*u.length,l,s,Int32Array,-1,Int32Array),e=new Int32Array(u.length),n=0,a=u.length;a>n;++n)e[n]=t.maybeSet(n,n);return e}function l(t){return a(u[t])}function s(t,e){return i(u[t],u[e])}for(var u=t.coordinates,c=t.lines,d=t.rings,f=o(),p=new Int32Array(u.length),h=new Int32Array(u.length),v=new Int32Array(u.length),g=new Int8Array(u.length),m=0,y=0,x=u.length;x>y;++y)p[y]=h[y]=v[y]=-1;for(var y=0,x=c.length;x>y;++y){var b,w=c[y],_=w[0],z=w[1],k=f[_],M=f[++_];for(++m,g[k]=1;++_<=z;)e(y,b=k,k=M,M=f[_]);++m,g[M]=1}for(var y=0,x=u.length;x>y;++y)p[y]=-1;for(var y=0,x=d.length;x>y;++y){var A=d[y],E=A[0]+1,j=A[1],b=f[j-1],k=f[E-1],M=f[E];for(e(y,b,k,M);++E<=j;)e(y,b=k,k=M,M=f[E])}p=h=v=null;for(var S,C=n(1.4*m,a,i),y=0,x=u.length;x>y;++y)g[S=f[y]]&&C.add(u[S]);return C}},{"./hashmap":51,"./hashset":52,"./point-equal":55,"./point-hash":56}],55:[function(t,e){e.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},{}],56:[function(t,e){var n=new ArrayBuffer(16),r=new Float64Array(n),a=new Uint32Array(n);e.exports=function(t){r[0]=t[0],r[1]=t[1];var e=a[0]^a[1];return e=e<<5^e>>7^a[2]^a[3],2147483647&e}},{}],57:[function(t,e){e.exports=function(t,e){function n(t){t&&a.hasOwnProperty(t.type)&&a[t.type](t)}function r(t){null==t.properties&&(t.properties={});var n=t.properties=e(t);if(n)for(var r in n)return;delete t.properties}arguments.length<2&&(e=function(){});var a={Feature:r,FeatureCollection:function(t){t.features.forEach(r)}};for(var i in t)n(t[i]);return t}},{}],58:[function(t,e){e.exports=function(t){for(var e in n)e in t||(t[e]=n[e]);return t.defaults=n,t};var n={Feature:function(t){t.geometry&&this.geometry(t.geometry)},FeatureCollection:function(t){for(var e=t.features,n=-1,r=e.length;++n<r;)this.Feature(e[n])},GeometryCollection:function(t){for(var e=t.geometries,n=-1,r=e.length;++n<r;)this.geometry(e[n])},LineString:function(t){this.line(t.coordinates)},MultiLineString:function(t){for(var e=t.coordinates,n=-1,r=e.length;++n<r;)this.line(e[n])},MultiPoint:function(t){for(var e=t.coordinates,n=-1,r=e.length;++n<r;)this.point(e[n])},MultiPolygon:function(t){for(var e=t.coordinates,n=-1,r=e.length;++n<r;)this.polygon(e[n])},Point:function(t){this.point(t.coordinates)},Polygon:function(t){this.polygon(t.coordinates)},object:function(t){return null==t?null:a.hasOwnProperty(t.type)?this[t.type](t):this.geometry(t)},geometry:function(t){return null==t?null:r.hasOwnProperty(t.type)?this[t.type](t):null},point:function(){},line:function(t){for(var e=-1,n=t.length;++e<n;)this.point(t[e])},polygon:function(t){for(var e=-1,n=t.length;++e<n;)this.line(t[e])}},r={LineString:1,MultiLineString:1,MultiPoint:1,MultiPolygon:1,Point:1,Polygon:1,GeometryCollection:1},a={Feature:1,FeatureCollection:1}},{}],59:[function(t,e){!function(){function t(t,e){function n(e){var n,r=t.arcs[0>e?~e:e],a=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],0>e?[n,a]:[a,n]}function r(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){a[0>t?~t:t]=1}),l.push(r)}}var a={},i={},o={},l=[],s=-1;return e.forEach(function(n,r){var a,i=t.arcs[0>n?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(a=e[++s],e[s]=n,e[r]=a)}),e.forEach(function(t){var e,r,a=n(t),l=a[0],s=a[1];if(e=o[l])if(delete o[e.end],e.push(t),e.end=s,r=i[s]){delete i[r.start];var u=r===e?e:e.concat(r);i[u.start=e.start]=o[u.end=r.end]=u}else i[e.start]=o[e.end]=e;else if(e=i[s])if(delete i[e.start],e.unshift(t),e.start=l,r=o[l]){delete o[r.end];var c=r===e?e:r.concat(e);i[c.start=r.start]=o[c.end=e.end]=c}else i[e.start]=o[e.end]=e;else e=[t],i[e.start=l]=o[e.end=s]=e}),r(o,i),r(i,o),e.forEach(function(t){a[0>t?~t:t]||l.push([t])}),l}function r(e,n,r){function a(t){var e=0>t?~t:t;(c[e]||(c[e]=[])).push({i:t,g:u})}function i(t){t.forEach(a)}function o(t){t.forEach(i)}function l(t){"GeometryCollection"===t.type?t.geometries.forEach(l):t.type in d&&(u=t,d[t.type](t.arcs))}var s=[];if(arguments.length>1){var u,c=[],d={LineString:i,MultiLineString:o,Polygon:o,MultiPolygon:function(t){t.forEach(o)}};l(n),c.forEach(arguments.length<3?function(t){s.push(t[0].i)}:function(t){r(t[0].g,t[t.length-1].g)&&s.push(t[0].i)})}else for(var f=0,p=e.arcs.length;p>f;++f)s.push(f);return{type:"MultiLineString",arcs:t(e,s)}}function a(e,r){function a(t){t.forEach(function(e){e.forEach(function(e){(o[e=0>e?~e:e]||(o[e]=[])).push(t)})}),s.push(t)}function i(t){return f(l(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var o={},s=[],u=[];return r.forEach(function(t){"Polygon"===t.type?a(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(a)}),s.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,u.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){o[0>t?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),s.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:u.map(function(r){var a=[];if(r.forEach(function(t){t.forEach(function(t){t.forEach(function(t){o[0>t?~t:t].length<2&&a.push(t)})})}),a=t(e,a),(n=a.length)>1)for(var l,s=i(r[0][0]),u=0;n>u;++u)if(s===i(a[u])){l=a[0],a[0]=a[u],a[u]=l;break}return a})}}function i(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return o(t,e)})}:o(t,e)}function o(t,e){var n={type:"Feature",id:e.id,properties:e.properties||{},geometry:l(t,e)};return null==e.id&&delete n.id,n}function l(t,e){function n(t,e){e.length&&e.pop();for(var n,r=c[0>t?~t:t],a=0,i=r.length;i>a;++a)e.push(n=r[a].slice()),u(n,a);0>t&&s(e,i)}function r(t){return t=t.slice(),u(t,0),t}function a(t){for(var e=[],r=0,a=t.length;a>r;++r)n(t[r],e);return e.length<2&&e.push(e[0].slice()),e}function i(t){for(var e=a(t);e.length<4;)e.push(e[0].slice());return e}function o(t){return t.map(i)}function l(t){var e=t.type;return"GeometryCollection"===e?{type:e,geometries:t.geometries.map(l)}:e in d?{type:e,coordinates:d[e](t)}:null}var u=g(t.transform),c=t.arcs,d={Point:function(t){return r(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(r)},LineString:function(t){return a(t.arcs)},MultiLineString:function(t){return t.arcs.map(a)},Polygon:function(t){return o(t.arcs)},MultiPolygon:function(t){return t.arcs.map(o)}};return l(e)}function s(t,e){for(var n,r=t.length,a=r-e;a<--r;)n=t[a],t[a++]=t[r],t[r]=n}function u(t,e){for(var n=0,r=t.length;r>n;){var a=n+r>>>1;t[a]<e?n=a+1:r=a}return n}function c(t){function e(t,e){t.forEach(function(t){0>t&&(t=~t);var n=a[t];n?n.push(e):a[t]=[e]})}function n(t,n){t.forEach(function(t){e(t,n)})}function r(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){r(t,e)}):t.type in o&&o[t.type](t.arcs,e)}var a={},i=t.map(function(){return[]}),o={LineString:e,MultiLineString:n,Polygon:n,MultiPolygon:function(t,e){t.forEach(function(t){n(t,e)})}};t.forEach(r);for(var l in a)for(var s=a[l],c=s.length,d=0;c>d;++d)for(var f=d+1;c>f;++f){var p,h=s[d],v=s[f];(p=i[h])[l=u(p,v)]!==v&&p.splice(l,0,v),(p=i[v])[l=u(p,h)]!==h&&p.splice(l,0,h)}return i}function d(t,e){function n(t){o.remove(t),t[1][2]=e(t),o.push(t)}var r,a=g(t.transform),i=m(t.transform),o=v(),l=0;for(e||(e=p),t.arcs.forEach(function(t){var n=[];t.forEach(a);for(var i=1,l=t.length-1;l>i;++i)r=t.slice(i-1,i+2),r[1][2]=e(r),n.push(r),o.push(r);t[0][2]=t[l][2]=1/0;for(var i=0,l=n.length;l>i;++i)r=n[i],r.previous=n[i-1],r.next=n[i+1]});r=o.pop();){var s=r.previous,u=r.next;r[1][2]<l?r[1][2]=l:l=r[1][2],s&&(s.next=u,s[2]=r[2],n(s)),u&&(u.previous=s,u[0]=r[0],n(u))}return t.arcs.forEach(function(t){t.forEach(i)}),t}function f(t){for(var e,n=-1,r=t.length,a=t[r-1],i=0;++n<r;)e=a,a=t[n],i+=e[0]*a[1]-e[1]*a[0];return.5*i}function p(t){var e=t[0],n=t[1],r=t[2];return Math.abs((e[0]-r[0])*(n[1]-e[1])-(e[0]-n[0])*(r[1]-e[1]))}function h(t,e){return t[1][2]-e[1][2]}function v(){function t(t,e){for(;e>0;){var n=(e+1>>1)-1,a=r[n];if(h(t,a)>=0)break;r[a._=e]=a,r[t._=e=n]=t}}function e(t,e){for(;;){var n=e+1<<1,i=n-1,o=e,l=r[o];if(a>i&&h(r[i],l)<0&&(l=r[o=i]),a>n&&h(r[n],l)<0&&(l=r[o=n]),o===e)break;r[l._=e]=l,r[t._=e=o]=t}}var n={},r=[],a=0;return n.push=function(e){return t(r[e._=a]=e,a++),a},n.pop=function(){if(!(0>=a)){var t,n=r[0];return--a>0&&(t=r[a],e(r[t._=0]=t,0)),n}},n.remove=function(n){var i,o=n._;if(r[o]===n)return o!==--a&&(i=r[a],(h(i,n)<0?t:e)(r[i._=o]=i,o)),o},n}function g(t){if(!t)return y;var e,n,r=t.scale[0],a=t.scale[1],i=t.translate[0],o=t.translate[1];return function(t,l){l||(e=n=0),t[0]=(e+=t[0])*r+i,t[1]=(n+=t[1])*a+o}}function m(t){if(!t)return y;var e,n,r=t.scale[0],a=t.scale[1],i=t.translate[0],o=t.translate[1];return function(t,l){l||(e=n=0);var s=(t[0]-i)/r|0,u=(t[1]-o)/a|0;t[0]=s-e,t[1]=u-n,e=s,n=u}}function y(){}var x={version:"1.6.14",mesh:function(t){return l(t,r.apply(this,arguments))},meshArcs:r,merge:function(t){return l(t,a.apply(this,arguments))},mergeArcs:a,feature:i,neighbors:c,presimplify:d};"function"==typeof define&&define.amd?define(x):"object"==typeof e&&e.exports?e.exports=x:this.topojson=x}()},{}],60:[function(){d3plus.array.sort=function(t,e,n,r,a){function i(t,i){for(var o=0,l=0;l<e.length;l++){var s=e[l];if(a){var u=t.d3plus?a.id.nesting[t.d3plus.depth]:void 0,c=t.d3plus?t.d3plus.depth:void 0;t=s===a.color.value?d3plus.variable.color(a,t,u):s===a.text.value?d3plus.variable.text(a,t,c):d3plus.variable.value(a,t,s,u);var u=i.d3plus?a.id.nesting[i.d3plus.depth]:void 0,c=i.d3plus?i.d3plus.depth:void 0;i=s===a.color.value?d3plus.variable.color(a,i,u):s===a.text.value?d3plus.variable.text(a,i,c):d3plus.variable.value(a,i,s,u)}else t=t[s],i=i[s];if(t=t instanceof Array?t=t[0]:"string"==typeof t?t=t.toLowerCase():t,i=i instanceof Array?i=i[0]:"string"==typeof i?i=i.toLowerCase():i,o=r.indexOf(s)>=0?d3plus.color.sort(t,i):i>t?-1:1,0!==o||l===e.length-1)break}return"asc"===n?o:-o}if(!t||t.length<=1||!e)return t||[];if(!n)var n="asc";if(e instanceof Array||(e=[e]),r)r instanceof Array||(r=[r]);else var r=["color"];return 2===t.length?i(t[0],t[1]):t.sort(i)}},{}],61:[function(){d3plus.array.update=function(t,e){if(!(t instanceof Array))var t=[];return e instanceof Array?t=e:t.indexOf(e)>=0?t.splice(t.indexOf(e),1):t.push(e),t}},{}],62:[function(){d3plus.color.legible=function(t){var e;return e=d3.hsl(t),e.l>.45&&(e.s>.8&&(e.s=.8),e.l=.45),e.toString()}},{}],63:[function(){d3plus.color.lighter=function(t,e){if(void 0===e)var e=.5;var n=d3.hsl(t);return n.l+=(1-n.l)*e,n.toString()}},{}],64:[function(){d3plus.color.mix=function(t,e,n,r){if(!n)var n=1;if(!r)var r=1;t=d3.rgb(t),e=d3.rgb(e);var a=(n*t.r+r*e.r-n*r*e.r)/(n+r-n*r),i=(n*t.g+r*e.g-n*r*e.g)/(n+r-n*r),o=(n*t.b+r*e.b-n*r*e.b)/(n+r-n*r);return d3.rgb(a,i,o).toString()}},{}],65:[function(){d3plus.color.random=function(t){var e=t||Math.floor(20*Math.random());return d3plus.color.scale.default(e)}},{}],66:[function(){d3plus.color.scale={},d3plus.color.scale.default=d3.scale.ordinal().range(["#B35C1E","#C9853A","#E4BA79","#F5DD9E","#F3D261","#C4B346","#94B153","#254322","#4F6456","#759E80","#9ED3E3","#27366C","#7B91D3","#C6CBF7","#D59DC2","#E5B3BB","#E06363","#AF3500","#D74B03","#843012","#9A4400"])},{}],67:[function(){d3plus.color.sort=function(t,e){var n=d3.hsl(t),r=d3.hsl(e);return t=0===n.s?361:n.h,e=0===r.s?361:r.h,t===e?n.l-r.l:t-e}},{}],68:[function(){d3plus.color.text=function(t){var e=d3.rgb(t),n=e.r,r=e.g,a=e.b,i=(299*n+587*r+114*a)/1e3;return i>=128?"#444444":"#f7f7f7"}},{}],69:[function(){d3plus.color.validate=function(t){t+="",t=t.replace(/ /g,""),0===t.indexOf("rgb")&&(t=t.split("(")[1].split(")")[0].split(",").slice(0,3).join(",")),0===t.indexOf("hsl")&&(t=t.split(",")[2].split(")")[0]);var e=d3.rgb(t).toString(),n=["black","#000","#000000","0%","0,0,0"],r=n.indexOf(t)>=0;return"#000000"!==e||r}},{}],70:[function(){d3plus.data.color=function(t){t.dev.value&&d3plus.console.time("getting color data range");var e=[];if(t.data.pool.forEach(function(n){var r=parseFloat(d3plus.variable.value(t,n,t.color.value));"number"==typeof r&&!isNaN(r)&&e.indexOf(r)<0&&e.push(r)}),t.dev.value&&d3plus.console.timeEnd("getting color data range"),e.length>1){if(t.dev.value&&d3plus.console.time("calculating color scale"),e=d3.extent(e),e[0]<0&&e[1]>0){var n=t.color.range;3==n.length&&(e.push(e[1]),e[1]=0)}else if(e[1]>0&&e[0]>=0){var n=t.color.heatmap;e=d3plus.util.buckets(e,n.length)}else{var n=t.color.range.slice(0);e[0]<0?n.pop():n.shift()}t.color.scale=d3.scale.sqrt().domain(e).range(n).interpolate(d3.interpolateRgb),t.dev.value&&d3plus.console.timeEnd("calculating color scale")}else t.color.scale=null}},{}],71:[function(){d3plus.data.edges=function(t){if(t.dev.value){var e="analyzing edges list";d3plus.console.time(e)}var n=d3plus.visualization[t.type.value].requirements,r=n.indexOf("nodes")>=0&&!t.nodes.value;if(r){t.nodes.value=[];var a=[];t.nodes.changed=!0}t.edges.value.forEach(function(e){if("object"!=typeof e[t.edges.source]){var n={};n[t.id.value]=e[t.edges.source],e[t.edges.source]=n}if("object"!=typeof e[t.edges.target]){var n={};n[t.id.value]=e[t.edges.target],e[t.edges.target]=n}"keys"in t.data||(t.data.keys={}),t.id.value in t.data.keys||(t.data.keys[t.id.value]=typeof e[t.edges.source][t.id.value]),r&&(a.indexOf(e[t.edges.source][t.id.value])<0&&(a.push(e[t.edges.source][t.id.value]),t.nodes.value.push(e[t.edges.source])),a.indexOf(e[t.edges.target][t.id.value])<0&&(a.push(e[t.edges.target][t.id.value]),t.nodes.value.push(e[t.edges.target])))}),t.edges.value=t.edges.value.filter(function(e){var n=e[t.edges.source][t.id.value],r=e[t.edges.target][t.id.value];if(n===r){var a=t.format.locale.value.dev.sameEdge;return d3plus.console.warning(d3plus.string.format(a,'"'+n+'"'),"edges"),!1}return!0}),t.edges.linked=!0,t.dev.value&&d3plus.console.timeEnd(e)}},{}],72:[function(){d3plus.data.element=function(t){function e(t,e){[].forEach.call(e.attributes,function(e){if(/^data-/.test(e.name)){var n=e.name.substr(5).replace(/-(.)/g,function(t,e){return e.toUpperCase()});t[n]=e.value}}),r.forEach(function(n){null!==e.getAttribute(n)&&(t[n]=e.getAttribute(n))})}function n(t){t.style("position","absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important").html("")}var r=[t.color.value,t.icon.value,t.keywords.value,t.alt.value,"style"];t.text.value||t.self.text("text"),r=r.concat(t.id.nesting),t.data.element=t.data.value;
var a=t.data.element.node().tagName.toLowerCase(),i=t.data.element.attr("type"),o=[];if("select"===a){var l=t.data.element.node().id;l&&t.self.container({id:l}),t.data.element.selectAll("option").each(function(n,r){var a={};if(a.text=this.innerHTML,e(a,this),o.push(a),this.selected)for(var r=t.id.nesting.length-1;r>=0;r--){var i=t.id.nesting[r];if(i in a){t.self.focus(a[i]);break}}})}else if("input"===a&&"radio"===i){var s=t.data.element.node().getAttribute("name");s&&t.self.container({id:s}),t.data.element.each(function(){var r={};e(r,this);var a=r[t.id.value]||this.id||!1;if(a&&isNaN(parseFloat(a))){var i=d3.select("label[for="+a+"]");i.empty()||(r.text=i.html(),i.call(n))}o.push(r),this.checked&&(t.focus.value=r[t.id.value])})}!t.focus.value&&o.length&&(t.data.element.node().selectedIndex=0,t.self.focus(o[0][t.id.value]));var u=d3.select("legend[for="+t.container.id+"]");u.empty()||(t.self.title(u.html()),u.call(n)),t.data.element.call(n);var c=t.container.value?t.container.value.node().tagName.toLowerCase():!1;return(t.container.value===!1||"body"===c)&&(t.container.value=d3.select(t.data.element.node().parentNode)),o}},{}],73:[function(){d3plus.data.fetch=function(t,e){if(!e&&"time"in t){var n=t.time.solo.value.length?"solo":"mute",e=[];if(t.time[n].value.length){var e=[];t.time[n].value.forEach(function(n){"function"==typeof n?t.data.time.forEach(function(t){n(t)&&e.push(t)}):e.push(n)}),"mute"===n&&(e=t.data.time.filter(function(t){return e.indexOf(t)<0}))}else e.push("all")}else e=["all"];var r=[t.type.value,t.id.value,t.depth.value].concat(t.data.filters).concat(e),a=t.data.solo.length?"solo":"mute",i=d3.keys(t.data.cache),o="viz"===t.shell?d3plus.visualization[t.type.value].filter:null;t.data[a].length&&t.data[a].forEach(function(e){var n=t[e][a].value.slice(0);n.unshift(e),r=r.concat(n)}),r=r.join("_");for(var l=0;l<i.length;l++){var s=i[l].split("_").slice(1).join("_");if(s===r){r=(new Date).getTime()+"_"+r,t.data.cache[r]=t.data.cache[i[l]],delete t.data.cache[i[l]];break}}if(t.data.cache[r]){t.dev.value&&d3plus.console.comment("data already cached");var u=t.data.cache[r];return"function"==typeof o&&(u=o(t,u)),u}if(t.data.value)if(1===e.length)var u=t.data.nested[e[0]][t.id.value];else{var c=[],u=[];if(e.forEach(function(e){t.data.nested[e]?u=u.concat(t.data.nested[e][t.id.value]):c.push(e)}),0===u.length&&c.length&&!t.internal_error){var d=t.format.locale.value.error.dataYear,f=t.format.locale.value.ui.and;c=d3plus.string.list(c,f),t.internal_error=d3plus.string.format(d,c)}else{var p=!1;if(t.axes.values.forEach(function(e){t[e].value===t.time.value&&"continuous"===t[e].scale.value&&(p=!0)}),!p){var h=t.id.nesting.slice(0,t.depth.value+1);u=d3plus.data.nest(t,u,h)}}}else var u=[];u=u?d3plus.data.filter(t,u):[];var i=d3.keys(t.data.cache);return 20===i.length&&(i.sort(),delete t.data.cache(i[0])),r=(new Date).getTime()+"_"+r,t.data.cache[r]=u,"function"==typeof o&&(u=o(t,u)),t.dev.value&&d3plus.console.comment("storing data in cache"),u}},{}],74:[function(){d3plus.data.filter=function(t,e){t.dev.value&&d3plus.console.time("filtering data");var n=d3.keys(t.data.keys||{});"attrs"in t&&(n=n.concat(d3.keys(t.attrs.keys||{}))),e=e.filter(function(e){return t.id.value in e}),t.data.filters.forEach(function(r){n.indexOf(t[r].value)>=0&&(e=e.filter(function(e){var n=d3plus.variable.value(t,e,t[r].value);return"size"===r?"number"==typeof n&&n>0:null!==n}))});var r=t.data.solo.length?"solo":"mute";return t.data[r].forEach(function(n){function a(e){var a=t[n][r].value,i=!1;return a.forEach(function(t){"function"==typeof t?i=t(e):t===e&&(i=!0)}),i}function i(e){var i=!1;return t[n].nesting?t[n].nesting.forEach(function(n){i||(i=a(d3plus.variable.value(t,e,n)))}):i=a(d3plus.variable.value(t,e,t[n].value)),"solo"===r?i:!i}e=e.filter(i),"id"===n&&("nodes"in t&&t.nodes.value&&(t.dev.value&&d3plus.console.log("Filtering Nodes"),t.nodes.restricted=t.nodes.value.filter(i)),"edges"in t&&t.edges.value&&(t.dev.value&&d3plus.console.log("Filtering Connections"),t.edges.restricted=t.edges.value.filter(function(e){var n=i(e[t.edges.source]),r=i(e[t.edges.target]);return n&&r})))}),t.dev.value&&d3plus.console.timeEnd("filtering data"),e}},{}],75:[function(){d3plus.data.format=function(t){if(t.dev.value){var e="disaggregating data by time and nesting";d3plus.console.time(e)}if(t.time&&t.time.value){t.data.time=d3plus.util.uniques(t.data.value,t.time.value);for(var n=0;n<t.data.time.length;n++)t.data.time[n]=parseInt(t.data.time[n]);t.data.time=t.data.time.filter(function(t){return t}),t.data.time.sort()}else t.data.time=[];t.data.nested={all:{}},t.id.nesting.forEach(function(e,n){var r=t.id.nesting.slice(0,n+1);t.data.nested.all[e]=d3plus.data.nest(t,t.data.value,r)}),t.data.time.forEach(function(e){t.data.nested[e]={};var n=t.data.value.filter(function(n){return parseInt(d3plus.variable.value(t,n,t.time.value))===e});t.id.nesting.forEach(function(r,a){var i=t.id.nesting.slice(0,a+1);t.data.nested[e][r]=d3plus.data.nest(t,n,i)})}),t.dev.value&&d3plus.console.timeEnd(e)}},{}],76:[function(){d3plus.data.keys=function(t,e){function n(r){if(r instanceof Array)r.forEach(function(t){n(t)});else if(d3plus.object.validate(r))for(var a in r)d3plus.object.validate(r[a])?n(r[a]):a in t[e].keys||!r[a]||(t[e].keys[a]=typeof r[a])}if(t.dev.value){var r=e+" key analysis";console.time(r)}if(t[e].keys={},d3plus.object.validate(t[e].value))for(var a in t[e].value)n(t[e].value[a]);else n(t[e].value);t.dev.value&&console.time(r)}},{}],77:[function(t){var e;e=t("static-kdtree"),d3plus.data.lof=function(t,n){var r,a,i,o,l,s,u,c,d,f,p,h;return null==n&&(n=10),h=e(t),u=function(){var e,r,a;for(a=[],e=0,r=t.length;r>e;e++)c=t[e],a.push(h.knn(c,n+1).slice(1));return a}(),p=function(e,n){var r,a,i,o,l,s;for(r=t[e],a=t[n],o=0,e=l=0,s=r.length;s>=0?s>l:l>s;e=s>=0?++l:--l)i=r[e]-a[e],o+=i*i;return o},o=function(){var e,r,i;for(i=[],a=e=0,r=t.length;r>=0?r>e:e>r;a=r>=0?++e:--e)i.push(p(a,u[a][n-1]));return i}(),d=function(t,e){return Math.max(p(t,e),o[e])},l=function(t){var e,r,a,i,o;for(r=0,o=u[t],a=0,i=o.length;i>a;a++)e=o[a],r+=d(t,e);return n/r},s=function(){var e,n,r;for(r=[],a=e=0,n=t.length;n>=0?n>e:e>n;a=n>=0?++e:--e)r.push(l(a));return r}(),f=function(){var e,o,l,c,d,f;for(f=[],a=e=0,c=t.length;c>=0?c>e:e>c;a=c>=0?++e:--e){for(r=0,d=u[a],o=0,l=d.length;l>o;o++)i=d[o],r+=s[i];r/=n,f.push([a,r/s[a]])}return f}(),f.sort(function(t,e){return e[1]-t[1]}),f}},{"static-kdtree":8}],78:[function(){d3plus.data.mad=function(t){var e,n,r;return n=d3.median(t),e=d3.median(t.map(function(t){return Math.abs(t-n)})),r=t.map(function(t,r){return[r,Math.abs(t-n)/e]}),r.sort(function(t,e){return e[1]-t[1]}),r}},{}],79:[function(){d3plus.data.nest=function(t,e,n,r){var a=d3.nest(),i=[],o="viz"===t.shell?["active","temp","total"]:[],r=r instanceof Array?r:"viz"===t.shell?d3plus.visualization[t.type.value].requirements:[],l="viz"===t.shell?[t.time.value,t.icon.value]:[],s=function(){r&&r.length&&t.axes.values.forEach(function(e){var n=t[e].value;r.indexOf(e)>=0&&n&&"continuous"===t[e].scale.value&&(l.push(n),a.key(function(e){return d3plus.variable.value(t,e,n)}))})};n.forEach(function(e){a.key(function(n){return"function"==typeof e?e(n):d3plus.variable.value(t,n,e)}),s()}),n.length||(a.key(function(){return!0}),s());var u=n.length?n.length-1:0;a.rollup(function(e){if(1===e.length&&"d3plus"in e[0]){var n=e[0];return n.d3plus.depth=u,i.push(n),n}"size"in t&&t.size.value&&d3plus.util.uniques(e,t.size.value).length&&d3plus.array.sort(e,t.size.value,"desc",[],t);var n={d3plus:{depth:u}};o.forEach(function(r){var a=t[r].value||r;n.d3plus[a]=d3.sum(e,function(e){if(t[r].value){var n=d3plus.variable.value(t,e,t[r].value);"number"!=typeof n&&(n=n?1:0)}else if("total"===r)var n=1;else var n=0;return n})});for(var r in t.data.keys){var a=t.aggs.value[r]||"sum",l=typeof a,s=t.data.keys[r],c=t.id.nesting.indexOf(r)>=0,d="time"in t&&r===t.time.value;if(r in n.d3plus)n[r]=n.d3plus[r];else if("function"===l)n[r]=t.aggs.value[r](e);else if("number"!==s||"string"!==l||c||d){var f=1===e.length?e[0][r]:d3plus.util.uniques(e,r);if(f instanceof Array&&1===f.length&&"string"==typeof f[0]&&0===f[0].indexOf("[object Object]")){var p=[];e.forEach(function(t){p=p.concat(t[r])});var f=d3plus.util.uniques(p,r)}if(f)f instanceof Array||(f=[f]),f.length&&(n[r]=f.length<=e.length&&c&&t.id.nesting.indexOf(r)>u&&f.length>1?e:1===f.length?f[0]:f);else if(c){var h=t.id.nesting.indexOf(r)-1;h>=u&&(!("endPoint"in n.d3plus)||n.d3plus.endPoint>u)&&(n.d3plus.endPoint=u)}}else n[r]=d3[a](e,function(t){return r in t?t[r]:!1})}return i.push(n),n});var c=function(t){return t.values&&t.values.length?(t.children=t.values.map(function(t){return c(t)}),delete t.values,t):t.values?t.values:t},d=function(e,r,a){if(e.children){"number"==t.data.keys[n[r]]&&(e.key=parseFloat(e.key)),a[n[r]]=e.key,delete e.key;for(var i in a)e[i]=a[i];r++,e.children.forEach(function(t){d(t,r,a)})}};return a=a.entries(e).map(c).map(function(t){return d(t,0,{}),t}),i}},{}],80:[function(){d3plus.data.nodes=function(t){if(t.dev.value){var e="analyzing node positions";d3plus.console.time(e)}var n=t.nodes.value.filter(function(t){return"number"==typeof t.x&&"number"==typeof t.y}).length;if(n==t.nodes.value.length)t.nodes.positions=!0;else{var r=d3.layout.force().size([t.width.viz,t.height.viz]).nodes(t.nodes.value).links(t.edges.value),a=50,i=.01;r.start();for(var o=a;o>0&&(r.tick(),!(r.alpha()<i));--o);r.stop(),t.nodes.positions=!0}t.dev.value&&d3plus.console.timeEnd(e)}},{}],81:[function(){d3plus.data.reset=function(t,e){t.changed&&(t.changed=!1),"draw"===e&&(t.frozen=!1,t.update=!0,t.first=!1);for(var n in t)d3plus.object.validate(t[n])&&d3plus.data.reset(t[n],n)}},{}],82:[function(){d3plus.data.threshold=function(t,e,n){if(t.size.threshold===!1)var r=0;else if("number"==typeof t.size.threshold)var r=t.size.threshold;else if("number"==typeof d3plus.visualization[t.type.value].threshold)var r=d3plus.visualization[t.type.value].threshold;else if("function"==typeof d3plus.visualization[t.type.value].threshold)var r=d3plus.visualization[t.type.value].threshold(t);else var r=.02;if("number"==typeof r&&r>0){var a=[],i=0==t.depth.value?0:{},o=[],l={},s=d3.nest();n&&s.key(function(e){return d3plus.variable.value(t,e,n)}),s.rollup(function(e){var r=e.length;t.aggs[t.size.value]?"function"==typeof t.aggs[t.size.value]?r=t.aggs[t.size.value](e):"string"==typeof t.aggs[t.size.value]&&(r=d3[t.aggs[t.size.value]](e,function(e){return d3plus.variable.value(t,e,t.size.value)})):r=d3.sum(e,function(e){return d3plus.variable.value(t,e,t.size.value)});var a=n?d3plus.variable.value(t,e[0],n):"all";return l[a]=r,r}).entries(e);var u=e.filter(function(e){var s=d3plus.variable.value(t,e,t.id.value),u=d3plus.variable.value(t,e,t.size.value),c=n?d3plus.variable.value(t,e,n):"all";if(a.indexOf(s)<0&&u/l[c]>=r&&a.push(s),a.indexOf(s)<0){if(0==t.depth.value)u>i&&(i=u);else{var d=e[t.id.nesting[t.depth.value-1]];d in i||(i[d]=0),u>i[d]&&(i[d]=u)}return o.push(e),!1}return!0});if(o.length>1){o=d3plus.array.sort(o,t.size.value,"desc",[],t);var c=t.id.nesting.slice(0,t.depth.value),d=d3plus.data.nest(t,o,c).filter(function(e){return d3plus.variable.value(t,e,t.size.value)>0});d.forEach(function(e){var n=t.id.nesting[t.depth.value-1];if(t.id.nesting.forEach(function(n,r){if(t.depth.value==r){var a=e[t.id.nesting[r-1]];e[n]="string"==typeof a?"d3plus_other_"+a:"d3plus_other"}else r>t.depth.value&&delete e[n]}),t.color.value&&"string"===t.color.type&&(e[t.color.value]=0==t.depth.value?t.color.missing:d3plus.variable.color(t,e[n],n)),t.icon.value&&0!=t.depth.value&&(e[t.icon.value]=d3plus.variable.value(t,e[n],t.icon.value,n),e.d3plus.depth=t.depth.value+1),0==t.depth.value){var a=t.format.value(t.format.locale.value.ui.values);a+=" < "+t.format.value(i)}else{var l=d3plus.variable.text(t,e,t.depth.value-1)[0],a=l;a+=" < "+t.format.value(i[e[n]],t.size.value)}a+=" ("+t.format.value(100*r)+"%)",e.d3plus.threshold=i,n?(e.d3plus.merged=[],o.forEach(function(t){e[n]==t[n]&&e.d3plus.merged.push(t)})):e.d3plus.merged=o,t.text.value?e[t.text.value]=a:e.d3plus.text=a})}else d=o;return u.concat(d)}return e}},{}],83:[function(){d3plus.data.url=function(t,e,n){t.dev.value&&d3plus.console.time("loading "+e);var r=t[e].url;if(t[e].filetype.value)var a=t[e].filetype.value;else{var a=r.slice(r.length-5).split(".");a=a.length>1?a[1]:!1,a?("txt"===a&&(a="text"),t[e].filetype.accepted.indexOf(a)<0&&(a="json")):a="json"}if("dsv"===a)var i=d3.dsv(t[e].delimiter.value,"text/plain");else var i=d3[a];i(r,function(i,o){if(!i&&o){if("function"==typeof t[e].callback){var l=t[e].callback(o);if(l)if(d3plus.object.validate(l)&&e in l)for(var s in l)s in t&&(t[s].value=l[s]);else t[e].value=l}else t[e].value=o;"json"!==a&&t[e].value.forEach(function(t){for(var e in t)"false"===t[e].toLowerCase()?t[e]=!1:"true"===t[e].toLowerCase()?t[e]=!0:"null"===t[e].toLowerCase()?t[e]=null:"undefined"===t[e].toLowerCase()&&(t[e]=void 0)}),t[e].changed=!0,t[e].loaded=!0}else t.internal_error='Could not load data from: "'+r+'"';t.dev.value&&d3plus.console.time("loading "+e),n()})}},{}],84:[function(t){var e;e=t("../style/sheet.coffee"),d3plus.font.awesome=e("font-awesome")},{"../style/sheet.coffee":223}],85:[function(){d3plus.font.sizes=function(t,e,n){var r=n||d3plus.font.tester("svg").append("text"),e=e||{},a=[];t instanceof Array||(t=[t]);var i=r.selectAll("tspan.d3plus_testFontSize").data(t);return i.enter().append("tspan").attr("class","d3plus_testFontSize").text(String).style(e).attr("x",0).attr("y",0).each(function(t){a.push({height:this.offsetHeight,text:t,width:this.getComputedTextLength()})}),i.remove(),r||r.remove(),a}},{}],86:[function(){d3plus.font.tester=function(t){if(["div","svg"].indexOf(t)<0)var t="div";var e=d3.select("body").selectAll(t+".d3plus_tester").data(["d3plus_tester"]);return e.enter().append(t).attr("class","d3plus_tester").style("position","absolute").style("left","-9999px").style("top","-9999px").style("visibility","hidden").style("display","block"),e}},{}],87:[function(){d3plus.font.validate=function(t){function e(t){return i.append("span").style("font-family",t).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")}function n(t,e){var n=t.node().offsetWidth,r=e.node().offsetWidth;return n!==r}t instanceof Array||(t=t.split(","));var r=t.join(", "),a=d3plus.font.validate.complete;if(r in a)return a[r];var i=d3plus.font.tester("div"),o=e("monospace"),l=e("sans-serif");for(var s in t){var u=t[s].trim(),c=e(u+",monospace"),d=n(c,o);if(c.remove(),!d){var c=e(u+",sans-serif");d=n(c,l),c.remove()}if(d){d=u;break}}return d||(d="sans-serif"),o.remove(),l.remove(),a[r]=d,d},d3plus.font.validate.complete={}},{}],88:[function(){d3plus.form=function(){var t={shell:"form"};t.self=function(){function e(n,r){var r="number"!=typeof r?1===t.id.nesting.length?0:t.id.nesting.length-1:r,a=t.id.nesting[r];return r>0&&(!(a in n)||n[a]instanceof Array)?e(n,r-1):a}var n=t.data.value instanceof Array&&t.data.value.length>t.data.large;if(t.draw.timing=t.draw.first||n||d3plus.ie?0:t.timing.ui,t.data.value instanceof Array){if(t.dev.value&&d3plus.console.groupCollapsed('drawing "'+t.type.value+'"'),t.data.changed&&(t.data.cache={},d3plus.data.keys(t,"data"),d3plus.data.format(t)),t.data.app=d3plus.data.fetch(t),(t.data.changed||t.order.changed||t.order.sort.changed)&&d3plus.array.sort(t.data.app,t.order.value||t.text.value,t.order.sort.value,t.color.value,t),!t.focus.value&&t.data.app.length&&(t.focus.value=t.data.app[0][t.id.value],t.dev.value&&d3plus.console.log('"value" set to "'+t.focus+'"')),t.data.changed){"auto"===t.search.value?t.data.app.length>10?(t.search.enabled=!0,t.dev.value&&d3plus.console.log("Search enabled.")):(t.search.enabled=!1,t.dev.value&&d3plus.console.log("Search disabled.")):t.search.enabled=t.search.value;var r=t.data.element?t.data.element.node().tagName.toLowerCase():"";if(t.data.element&&"select"===r){var a=[];for(var i in t.data.nested.all)a=a.concat(t.data.nested.all[i]);options=t.data.element.selectAll("option").data(a,function(t){var n=e(t);return t&&n in t?t[n]:!1}),options.exit().remove(),options.enter().append("option"),options.each(function(n){var r=e(n),a=r===t.id.value?t.text.value||t.id.value:t.text.nesting!==!0&&r in t.text.nesting?t.text.nesting[r]:r;for(var i in n)"object"!=typeof n[i]&&(i===a&&d3.select(this).html(n[i]),["alt","value"].indexOf(i)>=0?d3.select(this).attr(i,n[i]):d3.select(this).attr("data-"+i,n[i]));this.selected=n[r]===t.focus.value?!0:!1})}}else if(t.focus.changed&&t.data.element){var r=t.data.element.node().tagName.toLowerCase();"select"===r&&t.data.element.selectAll("option").each(function(n){var r=e(n);this.selected=n[r]===t.focus.value?!0:!1})}if("auto"!==t.type.value){if(!t.container.ui){t.container.ui=t.container.value.selectAll("div#d3plus_"+t.type.value+"_"+t.container.id).data(["container"]);var o=t.data.element?t.data.element[0][0]:null;if(o)if(o.id)o="#"+o.id;else{var l=o.getAttribute(t.id.value)?t.id.value:"data-"+t.id.value;o=o.getAttribute(l)?"["+l+"="+o.getAttribute(l)+"]":null}t.container.ui.enter().insert("div",o).attr("id","d3plus_"+t.type.value+"_"+t.container.id).style("position","relative").style("overflow","visible").style("vertical-align","top")}t.container.ui.transition().duration(t.draw.timing).style("display",t.ui.display.value).style("margin",t.ui.margin+"px");var s=t.container.ui.selectAll("div.d3plus_title").data(t.title.value?[t.title.value]:[]);s.enter().insert("div","#d3plus_"+t.type.value+"_"+t.container.id).attr("class","d3plus_title"),s.style("display",t.ui.display.value).style("color",t.font.color).style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("padding",t.ui.padding+"px").style("border-color","transparent").style("border-style","solid").style("border-width",t.ui.border+"px").text(String).each(function(){t.margin.left=this.offsetWidth})}if(t.data.value.length){var u=t.format.locale.value.visualization[t.type.value];t.dev.value&&d3plus.console.time("drawing "+u),d3plus.input[t.type.value](t),t.dev.value&&d3plus.console.timeEnd("drawing "+u)}else!t.data.url||t.data.loaded&&!t.data.stream||d3plus.data.url(t,"data",t.self.draw);d3plus.data.reset(t),t.methodGroup=!1,t.dev.value&&d3plus.console.groupEnd()}};var e=["active","aggs","alt","color","container","depth","dev","data","draw","focus","format","height","history","hover","icon","id","keywords","margin","open","order","remove","search","select","selectAll","text","title","type","width"],n=["data","font","icon","timing","title","ui"];return d3plus.method(t,e,n),t.self}},{}],89:[function(){d3plus.input.auto=function(t){var e=t.data.value.length;1===e?t.self.type("button").draw():5>e?t.self.type("toggle").draw():t.self.type("drop").draw()}},{}],90:[function(){d3plus.input.button=function(t){var e=this.button,n=t.container.ui.selectAll("div.d3plus_node").data(t.data.app,function(e){return e[t.id.value]});if(t.dev.value&&d3plus.console.time("enter"),n.enter().append("div").attr("class","d3plus_node").call(e.color,t).call(e.style,t).call(e.icons,t).call(e.mouseevents,t,e.color),t.dev.value&&d3plus.console.timeEnd("enter"),t.draw.update||t.draw.timing){t.dev.value&&d3plus.console.time("ordering"),n.order(),t.dev.value&&d3plus.console.timeEnd("ordering");var r=n}else var a=[t.focus.previous,t.focus.value,t.hover.previous,t.hover.value].filter(function(t){return t}),r=n.filter(function(e){return a.indexOf(e[t.id.value])>=0});t.dev.value&&d3plus.console.time("update"),t.draw.timing?r.transition().duration(t.draw.timing).call(e.color,t).call(e.style,t):r.call(e.color,t).call(e.style,t),r.call(e.icons,t).call(e.mouseevents,t,e.color),t.dev.value&&d3plus.console.timeEnd("update"),n.exit().remove()}},{}],91:[function(){d3plus.input.button.color=function(t,e){t.style("background-color",function(t){return e.focus.value!==t[e.id.value]?e.hover.value===t[e.id.value]?d3plus.color.lighter(e.ui.color.secondary.value,.25):e.ui.color.secondary.value:e.hover.value===t[e.id.value]?d3.rgb(e.ui.color.primary.value).darker(.15).toString():e.ui.color.primary.value}).style("color",function(t){var n=t[e.icon.value]&&e.data.app.length<e.data.large;if(e.focus.value===t[e.id.value])var r=1;else var r=.75;if(e.focus.value===t[e.id.value]&&t[e.color.value]&&!n)var a=d3plus.color.legible(t[e.color.value]);else if(e.focus.value===t[e.id.value])var a=d3plus.color.text(e.ui.color.primary.value);else var a=d3plus.color.text(e.ui.color.secondary.value);var a=d3.rgb(a);return"rgba("+a.r+","+a.g+","+a.b+","+r+")"}).style("border-color",e.ui.color.secondary.value)}},{}],92:[function(){d3plus.input.button.icons=function(t,e){var n="right"===e.font.align.value&&!d3plus.rtl||d3plus.rtl&&"right"===e.font.align.value;t.each(function(t){var r=["label"];t[e.icon.value]&&e.data.app.length<=e.data.large&&r.push("icon");var a=e.icon.button.value;t[e.id.value]===e.focus.value&&e.icon.select.value?(a=e.icon.select.value,r.push("selected")):a&&t.d3plus.icon!==!1&&r.push("selected");var i=0,o=d3.select(this).selectAll("div.d3plus_button_element").data(r,function(t){return t});o.enter().append("div").style("display",function(t){return"label"===t?"block":"absolute"}),o.order().attr("class",function(t){var e="";return"selected"===t&&0===a.indexOf("fa-")&&(e=" fa "+a),"d3plus_button_element d3plus_button_"+t+e}).html(function(n){if("label"===n){var r=e.text.value&&e.text.value in t&&!(t[e.text.value]instanceof Array)?e.text.value:e.id.value;return e.format.value(t[r])}return"selected"===n&&a.indexOf("fa-")<0?a:""}).style("background-image",function(n){return"icon"===n?"url('"+t[e.icon.value]+"')":"none"}).style("background-color",function(n){return"icon"===n&&"knockout"===t.style?t[e.color.value]||e.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(t){return"label"===t?e.font.align.value:"center"}).style("position",function(t){return"label"==t?"static":"absolute"}).style("width",function(t){return"label"===t?"auto":(i=e.height.value?e.height.value-2*e.ui.padding-2*e.ui.border:e.font.size+e.ui.padding+e.ui.border,i+"px")}).style("height",function(t){return"icon"===t?i+"px":"auto"}).style("margin-top",function(t){if("label"===t)return"0px";if(this.offsetHeight)var n=this.offsetHeight;else if("selected"===t)var n=e.font.size;else var n=i;return-n/2+"px"}).style("top",function(t){return"label"===t?"auto":"50%"}).style("left",function(t){return"icon"===t&&!n||"selected"===t&&n?e.ui.padding+"px":"auto"}).style("right",function(t){return"icon"===t&&n||"selected"===t&&!n?e.ui.padding+"px":"auto"}).style(d3plus.prefix()+"transition",function(t){return"selected"===t?e.draw.timing/1e3+"s":"none"}).style(d3plus.prefix()+"transform",function(t){var n="selected"===t?e.icon.select.rotate:"none";return"rotate("+n+"deg)"}).style("opacity",function(t){return"selected"===t?e.icon.select.opacity:1}),o.exit().remove();var l=d3.select(this).selectAll(".d3plus_button_label");if(i>0){i+=2*e.ui.padding;var s=e.ui.padding;if(3===r.length)var u=s+"px "+i+"px";else if(r.indexOf("icon")>=0&&!d3plus.rtl||r.indexOf("selected")>=0&&d3plus.rtl)var u=s+"px "+s+"px "+s+"px "+i+"px";else var u=s+"px "+i+"px "+s+"px "+s+"px";l.style("padding",u)}else l.style("padding",e.ui.padding+"px");if("number"==typeof e.width.value){var c=e.width.value;c-=parseFloat(l.style("padding-left"),10),c-=parseFloat(l.style("padding-right"),10),c-=2*e.ui.border,c+="px"}else var c="auto";l.style("width",c)})}},{}],93:[function(){d3plus.input.button.mouseevents=function(t,e,n){t.on(d3plus.evt.over,function(t){e.self.hover(t[e.id.value]),d3plus.ie||!e.draw.timing?d3.select(this).style("cursor","pointer").call(n,e):d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).call(n,e)}).on(d3plus.evt.out,function(){e.self.hover(!1),d3plus.ie||!e.draw.timing?d3.select(this).style("cursor","auto").call(n,e):d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).call(n,e)}).on(d3plus.evt.click,function(t){t[e.id.value]&&e.self.focus(t[e.id.value]).draw()})}},{}],94:[function(){d3plus.input.button.style=function(t,e){t.style("position","relative").style("margin",e.ui.margin+"px").style("display",e.ui.display.value).style("border-style","solid").style("border-width",e.ui.border+"px").style("font-family",e.font.family.value).style("font-size",e.font.size+"px").style("font-weight",e.font.weight).style("letter-spacing",e.font.spacing+"px")}},{}],95:[function(){d3plus.input.drop=function(t){var e=this.drop;t.margin.top=0,t.margin.title=0,e.element(t),e.keyboard(t),e.window(t),e.width(t),e.button(t),e.selector(t),e.title(t),e.search(t),e.list(t),e.data(t),e.update(t)}},{}],96:[function(){d3plus.input.drop.active=function(t,e,n){var r=[],n=n||t.active.value;if(n instanceof Array)for(var a=0;a<n.length;a++)r.push(this(t,e,n[a]));else{var i=typeof n;r.push("number"===i?t.depth.value===n:"function"===i?n(e):e===n)}return r.indexOf(!0)>=0}},{}],97:[function(){d3plus.input.drop.arrow=function(t){t.dev.value&&d3plus.console.time("rotating arrow");var e="&#x276f;"===t.icon.drop.value?90:0;if(t.open.value!=t.open.flipped.value)var n=180+e;else var n=e;t.container.button.icon({select:{opacity:t.open.value?.5:1,rotate:n}}).draw(),t.dev.value&&d3plus.console.timeEnd("rotating arrow")}},{}],98:[function(){d3plus.input.drop.button=function(t){if("button"in t.container||(t.dev.value&&d3plus.console.time("creating main button"),t.container.button=d3plus.form().container(t.container.ui).type("button").ui({margin:0}),t.dev.value&&d3plus.console.timeEnd("creating main button")),t.focus.changed||t.data.changed||t.depth.changed){var e=t.depth.value,n=d3plus.util.copy(t.data.value.filter(function(n){for(var r=!1,a=0;a<t.id.nesting.length;a++){var i=t.id.nesting[a];if(r=i in n&&n[i]===t.focus.value){e=a;break}}return r})[0]);n||(n=t.container.button.data()[0]||t.data.app[0]),t.container.button.data([n]).id(t.id.nesting).depth(e)}t.container.button.draw({update:t.draw.update}).focus(t.focus.value).font(t.font).icon({button:t.icon.drop.value,select:t.icon.drop.value,value:t.icon.value}).text(t.text.value).timing({ui:t.draw.timing}).ui({color:t.ui.color,padding:t.ui.padding}).width(t.width.value).draw(),t.margin.top+=t.container.button.container(Object).ui.node().offsetHeight,t.container.button.container(Object).ui.on(d3plus.evt.click,function(){t.self.open(!t.open.value).draw()})}},{}],99:[function(){d3plus.input.drop.data=function(e){if(e.data.url&&!e.data.loaded){var n={};n[e.text.value||e.id.value]=e.format.value(e.format.locale.value.ui.loading),e.data.filtered=[n]}else if(e.open.value){var r=e.text.solo.value.length?e.text.solo.value[0].toLowerCase():"",a=d3plus.string.strip(r).split("_"),i=[e.id.value,e.text.value,e.alt.value,e.keywords.value];if(i=i.filter(function(t){return t}),a=a.filter(function(t){return""!=t}),e.text.solo.value.length&&""!==e.text.solo.value[0]){var o=[],l=[],u=[],c=[];e.id.nesting.forEach(function(t){c=c.concat(e.data.nested.all[t])}),c.forEach(function(n){var c=!1;i.forEach(function(i){if(!c&&i in n&&"string"==typeof n[i]){var d=n[i].toLowerCase();if([e.text.value,e.id.value].indexOf(i)>=0&&0==d.indexOf(r))o.push(n),c=!0;else if(d.indexOf(r)>=0)l.push(n),c=!0;else{var f=d3plus.string.strip(d).split("_");for(t in f){if(c)break;for(s in a)if(0===f[t].indexOf(a[s])){u.push(n),c=!0;break}}}}})}),e.data.filtered=d3.merge([o,l,u]),e.data.filtered.forEach(function(t,e){t.d3plus_order=e})}else e.data.filtered=e.data.app,e.id.nesting.length>1&&e.depth.value<e.id.nesting.length-1&&(e.data.filtered=e.data.filtered.filter(function(t){return"endPoint"in t.d3plus&&t.d3plus.endPoint===e.depth.value&&(t.d3plus.icon=!1),!0}));if(0===e.data.filtered.length){var d={},f=e.format.value(e.format.locale.value.ui.noResults);d[e.text.value||e.id.value]=d3plus.string.format(f,'"'+r+'"'),e.data.filtered=[d]}}else e.data.filtered=[]}},{}],100:[function(){d3plus.input.drop.element=function(t){t.data.element&&(t.data.element.on("focus."+t.container.id,function(){t.self.draw({update:!1}).hover(!0).draw()}),t.data.element.on("blur."+t.container.id,function(){var e=t.search.enabled?d3.event.relatedTarget!=t.container.select("input").node():!0;e&&t.self.draw({update:!1}).hover(!1).draw()}),t.data.element.on("change."+t.container.id,function(){t.self.focus(this.value).draw()}),t.data.element.on("keydown.cancel_"+t.container.id,function(){var t=d3.event.keyCode;9!=t&&d3.event.preventDefault()}))}},{}],101:[function(){d3plus.input.drop.height=function(t){var e=t.container.button.container().node().getBoundingClientRect();t.height.secondary=window.innerHeight-e.bottom-t.ui.margin-2*t.ui.padding-2*t.ui.border,t.height.secondary<3*e.height?(t.height.secondary=e.top-10,t.self.open({flipped:!0})):t.self.open({flipped:!1});t.height.secondary>t.height.max&&(t.height.secondary=t.height.max)}},{}],102:[function(){d3plus.input.drop.items=function(t){var e=this;if(t.open.value){t.dev.value&&d3plus.console.time("updating list items"),"items"in t.container||(t.container.items=d3plus.form().container(t.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1));var n=t.draw.timing?t.data.large:1,r=d3plus.util.copy(t.order),a=t.depth.value===t.id.nesting.length-1;r.value=t.text.solo.value.length&&""!==t.text.solo.value[0]?"d3plus_order":t.order.value,(t.focus.changed||!t.container.items.focus())&&t.container.items.focus(t.focus.value,function(n){var r=n!==t.focus.value;r&&t.active.value&&(r=e.active(t,n)),r&&t.self.focus(n);var a=t.data.filtered.filter(function(e){return e[t.id.value]===n})[0];if(t.depth.value<t.id.nesting.length-1&&t.id.nesting[t.depth.value+1]in a){var i=t.depth.value,o=t.id.solo.value;t.history.states.push(function(){t.self.depth(i).id({solo:o}).draw()}),t.self.depth(t.depth.value+1).id({solo:[n]}).draw()}else t.depth.changed?r&&t.self.draw():t.self.open(!1).draw()}),t.container.items.active(t.active.value).data({large:n,value:t.data.filtered}).draw({update:t.draw.update}).font(t.font.secondary).id(t.id.value).icon({button:a?!1:t.icon.next,select:a?t.icon.select:!1}).order(r).text(t.text.secondary.value||t.text.value).timing({ui:t.draw.timing}).ui({color:{primary:1===t.id.nesting.length?t.ui.color.primary.value:t.ui.color.secondary.value,secondary:t.ui.color.secondary.value},padding:t.ui.padding}).draw(),t.dev.value&&d3plus.console.timeEnd("updating list items")}}},{}],103:[function(){d3plus.input.drop.keyboard=function(t){d3.select(document).on("keydown."+t.container.id,function(){if(t.open.value||t.hover===!0){var e=d3.event.keyCode,n=t.container.list.select("div").selectAll("div.d3plus_node"),r=0;if(n.each("boolean"==typeof t.hover?function(e,n){e.value==t.focus&&(r=n)}:function(e,n){e.value==t.hover&&(r=n)}),[9].indexOf(e)>=0&&(!t.search.enabled||t.search.enabled&&!d3.event.shiftKey))t.self.draw({update:!1}).disable();else if([40].indexOf(e)>=0){if(t.open.value&&(r>=n.size()-1?r=0:r+=1),"boolean"!=typeof t.hover)var a=n.data()[r].value;else var a=t.focus;t.open.value?t.self.draw({update:!1}).hover(a).draw(60):t.self.draw({update:!1}).hover(a).enable()}else if([38].indexOf(e)>=0){if(t.open.value&&(0>=r?r=n.size()-1:r-=1),"boolean"!=typeof t.hover)var a=n.data()[r].value;else var a=t.focus;t.open.value?t.self.draw({update:!1}).hover(a).draw(60):t.self.draw({update:!1}).hover(a).enable()}else[13].indexOf(e)>=0?"boolean"!=typeof t.hover?t.self.value(t.hover).hover(!0).draw():t.self.hover(t.focus).toggle():[27].indexOf(e)>=0&&(t.open.value?t.self.hover(!0).disable():t.hover===!0&&t.self.hover(!1).draw())}})}},{}],104:[function(){d3plus.input.drop.list=function(t){t.dev.value&&d3plus.console.time("populating list"),t.container.list=t.container.selector.selectAll("div.d3plus_drop_list").data(["list"]),t.container.list.enter().append("div").attr("class","d3plus_drop_list").attr("id","d3plus_drop_list_"+t.container.id).style("overflow-y","auto").style("overflow-x","hidden"),t.dev.value&&d3plus.console.timeEnd("populating list")
}},{}],105:[function(){d3plus.input.drop.scroll=function(t){if(t.open.value){t.dev.value&&d3plus.console.time("calculating height");var e=!1;if("none"==t.container.selector.style("display"))var e=!0;e&&t.container.selector.style("display","block");var n=t.search.enabled?t.container.search.node().offsetHeight:0,r=t.container.selector.style("height"),a=t.container.selector.property("scrollTop"),i=t.container.list.style("max-height"),o=t.container.list.property("scrollTop");t.container.selector.style("height","auto"),t.container.list.style("max-height","200000px"),t.container.listHeight=parseFloat(t.container.selector.style("height"),10),t.container.list.style("max-height",i).property("scrollTop",o),t.container.selector.style("height",r).property("scrollTop",a);var l=!1;if(t.container.listHeight>t.height.secondary&&(t.container.listHeight=t.height.secondary,l=!0),e&&t.container.selector.style("display","none"),t.dev.value&&d3plus.console.timeEnd("calculating height"),l){t.dev.value&&d3plus.console.time("calculating scroll position");var s=t.container.list.select("div").selectAll("div.d3plus_node"),u=s[0][0];s.each(function(e){e[t.id.value]==t.focus.value&&(u=this)});var e=!1;"none"===t.container.selector.style("display")&&(e=!0,t.container.selector.style("display","block"));var c=u.offsetTop,d=u.offsetHeight,f=t.container.list.property("scrollTop");e&&t.container.selector.style("display","none"),e||t.data.changed||t.depth.changed?t.container.listScroll=c:(t.container.listScroll=f,f>c?t.container.listScroll=c:c+d>f+t.height.secondary-n&&(t.container.listScroll=c-(t.height.secondary-d-n))),t.dev.value&&d3plus.console.timeEnd("calculating scroll position")}else t.container.listScroll=0}else t.container.listScroll=t.container.list.property("scrollTop"),t.container.listHeight=0}},{}],106:[function(){d3plus.input.drop.search=function(t){function e(e){e.style("padding",t.ui.padding+"px").style("display","block").style("background-color",t.ui.color.secondary.value)}function n(e){var n=t.width.secondary-4*t.ui.padding-2*t.ui.border;e.style("padding",t.ui.padding+"px").style("width",n+"px").style("border-style","solid").style("border-width","0px").style("font-family",t.font.secondary.family.value).style("font-size",t.font.secondary.size+"px").style("font-weight",t.font.secondary.weight).style("text-align",t.font.secondary.align).style("outline","none").style(d3plus.prefix()+"border-radius","0").attr("placeholder",t.format.value(t.format.locale.value.method.search))}t.dev.value&&d3plus.console.time("creating search");var r=this;t.container.search=t.container.selector.selectAll("div.d3plus_drop_search").data(t.search.enabled?["search"]:[]),t.draw.timing?(t.container.search.transition().duration(t.draw.timing).call(e),t.container.search.select("input").transition().duration(t.draw.timing).call(n)):(t.container.search.call(e),t.container.search.select("input").call(n)),t.container.search.enter().insert("div","#d3plus_drop_list_"+t.container.id).attr("class","d3plus_drop_search").attr("id","d3plus_drop_search_"+t.container.id).call(e).append("input").attr("id","d3plus_drop_input_"+t.container.id).style("-webkit-appearance","none").call(n),t.container.search.select("input").on("keyup."+t.container.id,function(){t.text.solo[0]!==this.value&&(t.self.text({solo:[this.value]}),r.data(t),r.items(t),r.update(t))}),t.container.search.exit().remove(),t.search.enabled&&(t.margin.title+=t.container.search.node().offsetHeight),t.dev.value&&d3plus.console.timeEnd("creating search")}},{}],107:[function(){d3plus.input.drop.selector=function(t){t.container.selector=t.container.ui.selectAll("div.d3plus_drop_selector").data(["selector"]),t.container.selector.enter().append("div").attr("class","d3plus_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden"),t.container.selector.style("padding",t.ui.border+"px")}},{}],108:[function(){d3plus.input.drop.title=function(t){function e(e){e.style("padding",t.ui.padding+"px").style("display","block").style("background-color",t.ui.color.secondary.value).style("font-family",t.font.secondary.family.value).style("font-size",t.font.secondary.size+"px").style("font-weight",t.font.secondary.weight).style("text-align",t.font.secondary.align).style("color",d3plus.color.text(t.ui.color.secondary.value))}function n(e){if(!e.empty()){var n=0===t.icon.back.value.indexOf("fa-")?" fa "+t.icon.back.value:"";n="d3plus_drop_back"+n;var r=0===t.icon.back.value.indexOf("fa-")?"":t.icon.back.value;e.style("position","absolute").attr("class",n).style("top",t.ui.padding+t.font.secondary.size/2/2.5+"px").html(r)}}function r(e){var n=i?t.focus.value:t.format.locale.value.ui.back;e.text(t.format.value(n)).style("padding","0px "+2*t.ui.padding+"px")}if(t.open.value){t.dev.value&&d3plus.console.time("creating title and back button");var a=1===t.id.solo.value.length&&t.depth.value>0,i=a,o=t.container.button.data(Object).app[0];i=!0;for(var l=0;l<t.id.nesting.length;l++){var s=t.id.nesting[l];if(s in o&&o[s]===t.focus.value){i=!1;break}}t.container.title=t.container.selector.selectAll("div.d3plus_drop_title").data(a?["title"]:[]),t.draw.timing?(t.container.title.transition().duration(t.draw.timing).call(e),t.container.title.select("div.d3plus_drop_title_text").transition().duration(t.draw.timing).call(r)):(t.container.title.call(e),t.container.title.select("div.d3plus_drop_title_text").call(r)),t.container.title.select("span.d3plus_drop_back").call(n);var u=t.container.title.enter().insert("div","#d3plus_drop_list_"+t.container.id).attr("class","d3plus_drop_title").attr("id","d3plus_drop_title_"+t.container.id).call(e);u.append("span").attr("id","d3plus_drop_back_"+t.container.id).attr("class","d3plus_drop_back").call(n),u.append("div").attr("id","d3plus_drop_title_text_"+t.container.id).attr("class","d3plus_drop_title_text").call(r),t.container.title.on(d3plus.evt.over,function(){var e=d3plus.color.lighter(t.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(t.timing.mouseevents).style("background-color",e).style("color",d3plus.color.text(e))}).on(d3plus.evt.out,function(){var e=t.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(t.timing.mouseevents).style("background-color",e).style("color",d3plus.color.text(e))}).on(d3plus.evt.click,function(){t.history.back()}),t.container.title.exit().remove(),a&&(t.margin.title+=t.container.title.node().offsetHeight),t.dev.value&&d3plus.console.timeEnd("creating title and back button")}}},{}],109:[function(){d3plus.input.drop.update=function(t){function e(e){e.style("left",function(){return"left"===t.font.align.value?t.margin.left+"px":"center"===t.font.align.value?-((t.width.secondary-t.width.value)/2)+"px":"auto"}).style("right",function(){return"right"===t.font.align.value?"0px":"auto"}).style("height",t.container.listHeight+"px").style("padding",t.ui.border+"px").style("background-color",t.ui.color.secondary.value).style("z-index",function(){return t.open.value?"9999":"-1"}).style("width",t.width.secondary-2*t.ui.border+"px").style("top",function(){return t.open.flipped.value?"auto":t.margin.top+"px"}).style("bottom",function(){return t.open.flipped.value?t.margin.top+"px":"auto"}).style("opacity",t.open.value?1:0)}function n(e){e.style("top",function(){return t.open.flipped.value?"auto":t.margin.top+"px"}).style("bottom",function(){return t.open.flipped.value?t.margin.top+"px":"auto"}).style("display",t.open.value?null:"none"),t.search.enabled&&t.open.value&&t.container.selector.select("div.d3plus_drop_search input").node().focus()}function r(t){return function(){var e=d3.interpolateNumber(this.scrollTop,t);return function(t){this.scrollTop=e(t)}}}var a=this;t.draw.timing?t.container.ui.transition().duration(t.draw.timing).each("start",function(){t.open.value&&d3.select(this).style("z-index",9999)}).style("margin",t.ui.margin+"px").each("end",function(){t.open.value||d3.select(this).style("z-index","auto")}):t.container.ui.style("margin",t.ui.margin+"px").style("z-index",function(){return t.open.value?9999:"auto"}),a.items(t),a.height(t),a.scroll(t),a.arrow(t),t.dev.value&&d3plus.console.time("drawing list");var i=t.open.value?t.height.secondary-t.margin.title:0;t.draw.timing?(t.container.selector.transition().duration(t.draw.timing).each("start",function(){d3.select(this).style("display",t.open.value?"block":null)}).call(e).each("end",function(){d3.select(this).transition().duration(t.draw.timing).call(n)}),t.container.list.transition().duration(t.draw.timing).style("width",t.width.secondary-2*t.ui.border+"px").style("max-height",i+"px").tween("scroll",r(t.container.listScroll))):(t.container.selector.call(e).call(n),t.container.list.style("width",t.width.secondary-2*t.ui.border+"px").style("max-height",i+"px").property("scrollTop",t.container.listScroll)),t.dev.value&&d3plus.console.timeEnd("drawing list")}},{}],110:[function(){d3plus.input.drop.width=function(t){function e(e){var r="primary"===e?"value":e,a="value"===r?t.icon.drop.value:t.icon.select.value||t.icon.drop.value,i="value"===r?t.text.value:t.text.secondary.value||t.text.value,o="value"===r?t.font:t.font.secondary;t.dev.value&&d3plus.console.time("calculating "+e+" width");var l=d3plus.form().container(d3plus.font.tester()).data({large:9999,value:n}).draw({update:!1}).font(o).icon({button:a,value:t.icon.value}).id(t.id.value).timing({ui:0}).text(i||t.id.value).type("button").ui({border:0,display:"inline-block",margin:0,padding:t.ui.padding}).width(!1).draw(),s=[];l.selectAll("div.d3plus_node").each(function(){s.push(this.offsetWidth)}).remove();var u={};u[r]=d3.max(s)+2*t.ui.border,t.self.width(u),t.dev.value&&d3plus.console.timeEnd("calculating "+e+" width")}var n=[];for(var r in t.data.nested.all){var a=t.data.nested.all[r],i=d3plus.object.validate(t.text.nesting)&&r in t.text.nesting?t.text.nesting[r][0]:r;[t.id.value,t.text.value].indexOf(i)<0&&(a=d3plus.util.copy(a),a.forEach(function(e){e[t.text.value||t.id.value]=e[i]})),n=n.concat(a)}"number"!=typeof t.width.secondary&&("number"==typeof t.width.value?t.self.width({secondary:t.width.value}):e("secondary")),"number"!=typeof t.width.value&&(t.text.value===t.text.secondary?t.self.width(t.width.secondary):e("primary"))}},{}],111:[function(){d3plus.input.drop.window=function(t,e){var n=this;if(void 0===e)var e=window;d3.select(e).on("click."+t.container.id,function(){var e=d3.event.target||d3.event.toElement,n=e.parentNode;n&&["d3plus_node","d3plus_drop_title"].indexOf(n.className)>=0&&(e=n.parentNode),e&&n&&!d3plus.util.child(t.container.ui,e)&&t.open.value&&t.self.open(!t.open.value).draw()});try{var r=window.parent.location.host===window.location.host}catch(a){var r=!1}r&&e.self!==window.top&&n.window(t,e.parent)}},{}],112:[function(){d3plus.input.toggle=function(t){"buttons"in t.container||(t.container.buttons=d3plus.form().container(t.container.ui).type("button"));var e=t.data.app.length,n=t.width.value?t.width.value/e:!1,r=t.container.ui.selectAll("div.d3plus_toggle").data(t.data.app,function(e){return e[t.id.value]});r.enter().append("div").attr("class","d3plus_toggle").style("display","inline-block").style("vertical-align","top"),r.order().each(function(e){"form"in e.d3plus||(e.d3plus.form=d3plus.form().container(d3.select(this)));var r=t.id.nesting.length>t.depth.value?t.id.nesting[t.depth.value+1]:t.id.value;e[r]instanceof Array?e.d3plus.form.container({id:t.container.id+"_"+e[t.id.value]}).data(e[r]).id(t.id.nesting.slice(1)).type("drop"):e.d3plus.form.data([e]).id(t.id.value).type("button"),e.d3plus.form.color(t.color).focus(t.focus.value,function(e){e!==t.focus.value&&t.self.focus(e).draw()}).icon({select:!1,value:t.icon.value}).font(t.font).format(t.format).order(t.order).text(t.text.value).ui({border:t.ui.border,color:t.ui.color,display:"inline-block",margin:0,padding:t.ui.padding}).width(n).draw()})}},{}],113:[function(t,e){var n;n=t("./wiki.coffee"),d3plus.console=function(t,e,n){n=n||"",d3plus.ie?console.log("[ D3plus ] "+e):"groupCollapsed"===t?window.chrome&&navigator.onLine?console[t]("%c%c "+e,"padding:3px 10px;line-height:25px;background-size:20px;background-position:top left;background-image:url('http://d3plus.org/assets/img/favicon.ico');","font-weight:200;"+n):console[t]("%cD3plus%c "+e,"line-height:25px;font-weight:800;color:#b35c1e;margin-left:0px;","font-weight:200;"+n):console[t]("%c"+e,n+"font-weight:200;")},d3plus.console.comment=function(t){this("log",t,"color:#aaa;")},d3plus.console.error=function(t,e){this("groupCollapsed","ERROR: "+t,"font-weight:800;color:#D74B03;"),this.stack(),this.wiki(e),this.groupEnd()},d3plus.console.group=function(t){this("group",t,"color:#888;")},d3plus.console.groupCollapsed=function(t){this("groupCollapsed",t,"color:#888;")},d3plus.console.groupEnd=function(){d3plus.ie||console.groupEnd()},d3plus.console.log=function(t){this("log",t,"color:#444444;")},d3plus.console.stack=function(){var t,e,n,r,a,i,o;d3plus.ie||(t=new Error,t.stack&&(i=t.stack.split("\n"),i=i.filter(function(t){return 0!==t.indexOf("Error")&&t.indexOf("d3plus.js:")<0&&t.indexOf("d3plus.min.js:")<0}),i.length&&(a=window.chrome?"at ":"@",o=i[0].split(a)[1],i=o.split(":"),3===i.length&&i.pop(),e=i.pop(),r=i.join(":").split("/"),r=r[r.length-1],n="line "+e+" of "+r+": "+o,this("log",n,"color:#D74B03;"))))},d3plus.console.time=function(t){d3plus.ie||console.time(t)},d3plus.console.timeEnd=function(t){d3plus.ie||console.timeEnd(t)},d3plus.console.warning=function(t,e){this("groupCollapsed",t,"color:#888;"),this.stack(),this.wiki(e),this.groupEnd()},d3plus.console.wiki=function(t){t&&(t in n&&(t=d3plus.repo+"wiki/"+n[t]),this("log","documentation: "+t,"color:#aaa;"))},e.exports=d3plus.console},{"./wiki.coffee":119}],114:[function(){d3plus.evt={},d3plus.touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?!0:!1,d3plus.touch?(d3plus.evt.click="click",d3plus.evt.down="touchstart",d3plus.evt.up="touchend",d3plus.evt.over="touchstart",d3plus.evt.out="touchend",d3plus.evt.move="touchmove"):(d3plus.evt.click="click",d3plus.evt.down="mousedown",d3plus.evt.up="mouseup",d3plus.ie?(d3plus.evt.over="mouseenter",d3plus.evt.out="mouseleave"):(d3plus.evt.over="mouseover",d3plus.evt.out="mouseout"),d3plus.evt.move="mousemove")},{}],115:[function(){d3plus.ie=!1},{}],116:[function(){d3plus.prefix=function(){if("-webkit-transform"in document.body.style)var t="-webkit-";else if("-moz-transform"in document.body.style)var t="-moz-";else if("-ms-transform"in document.body.style)var t="-ms-";else if("-o-transform"in document.body.style)var t="-o-";else var t="";return d3plus.prefix=function(){return t},t}},{}],117:[function(){d3plus.rtl="rtl"==d3.select("html").attr("dir")},{}],118:[function(){d3plus.scrollbar=function(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var r=t.offsetWidth;n==r&&(r=e.clientWidth),document.body.removeChild(e);var a=n-r;return d3plus.scrollbar=function(){return a},a}},{}],119:[function(t,e){d3plus.wiki={active:"Segmenting-Data#active",aggs:"Custom-Aggregations",alt:"Alt-Text-Parameters",attrs:"Attribute-Data#axes",axes:"Axis-Parameters",background:"Background",color:"Color-Parameters",container:"Container-Element",coords:"Geography-Data",csv:"CSV-Export",data:"Data-Points",depth:"Visible-Depth",descs:"Value-Definitions",dev:"Verbose-Mode",draw:"Draw",edges:"Edges-List",error:"Custom-Error-Message",focus:"Focus-Element",font:"Font-Styles",footer:"Custom-Footer",format:"Value-Formatting",height:"Height",history:"User-History",hover:"Hover-Element",icon:"Icon-Parameters",id:"Unique-ID",keywords:"Keyword-Parameters",labels:"Data-Labels",legend:"Legend",links:"Link-Styles",margin:"Outer-Margins",messages:"Status-Messages",method:"Methods",nodes:"Node-Positions",open:"Open",order:"Data-Ordering",remove:"Remove",search:"Search-Box",select:"Selecting-Elements#select",selectAll:"Selecting-Elements#selectall",shape:"Data-Shapes",size:"Size-Parameters",temp:"Segmenting-Data#temp",text:"Text-Parameters",time:"Time-Parameters",timeline:"Timeline",timing:"Animation-Timing",title:"Custom-Titles",tooltip:"Tooltip-Parameters",total:"Segmenting-Data#total",type:"Output-Type",ui:"Custom-Interface",width:"Width",x:"Axis-Parameters",y:"Axis-Parameters",zoom:"Zooming"},e.exports=d3plus.wiki},{}],120:[function(t){var e,n,r,a,i,o,l,s,u,c,d;c=t("simplify-js"),d3plus.geom.largestRect=function(t,n){var a,o,l,u,f,p,h,v,g,m,y,x,b,w,_,z,k,M,A,E,j,S,C,N,O,F,T,q,L,P,I,B,V,U,D,R,H,Y,G,W,Z,X,$,J,K,Q,te,ee,ne,re,ae,ie,oe,le,se,ue,ce,de,fe,pe,he,ve,ge,me,ye,xe,be;if(w=[],v=.5,f=5,null==n&&(n={}),null==n.maxAspectRatio&&(n.maxAspectRatio=15),null==n.minWidth&&(n.minWidth=0),null==n.minHeight&&(n.minHeight=0),null==n.tolerance&&(n.tolerance=.02),null==n.nTries&&(n.nTries=20),null!=n.angle&&(n.angle instanceof Array?p=n.angle:"number"==typeof n.angle?p=[n.angle]:"string"!=typeof n.angle||isNaN(n.angle)||(p=[Number(n.angle)])),null==p&&(p=d3.range(-90,90+f,f)),null!=n.aspectRatio&&(n.aspectRatio instanceof Array?g=n.aspectRatio:"number"==typeof n.aspectRatio?g=[n.aspectRatio]:"string"!=typeof n.aspectRatio||isNaN(n.aspectRatio)||(g=[Number(n.aspectRatio)])),null!=n.origin&&n.origin instanceof Array&&(U=n.origin[0]instanceof Array?n.origin:[n.origin]),h=d3.geom.polygon(t).area(),fe=d3.extent(t,function(t){return t[0]}),L=fe[0],N=fe[1],pe=d3.extent(t,function(t){return t[1]}),P=pe[0],O=pe[1],Q=Math.min(N-L,O-P)*n.tolerance,K=function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)D=t[e],r.push({x:D[0],y:D[1]});return r}(),Q>0&&(K=c(K,Q),t=function(){var t,e,n;for(n=[],t=0,e=K.length;e>t;t++)D=K[t],n.push([D.x,D.y]);return n}()),n.vdebug&&w.push({type:"simplify",poly:t}),he=d3.extent(t,function(t){return t[0]}),L=he[0],N=he[1],ve=d3.extent(t,function(t){return t[1]}),P=ve[0],O=ve[1],m=[[L,P],[N,P],[N,O],[L,O]],ge=[N-L,O-P],x=ge[0],y=ge[1],ee=Math.min(x,y)/50,null==U)for(U=[],b=d3.geom.polygon(t).centroid(),r(b,t)&&U.push(b);U.length<n.nTries;)$=Math.random()*x+L,J=Math.random()*y+P,X=[$,J],r(X,t)&&U.push(X);for(n.vdebug&&w.push({type:"origins",points:U}),A=0,S=null,ae=0,se=p.length;se>ae;ae++)for(l=p[ae],u=-l*Math.PI/180,n.vdebug&&w.push({type:"angle",angle:l}),z=ie=0,ue=U.length;ue>ie;z=++ie)for(B=U[z],me=e(t,B,u),H=me[0],G=me[1],ye=e(t,B,u+Math.PI/2),R=ye[0],Y=ye[1],I=[[(H[0]+G[0])/2,(H[1]+G[1])/2],[(R[0]+Y[0])/2,(R[1]+Y[1])/2]],n.vdebug&&w.push({type:"modifOrigin",idx:z,p1W:H,p2W:G,p1H:R,p2H:Y,modifOrigins:I}),oe=0,ce=I.length;ce>oe;oe++)if(V=I[oe],n.vdebug&&w.push({type:"origin",cx:V[0],cy:V[1]}),xe=e(t,V,u),H=xe[0],G=xe[1],q=Math.min(d(V,H),d(V,G)),C=2*Math.sqrt(q),be=e(t,V,u+Math.PI/2),R=be[0],Y=be[1],T=Math.min(d(V,R),d(V,Y)),j=2*Math.sqrt(T),!(A>C*j))for(null!=g?o=g:(F=Math.max(1,n.minWidth/j,A/(j*j)),E=Math.min(n.maxAspectRatio,C/n.minHeight,C*C/A),o=d3.range(F,E+v,v)),le=0,de=o.length;de>le;le++)if(a=o[le],M=Math.max(n.minWidth,Math.sqrt(A*a)),Z=Math.min(C,j*a),!(A>Z*j))for(Z-M>=ee&&n.vdebug&&w.push({type:"aRatio",aRatio:a});Z-M>=ee;)te=(M+Z)/2,_=te/a,ne=V[0],re=V[1],W=[[ne-te/2,re-_/2],[ne+te/2,re-_/2],[ne+te/2,re+_/2],[ne-te/2,re+_/2]],W=s(W,u,V),i(W,t)?(k=!0,A=te*_,S={cx:ne,cy:re,width:te,height:_,angle:l},M=te):(k=!1,Z=te),n.vdebug&&w.push({type:"rectangle",cx:ne,cy:re,width:te,height:_,areaFraction:te*_/h,angle:l,insidePoly:k});return[S,A,w]},d=function(t,e){var n,r;return n=e[0]-t[0],r=e[1]-t[1],n*n+r*r},o=function(t,e,n){var r,a,i,o,l;return l=e[1]<n[1]?[e,n]:[n,e],r=l[0],a=l[1],(t[1]===a[1]||t[1]===r[1])&&(t[1]+=Number.MIN_VALUE),t[1]>a[1]||t[1]<r[1]?!1:t[0]>r[0]&&t[0]>a[0]?!1:t[0]<r[0]&&t[0]<a[0]?!0:(i=(a[1]-r[1])/(a[0]-r[0]),o=(t[1]-r[1])/(t[0]-r[0]),o>i)},r=function(t,e){var n,r,a,i,l;for(i=-1,l=e.length,r=e[l-1],a=0;++i<l;)n=r,r=e[i],o(t,n,r)&&a++;return a%2!==0},a=function(t,e,n){var r,a,i;return r=1e-9,a=t[0],i=t[1],a<Math.min(e[0],n[0])-r||a>Math.max(e[0],n[0])+r||i<Math.min(e[1],n[1])-r||i>Math.max(e[1],n[1])+r?!1:!0},n=function(t,e,n,r){var a,i,o,l,s,u,c,d,f,p;return d=1e-9,l=t[0]-e[0],u=t[1]-e[1],s=n[0]-r[0],c=n[1]-r[1],o=l*c-u*s,Math.abs(o)<d?null:(a=t[0]*e[1]-t[1]*e[0],i=n[0]*r[1]-n[1]*r[0],f=(a*s-i*l)/o,p=(a*c-i*u)/o,[f,p])},u=function(t,e,r,i){var o;return o=n(t,e,r,i),null==o?!1:a(o,t,e)&&a(o,r,i)},i=function(t,e){var n,a,i,o,l,s,c,d;for(l=-1,c=t.length,d=e.length,i=t[c-1];++l<c;)for(n=i,i=t[l],s=-1,o=e[d-1];++s<d;)if(a=o,o=e[s],u(n,i,a,o))return!1;return r(t[0],e)},l=function(t,e,n){var r,a,i,o;return null==n&&(n=[0,0]),i=t[0]-n[0],o=t[1]-n[1],r=Math.cos(e),a=Math.sin(e),[r*i-a*o+n[0],a*i+r*o+n[1]]},s=function(t,e,n){var r,a,i,o;for(o=[],a=0,i=t.length;i>a;a++)r=t[a],o.push(l(r,e,n));return o},e=function(t,e,r){var i,o,l,s,u,c,f,p,h,v,g,m,y,x,b;for(u=1e-9,e=[e[0]+u*Math.cos(r),e[1]+u*Math.sin(r)],x=e[0],b=e[1],m=[x+Math.cos(r),b+Math.sin(r)],f=0,Math.abs(m[0]-x)<u&&(f=1),c=-1,v=t.length,o=t[v-1],p=Number.MAX_VALUE,h=Number.MAX_VALUE,l=null,s=null;++c<v;)i=o,o=t[c],g=n(e,m,i,o),null!=g&&a(g,i,o)&&(y=d(e,g),g[f]<e[f]?p>y&&(p=y,l=g):g[f]>e[f]&&h>y&&(h=y,s=g));return[l,s]}},{"simplify-js":7}],121:[function(t){var e,n,r;e=window.d3plus||{},window.d3plus=e,e.version="1.4.0 - Teal",e.repo="https://github.com/alexandersimoes/d3plus/",e.array={},e.color={},e.data={},e.draw={},e.font={},e.geom={},e.input={},e.locale={},e.method={},e.network={},e.number={},e.object={},e.shape={},e.string={},e.style={},e.tooltip={},e.ui={},e.util={},e.variable={},e.visualization={},e.zoom={},r=t("./style/sheet.coffee"),n=t("./general/console.coffee"),r("d3plus.css")&&n.warning("d3plus.css has been deprecated, you do not need to load this file.","https://github.com/alexandersimoes/d3plus/releases/tag/v1.4.0")},{"./general/console.coffee":113,"./style/sheet.coffee":223}],122:[function(t){window.d3=t("d3"),window.topojson=t("topojson")},{d3:4,topojson:30}],123:[function(){d3plus.locale.en={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",deprecated:"the {0} method has been removed, please update your code to use {1}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",methods:"{0} visualizations require setting the following methods: {1}."},lowercase:["a","and","at","but","in","of","or","the","to","with"],message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",order:"order",search:"search",shape:"shape",size:"size",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",loading:"loading...",more:"{0} more",moreInfo:"click for more info",noResults:"no results matching {0}.",primary:"primary connections",share:"share",total:"total",values:"values"},uppercase:["tv","ui"],visualization:{bubbles:"Bubbles",chart:"Chart",geo_map:"Geo Map",line:"Line Plot",network:"Network",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",tree_map:"Tree Map"}}},{}],124:[function(){d3plus.locale.mk={dev:{accepted:"{0}   a   {1},    a   : {2}.",deprecated:"{0}   ,           {1}.",noChange:"{0}   ,   .",noContainer:" e           {0}.",of:"",oldStyle:"    {0}     . {1} ().",sameEdge:"        .       - {0}.",set:"{0}  .",setLong:"{0}    {1}.",setContainer:"    div  .container()"},error:{accepted:"{0}     {1} {2} ,      : {3}.",connections:"     {0}.",data:" ",dataYear:"    {0}.",lib:"{0}      {1} .",libs:"{0}      : {1}.",method:"{0}     {1} .",methods:"{0}      : {1}."},lowercase:["a","","","","","","","",""],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:"ID",height:"",labels:"",legend:"",margin:"",messages:"  ",order:"",search:"",shape:"",size:"",style:"",temp:" ",text:"",time:"",timeline:"",total:" ",type:"",width:"",x:"x ",y:"y ",zoom:"",mode:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geo_map:" ",line:" ",network:"",rings:"",scatter:" ",stacked:" ",tree_map:"    "},ui:{and:"",back:"",collapse:"    ",error:"",expand:"    ",loading:"  ...",more:"{0} ",moreInfo:"   ",noResults:"     {0}.",primary:" ",share:"",total:"",values:"",including:""},message:{data:"  ",draw:"  ",initializing:" {0}",loading:"  ",tooltipReset:"  ",ui:"   "},uppercase:["TV","UI"]}},{}],125:[function(){d3plus.locale.pt={dev:{accepted:"{0} no  um valor aceito para {1}, por favor, use um dos seguintes procedimentos: {2}.",deprecated:"{0} mtodo foi removido, por favor atualize seu cdigo para utilizar {1}.",noChange:"{0} no foi atualizado porque ele no mudou.",noContainer:"No foi possvel encontrar um local na pgina correspondente a {0}.",of:"de",oldStyle:"propriedades de estilo para {0} j foram incorporados diretamente no. {1} ().",sameEdge:"bordas no podem vincular a si mesmos. removendo automaticamente borda de auto-referncia {0}.",set:"{0} foi definida.",setLong:"{0} foi definida para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} no  um reconhecido {1} para {2} visualizaes, por favor, use um dos seguintes procedimentos: {3}.",connections:"No h conexes disponveis para {0}.",data:"No h dados disponveis",dataYear:"No h dados disponveis para {0}.",lib:"A visualizao {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualizao {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualizao {0} exige a definio do mtodo {1}.",methods:"A visualizao {0} exige a definio dos mtodos {1}."},lowercase:["a","com","de","e","em","mas","ou","para","um"],method:{active:"segmentos ativos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"cone",id:"id",height:"altura",labels:"rtulos",legend:"legenda",margin:"margem",messages:"mensagens de status",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporrios",text:"texto",time:"tempo",timeline:"cronograma",total:"segmentos totais",type:"tipo",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo"},time:["ano","data","dia","hora","ms"],visualization:{bubbles:"Bolhas",chart:"Grfico",geo_map:"Mapa",line:"Grfico de Linha",network:"Rede",rings:"Anis",scatter:"Disperso",stacked:"Evoluo",tree_map:"Tree Map"},ui:{and:"e",back:"de volta",collapse:"Clique para fechar",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"clique para mais informaes",noResults:"nenhum resultado para {0}.",primary:"conexes primrias",share:"participao",total:"total",values:"valores",including:"incluindo"},message:{data:"analisando dados",draw:"desenhando visualizao",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:["TV"]}},{}],126:[function(){d3plus.locale.zh={dev:{accepted:"{0}{1}, :{2}",deprecated:"{0}, {1}",noChange:"{0}, ",noContainer:"{0}",of:"",oldStyle:"{0}{1}",sameEdge:"{0}",set:"{0}",setLong:"{0}{1}",setContainer:"()div"},error:{accepted:"{0}{2}{1}, {3}.",connections:"{0}",data:"",dataYear:"{0}",lib:"{0}{1}",libs:"{0}{1}",method:"{0}{1}",methods:"{0}{1}"},lowercase:["","","","","...","","","","","..."],method:{active:"",color:"",depth:"",dev:"",focus:"",icon:"",id:"",height:"",labels:"",legend:"",margin:"",messages:"",order:"",search:"",shape:"",size:"",style:"",temp:"",text:"",time:"",timeline:"",total:"",type:"",width:"",x:"X",y:"Y",zoom:"",mode:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geo_map:"",line:"",network:"",rings:"",scatter:"",stacked:"",tree_map:""},ui:{and:"",back:"",collapse:"",error:"",expand:"",loading:"...",more:"{0}",moreInfo:"",noResults:"{0}",primary:"",share:"",total:"",values:"",including:""},message:{data:"",draw:"",initializing:"{0}",loading:"",tooltipReset:"",ui:"UI"},uppercase:["","",""]}},{}],127:[function(){d3plus.method.axis=function(t){var t=t||"x";return{accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,deprecates:[t+"axis",t+"axis_val",t+"axis_var"],domain:!1,lines:[],mute:d3plus.method.filter(!0),range:!1,reset:["range"],scale:{accepted:["linear","log","continuous","share"],value:"linear",deprecates:["layout","unique_axis","yaxis_scale"]},solo:d3plus.method.filter(!0),stacked:{accepted:[Boolean],value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}},{}],128:[function(){d3plus.method.filter=function(t){var t=t||!1;return{accepted:[Array,Boolean,Function,Number,Object,String],global:t,process:Array,value:[]}}},{}],129:[function(){d3plus.method.function=function(t,e){return function(n,r){function a(t){if(d3plus.object.validate(t))if("family"in t)t.family.value=t.family.process(n.family);else for(var e in t)a(t[e])}var i=t in e&&d3plus.object.validate(e[t])&&"accepted"in e[t]?e[t].accepted:t in e?typeof e[t]:null;if("function"==typeof i&&(i=i(e)),null===i||i instanceof Array||(i=[i]),n===Object)return e[t];if(!arguments.length&&(null===i&&!("value"in e)||void 0!==i&&i.indexOf(void 0)<0))return"value"in e[t]?e[t].value:e[t];
if("style"===t&&"object"==typeof n){var o=e.format.locale.value.dev.oldStyle;(e.dev.value||"dev"===t&&n)&&!e.methodGroup&&"wait"!==e.methodGroup&&(e.methodGroup=!0,d3plus.console.groupCollapsed("method behavior"));for(var l in n)d3plus.console.warning(d3plus.string.format(o,'"'+l+'"',l),l),e.self[l](n[l]);return e.self}return"font"===t&&d3plus.object.validate(n)&&"family"in n&&"string"==typeof n.family&&a(e),d3plus.method.object(e,t,e,t,n),"function"==typeof r&&(e[t].callback=r),e[t].chainable===!1?e[t].value:e.self}}},{}],130:[function(){d3plus.method.init=function(t,e,n){e.previous=!1,e.changed=!1,e.initialized=!1,e.getVars=function(){return t},"init"in e&&!("value"in e)&&(e.value=e.init(t),delete e.init),"process"in e&&(e.value=d3plus.method.process(e,e.value));for(var r in e)if("deprecates"===r){var a=e[r]instanceof Array?e[r]:[e[r]];a.forEach(function(e){t.self[e]=function(e,n){return function(){t.dev.value&&t.methodGroup&&(d3plus.console.groupEnd(),t.methodGroup=!1);var r=t.format.locale.value.dev.deprecated;return e="."+e+"()",d3plus.console.error(d3plus.string.format(r,e,"."+n+"()"),n),t.self}}(e,n)})}else"global"===r?n in t||(t[n]=[]):d3plus.object.validate(e[r])&&d3plus.method.init(t,e[r],r);e.initialized=!0}},{}],131:[function(){d3plus.method.object=function(t,e,n,r,a){if(["accepted","getVars"].indexOf(r)<0){var i=d3plus.object.validate(a),o=!(!i||"value"in a||d3.keys(a)[0]in n[r]);if(null===a||!i||o)o?d3plus.method.set(t,e,n[r],"value",a):d3plus.method.set(t,e,n,r,a);else if(i)for(d in a)d3plus.method.object(t,e,n[r],d,a[d])}}},{}],132:[function(){d3plus.method.process=function(t,e){return t.process===Array?d3plus.array.update(d3plus.util.copy(t.value),e):"object"==typeof t.process&&"string"==typeof e?t.process[e]:"function"==typeof t.process?t.process(e):e}},{}],133:[function(){d3plus.method.processData=function(t,e){if("string"==typeof t||d3plus.util.d3selection(t)){if(void 0===e)var e=this;var n=(e.getVars(),t.indexOf("/")>=0);return!n&&d3plus.util.d3selection(t)?t:n||d3.selectAll(t).empty()?(e.url=t,[]):d3.selectAll(t)}return t}},{}],134:[function(){d3plus.method.set=function(t,e,n,r,a){if("value"!==r&&r&&r!==e)var i=t.format.locale.value.dev.of,o='"'+r+'" '+i+" ."+e+"()";else var o="."+e+"()";if("value"===r&&"accepted"in n)var l=n.accepted;else if(d3plus.object.validate(n[r])&&"accepted"in n[r])var l=n[r].accepted;else var l=null;"function"==typeof l&&(l=l(t)),null===l||l instanceof Array||(l=[l]);var s=!0;if(l instanceof Array){var u=void 0===a?a:a.constructor;s=l.indexOf(a)>=0||l.indexOf(u)>=0}if(s===!1){if(void 0!==a){var c=t.format.locale.value.dev.accepted,d=[],f=JSON.stringify(a),p=t.format.locale.value.ui.and;"string"!=typeof a&&(f='"'+f+'"'),l.forEach(function(t){d.push("string"==typeof t?'"'+t+'"':"function"==typeof t?t.toString().split("()")[0].substring(9):t.toString())}),d=d3plus.string.list(d,p),d3plus.console.warning(d3plus.string.format(c,f,o,d),e)}}else{if(d3plus.object.validate(n[r])&&"value"in n[r]){var h=r;n=n[r],r="value"}if("value"===r&&"process"in n&&(a=d3plus.method.process(n,a)),(!(n[r]instanceof Array)&&n[r]===a||n[r]&&n[r]===a)&&void 0!==a){var c=t.format.locale.value.dev.noChange;t.dev.value&&d3plus.console.comment(d3plus.string.format(c,o))}else{if(n.changed=!0,"history"in t&&"draw"!==e){var v=d3plus.util.copy(n);v.method=e,t.history.chain.push(v)}if(n.previous=n[r],"id"in t&&"value"===r&&"nesting"in n)if("id"!==e){if("object"!=typeof n.nesting&&(n.nesting={}),d3plus.object.validate(a)){for(var g in a)"string"==typeof a[g]&&(a[g]=[a[g]]);n.nesting=d3plus.object.merge(n.nesting,a),t.id.value in n.nesting||(n.nesting[t.id.value]=a[d3.keys(a)[0]])}else n.nesting[t.id.value]=a instanceof Array?a:[a];n[r]=n.nesting[t.id.value][0]}else a instanceof Array?(n.nesting=a,"depth"in t&&t.depth.value<a.length?n[r]=a[t.depth.value]:(n[r]=a[0],"depth"in t&&(t.depth.value=0))):(n[r]=a,n.nesting=[a],"depth"in t&&(t.depth.value=0));else if("depth"===e){if(t.depth.value=a>=t.id.nesting.length?t.id.nesting.length-1:0>a?0:a,t.id.value=t.id.nesting[t.depth.value],"object"==typeof t.text.nesting){var m=t.text.nesting[t.id.value];m&&(t.text.nesting[t.id.value]="string"==typeof m?[m]:m,t.text.value=m instanceof Array?m[0]:m)}}else n[r]=d3plus.object.validate(n[r])&&d3plus.object.validate(a)?d3plus.object.merge(n[r],a):a;if("value"===r&&n.global){var y=n[r].length>0,x=h||r;x in t&&(y&&t.data[x].indexOf(e)<0||!y&&t.data[x].indexOf(e)>=0)&&(t.data[x]=d3plus.array.update(t.data[x],e))}if("value"===r&&n.dataFilter&&t.data&&t.data.filters.indexOf(e)<0&&t.data.filters.push(e),"value"===r&&n.reset){var b="string"==typeof n.reset?[n.reset]:n.reset;b.forEach(function(t){n[t]=!1})}if((t.dev.value||"dev"===r)&&n.changed&&void 0!==n[r]){var w=n[r]instanceof Array&&n[r].length>10,_=d3plus.util.d3selection(n[r]),z="function"==typeof n[r],k=w||_||z?null:"string"==typeof n[r]?n[r]:JSON.stringify(n[r]);if((t.dev.value||"dev"===r&&user)&&!t.methodGroup&&"wait"!==t.methodGroup&&(t.methodGroup=!0,d3plus.console.groupCollapsed("method behavior")),null!==k&&k.length<260){var c=t.format.locale.value.dev.setLong;d3plus.console.log(d3plus.string.format(c,o,'"'+k+'"'))}else{var c=t.format.locale.value.dev.set;d3plus.console.log(d3plus.string.format(c,o))}}}"value"===r&&n.callback&&!n.url&&n.callback(a)}}},{}],135:[function(){d3plus.method=function(t,e,n){var e=e||[],n=n||[],r=d3plus.style[d3plus.method.style.value];e.forEach(function(e){e in t||(t[e]={}),t[e]=d3plus.object.merge(d3plus.method[e],t[e]),n.indexOf(e)>=0&&(t[e]=d3plus.object.merge(r[e],t[e]),n.splice(n.indexOf(e),1)),d3plus.method.init(t,t[e],e),t.self[e]=d3plus.method.function(e,t)}),n.forEach(function(e){t[e]=d3plus.object.merge(t[e]||{},r[e]),d3plus.method.init(t,t[e],e),t.self[e]=d3plus.method.function(e,t)})}},{}],136:[function(){d3plus.method.active={accepted:[!1,Array,Function,Number,Object,String],deprecates:"active_var",mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),spotlight:{accepted:[Boolean],deprecates:"spotlight",value:!1},value:!1}},{}],137:[function(){d3plus.method.aggs={accepted:[Object],deprecated:"nesting_aggs",value:{}}},{}],138:[function(){d3plus.method.alt={accepted:[!1,Array,Function,Object,String],mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),value:"alt"}},{}],139:[function(){d3plus.method.attrs={accepted:[!1,Array,Object,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},process:d3plus.method.processData,value:!1}},{}],140:[function(){d3plus.method.axes={mirror:{accepted:[Boolean],deprecates:["mirror_axis","mirror_axes"],value:!1},values:["x","y"]}},{}],141:[function(){d3plus.method.color={accepted:[!1,Array,Function,Object,String],deprecates:"color_var",init:function(t){return"form"===t.shell?"color":!1},mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0)}},{}],142:[function(){d3plus.method.container={accepted:[Array,Object,String],element:!1,id:"default",process:function(t){if(t===!1){var e=this.getVars().shell;return"form"===e?d3.select("body"):t}return d3plus.util.d3selection(t)?t:d3.select(t instanceof Array?t[0][0]:t)},value:!1}},{}],143:[function(){d3plus.method.coords={accepted:[!1,Array,Function,Object,String],filetype:{accepted:["json"],value:"json"},mute:d3plus.method.filter(!1),process:d3plus.method.processData,solo:d3plus.method.filter(!1),value:!1}},{}],144:[function(){d3plus.method.csv={accepted:[void 0,Array,String],chainable:!1,data:[],process:function(t){var e=this.getVars();if(void 0===e.returned)return[];if(t instanceof Array)var n=t;else if("string"==typeof t)var n=[t];var r=[],a=[],i=e.title.value||"My D3plus App Data";if(i=d3plus.string.strip(i),!n){var n=[e.id.value];e.time.value&&n.push(e.time.value),e.size.value&&n.push(e.size.value),e.text.value&&n.push(e.text.value)}n.forEach(function(t){a.push(e.format.value(t))}),r.push(a),e.returned.nodes.forEach(function(t){var a=[];n.forEach(function(n){a.push(d3plus.variable.value(e,t,n))}),r.push(a)});var o="data:text/csv;charset=utf-8,";if(r.forEach(function(t,e){dataString=t.join(","),o+=e<r.length?dataString+"\n":dataString}),d3plus.ie){var l=new Blob([o],{type:"text/csv;charset=utf-8;"});navigator.msSaveBlob(l,i+".csv")}else{var s=encodeURI(o),u=document.createElement("a");u.setAttribute("href",s),u.setAttribute("download",i+".csv"),u.click()}return this.data=r,n},value:void 0}},{}],145:[function(){d3plus.method.data={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],mute:[],process:function(t){var e=this.getVars();return"default"===e.container.id&&t.length&&e.self.container({id:"default"+t.length}),d3plus.method.processData(t,this)},solo:[],value:!1}},{}],146:[function(){d3plus.method.depth={accepted:[Function,Number],value:0}},{}],147:[function(){d3plus.method.descs={accepted:[!1,Function,Object],value:!1}},{}],148:[function(){d3plus.method.dev={accepted:[Boolean],value:!1}},{}],149:[function(){d3plus.method.draw={accepted:[void 0,Function],first:!0,frozen:!1,process:function(t){if(this.initialized===!1)return this.initialized=!0,t;var e=this.getVars(),n="history"in e?e.history.chain:[];if("data"in e&&e.data.value&&d3plus.util.d3selection(e.data.value)&&(e.data.value=d3plus.data.element(e)),void 0===t&&"function"==typeof this.value&&(t=this.value),e.container.value===!1){var r=e.format.locale.value.dev.setContainer;d3plus.console.warning(r,"container")}else if(e.container.value.empty()){var r=e.format.locale.value.dev.noContainer;d3plus.console.warning(d3plus.string.format(r,'"'+e.container.value+'"'),"container")}else e.dev.value&&(e.methodGroup&&(e.methodGroup="wait",d3plus.console.groupEnd()),d3plus.console.time("total draw time")),e.container.value.call(e.self);if("function"==typeof t&&n.length){var a={};n.forEach(function(t){var e=t.method;delete t.method,a[e]=t}),t(a),e.history.chain=[]}return t},update:!0,value:void 0}},{}],150:[function(){d3plus.method.edges={accepted:[!1,Array,Function,String],connections:function(t,e,n){var r=this;if(!r.value)return[];if(!e)var e="id";var a=r.restricted||r.value,i=[];if(!t)return a;var o=a.filter(function(a){var o=!1;return a[r.source][e]==t?(o=!0,n&&i.push(a[r.target])):a[r.target][e]==t&&(o=!0,n&&i.push(a[r.source])),o});return n?i:o},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},label:!1,process:d3plus.method.processData,size:!1,source:"source",target:"target",value:!1}},{}],151:[function(){d3plus.method.error={accepted:[Boolean,String],value:!1}},{}],152:[function(){d3plus.method.focus={accepted:[!1,Function,Number,String],deprecates:"highlight",process:function(t){var e=this.getVars();if(e.data.element){var n=e.data.element.node().tagName.toLowerCase(),r=e.data.element.attr("type");"select"===n?e.data.element.selectAll("option").each(function(n,r){n&&n[e.id.value]===t&&(e.data.element.node().selectedIndex=r)}):"input"===n&&"radio"===r&&e.data.element.each(function(n){this.checked=n&&n[e.id.value]===t?!0:!1})}return t},tooltip:{accepted:[Boolean],value:!0},value:!1}},{}],153:[function(){d3plus.method.footer={accepted:[!1,Number,String],link:!1,value:!1}},{}],154:[function(){d3plus.method.format={accepted:[Function,String],deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(d3plus.locale)},process:function(t){var e="en",n=d3plus.locale[e];return t!==e&&(n=d3plus.object.merge(n,d3plus.locale[t])),this.language=t,n},value:"en"},number:{accepted:[!1,Function],value:!1},process:function(t){if("string"==typeof t){var e=this.getVars();e.self.format({locale:t})}else if("function"==typeof t)return t;return this.value},text:{accepted:[!1,Function],value:!1},value:function(t,e){if("number"==typeof t){var n=this.number.value||d3plus.number.format;return n(t,e)}if("string"==typeof t){var n=this.text.value||d3plus.string.title;return n(t,e)}return JSON.stringify(t)}}},{}],155:[function(){d3plus.method.height={accepted:[!1,Number],secondary:!1,value:!1}},{}],156:[function(){d3plus.method.history={accepted:[Boolean],back:function(){if(this.states.length>0){var t=this.states.pop();t()}},chain:[],states:[],value:!0}},{}],157:[function(){d3plus.method.hover={accepted:[!1,Number,String],value:!1}},{}],158:[function(){d3plus.method.icon={accepted:[!1,Array,Function,Object,String],deprecates:"icon_var",style:{accepted:[Object,String],deprecates:"icon_style",value:"default"},value:"icon"}},{}],159:[function(){d3plus.method.id={accepted:[Array,String],dataFilter:!0,deprecates:["id_var","nesting"],init:function(t){return"form"===t.shell?(this.nesting=["value"],"value"):(this.nesting=["id"],"id")},mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0)}},{}],160:[function(){d3plus.method.keywords={accepted:[!1,Array,Function,Object,String],mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),value:"keywords"}},{}],161:[function(){d3plus.method.labels={accepted:[Boolean],resize:{accepted:[Boolean],value:!0},value:!0}},{}],162:[function(){d3plus.method.legend={accepted:[Boolean],value:!0}},{}],163:[function(){d3plus.method.margin={accepted:[Number,Object,String],process:function(t){var e=this,n=["top","right","bottom","left"];if(void 0===t)var t=e.value;var r=t;if("string"==typeof t&&(t=t.split(" "),t.forEach(function(e,n){t[n]=parseFloat(e,10)}),t=1===t.length?t[0]:2===t.length?{top:t[0],right:t[1],bottom:t[0],left:t[1]}:3===t.length?{top:t[0],right:t[1],bottom:t[2],left:t[1]}:4===t.length?{top:t[0],right:t[1],bottom:t[2],left:t[3]}:0),"number"==typeof t)n.forEach(function(n){e[n]=t});else{for(var a in t){var i=n.indexOf(a);i>=0&&(n.splice(i,1),e[a]=t[a])}n.forEach(function(t){e[t]=0})}return r},value:0}},{}],164:[function(){d3plus.method.messages={accepted:[Boolean,String],value:!0}},{}],165:[function(){d3plus.method.nodes={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},process:d3plus.method.processData,value:!1}},{}],166:[function(){d3plus.method.open={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}},{}],167:[function(){d3plus.method.order={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],value:"asc",deprecates:["sort"]},value:!1}},{}],168:[function(){d3plus.method.remove={accepted:void 0,process:function(t){if(!this.initialized)return t;var e=this.getVars();e.container.value.remove()},value:void 0}},{}],169:[function(){d3plus.method.resize={accepted:[Boolean],value:!1}},{}],170:[function(){d3plus.method.search={accepted:["auto",Boolean],process:function(t){return"Boolean"==typeof t&&(this.enabled=t),t},value:"auto"}},{}],171:[function(){d3plus.method.select={accepted:[String],chainable:!1,process:function(t){var e=this.getVars();return e.container.value&&t?e.container.value.select(t):t},value:void 0}},{}],172:[function(){d3plus.method.selectAll={accepted:[String],chainable:!1,process:function(t){var e=this.getVars();return e.container.value&&t?e.container.value.selectAll(t):t},value:void 0}},{}],173:[function(){d3plus.method.shape={accepted:function(t){return"textwrap"===t.shell?["circle","square"]:["circle","donut","line","square","area","coordinates"]},value:!1}},{}],174:[function(){d3plus.method.size={accepted:function(t){return"textwrap"===t.shell?[Array,!1]:[Array,Boolean,Function,Object,String]},dataFilter:!0,deprecates:["value","value_var"],mute:d3plus.method.filter(!0),scale:{accepted:[Function],deprecates:"size_scale",value:d3.scale.sqrt()},solo:d3plus.method.filter(!0),threshold:!0,value:!1}},{}],175:[function(){d3plus.method.style={accepted:function(){return d3.keys(d3plus.style).filter(function(t){return"object"==typeof d3plus.style[t]})},value:"default"}},{}],176:[function(){d3plus.method.temp={accepted:[!1,Array,Function,Object,String],deprecates:["else_var","else"],mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),value:!1}},{}],177:[function(){d3plus.method.text={accepted:[Array,Boolean,Function,Object,String],deprecates:["name_array","text_var"],html:{accepted:[Boolean],value:!1},init:function(t){if("textwrap"===t.shell){var e=this.split;this.break=new RegExp("[^\\s\\"+e.join("\\")+"]+\\"+e.join("?\\")+"?","g")}return!1},nesting:!0,mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),secondary:{accepted:[Array,Boolean,Function,Object,String],nesting:!0,value:!1},split:["-","/",";",":","&"]}},{}],178:[function(){d3plus.method.time={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,deprecates:["year","year_var"],fixed:{accepted:[Boolean],deprecates:["static_axis","static_axes"],value:!0},mute:d3plus.method.filter(!1),solo:d3plus.method.filter(!1),value:!1}},{}],179:[function(){d3plus.method.timeline={accepted:[Boolean],value:!0}},{}],180:[function(){d3plus.method.title={accepted:[!1,Function,String],link:!1,sub:{accepted:[!1,String],deprecates:"sub_title",link:!1,value:!1},total:{accepted:[Boolean,Object],deprecates:"total_bar",link:!1,value:!1},process:function(t){var e=this.getVars();if(0===e.container.id.indexOf("default")&&t){var n=d3plus.string.strip(t).toLowerCase();e.self.container({id:n})}return t},value:!1}},{}],181:[function(){d3plus.method.tooltip={accepted:[!1,Array,Function,Object,String],deprecates:"tooltip_info",html:{accepted:[!1,Function,String],deprecates:"click_function",value:!1},value:!1}},{}],182:[function(){d3plus.method.total={accepted:[!1,Array,Function,Object,String],deprecates:["total_var"],mute:d3plus.method.filter(!0),solo:d3plus.method.filter(!0),value:!1}},{}],183:[function(){d3plus.method.type={accepted:function(t){var e=t.shell;return"viz"===e?d3.keys(d3plus.visualization):"form"===e?d3.keys(d3plus.input):null},init:function(t){var e=t.shell;return"viz"===e?"tree_map":"form"===e?"auto":void 0},mode:{accepted:["squarify","slice","dice","slice-dice"],value:"squarify"}}},{}],184:[function(){d3plus.method.ui={accepted:[Array,Boolean],value:!1}},{}],185:[function(){d3plus.method.width={accepted:[!1,Number],secondary:!1,value:!1}},{}],186:[function(){d3plus.method.x=d3plus.method.axis("x")},{}],187:[function(){d3plus.method.y=d3plus.method.axis("y")},{}],188:[function(){d3plus.method.zoom={accepted:[Boolean],behavior:d3.behavior.zoom().scaleExtent([1,1]),click:{accepted:[Boolean],value:!0},direction:function(t){var e=this.getVars(),n=e.id.nesting.length-1,r=e.depth.value,a=d3plus.visualization[e.type.value].nesting===!1;return a?0:t.d3plus.merged||n>r&&(!t||e.id.nesting[e.depth.value+1]in t)?1:r!==n&&(!t||e.id.nesting[e.depth.value+1]in t)||!e.small&&e.tooltip.html.value?0:-1},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],deprecates:"scroll_zoom",value:!0},touchEvent:function(){var t=this.getVars(),e=t.zoom.scale>t.zoom.behavior.scaleExtent()[0],n=d3plus.visualization[t.type.value].zoom&&t.zoom.value&&t.zoom.scroll.value,r=d3.event.touches.length>1&&n;r||e||d3.event.stopPropagation()},value:!0}},{}],189:[function(){d3plus.network.normalize=function(t,e,n){var r,a,i,o,l,s,u,c,d,f,p,h,v,g,m,y,x,b,w,_,z,k,M,A,E,j,S,C,N;if(z=n.target,o=n.directed,l=n.distance,b=n.nodeid,_=n.startpoint,c=n.endpoint,r=n.K,null==r&&(r=1),null==b?b=function(t){return t}:"string"==typeof b&&(b=function(t){return function(e){return e[t]}}(b)),null!=e&&"object"==typeof e&&(e=b(e)),null!=z&&"object"==typeof z&&(z=b(z)),null==_?_=function(t){return t.source}:"string"==typeof _&&(_=function(t){return function(e){return e[t]}}(_)),null==c?c=function(t){return t.target}:"string"==typeof c&&(c=function(t){return function(e){return e[t]}}(c)),null==l)l=function(){return 1};else if("number"==typeof l)l=function(t){return function(){return t}}(l);else if("string"==typeof l)l=function(t){return function(e){return e[t]}}(l);else if(l instanceof Array){for(u={},f=k=0,E=t.length;E>k;f=++k)s=t[f],a=b(_(s)),i=b(c(s)),u[a+"_"+i]=l[f];l=function(t){return a=b(_(t)),i=b(c(t)),u[a+"_"+i]}}for(w={},M=0,j=t.length;j>M;M++){for(s=t[M],y=_(s),x=c(s),v=b(y),g=b(x),C=[y,x],A=0,S=C.length;S>A;A++)m=C[A],p=b(m),p in w||(w[p]={node:m,outedges:[]});w[v].outedges.push(s),o||w[g].outedges.push(s)}return d=null,0===t.length?d="The length of edges is 0":0>r?d="K can not have negative value":null==l(t[0])?d="Check the distance function/attribute":null==_(t[0])?d="Check the startpoint function/attribute":null==c(t[0])?d="Check the endpoint function/attribute":(h=b(_(t[0])),null==h||"string"!=(N=typeof h)&&"number"!==N?d="Check the nodeid function/attribute":e in w?null==z||z in w||(d="The target is not in the graph"):d="The source is not in the graph"),null!=d?(d3plus.console.error(d),null):[t,e,{target:z,directed:o,distance:l,nodeid:b,startpoint:_,endpoint:c,K:r,nodes:w}]}},{}],190:[function(t){var e;e=t("heap"),d3plus.network.shortestPath=function(t,n,r){var a,i,o,l,s,u,c,d,f,p,h,v,g,m,y,x,b,w,_,z,k,M,A,E,j,S,C,N,O;if((null==r.nodes||"object"!=typeof r.nodes)&&(C=d3plus.network.normalize(t,n,r),t=C[0],n=C[1],r=C[2],null===r))return null;z=r.target,s=r.directed,u=r.distance,m=r.nodeid,_=r.startpoint,d=r.endpoint,a=r.K,y=r.nodes;for(h in y)g=y[h],g.count=0;for(p=new e(function(t,e){return t.distance-e.distance}),M={},null==z&&(M[n]=!0),p.push({edge:null,target:n,distance:0}),v=0,w=[];!p.empty()&&(v=Math.max(v,p.size()),x=p.pop(),k=x.target,y[k].count++,null==z?w.push(x):k===z&&w.push(x),w.length!==a);)if(y[k].count<=a)for(N=y[k].outedges,A=0,j=N.length;j>A;A++){if(c=N[A],i=m(_(c)),l=m(d(c)),s||l!==k||(O=[l,i],i=O[0],l=O[1]),null==z){if(M[l])continue;M[l]=!0}o=x.distance+u(c),p.push({edge:c,previous:x,target:l,distance:o})}for(f=function(e){for(t=[];null!=e.edge;)t.push(e.edge),e=e.previous;return t.reverse()},E=0,S=w.length;S>E;E++)b=w[E],null!=z&&(delete b.target,b.edges=f(b)),delete b.edge,delete b.previous;return w}},{heap:5}],191:[function(){d3plus.network.subgraph=function(t,e,n){var r,a,i,o,l,s,u,c,d,f,p,h;return null!=n.nodes&&"object"==typeof n.nodes||(h=d3plus.network.normalize(t,e,n),t=h[0],e=h[1],n=h[2],null!==n)?(i=n.directed,o=n.distance,c=n.nodeid,f=n.startpoint,s=n.endpoint,r=n.K,d=n.nodes,p={},p[e]=!0,a=function(t,e){var n,l,u,h,v,g,m,y,x;for(m=d[t].outedges,x=[],v=0,g=m.length;g>v;v++)u=m[v],n=c(f(u)),l=c(s(u)),i||l!==t||(y=[l,n],n=y[0],l=y[1]),l in p?x.push(void 0):(h=e+o(u),r>=h?(p[l]=!0,x.push(a(l,h))):x.push(void 0));return x},a(e,0),{nodes:function(){var t;t=[];for(u in p)t.push(d[u].node);return t}(),edges:function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)l=t[e],c(f(l))in p&&c(s(l))in p&&r.push(l);return r}()}):null}},{}],192:[function(){d3plus.number.format=function(t,e,n){if(!n&&"getVars"in this)var n=this.getVars();if(n&&e&&(e===n.x.value&&"log"===n.x.scale.value||e===n.y.value&&"log"===n.y.scale.value)){var r="",a=function(t){return(t+"").split("").map(function(t){return r[t]}).join("")};return"10"+a(Math.round(Math.log(t)/Math.LN10))}if("locale"in this)var i=this.locale.value,o=i.time;else var i=d3plus.locale.en,o=i.time;if(n&&"string"==typeof n.time.value&&o.push(n.time.value),e&&o.indexOf(e.toLowerCase())>=0)return t;if(10>t&&t>-10)return d3.round(t,2);if(t.toString().split(".")[0].length>4){var l=d3.formatPrefix(t).symbol;return l=l.replace("G","B"),t=d3.formatPrefix(t).scale(t),t=parseFloat(d3.format(".3g")(t)),t+l}return"share"==e?d3.format(".2f")(t):d3.format(",f")(t)}},{}],193:[function(){d3plus.object.merge=function(t,e){function n(t,e){for(var r in t)"undefined"!=typeof t[r]&&(d3plus.object.validate(t[r])?("object"!=typeof e[r]&&(e[r]={}),n(t[r],e[r])):e[r]=!d3plus.util.d3selection(t[r])&&t[r]instanceof Array?t[r].slice(0):t[r])}var r={};return t&&n(t,r),e&&n(e,r),r}},{}],194:[function(){d3plus.object.validate=function(t){return null!==t&&"object"==typeof t&&!(t instanceof Array)}},{}],195:[function(){d3plus.string.format=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();return e.unkeyed_index=0,e.replace(/\{(\w*)\}/g,function(n,r){if(""===r&&(r=e.unkeyed_index,e.unkeyed_index++),r==+r)return"undefined"!==t[r]?t[r]:n;for(var a=0;a<t.length;a++)if("object"==typeof t[a]&&"undefined"!=typeof t[a][r])return t[a][r];return n}.bind(e))}},{}],196:[function(){d3plus.string.list=function(t,e,n,r){if(!(t instanceof Array))return t;if(t=t.slice(0),!e)var e=d3plus.locale.en.ui.and;if(!r)var r=d3plus.locale.en.ui.more;if(2===t.length)return t.join(" "+e+" ");if(n&&t.length>n){var a=t.length-n+1;t=t.slice(0,n-1),t[n-1]=d3plus.string.format(r,a)}return t.length>1&&(t[t.length-1]=e+" "+t[t.length-1]),t.join(", ")}},{}],197:[function(){d3plus.string.strip=function(t){var e=["!","@","#","$","%","^","&","*","(",")","[","]","{","}",".",",","/","\\","|","'",'"',";",":","<",">","?","=","+"];return t+="",""+t.replace(/[^A-Za-z0-9\-_]/g,function(t){if(" "==t)return"_";if(e.indexOf(t)>=0)return"";var n=[[/[\300-\306]/g,"A"],[/[\340-\346]/g,"a"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\322-\330]/g,"O"],[/[\362-\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\307]/g,"C"],[/[\347]/g,"c"]],r="";for(var a in n)if(n[a][0].test(t)){r=n[a][1];break}return r})}},{}],198:[function(){d3plus.string.title=function(t){if(!t)return"";if("locale"in this){var e=this.locale.value;"string"==typeof e&&(e=e in d3plus.locale?d3plus.locale[e]:d3plus.locale.en)}else var e=d3plus.locale.en;if("."===t.charAt(t.length-1))return t.charAt(0).toUpperCase()+t.substr(1);var n=e.lowercase,r=e.uppercase;return t.replace(/\w\S*/g,function(e,a){return r.indexOf(e.toLowerCase())>=0?e.toUpperCase():n.indexOf(e.toLowerCase())>=0&&0!==a&&a!==t.length-1?e.toLowerCase():e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}},{}],199:[function(){d3plus.style.default={},d3plus.style.default.fontFamily=["Helvetica Neue","HelveticaNeue","Helvetica","Arial","sans-serif"]},{}],200:[function(){d3plus.style.default.axes={ticks:{color:"#ccc",font:{color:"#888",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:12,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},size:10,width:1}}},{}],201:[function(){d3plus.style.default.background={accepted:[String],value:"#ffffff"}},{}],202:[function(){d3plus.style.default.color={heatmap:["#27366c","#7b91d3","#9ed3e3","#f3d261","#c9853a","#d74b03"],focus:"#444444",missing:"#eeeeee",primary:"#d74b03",range:["#d74b03","#eeeeee","#94b153"],secondary:"#e5b3bb"}},{}],203:[function(){d3plus.style.default.coords={center:[0,0],fit:{accepted:["auto","height","width"],value:"auto"},padding:20,projection:{accepted:["mercator","equirectangular"],value:"mercator"},threshold:.1}},{}],204:[function(){d3plus.style.default.data={donut:{size:.35},large:400,opacity:.9,stroke:{width:1}}},{}],205:[function(){d3plus.style.default.edges={arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",large:100,limit:!1,opacity:1,width:1}},{}],206:[function(){d3plus.style.default.font={align:{accepted:["left","center","right"],process:function(t){return d3plus.rtl?"left"===t?"right":"right"===t?"left":t:t},value:"left"},color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),secondary:{align:{accepted:["left","center","right"],process:function(t){return d3plus.rtl?"left"===t?"right":"right"===t?"left":t:t},value:"left"},color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:12,spacing:0,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},size:12,spacing:0,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200}},{}],207:[function(){d3plus.style.default.footer={font:{align:"center",color:"#444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:11,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},padding:0,position:"bottom"}},{}],208:[function(){d3plus.style.default.height={small:300,max:600}},{}],209:[function(){d3plus.style.default.icon={back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:function(t){var e=this.fallback;return d3plus.style.default.icon.fontCheck(t,e)},rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:function(t){var e=this.fallback;return d3plus.style.default.icon.fontCheck(t,e)},rotate:0,value:!1},drop:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:function(t){var e=this.fallback;return d3plus.style.default.icon.fontCheck(t,e)},rotate:0,value:"fa-angle-down"},fontCheck:function(t,e){return t===!1||0===t.indexOf("fa-")&&d3plus.font.awesome||t.indexOf("fa-")<0?t:e},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:function(t){var e=this.fallback;return d3plus.style.default.icon.fontCheck(t,e)},rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:function(t){var e=this.fallback;return d3plus.style.default.icon.fontCheck(t,e)},rotate:0,value:"fa-check"}}},{}],210:[function(){d3plus.style.default.labels={align:"middle",font:{decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:11,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},padding:7,segments:2}},{}],211:[function(){d3plus.style.default.legend={align:"middle",font:{align:"middle",color:"#444444",family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:10,weight:200},gradient:{height:10},order:{accepted:["color","id","size","text"],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30]}},{}],212:[function(){d3plus.style.default.links={font:{color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},hover:{color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"underline"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200}}},{}],213:[function(){d3plus.style.default.messages={font:{color:"#444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:16,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},padding:5}},{}],214:[function(){d3plus.style.default.nodes={overlap:.6}},{}],215:[function(){d3plus.style.default.shape={interpolate:{accepted:["basis","basis-open","cardinal","cardinal-open","linear","monotone","step","step-before","step-after"],deprecates:"stack_type",value:"linear"},rendering:{accepted:["auto","optimizeSpeed","crispEdges","geometricPrecision"],value:"auto"}}},{}],216:[function(){d3plus.style.default.timeline={align:"middle",background:"#eeeeee",brush:{color:"#ffffff",opacity:1},handles:{accepted:[Boolean],color:"#e5e5e5",hover:"#ffffff",opacity:1,size:3,stroke:"#cccccc",value:!0},height:20,tick:{align:"middle",color:"#e5e5e5",family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:10,weight:200}}},{}],217:[function(){d3plus.style.default.timing={mouseevents:60,transitions:600,ui:200}},{}],218:[function(){d3plus.style.default.title={font:{align:"center",color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:16,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:400},height:!1,padding:2,position:"top",sub:{font:{align:"center",color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:12,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},padding:1,position:"top"},total:{font:{align:"center",color:"#444444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:12,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},padding:1,position:"top"},width:!1}
},{}],219:[function(){d3plus.style.default.tooltip={anchor:"top center",background:"#ffffff",children:{accepted:[Boolean],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},font:{color:"#444",family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:12,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225}},{}],220:[function(){d3plus.style.default.ui={align:{accepted:["left","center","right"],process:function(t){return d3plus.rtl?"left"===t?"right":"right"===t?"left":t:t},value:"center"},border:1,color:{primary:{process:function(t){var e=this.getVars(),n=this.value,r=e.ui.color.secondary.value;return r&&r!==d3.rgb(n).darker(2).toString()||(e.ui.color.secondary.value=d3.rgb(t).darker(2).toString()),t},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:{accepted:["line-through","none","overline","underline"],value:"none"},family:d3plus.style.fontFamily(d3plus.style.default.fontFamily),size:11,transform:{accepted:["capitalize","lowercase","none","uppercase"],value:"none"},weight:200},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"}}},{}],221:[function(){d3plus.style.default.width={small:400}},{}],222:[function(){d3plus.style.fontFamily=function(t){return{process:d3plus.font.validate,value:t}}},{}],223:[function(t,e){d3plus.style.sheet=function(t){var e,n,r;for(e=0,n=!1;e<document.styleSheets.length;){if(r=document.styleSheets[e],r.href&&r.href.indexOf(t)>=0){n=!0;break}e++}return n},e.exports=d3plus.style.sheet},{}],224:[function(){d3plus.textwrap.flow=function(t){t.text.html.value?this.foreign(t):this.tspan(t)}},{}],225:[function(){d3plus.textwrap.foreign=function(t){var e=t.container.value,n=e.attr("font-family")||e.style("font-family"),r=e.attr("text-anchor")||e.style("text-anchor"),a=e.attr("fill")||e.style("fill"),i=e.attr("opacity")||e.style("opacity");r="end"===r?"right":"middle"===r?"center":"left",d3.select(e.node().parentNode).append("foreignObject").attr("width",t.width.value+"px").attr("height",t.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",n).style("font-size",t.size.value[1]).style("color",a).style("text-align",r).style("opacity",i).text(t.text.current)}},{}],226:[function(){d3plus.textwrap.getDimensions=function(t){if(!t.width.value||!t.height.value){var e=d3.select(t.container.value.node().parentNode),n=e.select("rect"),r=e.select("circle");if(n.empty())if(r.empty())t.width.value||t.self.width(500),t.height.value||t.self.height(500);else{var a=r.attr("r");t.width.value||t.self.width(parseFloat(2*a,10)),t.height.value||t.self.height(parseFloat(2*a,10))}else{if(!t.width.value){var i=n.attr("width")||n.style("width");t.self.width(parseFloat(i,10))}if(!t.height.value){var o=n.attr("height")||n.style("height");t.self.height(parseFloat(o,10))}}}}},{}],227:[function(){d3plus.textwrap.getSize=function(t){if(!t.size.value){var e=t.container.value.attr("font-size")||t.container.value.style("font-size");e=parseFloat(e,10),t.self.size(t.resize.value?[e,2*e]:[e/2,e])}}},{}],228:[function(){d3plus.textwrap.getText=function(t){if(!t.text.value){var e=t.container.value.html();e.indexOf("tspan")>=0&&(e.replace(/\<\/tspan\>\<tspan\>/g," "),e.replace(/\<\/tspan\>/g,""),e.replace(/\<tspan\>/g,"")),t.self.text(e)}t.text.phrases=t.text.value instanceof Array?t.text.value.filter(function(t){return["string","number"].indexOf(typeof t)>=0}):[t.text.value+""],t.container.value.html("")}},{}],229:[function(){d3plus.textwrap.resize=function(t){if(t.resize.value){for(var e=[],n=0;n<t.text.words.length;n++){var r=n===t.text.words.length-1?"":" ";e.push(t.text.words[n]+r)}var a=Math.floor(t.size.value[1]),i="circle"===t.shape.value?.785*t.width.value:t.width.value,o=d3plus.font.sizes(e,{"font-size":a+"px"},t.container.value),l=d3.max(o,function(t){return t.width}),s=1.165+t.width.value/t.height.value*.037,u=d3.sum(o,function(t){return t.width*t.height})*s,c="circle"===t.shape.value?Math.PI*Math.pow(t.width.value/2,2):i*t.height.value;if(l>i||u>c){var d=Math.sqrt(c/u),f=i/l,p=d3.min([d,f]);a=d3.max([t.size.value[0],Math.floor(a*p)])}var h=Math.floor(.8*t.height.value);a>h&&(a=h),l*(a/t.size.value[1])<=i?(a!==t.size.value[1]&&t.self.size([t.size.value[0],a]),t.container.value.attr("font-size",t.size.value[1]+"px"),this.flow(t)):this.wrap(t)}}},{}],230:[function(){d3plus.textwrap.tspan=function(t){var e=t.container.value.attr("x")||"0px",n=t.text.words.slice(0),r=!1,a=t.container.value.append("tspan").text(n[0]).attr("dy",t.size.value[1]+"px"),i=a.node().offsetHeight,o=1,l=function(){return t.container.value.append("tspan").attr("x",e).attr("dy",t.size.value[1]+"px")},s=function(){a.empty()||(n=a.text().match(/[^\s-]+-?/g),u())},u=function(){if(n&&n.length){var e=n.pop(),r=e.charAt(e.length-1);if(1===e.length&&t.text.split.indexOf(e)>=0)u();else{t.text.split.indexOf(r)>=0&&(e=e.substr(0,e.length-1)),a.text(n.join(" ")+" "+e+" ...");var l=(o-1)*i,c="circle"===t.shape.value?2*Math.sqrt(l*(2*(t.width.value/2)-l)):t.width.value;a.node().getComputedTextLength()>c&&u()}}else a.remove(),a=d3.select(t.container.value.node().lastChild),a.empty()||(o--,s())};"circle"===t.shape.value&&t.container.value.attr("text-anchor","middle");for(var c=1;c<n.length;c++){if(o*i>t.height.value){a.remove(),1!==c&&(a=d3.select(t.container.value.node().lastChild),a.empty()||s());break}var d=a.text(),f=(d.slice(-1),t.text.current.charAt(t.text.current.indexOf(d)+d.length)),p=" "==f?" ":"";a.text(d+p+n[c]);var h=(o-1)*i,v="circle"===t.shape.value?2*Math.sqrt(h*(2*(t.width.value/2)-h)):t.width.value;a.node().getComputedTextLength()>v&&(r||(a.text(""),a=l()),a.text(d),a=l(),a.text(n[c]),o++)}}},{}],231:[function(){d3plus.textwrap.wrap=function(t){t.text.phrases.length&&(t.text.current=t.text.phrases.shift()+"",t.text.words=t.text.current.match(t.text.break),t.resize.value?this.resize(t):this.flow(t))}},{}],232:[function(){d3plus.textwrap=function(){var t={shell:"textwrap"};t.self=function(e){return e.each(function(){d3plus.textwrap.getDimensions(t),d3plus.textwrap.getSize(t),t.size.value[0]<=t.height.value&&(d3plus.textwrap.getText(t),d3plus.textwrap.wrap(t))}),t.self};var e=["container","dev","draw","format","height","resize","text","shape","size","width"];return d3plus.method(t,e),t.self}},{}],233:[function(){d3plus.tooltip.app=function(t){function e(e){var l={},f={},p="merged"in r.d3plus?a:a+1,h=n.id.nesting[p],x="merged"in r.d3plus?r.d3plus.merged:r[h],b=d3plus.variable.value(n,r,n.size.value);if(n.tooltip.children.value)if(x instanceof Array){x=x.slice(0),d3plus.object.validate(x[0])&&(x=d3plus.util.uniques(x,h));for(var w="short"===d?3:n.data.large,_=d3.min([x.length,w]),z=0;_>z;z++){var k=x[z],M=d3plus.variable.text(n,k,p)[0],A=d3plus.variable.value(n,k,n.size.value,h),E=d3plus.variable.color(n,k,h);f[M]=A?n.format.value(A,n.size.value):"",E&&(f.d3plus_colors||(f.d3plus_colors={}),f.d3plus_colors[M]=E)}x.length>_&&(f.d3plusMore=x.length-_)}else if(x&&"null"!==x){var M=d3plus.variable.text(n,x,p)[0];f[M]=b?n.format.value(b,n.size.value):""}n.tooltip.size.value&&b&&(!x||x instanceof Array)&&(l[n.size.value]=b);var j=n.active.value?d3plus.variable.value(n,r,n.active.value):r.d3plus.active,S=n.temp.value?d3plus.variable.value(n,r,n.temp.value):r.d3plus.temp,C=n.total.value?d3plus.variable.value(n,r,n.total.value):r.d3plus.total;if("number"==typeof j&&j>0&&C){var N=n.active.value||"active";l[N]=j+"/"+C+" ("+n.format.value(j/C*100,"share")+"%)"}if("number"==typeof S&&S>0&&C){var N=n.temp.value||"temp";l[N]=S+"/"+C+" ("+n.format.value(S/C*100,"share")+"%)"}n.tooltip.share.value&&r.d3plus.share&&(l.share=n.format.value(100*r.d3plus.share,"share")+"%");var p="depth"in t?t.depth:a,O=d3plus.variable.text(n,r,p)[0],F=d3plus.variable.value(n,r,n.icon.value,n.id.nesting[p]),T=d3plus.tooltip.data(n,r,d,l,f,p);if(T.length>0||v||!r.d3plus_label&&"short"==d&&O||r.d3plus_label&&"visible"in r.d3plus_label&&!r.d3plus_label.visible){O||(O=k);var p=r.d3plus&&"depth"in r.d3plus?n.id.nesting[r.d3plus.depth]:n.id.value;if("string"==typeof n.icon.style.value)var q=n.icon.style.value;else if("object"==typeof n.icon.style.value&&n.icon.style.value[p])var q=n.icon.style.value[p];else var q="default";if(t.width)var L=t.width;else if(u||0!=T.length)var L=n.tooltip.small;else var L="auto";d3plus.tooltip.create({align:c,arrow:o,locale:n.format.locale.value,background:n.tooltip.background,curtain:n.tooltip.curtain.color,curtainopacity:n.tooltip.curtain.opacity,fontcolor:n.tooltip.font.color,fontfamily:n.tooltip.font.family.value,fontsize:n.tooltip.font.size,fontweight:n.tooltip.font.weight,data:T,color:d3plus.variable.color(n,r),allColors:!0,footer:t.footer===!1?t.footer:v,fullscreen:u,html:e,icon:F,id:s,max_height:t.maxheight,max_width:n.tooltip.small,mouseevents:i,offset:y,parent:n.container.value,style:q,title:O,width:L,x:g,y:m})}else d3plus.tooltip.remove(s)}"d3plus"in t.data||(t.data.d3plus={});var n=t.vars,r=t.data,a="d3plus"in r&&"depth"in r.d3plus?r.d3plus.depth:n.depth.value,i=(t.ex,t.mouseevents?t.mouseevents:!1),o="arrow"in t?t.arrow:!0,l=d3plus.variable.value(n,r,n.id.value),s=t.id||n.type.value;if(!d3.event||"click"!=d3.event.type||!n.tooltip.html.value&&!n.tooltip.value.long||"fullscreen"in t){var u=!1,c=t.anchor||n.tooltip.anchor,d=t.length||"short",f=n.zoom.direction(r);if(-1===f){var p=n.id.nesting[a-1];d3plus.variable.value(n,l,p)}if(1===f&&n.zoom.value)var h=n.format.value(n.format.locale.value.ui.expand);else if(-1===f&&n.zoom.value&&n.history.states.length)var h=n.format.value(n.format.locale.value.ui.collapse);else if("short"==d&&(n.tooltip.html.value||n.tooltip.value.long)&&n.focus.value!=l)var h=n.format.locale.value.ui.moreInfo;else if("long"==d)var h=n.footer.value||"";else var h="";var v=h.length?n.format.value(h,"footer"):!1}else{var u=!0,o=!1,i=!0,d="long",v=n.footer.value;n.covered=!0}if("x"in t)var g=t.x;else if("follow"==d3plus.visualization[n.type.value].tooltip)var g=d3.mouse(n.container.value.node())[0];else{var g=r.d3plus.x;n.zoom.translate&&n.zoom.scale&&(g=n.zoom.translate[0]+g*n.zoom.scale),g+=n.margin.left}if("y"in t)var m=t.y;else if("follow"==d3plus.visualization[n.type.value].tooltip)var m=d3.mouse(n.container.value.node())[1];else{var m=r.d3plus.y;n.zoom.translate&&n.zoom.scale&&(m=n.zoom.translate[1]+m*n.zoom.scale),m+=n.margin.top}if("offset"in t)var y=t.offset;else if("follow"==d3plus.visualization[n.type.value].tooltip)var y=3;else{var y=r.d3plus.r?r.d3plus.r:r.d3plus.height/2;n.zoom.scale&&(y*=n.zoom.scale)}u?"string"==typeof n.tooltip.html.value?e(n.tooltip.html.value):"function"==typeof n.tooltip.html.value?e(n.tooltip.html.value(l)):n.tooltip.html.value&&"object"==typeof n.tooltip.html.value&&n.tooltip.html.value.url?d3.json(n.tooltip.html.value.url,function(t){var r=n.tooltip.html.value.callback?n.tooltip.html.value.callback(t):t;e(r)}):e(""):e("")}},{}],234:[function(){d3plus.tooltip.arrow=function(t){t.style("bottom",function(t){return"center"==t.anchor.y||t.flip?"auto":"-5px"}).style("top",function(t){return"center"!=t.anchor.y&&t.flip?"-5px":"center"==t.anchor.y?"50%":"auto"}).style("left",function(t){return"center"==t.anchor.y&&t.flip?"-5px":"center"!=t.anchor.y?"50%":"auto"}).style("right",function(t){return"center"!=t.anchor.y||t.flip?"auto":"-5px"}).style("margin-left",function(t){if("center"==t.anchor.y)return"auto";if("right"==t.anchor.x)var e=-t.width/2+t.arrow_offset/2;else if("left"==t.anchor.x)var e=t.width/2-2*t.arrow_offset-5;else var e=-5;if(t.cx-t.width/2-5<e)e=t.cx-t.width/2-5,e<2-t.width/2&&(e=2-t.width/2);else if(-(t.limit[0]-t.cx-t.width/2+5)>e){var e=-(t.limit[0]-t.cx-t.width/2+5);e>t.width/2-11&&(e=t.width/2-11)}return e+"px"}).style("margin-top",function(t){if("center"!=t.anchor.y)return"auto";if("bottom"==t.anchor.y)var e=-t.height/2+t.arrow_offset/2-1;else if("top"==t.anchor.y)var e=t.height/2-2*t.arrow_offset-2;else var e=-9;if(t.cy-t.height/2-t.arrow_offset<e)e=t.cy-t.height/2-t.arrow_offset,e<4-t.height/2&&(e=4-t.height/2);else if(-(t.limit[1]-t.cy-t.height/2+t.arrow_offset)>e){var e=-(t.limit[1]-t.cy-t.height/2+t.arrow_offset);e>t.height/2-22&&(e=t.height/2-22)}return e+"px"})}},{}],235:[function(){d3plus.tooltip.create=function(t){var e=t.fullscreen?250:200,n=d3plus.prefix();if(t.width=t.width||e,t.max_width=t.max_width||386,t.id=t.id||"default",t.size=t.fullscreen||t.html?"large":"small",t.offset=t.offset||0,t.arrow_offset=t.arrow?8:0,t.x=t.x||0,t.y=t.y||0,t.parent=t.parent||d3.select("body"),t.curtain=t.curtain||"#fff",t.curtainopacity=t.curtainopacity||.8,t.background=t.background||"#fff",t.fontcolor=t.fontcolor||"#444",t.fontfamily=t.fontfamily||"sans-serif",t.fontweight=t.fontweight||"normal",t.fontsize=t.fontsize||"12px",t.style=t.style||"default",t.zindex="small"==t.size?2e3:500,t.locale=t.locale||d3plus.locale.en,t.iconsize||(t.iconsize="small"==t.size?22:50),t.limit=[parseFloat(t.parent.style("width"),10),parseFloat(t.parent.style("height"),10)],t.title instanceof Array){var r=t.locale.ui.and,a=t.locale.ui.more;t.title=d3plus.string.list(t.title,r,3,a)}var i=function(){d3.selectAll("div.d3plus_tooltip_data_desc").style("height","0px"),d3.selectAll("div.d3plus_tooltip_data_help").style("background-color","#ccc")};if(d3plus.tooltip.remove(t.id),t.anchor={},t.fullscreen)t.anchor.x="center",t.anchor.y="center",t.x=t.parent?t.parent.node().offsetWidth/2:window.innerWidth/2,t.y=t.parent?t.parent.node().offsetHeight/2:window.innerHeight/2;else if(t.align){var o=t.align.split(" ");t.anchor.y=o[0],t.anchor.x=o[1]?o[1]:"center"}else t.anchor.x="center",t.anchor.y="top";var l=t.width-30;if(t.fullscreen){t.parent.append("div").attr("id","d3plus_tooltip_curtain_"+t.id).attr("class","d3plus_tooltip_curtain").style("background-color",t.curtain).style("opacity",t.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(d3plus.evt.click,function(){d3plus.tooltip.remove(t.id)})}var s=t.parent.append("div").datum(t).attr("id","d3plus_tooltip_id_"+t.id).attr("class","d3plus_tooltip d3plus_tooltip_"+t.size).style("color",t.fontcolor).style("font-family",t.fontfamily).style("font-weight",t.fontweight).style("font-size",t.fontsize+"px").style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("z-index",t.zindex).on(d3plus.evt.out,function(){i()});t.max_height&&s.style("max-height",t.max_height+"px"),t.fixed?(s.style("z-index",500),t.mouseevents=!0):s.style("z-index",2e3);var u=s.append("div").datum(t).attr("class","d3plus_tooltip_container").style("background-color",t.background).style("padding","6px");if(t.fullscreen&&t.html){d=t.parent?.75*t.parent.node().offsetWidth:.75*window.innerWidth,k=t.parent?.75*t.parent.node().offsetHeight:.75*window.innerHeight,u.style("width",d+"px").style("height",k+"px");var c=u.append("div").attr("class","d3plus_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",t.width+"px")}else{if("auto"==t.width){var d="auto";u.style("max-width",t.max_width+"px")}else var d=t.width-14+"px";var c=u.style("width",d)}if(t.title||t.icon)var f=c.append("div").attr("class","d3plus_tooltip_header").style("position","relative").style("z-index",1);if(t.fullscreen){s.append("div").attr("class","d3plus_tooltip_close").style("background-color",t.color).style("color",d3plus.color.text(t.color)).style("position","absolute").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(d3plus.evt.over,function(){d3.select(this).style("cursor","pointer").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(d3plus.evt.out,function(){d3.select(this).style("cursor","auto").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(d3plus.evt.click,function(){d3plus.tooltip.remove(t.id)})}if(t.mouseevents){if(t.mouseevents!==!0){var p=d3.select(t.mouseevents).on(d3plus.evt.out),h=function(){var e=d3.event.toElement||d3.event.relatedTarget;if(e)var n="string"==typeof e.className?e.className:e.className.baseVal,r=0==n.indexOf("d3plus_tooltip");else var r=!1;e&&(v(s.node(),e)||v(t.mouseevents,e)||r)||(p(d3.select(t.mouseevents).datum()),i(),d3.select(t.mouseevents).on(d3plus.evt.out,p))},v=function(t,e){for(var n=e.parentNode;null!==n;){if(n==t)return!0;n=n.parentNode}return!1};d3.select(t.mouseevents).on(d3plus.evt.out,h),s.on(d3plus.evt.out,h);var g=d3.select(t.mouseevents).on(d3plus.evt.move);g&&s.on(d3plus.evt.move,g)}}else s.style("pointer-events","none");if(t.arrow){s.append("div").attr("class","d3plus_tooltip_arrow").style("background-color",t.background).style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom","-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(n+"transform","rotate(45deg)").style("z-index",-1)}if(t.icon){var m=f.append("div").attr("class","d3plus_tooltip_icon").style("width",t.iconsize+"px").style("height",t.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+t.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px");"knockout"==t.style&&m.style("background-color",t.color),l-=m.node().offsetWidth}if(t.title){var y=t.max_width-6;t.icon&&(y-=t.iconsize+6),y+="px";{f.append("div").attr("class","d3plus_tooltip_title").style("max-width",y).style("color",t.icon?t.fontcolor:d3plus.color.legible(t.color)).style("vertical-align","top").style("width",l+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===t.size?"18px":"16px").style("line-height","large"===t.size?"20px":"17px").style("padding","large"===t.size?"3px 6px":"3px").text(t.title)}}if(t.description){c.append("div").attr("class","d3plus_tooltip_description").style("font-size","12px").style("padding","6px").text(t.description)}if(t.data||t.html&&!t.fullscreen)var x=c.append("div").attr("class","d3plus_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(t.data){var b=0,w={},_=null;t.data.forEach(function(e,r){e.group&&_!=e.group&&(_=e.group,x.append("div").attr("class","d3plus_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(e.group));var a=x.append("div").attr("class","d3plus_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(e);e.highlight===!0?a.style("color",d3plus.color.legible(t.color)):(e.allColors||e.highlight!==t.color)&&a.style("color",d3plus.color.legible(e.highlight));var o=a.append("div").attr("class","d3plus_tooltip_data_name").style("display","inline-block").html(e.name).on(d3plus.evt.out,function(){d3.event.stopPropagation()});if(e.value instanceof Array){var l=t.locale.ui.and,s=t.locale.ui.more;e.value=d3plus.string.list(e.value,l,3,s)}var u=a.append("div").attr("class","d3plus_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").text(e.value).on(d3plus.evt.out,function(){d3.event.stopPropagation()});if(d3plus.rtl?u.style("left","6px"):u.style("right","6px"),t.mouseevents&&e.desc){var c=a.append("div").attr("class","d3plus_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(n+"transition","height 0.5s").style("width","85%").text(e.desc).on(d3plus.evt.out,function(){d3.event.stopPropagation()}),d=c.node().offsetHeight;c.style("height","0px");var f=o.append("div").attr("class","d3plus_tooltip_data_help").style("background-color","#ccc").style(n+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size","8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(prefix+"transition","background-color 0.5s").text("?").on(d3plus.evt.over,function(){var t=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",t),c.style("height",d+"px")}).on(d3plus.evt.out,function(){d3.event.stopPropagation()});o.style("cursor","pointer").on(d3plus.evt.over,function(){i();var t=d3.select(this.parentNode).style("color");f.style("background-color",t),c.style("height",d+"px")}),a.on(d3plus.evt.out,function(){d3.event.stopPropagation(),i()})}var p=parseFloat(u.style("width"),10);p>t.width/2&&(p=t.width/2),p>b&&(b=p),r!=t.data.length-1&&(e.group&&e.group==t.data[r+1].group||!e.group&&!t.data[r+1].group)&&x.append("div").attr("class","d3plus_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")}),x.selectAll(".d3plus_tooltip_data_name").style("width",function(){var t=parseFloat(d3.select(this.parentNode).style("width"),10);return t-b-30+"px"}),x.selectAll(".d3plus_tooltip_data_value").style("width",b+"px").each(function(t){var e=parseFloat(d3.select(this).style("height"),10);w[t.name]=e}),x.selectAll(".d3plus_tooltip_data_name").style("min-height",function(t){return w[t.name]+"px"})}t.html&&!t.fullscreen&&x.append("div").html(t.html);var z=c.append("div").attr("class","d3plus_tooltip_footer").style("font-size","10px").style("position","relative").style("text-align","center");if(t.footer&&z.html(t.footer),t.height=s.node().offsetHeight,t.html&&t.fullscreen){var k=t.height-12,d=s.node().offsetWidth-t.width-44;u.append("div").attr("class","d3plus_tooltip_html").style("width",d+"px").style("height",k+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(t.html)}if(t.width=s.node().offsetWidth,"center"!=t.anchor.y?t.height+=t.arrow_offset:t.width+=t.arrow_offset,t.data||!t.fullscreen&&t.html){if(t.fullscreen)var k=t.height;else var M=t.parent.node().offsetHeight,A=t.fixed?M-t.y-10:M-10,k=t.height<A?t.height:A;k-=parseFloat(u.style("padding-top"),10),k-=parseFloat(u.style("padding-bottom"),10),f&&(k-=f.node().offsetHeight,k-=parseFloat(f.style("padding-top"),10),k-=parseFloat(f.style("padding-bottom"),10)),z&&(k-=z.node().offsetHeight,k-=parseFloat(z.style("padding-top"),10),k-=parseFloat(z.style("padding-bottom"),10)),x.style("max-height",k+"px")}t.height=s.node().offsetHeight,d3plus.tooltip.move(t.x,t.y,t.id)}},{}],236:[function(){d3plus.tooltip.data=function(t,e,n,r,a,i){function o(n,r){if(t.attrs.value[r])var a=r;else var a=null;r&&(r=t.format.value(r));var i=s[n]||d3plus.variable.value(t,e,n,a);if(i!==!1&&null!==i){var o=t.format.value(t.format.locale.value.ui[n]?t.format.locale.value.ui[n]:n),l=c.indexOf(n)>=0;i instanceof Array?i.forEach(function(e){e=t.format.value(e)}):i=t.format.value(i);var u={name:o,value:i,highlight:l,group:r};if(t.descs.value)if("function"==typeof t.descs.value){var d=t.descs.value(n);"string"==typeof d&&(u.desc=d)}else n in t.descs.value&&(u.desc=t.descs.value[n]);i&&f.push(u)}}if(t.small)return[];if(!n)var n="long";if("long"==n)var l="short";else var l="long";var s={};if(r&&"string"==typeof r)r=[r];else if(r&&"object"==typeof r){s=d3plus.object.merge(s,r);var r=[];for(var u in s)r.push(u)}else if(!r)var r=[];var c=[];if(t.tooltip.value instanceof Array)var d=t.tooltip.value;else if("string"==typeof t.tooltip.value)var d=[t.tooltip.value];else{if(t.tooltip.value[t.id.nesting[i]])var d=t.tooltip.value[t.id.nesting[i]];else var d=t.tooltip.value;d instanceof Array||(d=d[n]?d[n]:d[l]?[]:d3plus.object.merge({"":[]},d)),"string"==typeof d?d=[d]:d instanceof Array||(d=d3plus.object.merge({"":[]},d))}var f=[];if(d instanceof Array)r.forEach(function(t){d.indexOf(t)<0&&d.push(t)}),d.forEach(function(t){o(t)});else{if(t.id.nesting.length&&i<t.id.nesting.length-1){var d=d3plus.util.copy(d);t.id.nesting.forEach(function(t,e){e>i&&d[t]&&delete d[t]})}if(t.tooltip.value.long&&"object"==typeof t.tooltip.value.long){var p=[];for(var h in t.tooltip.value.long)r.forEach(function(e){t.tooltip.value.long[h].indexOf(e)>=0&&(d[h]&&d[h].indexOf(e)<0||!d[h])?(d[h]||(d[h]=[]),d[h].push(e),p.push(e)):d[h]&&d[h].indexOf(e)>=0&&p.push(e)});r.forEach(function(t){p.indexOf(t)<0&&(d[""]||(d[""]=[]),d[""].push(t))})}else{var v=[];for(var h in d)r.forEach(function(t){d[h]instanceof Array&&d[h].indexOf(t)>=0?v.push(t):"string"==typeof d[h]&&d[h]==t&&v.push(t)});v.length!=r.length&&(d[""]||(d[""]=[]),r.forEach(function(t){v.indexOf(t)<0&&d[""].push(t)}))}d[""]&&(d[""].forEach(function(t){o(t,"")}),delete d[""]);for(var h in d)d[h]instanceof Array?d[h].forEach(function(t){o(t,h)}):"string"==typeof d[h]&&o(d[h],h)}if(a){var g=t.format.locale.value.ui.including,m=a.d3plus_colors;for(var y in a)if("d3plus_colors"!==y){if("d3plusMore"===y){var x=t.format.locale.value.ui.more,b=d3plus.string.format(x,a[y]),w=!0;a[y]=""}else var b=y,w=m&&m[b]?m[b]:!1;f.push({group:t.format.value(g),highlight:w,name:b,value:a[y]})}}if(t.tooltip.connections.value&&"long"===n){var _=t.edges.connections(e[t.id.value],t.id.value,!0);_.length&&_.forEach(function(e){var n=d3plus.variable.text(t,e)[0],r=d3plus.variable.color(t,e),a=t.tooltip.font.size,i="square"==t.shape.value?0:a;styles=["background-color: "+r,"border-color: "+d3plus.color.legible(r),"border-style: solid","border-width: "+t.data.stroke.width+"px","display: inline-block","height: "+a+"px","left: 0px","position: absolute","width: "+a+"px","top: 0px",d3plus.prefix()+"border-radius: "+i+"px"],node="<div style='"+styles.join("; ")+";'></div>",f.push({group:t.format.value(t.format.locale.value.ui.primary),highlight:!1,name:"<div style='position:relative;padding-left:"+1.5*a+"px;'>"+node+n+"</div>",value:""})})}return f}},{}],237:[function(){d3plus.tooltip.move=function(t,e,n){if(n)var r=d3.select("div#d3plus_tooltip_id_"+n);else var r=d3.select("div#d3plus_tooltip_id_default");if(r.node()){var a=r.datum();a.cx=t,a.cy=e,a.fixed||("center"!=a.anchor.y?("right"==a.anchor.x?a.x=a.cx-a.arrow_offset-4:"center"==a.anchor.x?a.x=a.cx-a.width/2:"left"==a.anchor.x&&(a.x=a.cx-a.width+a.arrow_offset+2),"bottom"==a.anchor.y?a.flip=a.cy+a.height+a.offset<=a.limit[1]:"top"==a.anchor.y&&(a.flip=a.cy-a.height-a.offset<0),a.y=a.flip?a.cy+a.offset+a.arrow_offset:a.cy-a.height-a.offset-a.arrow_offset):(a.y=a.cy-a.height/2,"right"==a.anchor.x?a.flip=a.cx+a.width+a.offset<=a.limit[0]:"left"==a.anchor.x&&(a.flip=a.cx-a.width-a.offset<0),"center"==a.anchor.x?(a.flip=!1,a.x=a.cx-a.width/2):a.x=a.flip?a.cx+a.offset+a.arrow_offset:a.cx-a.width-a.offset),a.x<0?a.x=0:a.x+a.width>a.limit[0]&&(a.x=a.limit[0]-a.width),a.y<0?a.y=0:a.y+a.height>a.limit[1]&&(a.y=a.limit[1]-a.height)),r.style("top",a.y+"px").style("left",a.x+"px"),a.arrow&&r.selectAll(".d3plus_tooltip_arrow").call(d3plus.tooltip.arrow)}}},{}],238:[function(){d3plus.tooltip.remove=function(t){t?(d3.selectAll("div#d3plus_tooltip_curtain_"+t).remove(),d3.selectAll("div#d3plus_tooltip_id_"+t).remove()):(d3.selectAll("div#d3plus_tooltip_curtain").remove(),d3.selectAll("div.d3plus_tooltip").remove())}},{}],239:[function(){d3plus.util.buckets=function(t,e){for(var n=[],r=1/(e-1)*(t[1]-t[0]),a=r,a=t[0];a<=t[1];a+=r)n.push(a);return n.length<e&&(n[e-1]=t[1]),n[n.length-1]<t[1]&&(n[n.length-1]=t[1]),n}},{}],240:[function(){d3plus.util.child=function(t,e){if(!t||!e)return!1;d3plus.util.d3selection(t)&&(t=t.node()),d3plus.util.d3selection(t)&&(e=e.node());for(var n=e.parentNode;null!==n;){if(n==t)return!0;n=n.parentNode}return!1}},{}],241:[function(){d3plus.util.closest=function(t,e){var n=t[0];return t.forEach(function(t){Math.abs(e-t)<Math.abs(e-n)&&(n=t)}),n}},{}],242:[function(){d3plus.util.copy=function(t){if(d3plus.object.validate(t))return d3plus.object.merge(t);if(t instanceof Array){var e=[];return t.forEach(function(t){e.push(d3plus.util.copy(t))}),e}return t}},{}],243:[function(){d3plus.util.d3selection=function(t){return d3plus.ie?"object"==typeof t&&t instanceof Array:t instanceof d3.selection}},{}],244:[function(){d3plus.util.dataurl=function(t,e){var n=new Image;n.src=t,n.crossOrigin="Anonymous",n.onload=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height;var n=t.getContext("2d");n.drawImage(this,0,0),e.call(this,t.toDataURL("image/png")),t=null}}},{}],245:[function(){d3plus.util.distances=function(t,e){var n=[],r=[];return t.forEach(function(a){var i=e?e(a):[a.x,a.y];r.push(a),t.forEach(function(t){if(r.indexOf(t)<0){var a=e?e(t):[t.x,t.y],o=Math.abs(i[0]-a[0]),l=Math.abs(i[1]-a[1]);n.push(Math.sqrt(o*o+l*l))}})}),n.sort(function(t,e){return t-e}),n}},{}],246:[function(){d3plus.util.offset=function(t,e,n){var r={x:0,y:0};if(0>t&&(t=2*Math.PI+t),"square"==n){var a=45*(Math.PI/180);if(t<=Math.PI)if(t<Math.PI/2)if(a>t){r.x+=e;var i=Math.tan(t)*e;r.y+=i}else{r.y+=e;var o=e/Math.tan(t);r.x+=o}else if(t<Math.PI-a){r.y+=e;var o=e/Math.tan(Math.PI-t);r.x-=o}else{r.x-=e;var i=Math.tan(Math.PI-t)*e;r.y+=i}else if(t<3*Math.PI/2)if(t<a+Math.PI){r.x-=e;var i=Math.tan(t-Math.PI)*e;r.y-=i}else{r.y-=e;var o=e/Math.tan(t-Math.PI);r.x-=o}else if(t<2*Math.PI-a){r.y-=e;var o=e/Math.tan(2*Math.PI-t);r.x+=o}else{r.x+=e;var i=Math.tan(2*Math.PI-t)*e;r.y-=i}}else r.x+=e*Math.cos(t),r.y+=e*Math.sin(t);return r}},{}],247:[function(){d3plus.util.uniques=function(t,e){if(void 0===t||void 0===e)return[];var n=!1,r=d3.nest().key(function(t){return"string"==typeof e?(n||"undefined"==typeof t[e]||(n=typeof t[e]),t[e]):"function"==typeof e?(n||"undefined"==typeof e(t)||(n=typeof e(t)),e(t)):t}).entries(t).reduce(function(t,e){return n&&"undefined"!==e.key?t.concat("number"===n?parseFloat(e.key):e.key):t},[]);return"number"===n&&r.sort(function(t,e){return e>t?-1:1}),r}},{}],248:[function(){d3plus.variable.color=function(t,e,n){function r(t){return d3plus.object.validate(t)&&(t=t[n]),d3plus.color.random(t)}if(!n)var n=t.id.value;if(t.color.value){for(var a=t.id.nesting.indexOf(n);a>=0;a--){var i=t.id.nesting[a],o=d3plus.variable.value(t,e,t.color.value,i);if(o)break}return o?t.color.scale?t.color.scale(o):d3plus.color.validate(o)?o:r(o):t.color.value||"function"==typeof t.color.scale?t.color.missing:r(e)}return r(e)}},{}],249:[function(){d3plus.variable.text=function(t,e,n){if("number"!=typeof n)var n=t.depth.value;var r=t.id.nesting[n];if(t.text.nesting&&d3plus.object.validate(t.text.nesting))if(t.text.nesting[r])var a=t.text.nesting[r];else var a=t.text.nesting[d3.keys(t.text.nesting)[0]];else{var a=[];t.text.value&&a.push(t.text.value),a.push(r)}a instanceof Array||(a=[a]);var i=[];return d3plus.object.validate(e)&&"d3plus"in e&&e.d3plus.text&&i.push(e.d3plus.text),a.forEach(function(n){var a=d3plus.variable.value(t,e,n,r);a&&(a instanceof Array?a.forEach(function(e){e=t.format.value(e.toString())}):a=t.format.value(a.toString()),i.push(a))}),i}},{}],250:[function(){d3plus.variable.value=function(t,e,n,r,a){function i(t){if(e instanceof Array){var n=d3plus.util.uniques(e,r);return t.filter(function(t){return n.indexOf(t[r])>=0})}return t.filter(function(t){return t[r]===e})}function o(t){t.children?t.children.forEach(function(t){o(t)}):t[n]&&s.push(t[n])}function l(t){var e=d3plus.util.uniques(t,n);return 1===e.length?e[0]:void 0}if(n&&"function"==typeof n)return n(e);if(!r)if(d3plus.object.validate(n)){if(n[t.id.value])var r=t.id.value;else var r=d3.keys(n)[0];n=n[r]}else var r=t.id.value;if(n===r){if(d3plus.object.validate(e)&&n in e)return e[n];if(!(e instanceof Array))return e}var s=[];if(d3plus.object.validate(e)&&n in e)return e[n];if(d3plus.object.validate(e)&&e.children){if(!a){var a="sum";
"string"==typeof t.aggs.value?a=t.aggs.value:t.aggs.value[n]&&(a=t.aggs.value[n])}if(o(e),s.length){if("string"==typeof a)return d3[a](s);if("function"==typeof a)return a(s)}var u=e;e=u[r]}else{if(d3plus.object.validate(e)&&r in e){var c=l(e);if(c)return c;e=e[r]}if(e instanceof Array){var c=l(e);if(c)return c}if(t.data.app instanceof Array){var c=l(i(t.data.app));if(c)return c}}if("attrs"in t&&t.attrs.value)if(t.attrs.value instanceof Array)var d=i(t.attrs.value);else if(r in t.attrs.value)if(t.attrs.value[r]instanceof Array)var d=i(t.attrs.value[r]);else var d=t.attrs.value[r];else var d=t.attrs.value;if(d3plus.object.validate(d)){var f=[];e instanceof Array?e.forEach(function(t){f.push(d[t])}):f.push(d[e]),d=f}if(d&&d.length){var p=d3plus.util.uniques(d,n);if(1===p.length)return p[0]}return null}},{}],251:[function(){d3plus.draw.app=function(t){if(t.group=t.g.apps[t.type.value],t.mouse={},t.internal_error)var e=null;else{var n=t.format.locale.value.visualization[t.type.value];t.dev.value&&d3plus.console.time("running "+n);var e=d3plus.visualization[t.type.value](t);t.dev.value&&d3plus.console.timeEnd("running "+n)}t.returned={nodes:null,edges:null},e instanceof Array?t.returned.nodes=e:e&&(e.nodes&&(t.returned.nodes=e.nodes),e.edges&&(t.returned.edges=e.edges));var r=t.returned.nodes;r&&r instanceof Array&&r.length||(t.returned.nodes=[])}},{}],252:[function(){d3plus.draw.container=function(t){if(t.container.changed){t.container.value.style("position",function(){var t=d3.select(this).style("position"),e=["absolute","fixed"].indexOf(t)>=0;return e?t:"relative"}).html("");var e=["width","height"];e.forEach(function(e){function n(r){if(void 0===r.tagName||["BODY","HTML"].indexOf(r.tagName)>=0){var a=window["inner"+e.charAt(0).toUpperCase()+e.slice(1)],i=document!=r?d3.select(r):null;i&&"width"==e?(a-=parseFloat(i.style("margin-left"),10),a-=parseFloat(i.style("margin-right"),10),a-=parseFloat(i.style("padding-left"),10),a-=parseFloat(i.style("padding-right"),10)):i&&"height"==e&&(a-=parseFloat(i.style("margin-top"),10),a-=parseFloat(i.style("margin-bottom"),10),a-=parseFloat(i.style("padding-top"),10),a-=parseFloat(i.style("padding-bottom"),10)),1==d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"),20>=a&&(a=t[e].small),t[e].value=a}else{var a=parseFloat(d3.select(r).style(e),10);"number"==typeof a&&a>0?t[e].value=a:"BODY"!=r.tagName&&n(r.parentNode)}}t[e].value||n(t.container.value.node())}),t.container.value.style("width",t.width.value+"px").style("height",t.height.value+"px")}t.width.viz=t.width.value,t.height.viz=t.height.value}},{}],253:[function(){d3plus.draw.enter=function(t){t.dev.value&&d3plus.console.time("creating SVG elements"),t.svg=t.container.value.selectAll("svg#d3plus").data([0]),t.svg.enter().insert("svg","#d3plus_message").attr("id","d3plus").attr("width",t.width.value).attr("height",t.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xmlns:xlink","http://www.w3.org/1999/xlink"),t.g.bg=t.svg.selectAll("rect#bg").data(["bg"]),t.g.bg.enter().append("rect").attr("id","bg").attr("fill",t.background.value).attr("width",t.width.value).attr("height",t.height.value),t.g.timeline=t.svg.selectAll("g#timeline").data(["timeline"]),t.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+t.height.value+")"),t.g.legend=t.svg.selectAll("g#key").data(["key"]),t.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+t.height.value+")"),t.g.footer=t.svg.selectAll("g#footer").data(["footer"]),t.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+t.height.value+")"),t.g.clipping=t.svg.selectAll("#clipping").data(["clipping"]),t.g.clipping.enter().append("clipPath").attr("id","clipping").append("rect").attr("width",t.width.viz).attr("height",t.height.viz),t.g.container=t.svg.selectAll("g#container").data(["container"]),t.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#clipping)").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),t.g.zoom=t.g.container.selectAll("g#zoom").data(["zoom"]),t.g.zoom.enter().append("g").attr("id","zoom"),t.g.viz=t.g.zoom.selectAll("g#d3plus_viz").data(["d3plus_viz"]),t.g.viz.enter().append("g").attr("id","d3plus_viz"),t.g.overlay=t.g.viz.selectAll("rect#d3plus_overlay").data([{id:"d3plus_overlay"}]),t.g.overlay.enter().append("rect").attr("id","d3plus_overlay").attr("width",t.width.value).attr("height",t.height.value).attr("opacity",0),d3plus.touch?t.g.overlay.on(d3plus.evt.over,t.zoom.touchEvent).on(d3plus.evt.move,t.zoom.touchEvent).on(d3plus.evt.out,t.zoom.touchEvent):t.g.overlay.on(d3plus.evt.move,function(e){e.dragging||(d3plus.visualization[t.type.value].zoom&&t.zoom.pan.value&&t.zoom.behavior.scaleExtent()[0]<t.zoom.scale?d3.select(this).style("cursor",d3plus.prefix()+"grab"):d3.select(this).style("cursor","auto"))}).on(d3plus.evt.up,function(e){d3plus.visualization[t.type.value].zoom&&t.zoom.pan.value&&t.zoom.behavior.scaleExtent()[0]<t.zoom.scale?(e.dragging=!1,d3.select(this).style("cursor",d3plus.prefix()+"grab")):d3.select(this).style("cursor","auto")}).on(d3plus.evt.down,function(e){d3plus.visualization[t.type.value].zoom&&t.zoom.pan.value&&t.zoom.behavior.scaleExtent()[0]<t.zoom.scale?(e.dragging=!0,d3.select(this).style("cursor",d3plus.prefix()+"grabbing")):d3.select(this).style("cursor","auto")}),t.g.app=t.g.viz.selectAll("g#app").data(["app"]),t.g.app.enter().append("g").attr("id","app"),t.g.edges=t.g.viz.selectAll("g#edges").data(["edges"]),t.g.edges.enter().append("g").attr("id","edges").attr("opacity",0),t.g.edge_focus=t.g.viz.selectAll("g#focus").data(["focus"]),t.g.edge_focus.enter().append("g").attr("id","focus"),t.g.edge_hover=t.g.viz.selectAll("g#edge_hover").data(["edge_hover"]),t.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0),t.g.data=t.g.viz.selectAll("g#data").data(["data"]),t.g.data.enter().append("g").attr("id","data").attr("opacity",0),t.g.data_focus=t.g.viz.selectAll("g#data_focus").data(["data_focus"]),t.g.data_focus.enter().append("g").attr("id","data_focus"),t.g.labels=t.g.viz.selectAll("g#d3plus_labels").data(["d3plus_labels"]),t.g.labels.enter().append("g").attr("id","d3plus_labels"),t.defs=t.svg.selectAll("defs").data(["defs"]),t.defs.enter().append("defs"),t.dev.value&&d3plus.console.timeEnd("creating SVG elements")}},{}],254:[function(){d3plus.draw.errors=function(t){t.dev.value&&d3plus.console.time("checking for errors");var e=["id"];d3plus.visualization[t.type.value].requirements&&(e=e.concat(d3plus.visualization[t.type.value].requirements));var n=[];if(e.forEach(function(e){t[e].value||n.push('"'+e+'"')}),n.length>1){var r=t.format.locale.value.error.methods,a=t.format.locale.value.visualization[t.type.value],i=t.format.locale.value.ui.and;n=d3plus.string.list(n,i),t.internal_error=d3plus.string.format(r,a,n)}else if(1===n.length){var r=t.format.locale.value.error.method,a=t.format.locale.value.visualization[t.type.value];t.internal_error=d3plus.string.format(r,a,n[0])}if(!t.internal_error&&e.indexOf("edges")>=0&&e.indexOf("focus")>=0){var o=t.edges.connections(t.focus.value,t.id.value);if(0==o.length){var l=d3plus.variable.text(t,t.focus.value,t.depth.value),r=t.format.locale.value.error.connections;t.internal_error=d3plus.string.format(r,'"'+l+'"')}}var e=["d3"];d3plus.visualization[t.type.value].libs&&(e=e.concat(d3plus.visualization[t.type.value].libs));var n=[];if(e.forEach(function(t){window[t]||n.push('"'+t+'"')}),n.length>1){var r=t.format.locale.value.error.libs,a=t.format.locale.value.visualization[t.type.value],i=t.format.locale.value.ui.and;n=d3plus.string.list(n,i),t.internal_error=d3plus.string.format(r,a,n)}else if(1===n.length){var r=t.format.locale.value.error.lib,a=t.format.locale.value.visualization[t.type.value];t.internal_error=d3plus.string.format(r,a,n[0])}if(t.shape.value){if(d3plus.visualization[t.type.value].shapes.indexOf(t.shape.value)<0){var s=d3plus.visualization[t.type.value].shapes.join('", "'),r=t.format.locale.value.error.accepted,u='"'+t.shape.value+'"',c=t.format.locale.value.method.shape,a=t.format.locale.value.visualization[t.type.value];d3plus.console.warning(d3plus.string.format(r,u,c,a,'"'+s+'"'),"shape"),t.shape.previous=t.shape.value,t.shape.value=d3plus.visualization[t.type.value].shapes[0];var r=t.format.locale.value.dev.setLong,u='"'+t.shape.value+'"';t.dev.value&&d3plus.console.log(d3plus.string.format(r,c,u))}}else t.shape.value=d3plus.visualization[t.type.value].shapes[0];if("modes"in d3plus.visualization[t.type.value])if(t.type.mode.value){if(d3plus.visualization[t.type.value].modes.indexOf(t.type.mode.value)<0){var d=d3plus.visualization[t.type.value].modes.join('", "'),r=t.format.locale.value.error.accepted,f='"'+t.type.mode.value+'"',p=t.format.locale.value.method.mode,a=t.format.locale.value.visualization[t.type.value];d3plus.console.warning(d3plus.string.format(r,f,p,a,'"'+d+'"')),t.type.mode.previous=t.type.mode.value,t.type.mode.value=d3plus.visualization[t.type.value].modes[0];var r=t.format.locale.value.dev.setLong,f='"'+t.type.mode.value+'"';t.dev.value&&d3plus.console.log(d3plus.string.format(r,p,f))}}else t.type.mode.value=d3plus.visualization[t.type.value].modes[0];t.dev.value&&d3plus.console.timeEnd("checking for errors")}},{}],255:[function(){d3plus.draw.finish=function(t){d3plus.visualization[t.type.value].zoom&&t.zoom.value?(t.dev.value&&d3plus.console.time("calculating zoom"),t.draw.first&&t.zoom.bounds&&d3plus.zoom.bounds(t,t.zoom.bounds,0),(t.focus.changed||t.height.changed||t.width.changed)&&(t.zoom.viewport?d3plus.zoom.bounds(t,t.zoom.viewport):d3plus.zoom.bounds(t,t.zoom.bounds)),t.dev.value&&d3plus.console.timeEnd("calculating zoom")):t.zoom.scale=1;var e=t.zoom.size?t.zoom.size.width:t.width.viz,n=t.zoom.size?t.zoom.size.height:t.height.viz,r=t.zoom.bounds?t.zoom.bounds[0][0]:0,a=t.zoom.bounds?t.zoom.bounds[0][1]:0;if(t.g.overlay.attr("width",e).attr("height",n).attr("x",r).attr("y",a),t.draw.update?(d3plus.shape.edges(t),(t.draw.timing||!d3plus.visualization[t.type.value].zoom&&!t.draw.timing)&&(d3plus.shape.labels(t,"data"),t.edges.label&&setTimeout(function(){d3plus.shape.labels(t,"edges")},t.draw.timing))):d3plus.visualization[t.type.value].zoom&&t.zoom.value&&t.draw.timing&&setTimeout(function(){d3plus.zoom.labels(t)},t.draw.timing),d3plus.visualization[t.type.value].zoom&&t.zoom.value&&t.focus.value&&!t.draw.timing&&(t.dev.value&&d3plus.console.time("focus labels"),d3plus.shape.labels(t,"data_focus"),t.edges.label&&setTimeout(function(){d3plus.shape.labels(t,"edge_focus")},t.draw.timing),t.dev.value&&d3plus.console.timeEnd("focus labels")),!t.internal_error){var i=d3plus.visualization[t.type.value].requirements.indexOf("data")>=0;t.data.app&&t.returned.nodes.length||!i||(t.internal_error=t.format.locale.value.error.data)}var o=t.type.previous;o&&t.type.value!=o&&t.g.apps[o]&&(t.dev.value&&d3plus.console.time('hiding "'+o+'"'),t.draw.timing?t.g.apps[o].transition().duration(t.draw.timing).attr("opacity",0):t.g.apps[o].attr("opacity",0),t.dev.value&&d3plus.console.timeEnd());var i=d3plus.visualization[t.type.value].requirements.indexOf("data")>=0,l=i&&0==t.data.app.length||t.internal_error?0:t.focus.value&&d3plus.visualization[t.type.value].zoom&&t.zoom.value?.4:1,s=t.group.attr("opacity");if(l!=s){var u=t.draw.timing;t.group.transition().duration(u).attr("opacity",l),t.g.data.transition().duration(u).attr("opacity",l),t.g.edges.transition().duration(u).attr("opacity",l)}t.internal_error?(t.internal_error=d3plus.string.title(t.internal_error),d3plus.console.warning(t.internal_error),d3plus.ui.message(t,t.internal_error),t.internal_error=null):d3plus.ui.message(t),setTimeout(function(){d3plus.data.reset(t),d3plus.visualization[t.type.value].zoom&&t.zoom.value?(t.g.zoom.datum(t).call(t.zoom.behavior.on("zoom",d3plus.zoom.mouse)),t.zoom.scroll.value||t.g.zoom.on("wheel.zoom",null),t.zoom.click.value||t.g.zoom.on("dblclick.zoom",null),t.zoom.pan.value||(t.g.zoom.on("mousemove.zoom",null),t.g.zoom.on("mousedown.zoom",null))):t.g.zoom.call(t.zoom.behavior.on("zoom",null))},t.draw.timing)}},{}],256:[function(){d3plus.draw.focus=function(t){if(t.g.edge_focus.selectAll("g").remove(),t.g.data_focus.selectAll("g").remove(),t.focus.value&&d3plus.visualization[t.type.value].zoom&&t.zoom.value){t.dev.value&&d3plus.console.time("drawing focus elements");var n=t.g.edges.selectAll("g");if(n.size()>0){n.each(function(e){var n=e[t.edges.source][t.id.value],r=e[t.edges.target][t.id.value];if(n==t.focus.value||r==t.focus.value){var a=t.g.edge_focus.node().appendChild(this.cloneNode(!0));d3.select(a).datum(e).attr("opacity",1).selectAll("line, path").datum(e)}});var r=t.edges.arrows.value;t.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",t.color.focus).style("stroke-width",function(){return t.edges.size?d3.select(this).style("stroke-width"):2*t.data.stroke.width}).attr("marker-start",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var a="_"+e.d3plus.bucket;else var a="";return"source"==n&&r?"url(#d3plus_edge_marker_focus"+a+")":"none"}).attr("marker-end",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var a="_"+e.d3plus.bucket;else var a="";return"target"==n&&r?"url(#d3plus_edge_marker_focus"+a+")":"none"}),t.g.edge_focus.selectAll("text").style("fill",t.color.focus)}var a=d3plus.util.uniques(t.edges.connections(t.focus.value,t.id.value,!0),t.id.value);a.push(t.focus.value);{var i=[],o=[],l=[0],s=[0];t.g.data.selectAll("g").each(function(n){if(a.indexOf(n[t.id.value])>=0){var r=t.g.data_focus.node().appendChild(this.cloneNode(!0)),r=d3.select(r).datum(n).attr("opacity",1);"coordinates"==t.shape.value?t.zoom.viewport=t.path.bounds(t.zoom.coords[n.d3plus.id]):"d3plus"in n&&("x"in n.d3plus&&i.push(n.d3plus.x),"y"in n.d3plus&&o.push(n.d3plus.y),"r"in n.d3plus?(l.push(n.d3plus.r),s.push(n.d3plus.r)):("width"in n.d3plus&&l.push(n.d3plus.width/2),"height"in n.d3plus&&s.push(n.d3plus.height/2)));for(e in d3plus.evt){var u=d3.select(this).on(d3plus.evt[e]);u&&r.on(d3plus.evt[e],u)}}})}if(i.length&&o.length){var u=d3.extent(i),c=d3.extent(o),d=d3.max(l),f=d3.max(s);t.zoom.viewport=[[u[0]-d,c[0]-f],[u[1]+d,c[1]+f]]}t.g.data_focus.selectAll("path").style("stroke-width",2*t.data.stroke.width),t.dev.value&&d3plus.console.timeEnd("drawing focus elements")}else t.zoom.viewport=null}},{}],257:[function(){d3plus.draw.steps=function(t){var e=[],n=t.type.value,r=t.format.locale.value,a=r.message.ui,i=r.message.draw,o=["data","attrs","coords","nodes","edges"];if(o.forEach(function(n){!t[n].loaded&&t[n].url&&e.push({"function":function(t,e){d3plus.data.url(t,n,e)},message:r.message.loading,wait:!0})}),t.draw.update){var l=r.visualization[n].toLowerCase(),s=d3plus.visualization[n].setup,u=d3plus.visualization[n].requirements,c=d3plus.string.format(r.message.initializing,l),d=r.message.data;"function"==typeof s&&e.push({"function":function(t){if(t.dev.value){var e="running "+l+" setup";d3plus.console.time(e)}s(t),t.dev.value&&d3plus.console.timeEnd(e)},message:c}),t.container.changed&&e.push({"function":d3plus.draw.enter,message:c}),n in t.g.apps||e.push({"function":function(t){if(t.dev.value){var e="creating "+l+" group";d3plus.console.time(e)}t.g.apps[n]=t.g.app.selectAll("g#"+n).data([n]),t.g.apps[n].enter().append("g").attr("id",n).attr("opacity",0),t.dev.value&&d3plus.console.timeEnd(e)},message:c}),t.data.changed&&e.push({"function":function(t){t.data.cache={},delete t.nodes.restricted,delete t.edges.restricted,d3plus.data.keys(t,"data")},message:d}),t.attrs.changed&&e.push({"function":function(t){d3plus.data.keys(t,"attrs")},message:d}),e.push({"function":function(t){if(t.color.changed&&t.color.value){if(t.dev.value){var e="determining color type";d3plus.console.time(e)}var n=t.color.value;d3plus.object.validate(n)&&(n=n[t.id.value]?n[t.id.value]:n[d3.keys(n)[0]]),t.color.type=t.data.keys&&n in t.data.keys?t.data.keys[n]:t.attrs.keys&&n in t.attrs.keys?t.attrs.keys[n]:void 0,t.dev.value&&d3plus.console.timeEnd(e)}else t.color.value||(t.color.type="keys"in t.data?t.data.keys[t.id.value]:!1)},message:d}),u.indexOf("edges")>=0&&t.edges.value&&(!t.edges.linked||t.edges.changed)&&e.push({"function":d3plus.data.edges,message:d}),u.indexOf("nodes")>=0&&t.edges.value&&(!t.nodes.positions||t.nodes.changed)&&e.push({"function":d3plus.data.nodes,message:d}),(t.data.changed||t.time.changed||t.id.changed)&&e.push({"function":d3plus.data.format,message:d}),e.push({"function":function(t){var e=t.time.fixed.value?null:["all"];if(t.dev.value){var n=e?"fetching pool data":"fetching data";d3plus.console.time(n)}t.data.pool=d3plus.data.fetch(t,e),t.dev.value&&d3plus.console.timeEnd(n),e?(t.dev.value&&d3plus.console.time("fetching data for current year"),t.data.app=d3plus.data.fetch(t),t.dev.value&&d3plus.console.timeEnd("fetching data for current year")):t.data.app=t.data.pool},message:d}),e.push({check:function(t){return t.color.value&&"number"===t.color.type&&t.id.nesting.indexOf(t.color.value)<0&&t.data.value&&t.color.value!=t.id.value&&(t.color.changed||t.data.changed||t.depth.changed||t.time.fixed.value&&(t.time.solo.changed||t.time.mute.changed))},"function":d3plus.data.color,message:d,otherwise:function(t){"number"!==t.color.type&&(t.color.scale=null)}})}return e.push({"function":function(t){if(t.dev.value){var e=t.format.locale.value.message.tooltipReset;d3plus.console.time(e)}t.type.previous&&n!==t.type.previous&&d3plus.tooltip.remove(t.type.previous),d3plus.tooltip.remove(n),t.dev.value&&d3plus.console.timeEnd(e)},message:a}),e.push({"function":function(t){if(t.margin.process(),d3plus.ui.titles(t),t.draw.update)d3plus.ui.drawer(t),d3plus.ui.timeline(t),d3plus.ui.legend(t);else{t.dev.value&&d3plus.console.time("calculating margins");var e=t.container.value.select("div#d3plus_drawer").node().offsetHeight,n=t.g.timeline.node().getBBox();n=t.timeline.value?n.height+n.y:0;var r=t.g.legend.node().getBBox();r=t.legend.value?r.height+r.y:0,t.margin.bottom+=e+n+r,t.dev.value&&d3plus.console.timeEnd("calculating margins")}d3plus.ui.history(t),t.height.viz-=t.margin.top+t.margin.bottom,t.width.viz-=t.margin.left+t.margin.right},message:a}),e.push({"function":d3plus.ui.focus,message:a}),e.push({"function":d3plus.draw.update,message:i}),t.draw.update&&e.push({"function":[d3plus.draw.errors,d3plus.draw.app,d3plus.shape.draw],message:i}),e.push({"function":[d3plus.draw.focus,d3plus.draw.finish],message:i}),e}},{}],258:[function(){d3plus.draw.update=function(t){t.dev.value&&d3plus.console.time("updating SVG elements"),t.draw.timing?(t.container.value.transition().duration(t.draw.timing).style("width",t.width.value+"px").style("height",t.height.value+"px"),t.svg.transition().duration(t.draw.timing).attr("width",t.width.value).attr("height",t.height.value),t.g.bg.transition().duration(t.draw.timing).attr("width",t.width.value).attr("height",t.height.value),t.g.clipping.select("rect").transition().duration(t.draw.timing).attr("width",t.width.viz).attr("height",t.height.viz),t.g.container.transition().duration(t.draw.timing).attr("transform","translate("+t.margin.left+","+t.margin.top+")")):(t.container.value.style("width",t.width.value+"px").style("height",t.height.value+"px"),t.svg.attr("width",t.width.value).attr("height",t.height.value),t.g.bg.attr("width",t.width.value).attr("height",t.height.value),t.g.clipping.select("rect").attr("width",t.width.viz).attr("height",t.height.viz),t.g.container.attr("transform","translate("+t.margin.left+","+t.margin.top+")")),t.dev.value&&d3plus.console.timeEnd("updating SVG elements")}},{}],259:[function(){d3plus.shape.area=function(t,e,n){var r=d3.svg.area().x(function(t){return t.d3plus.x}).y0(function(t){return t.d3plus.y0}).y1(function(t){return t.d3plus.y}).interpolate(t.shape.interpolate.value);n.append("path").attr("class","d3plus_data").attr("d",function(t){return r(t.values)}).call(d3plus.shape.style,t),e.selectAll("path.d3plus_data").data(function(e){if(t.labels.value){var n=[],r=[],a=d3plus.variable.text(t,e);e.values.forEach(function(t){n.push([t.d3plus.x,t.d3plus.y]),r.push([t.d3plus.x,t.d3plus.y0])}),n=n.concat(r.reverse());var i={"font-weight":t.labels.font.weight,"font-family":t.labels.font.family.value};if(a.length)var o=d3plus.font.sizes(a[0],i),l=o[0].width/o[0].height;else var l=null;var s=d3plus.geom.largestRect(n,{angle:d3.range(-70,71,1),aspectRatio:l,tolerance:0})[0];if(s){var u={w:Math.floor(s.width),h:Math.floor(s.height),x:Math.floor(s.cx),y:Math.floor(s.cy),angle:-1*s.angle,padding:2,names:a};u.translate=0!==s.angle?{x:u.x,y:u.y}:!1,u.w>=10&&u.h>=10&&(e.d3plus_label=u)}}return[e]}),t.draw.timing?e.selectAll("path.d3plus_data").transition().duration(t.draw.timing).attr("d",function(t){return r(t.values)}).call(d3plus.shape.style,t):e.selectAll("path.d3plus_data").attr("d",function(t){return r(t.values)}).call(d3plus.shape.style,t)}},{}],260:[function(){d3plus.shape.color=function(t,e){var n=t.d3plus?t.d3plus.shapeType:e.shape.value;if("line"==e.shape.value)return"circle"==n?d3plus.variable.color(e,t):"none";if("area"==e.shape.value||"active"==n)return d3plus.variable.color(e,t);if("temp"==n)return"url(#d3plus_hatch_"+t.d3plus.id+")";if("active"==n)return d3plus.variable.color(e,t);if(t.d3plus.static)return d3plus.color.lighter(d3plus.variable.color(e,t),.75);var r=e.active.value?d3plus.variable.value(e,t,e.active.value):t.d3plus.active,a=e.temp.value?d3plus.variable.value(e,t,e.temp.value):t.d3plus.temp,i=e.total.value?d3plus.variable.value(e,t,e.total.value):t.d3plus.total;return!e.active.value&&!e.temp.value||r===!0||r&&i&&r==i&&!a||r&&!i?d3plus.variable.color(e,t):e.active.spotlight.value?"#eee":d3plus.color.lighter(d3plus.variable.color(e,t),.75)}},{}],261:[function(){d3plus.shape.coordinates=function(t,e,n){var r=d3.geo[t.coords.projection.value]().center(t.coords.center);t.zoom.scale||(t.zoom.scale=1),t.zoom.area=1/t.zoom.scale/t.zoom.scale,t.path=d3.geo.path().projection(r),n.append("path").attr("id",function(t){return t.id}).attr("class","d3plus_data").attr("d",t.path).call(d3plus.shape.style,t),t.draw.timing?e.selectAll("path.d3plus_data").transition().duration(t.draw.timing).call(d3plus.shape.style,t):e.selectAll("path.d3plus_data").call(d3plus.shape.style,t);var a=t.old_height!=t.height.viz||t.height.changed||t.old_width!=t.width.viz||t.width.changed;t.old_height=t.height.viz,t.old_width=t.width.viz,t.coords.changed||a||t.coords.mute.changed||t.coords.solo.changed?(t.zoom.bounds=null,t.zoom.coords={},t.zoom.labels={},e.each(function(e){var n=t.path.bounds(e),r=[];e.geometry.coordinates=e.geometry.coordinates.filter(function(n,a){var i=d3plus.util.copy(e);i.geometry.coordinates=[i.geometry.coordinates[a]];var o=t.path.area(i);return o>=t.coords.threshold?(r.push(o),!0):!1}),r.sort(function(t,e){return t-e});var a=d3plus.util.copy(e),i=d3plus.util.copy(e);a.geometry.coordinates=a.geometry.coordinates.filter(function(n,a){var o=d3plus.util.copy(e);o.geometry.coordinates=[o.geometry.coordinates[a]];var l=t.path.area(o);return l==r[r.length-1]&&(i.geometry.coordinates=o.geometry.coordinates),l>=d3.quantile(r,.9)}),t.zoom.coords[e.d3plus.id]=a;var o=i.geometry.coordinates[0];if(o&&"MultiPolygon"===i.geometry.type&&(o=o[0],i.geometry.coordinates[0]=o,i.geometry.type="Polygon"),o){for(var l=t.path(i).split("M")[1].split("Z")[0].split("L"),s=0;s<l.length;s++)l[s]=l[s].split(","),l[s][0]=parseFloat(l[s][0]),l[s][1]=parseFloat(l[s][1]);var u={"font-weight":t.labels.font.weight,"font-family":t.labels.font.family.value},c=d3plus.variable.text(t,e);if(c.length&&1===c[0].split(" ").length)var d=d3plus.font.sizes(c[0],u)[0],f=d.width/d.height;else var f=null;var p=d3plus.geom.largestRect(l,{angle:0,aspectRatio:f})[0];if(p){var h={anchor:"middle",valign:"center",group:t.g.labels,h:Math.floor(p.height),w:Math.floor(p.width),x:Math.floor(p.cx),y:Math.floor(p.cy),names:c};t.zoom.labels[e.d3plus.id]=h}else delete t.zoom.labels[e.d3plus.id]}else delete t.zoom.labels[e.d3plus.id];t.zoom.bounds?(t.zoom.bounds[0][0]>n[0][0]&&(t.zoom.bounds[0][0]=n[0][0]),t.zoom.bounds[0][1]>n[0][1]&&(t.zoom.bounds[0][1]=n[0][1]),t.zoom.bounds[1][0]<n[1][0]&&(t.zoom.bounds[1][0]=n[1][0]),t.zoom.bounds[1][1]<n[1][1]&&(t.zoom.bounds[1][1]=n[1][1])):t.zoom.bounds=n})):t.focus.value||(t.zoom.viewport=!1)}},{}],262:[function(){d3plus.shape.donut=function(t,e,n,r){function a(e,n,r,a){if(!n)var n=0;if("number"!=typeof r)var r=void 0;if("number"!=typeof a)var a=void 0;e.attrTween("d",function(e){if(void 0==r)var o=e.d3plus.r?e.d3plus.r:d3.max([e.d3plus.width,e.d3plus.height]);else var o=r;if(void 0==a)var l=e.d3plus.a[e.d3plus.shapeType];else var l=a;t.arcs[e.d3plus.shapeType][e.d3plus.id]||(t.arcs[e.d3plus.shapeType][e.d3plus.id]={r:0},t.arcs[e.d3plus.shapeType][e.d3plus.id].a="donut"==e.d3plus.shapeType?2*Math.PI:0);var s=d3.interpolate(t.arcs[e.d3plus.shapeType][e.d3plus.id].r,o+n),u=d3.interpolate(t.arcs[e.d3plus.shapeType][e.d3plus.id].a,l);return function(n){return t.arcs[e.d3plus.shapeType][e.d3plus.id].r=s(n),t.arcs[e.d3plus.shapeType][e.d3plus.id].a=u(n),i(e)}})}t.arcs||(t.arcs={donut:{},active:{},temp:{}});var i=d3.svg.arc().startAngle(0).endAngle(function(e){var n=t.arcs[e.d3plus.shapeType][e.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(e){if("donut"!=shape||e.d3plus.static)return 0;var n=t.arcs[e.d3plus.shapeType][e.d3plus.id].r;return n*t.data.donut.size}).outerRadius(function(e){var n=t.arcs[e.d3plus.shapeType][e.d3plus.id].r;return"donut"!=e.d3plus.shapeType?2*n:n});r.selectAll("path.d3plus_data").transition().duration(t.draw.timing).call(a,0,0).each("end",function(e){delete t.arcs[e.d3plus.shapeType][e.d3plus.id]}),e.selectAll("path.d3plus_data").data(function(t){return[t]}).transition().duration(t.draw.timing).call(a).call(d3plus.shape.style,t),n.append("path").attr("class","d3plus_data").transition().duration(0).call(a,0,0).call(d3plus.shape.style,t)}},{}],263:[function(){d3plus.shape.draw=function(t){function e(e){var n=e.d3plus.depth?e.d3plus.depth:t.depth.value;return e.d3plus.id=d3plus.variable.value(t,e,t.id.nesting[n]),e.d3plus.id+="_"+n+"_"+s,t.axes.values.forEach(function(n){"continuous"==t[n].scale.value&&(e.d3plus.id+="_"+d3plus.variable.value(t,e,t[n].value))}),e.d3plus.id=d3plus.string.strip(e.d3plus.id),e}function n(e,n){var r=d3plus.visualization[t.type.value].scale;if(n&&r&&r[t.shape.value])var a=r[t.shape.value];else if(n&&r&&"number"==typeof r)var a=r;else var a=1;e.attr("transform",function(t){return["line","area","coordinates"].indexOf(s)<0?"translate("+t.d3plus.x+","+t.d3plus.y+")scale("+a+")":"scale("+a+")"})}function r(e){if(e&&t.g.edges.selectAll("g").size()>0){t.g.edges.selectAll("g").each(function(n){var r=e[t.id.value],a=n[t.edges.source][t.id.value],i=n[t.edges.target][t.id.value];if(a==r||i==r){var o=t.g.edge_hover.node().appendChild(this.cloneNode(!0));d3.select(o).datum(n).attr("opacity",1).selectAll("line, path").datum(n)}});var n=t.edges.arrows.value;t.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",t.color.primary).style("stroke-width",function(){return t.edges.size?d3.select(this).style("stroke-width"):2*t.data.stroke.width}).attr("marker-start",function(e){var r=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var a="_"+e.d3plus.bucket;else var a="";return"source"==r&&n?"url(#d3plus_edge_marker_highlight"+a+")":"none"}).attr("marker-end",function(e){var r=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var a="_"+e.d3plus.bucket;else var a="";return"target"==r&&n?"url(#d3plus_edge_marker_highlight"+a+")":"none"}),t.g.edge_hover.selectAll("text").style("fill",t.color.primary),t.draw.timing?(t.g.edge_hover.transition().duration(t.timing.mouseevents).attr("opacity",1),t.g.edges.transition().duration(t.timing.mouseevents).attr("opacity",.5)):t.g.edge_hover.attr("opacity",1)}else t.draw.timing?(t.g.edge_hover.transition().duration(t.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),t.g.edges.transition().duration(t.timing.mouseevents).attr("opacity",1)):t.g.edge_hover.selectAll("*").remove()}var a=t.returned.nodes||[],i=t.returned.edges||[];t.draw.timing=a.length<t.data.large&&i.length<t.edges.large?t.timing.transitions:0;var o={area:"area",circle:"rect",donut:"donut",line:"line",square:"rect",coordinates:"coordinates"},l={};a.forEach(function(e){if(e.d3plus)if(e.d3plus.shape){var n=e.d3plus.shape;e.d3plus.shapeType=n}else{var n=o[t.shape.value];e.d3plus.shapeType=n}else var n=o[t.shape.value];l[n]||(l[n]=[]),l[n].push(e)});for(s in o)o[s]in l&&0!==d3.keys(l).length||(t.draw.timing?t.g.data.selectAll("g.d3plus_"+o[s]).transition().duration(t.draw.timing).attr("opacity",0).remove():t.g.data.selectAll("g.d3plus_"+o[s]).remove());for(var s in l){var u=t.g.data.selectAll("g.d3plus_"+s).data(l[s],function(n){if(n.d3plus||(n.d3plus={}),"coordinates"===s)return n.d3plus.id=n.id,n.id;if(!n.d3plus.id)if(n.values)n.values.forEach(function(t){t=e(t),t.d3plus.shapeType="circle"}),n.d3plus.id=n.key;else if(n=e(n),!n.d3plus.a){n.d3plus.a={donut:2*Math.PI};var r=t.active.value?n.d3plus[t.active.value]:n.d3plus.active,a=t.temp.value?n.d3plus[t.temp.value]:n.d3plus.temp,i=t.total.value?n.d3plus[t.total.value]:n.d3plus.total;i&&(n.d3plus.a.active=r?r/i*2*Math.PI:0,n.d3plus.a.temp=a?a/i*2*Math.PI+n.d3plus.a.active:0)}return n.d3plus?n.d3plus.id:!1});if(t.draw.timing)var c=u.exit().transition().duration(t.draw.timing).attr("opacity",0).remove();else var c=u.exit().remove();t.draw.timing?u.transition().duration(t.draw.timing).call(n):u.call(n);var d=t.draw.timing?0:1,f=u.enter().append("g").attr("class","d3plus_"+s).attr("opacity",d).call(n);t.draw.timing&&f.transition().duration(t.draw.timing).attr("opacity",1),u.order(),t.dev.value&&d3plus.console.time('drawing "'+s+'" shapes'),d3plus.shape[s](t,u,f,c,n),t.dev.value&&d3plus.console.timeEnd('drawing "'+s+'" shapes'),["rect","donut"].indexOf(s)>=0&&d3plus.visualization[t.type.value].fill&&(t.dev.value&&d3plus.console.time('filling "'+s+'" shapes'),d3plus.shape.fill(t,u,f,c,n),t.dev.value&&d3plus.console.timeEnd('filling "'+s+'" shapes'))}r(),d3plus.touch?t.g.data.selectAll("g").on(d3plus.evt.over,t.zoom.touchEvent).on(d3plus.evt.move,t.zoom.touchEvent).on(d3plus.evt.out,t.zoom.touchEvent):t.g.data.selectAll("g").on(d3plus.evt.over,function(e){if(!(t.draw.frozen||e.d3plus&&e.d3plus.static)){if(d3.select(this).style("cursor","pointer").transition().duration(t.timing.mouseevents).call(n,!0),d3.select(this).selectAll(".d3plus_data").transition().duration(t.timing.mouseevents).attr("opacity",1),t.covered=!1,["area","line"].indexOf(t.shape.value)>=0||t.focus.value!=e[t.id.value]){if(t.continuous_axis){var a="x"===t.continuous_axis?0:1,i=d3.mouse(t.container.value.node())[a],o=d3plus.util.uniques(e.values,function(e){return e.d3plus[t.continuous_axis]}),l=d3plus.util.closest(o,i);e.d3plus_data=e.values[o.indexOf(l)],e.d3plus=e.values[o.indexOf(l)].d3plus}var s=e.d3plus_data?e.d3plus_data:e;d3plus.tooltip.app({vars:t,data:s})}"function"==typeof t.mouse?t.mouse(e):t.mouse[d3plus.evt.over]&&t.mouse[d3plus.evt.over](e),r(e)}}).on(d3plus.evt.move,function(e){if(!(t.draw.frozen||e.d3plus&&e.d3plus.static)){if(t.covered=!1,["area","line"].indexOf(t.shape.value)>=0||"follow"==d3plus.visualization[t.type.value].tooltip&&t.focus.value!=e[t.id.value]){if(t.continuous_axis){var n="x"===t.continuous_axis?0:1,r=d3.mouse(t.container.value.node())[n],a=d3plus.util.uniques(e.values,function(e){return e.d3plus[t.continuous_axis]}),i=d3plus.util.closest(a,r);e.d3plus_data=e.values[a.indexOf(i)],e.d3plus=e.values[a.indexOf(i)].d3plus}var o=e.d3plus_data?e.d3plus_data:e;d3plus.tooltip.app({vars:t,data:o})}"function"==typeof t.mouse?t.mouse(e):t.mouse[d3plus.evt.move]&&t.mouse[d3plus.evt.move](e)}}).on(d3plus.evt.out,function(e){var a=d3plus.util.child(this,d3.event.toElement);a||t.draw.frozen||e.d3plus&&e.d3plus.static||(d3.select(this).transition().duration(t.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(t.timing.mouseevents).attr("opacity",t.data.opacity),t.covered||d3plus.tooltip.remove(t.type.value),"function"==typeof t.mouse?t.mouse(e):t.mouse[d3plus.evt.out]&&t.mouse[d3plus.evt.out](e),r())
}),t.g.data.selectAll("g").on(d3plus.evt.click,function(e){if(!(t.draw.frozen||e.d3plus&&e.d3plus.static)){"function"==typeof t.mouse?t.mouse(e):t.mouse[d3plus.evt.out]?t.mouse[d3plus.evt.out](e):t.mouse[d3plus.evt.click]&&t.mouse[d3plus.evt.click](e);var a=t.zoom.direction(e.d3plus_data||e),i=t.id.solo.value,o=d3plus.variable.text(t,e)[0],l=d3plus.color.legible(d3plus.variable.color(t,e)),s=t.title.sub.value||!1,u=t.title.sub.font.color,c=t.title.total.font.color;if(e.d3plus.threshold&&e.d3plus.merged&&t.zoom.value)t.history.states.push(function(){t.self.id({solo:i}).title({sub:{font:{color:u},value:s},total:{font:{color:c}}}).draw()}),t.self.id({solo:d3plus.util.uniques(e.d3plus.merged,t.id.value)}).title({sub:{font:{color:l},value:o},total:{font:{color:l}}}).draw();else if(1===a&&t.zoom.value){var d=d3plus.variable.value(t,e,t.id.value);t.history.states.push(function(){t.self.depth(t.depth.value-1).id({solo:i}).title({sub:{font:{color:u},value:s},total:{font:{color:c}}}).draw()}),t.self.depth(t.depth.value+1).id({solo:[d]}).title({sub:{font:{color:l},value:o},total:{font:{color:l}}}).draw()}else if(-1===a&&t.zoom.value)t.history.back();else if(d3plus.visualization[t.type.value].zoom&&t.zoom.value)r(),d3.select(this).transition().duration(t.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(t.timing.mouseevents).attr("opacity",t.data.opacity),d3plus.tooltip.remove(t.type.value),t.draw.update=!1,e&&e[t.id.value]!=t.focus.value?t.self.focus(e[t.id.value]).draw():t.self.focus(!1).draw();else if(e[t.id.value]!=t.focus.value){r();var f=e.d3plus_data?e.d3plus_data:e;d3plus.tooltip.app({vars:t,data:f})}}})}},{}],264:[function(){d3plus.shape.edges=function(t){function e(e){var n=1==t.edges.opacity?t.edges.opacity:0;e.attr("opacity",n).style("stroke-width",0).style("stroke",t.background.value).style("fill","none")}function n(e){var n=t.edges.arrows.value;e.style("stroke-width",function(e){return t.edges.scale(e[t.edges.size])}).style("stroke",t.edges.color).attr("opacity",t.edges.opacity).attr("marker-start",function(e){var r=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var a="_"+e.d3plus.bucket;else var a="";return"source"==r&&n?"url(#d3plus_edge_marker_default"+a+")":"none"}).attr("marker-end",function(e){var r=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var a="_"+e.d3plus.bucket;else var a="";return"target"==r&&n?"url(#d3plus_edge_marker_default"+a+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function r(e){e.attr("x1",function(e){return e[t.edges.source].d3plus.dx}).attr("y1",function(e){return e[t.edges.source].d3plus.dy}).attr("x2",function(e){return e[t.edges.target].d3plus.dx}).attr("y2",function(e){return e[t.edges.target].d3plus.dy})}function a(e){e.attr("d",function(e){if(e[t.edges.source].d3plus.dr){var n=e[t.edges.source].d3plus.a,r=e[t.edges.source].d3plus.dr,a=e[t.edges.target].d3plus.a,i=e[t.edges.target].d3plus.dr,o={};return o[t.edges.source]={x:n,y:r},o[t.edges.target]={x:a,y:i},f(o)}var n=e[t.edges.source].d3plus.dx,r=e[t.edges.source].d3plus.dy,a=e[t.edges.target].d3plus.dx,i=e[t.edges.target].d3plus.dy,o={};return o[t.edges.source]={x:n,y:r},o[t.edges.target]={x:a,y:i},d(o)}).attr("transform",function(t){if(t.d3plus&&t.d3plus.translate){var e=t.d3plus.translate.x||0,n=t.d3plus.translate.y||0;return"translate("+e+","+n+")"}})}function i(e){if(delete e.d3plus_label,t.g.edges.selectAll("line, path").size()<t.edges.large&&t.edges.label&&e[t.edges.label]){if("spline"in e.d3plus)var n=this.getTotalLength(),r=this.getPointAtLength(n/2),a=this.getPointAtLength(n/2-.1*n),i=this.getPointAtLength(n/2+.1*n),o=Math.atan2(i.y-a.y,i.x-a.x),l=o*(180/Math.PI),s=(this.parentNode.getBBox(),.8*n),u=e.d3plus.translate.x+r.x,c=e.d3plus.translate.y+r.y,d={x:e.d3plus.translate.x+r.x,y:e.d3plus.translate.y+r.y};else{{this.getBBox()}start={x:e[t.edges.source].d3plus.dx,y:e[t.edges.source].d3plus.dy},end={x:e[t.edges.target].d3plus.dx,y:e[t.edges.target].d3plus.dy},xdiff=end.x-start.x,ydiff=end.y-start.y,r={x:end.x-xdiff/2,y:end.y-ydiff/2},o=Math.atan2(ydiff,xdiff),l=o*(180/Math.PI),n=Math.sqrt(xdiff*xdiff+ydiff*ydiff),s=n,u=r.x,c=r.y,d={x:r.x,y:r.y}}s+=2*t.labels.padding;var f=0;t.edges.arrows.value&&(f="number"==typeof t.edges.arrows.value?t.edges.arrows.value:8,f/=t.zoom.behavior.scaleExtent()[1],s-=2*f),(-90>l||l>90)&&(l-=180),s*t.zoom.behavior.scaleExtent()[0]>20&&(e.d3plus_label={x:u,y:c,translate:d,w:s,h:15+2*t.labels.padding,angle:l,anchor:"middle",valign:"center",color:t.edges.color,resize:!1,names:[t.format.value(e[t.edges.label])],background:1})}}var o=t.returned.edges||[],l=t.zoom.behavior.scaleExtent()[0];if("string"==typeof t.edges.size){var s=d3.extent(o,function(e){return e[t.edges.size]}),u=.6*d3.min(t.returned.nodes||[],function(t){return t.d3plus.r});t.edges.scale=d3.scale.sqrt().domain(s).range([t.edges.width,u*l])}else{var c="number"==typeof t.edges.size?t.edges.size:t.edges.width;t.edges.scale=function(){return c}}var d=d3.svg.diagonal(),f=d3.svg.diagonal().projection(function(t){var e=t.y,n=t.x;return[e*Math.cos(n),e*Math.sin(n)]}),p=t.edges.arrows.value?"string"==typeof t.edges.size?["default_0","default_1","default_2","highlight_0","highlight_1","highlight_2","focus_0","focus_1","focus_2"]:["default","highlight","focus"]:[];if("string"==typeof t.edges.size)for(var h=d3plus.util.buckets(t.edges.scale.range(),4),v=[],g=0;3>g;g++)v.push(h[g+1]+(h[1]-h[0])*(g+2));else var m="number"==typeof t.edges.arrows.value?t.edges.arrows.value:8,v="number"==typeof t.edges.size?t.edges.size/m:m;var y=t.defs.selectAll(".d3plus_edge_marker").data(p,String),x=function(e){e.attr("d",function(e){var n=e.split("_");if(2==n.length&&t.edges.scale){n=parseInt(n[1]);var r=v[n]}else var r=v;return"target"==t.edges.arrows.direction.value?"M 0,-"+r/2+" L "+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2:"M 0,-"+r/2+" L -"+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2}).attr("fill",function(e){var n=e.split("_")[0];return"default"==n?t.edges.color:"focus"==n?t.color.focus:t.color.primary}).attr("transform","scale("+1/l+")")};t.draw.timing?(y.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),y.select("path").transition().duration(t.draw.timing).attr("opacity",1).call(x)):(y.exit().remove(),y.select("path").attr("opacity",1).call(x));var b=t.draw.timing?0:1,w=y.enter().append("marker").attr("id",function(t){return"d3plus_edge_marker_"+t}).attr("class","d3plus_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",b).attr("vector-effect","non-scaling-stroke").call(x);t.draw.timing&&w.transition().duration(t.draw.timing).attr("opacity",1);var _="string"==typeof t.edges.size?d3plus.util.buckets(t.edges.scale.domain(),4):null,z=t.edges.arrows.direction.value,k=o.filter(function(e){if(!e.d3plus||e.d3plus&&e.d3plus.spline!==!0){if(e.d3plus||(e.d3plus={}),_){var n=e[t.edges.size];e.d3plus.bucket=n<_[1]?0:n<_[2]?1:2;var r=.85*v[e.d3plus.bucket]/l}else{delete e.d3plus.bucket;var r=.85*v/l}var a=e[t.edges.source],i=e[t.edges.target],o=Math.atan2(a.d3plus.y-i.d3plus.y,a.d3plus.x-i.d3plus.x),s="source"==z&&t.edges.arrows.value?a.d3plus.r+r:a.d3plus.r,u="target"==z&&t.edges.arrows.value?i.d3plus.r+r:i.d3plus.r,c=d3plus.util.offset(o,s,t.shape.value),d=d3plus.util.offset(o,u,t.shape.value);return a.d3plus.dx=a.d3plus.x-c.x,a.d3plus.dy=a.d3plus.y-c.y,i.d3plus.dx=i.d3plus.x+d.x,i.d3plus.dy=i.d3plus.y+d.y,!0}return!1}),M=t.g.edges.selectAll("g.d3plus_edge_line").data(k,function(e){return e.d3plus||(e.d3plus={}),e.d3plus.id=e[t.edges.source][t.id.value]+"_"+e[t.edges.target][t.id.value],e.d3plus.id}),A=o.filter(function(e){if(e.d3plus&&e.d3plus.spline){if(_){var n=e[t.edges.size];e.d3plus.bucket=n<_[1]?0:n<_[2]?1:2;var r=.85*v[e.d3plus.bucket]/l}else{delete e.d3plus.bucket;var r=.85*v/l}var a=e[t.edges.source],i=e[t.edges.target],o=2==a.d3plus.depth?-r:r,s=2==i.d3plus.depth?-r:r,u="source"==z&&t.edges.arrows.value?a.d3plus.r+o:a.d3plus.r,c="target"==z&&t.edges.arrows.value?i.d3plus.r+s:i.d3plus.r;return a.d3plus.dr=u,i.d3plus.dr=c,!0}return!1}),E=t.g.edges.selectAll("g.d3plus_edge_path").data(A,function(e){return e.d3plus||(e.d3plus={}),e.d3plus.id=e[t.edges.source][t.id.value]+"_"+e[t.edges.target][t.id.value],e.d3plus.id});t.draw.timing?(M.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),E.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),M.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(t.draw.timing/2).attr("opacity",0).remove(),E.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(t.draw.timing/2).attr("opacity",0).remove(),M.selectAll("line").data(function(t){return[t]}).transition().duration(t.draw.timing).call(r).call(n).each("end",i),E.selectAll("path").data(function(t){return[t]}).transition().duration(t.draw.timing).call(a).call(n).each("end",i),M.enter().append("g").attr("class","d3plus_edge_line").append("line").call(r).call(e).transition().duration(t.draw.timing).call(n).each("end",i),E.enter().append("g").attr("class","d3plus_edge_path").append("path").call(a).call(e).transition().duration(t.draw.timing).call(n).each("end",i)):(M.exit().remove(),E.exit().remove(),M.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),E.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),M.selectAll("line").data(function(t){return[t]}).call(r).call(n).call(i),E.selectAll("path").data(function(t){return[t]}).call(a).call(n).call(i),M.enter().append("g").attr("class","d3plus_edge_line").append("line").call(r).call(e).call(n).call(i),E.enter().append("g").attr("class","d3plus_edge_path").append("path").call(a).call(e).call(n).call(i))}},{}],265:[function(){d3plus.shape.fill=function(t,e){function n(t){t.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function r(e,n){if(!n)var n=0;e.attr("x",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return-e/2-n/2}).attr("y",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return-e/2-n/2}).attr("width",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return e+n}).attr("height",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return e+n}).attr("rx",function(e){var r=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,a=["circle","donut"].indexOf(t.shape.value)>=0;return a?(r+n)/2:0}).attr("ry",function(e){var r=e.d3plus.r?2*e.d3plus.r:e.d3plus.height,a=["circle","donut"].indexOf(t.shape.value)>=0;return a?(r+n)/2:0}).attr("shape-rendering",function(){return["square"].indexOf(t.shape.value)>=0?t.shape.rendering.value:"auto"})}function a(e,n,r,a){if(!n)var n=0;if("number"!=typeof r)var r=void 0;if("number"!=typeof a)var a=void 0;e.attrTween("d",function(e){if(void 0==r)var o=e.d3plus.r?e.d3plus.r:d3.max([e.d3plus.width,e.d3plus.height]);else var o=r;if(void 0==a)var l=e.d3plus.a[e.d3plus.shapeType];else var l=a;t.arcs[e.d3plus.shapeType][e.d3plus.id]||(t.arcs[e.d3plus.shapeType][e.d3plus.id]={r:0},t.arcs[e.d3plus.shapeType][e.d3plus.id].a="donut"==e.d3plus.shapeType?2*Math.PI:0);var s=d3.interpolate(t.arcs[e.d3plus.shapeType][e.d3plus.id].r,o+n),u=d3.interpolate(t.arcs[e.d3plus.shapeType][e.d3plus.id].a,l);return function(n){return t.arcs[e.d3plus.shapeType][e.d3plus.id].r=s(n),t.arcs[e.d3plus.shapeType][e.d3plus.id].a=u(n),i(e)}})}t.arcs||(t.arcs={donut:{},active:{},temp:{}});var i=d3.svg.arc().startAngle(0).endAngle(function(e){var n=t.arcs[e.d3plus.shapeType][e.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(e){if("donut"!=shape||e.d3plus.static)return 0;var n=t.arcs[e.d3plus.shapeType][e.d3plus.id].r;return n*t.data.donut.size}).outerRadius(function(e){var n=t.arcs[e.d3plus.shapeType][e.d3plus.id].r;return"donut"!=e.d3plus.shapeType?2*n:n});e.each(function(e){function i(e){e.attr("stroke",c).attr("stroke-width",1).attr("shape-rendering",t.shape.rendering.value)}var o=t.active.value?e.d3plus[t.active.value]:e.d3plus.active,l=t.temp.value?e.d3plus[t.temp.value]:e.d3plus.temp,s=t.total.value?e.d3plus[t.total.value]:e.d3plus.total,u=d3.select(this),c=d3plus.variable.color(t,e),d=[],f=[];if(s&&d3plus.visualization[t.type.value].fill){if(l){var p=d3plus.util.copy(e);p.d3plus.shapeType="temp",d.push(p),f=["temp"]}if(o&&(s>o||l)){var p=d3plus.util.copy(e);p.d3plus.shapeType="active",d.push(p)}}var h=t.defs.selectAll("pattern#d3plus_hatch_"+e.d3plus.id).data(f);t.draw.timing?(h.selectAll("rect").transition().duration(t.draw.timing).style("fill",c),h.selectAll("line").transition().duration(t.draw.timing).style("stroke",c)):(h.selectAll("rect").style("fill",c),h.selectAll("line").style("stroke",c));var v=h.enter().append("pattern").attr("id","d3plus_hatch_"+e.d3plus.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");v.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",c).attr("fill-opacity",.25),v.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(i),v.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(i),v.append("line").attr("x1","9").attr("x2","11").attr("y1","-1").attr("y2","1").call(i);var g=d.length?[e]:[],m=u.selectAll("#d3plus_clip_"+e.d3plus.id).data(g);m.enter().insert("clipPath",".d3plus_mouse").attr("id","d3plus_clip_"+e.d3plus.id).append("rect").attr("class","d3plus_clipping").call(n),t.draw.timing?(m.selectAll("rect").transition().duration(t.draw.timing).call(r),m.exit().transition().delay(t.draw.timing).remove()):(m.selectAll("rect").call(r),m.exit().remove());var y=u.selectAll("path.d3plus_fill").data(d);y.transition().duration(t.draw.timing).call(d3plus.shape.style,t).call(a),y.enter().insert("path","rect.d3plus_mouse").attr("class","d3plus_fill").attr("clip-path","url(#d3plus_clip_"+e.d3plus.id+")").transition().duration(0).call(a,0,void 0,0).call(d3plus.shape.style,t).transition().duration(t.draw.timing).call(a),y.exit().transition().duration(t.draw.timing).call(a,0,void 0,0).remove()})}},{}],266:[function(){d3plus.shape.labels=function(t,e){var n=t.zoom.behavior.scaleExtent(),r=t.g[e].selectAll("g"),a=function(e){e.attr("opacity",function(e){if(!e)var e={scale:n[1]};var r=parseFloat(d3.select(this).attr("font-size"),10);return e.visible=r/e.scale*t.zoom.scale>=7,e.visible?1:0})};if(remove=function(e){t.draw.timing?e.transition().duration(t.draw.timing).attr("opacity",0).remove():e.remove()},style=function(e,r){function a(e){if("circle"===e.shape)return"0px";var r=e.anchor||t.labels.align,a="tspan"===this.tagName.toLowerCase(),i=a?"d3plus_share"==this.parentNode.className.baseVal:"d3plus_share"==this.className.baseVal,o=d3.select(this).node().getComputedTextLength()/n[1];if("middle"==r||i)var l=e.x-o/2;else if("end"==r&&!d3plus.rtl||"start"==r&&d3plus.rtl)var l=e.x+(e.w-e.padding)/2-o;else var l=e.x-(e.w-e.padding)/2;if(a){var s=this.getComputedTextLength()/n[1];"middle"==r?d3plus.rtl?l-=(o-s)/2:l+=(o-s)/2:"end"==r&&(d3plus.rtl?l-=o-s:l+=o-s)}return d3plus.rtl&&(l+=o),l*n[1]}function i(e){if(d3.select(this).select("tspan").empty())return 0;var r=t.labels.align,a=d3.select(this).node().getBBox().height/n[1],i=parseFloat(d3.select(this).style("font-size"),10)/5/n[1];if("d3plus_share"==this.className.baseVal){var o=d3.select(this.parentNode).datum(),l=o.d3plus.r?2*o.d3plus.r:o.d3plus.height;if(l/=n[1],"end"==r)var s=e.y-l/2+i/2;else var s=e.y+l/2-a-i/2}else if("circle"===e.shape||"middle"===r||"center"===e.valign)var s=e.y-a/2-i/2;else if("end"==r)var s=e.y+(e.h-e.padding)/2-a+i/2;else var s=e.y-(e.h-e.padding)/2-i;return s*n[1]}e.attr("font-weight",t.labels.font.weight).attr("font-family",t.labels.font.family.value).attr("text-anchor",function(t){return"circle"===t.shape?"middle":"start"}).attr("pointer-events",function(t){return t.mouse?"auto":"none"}).attr("fill",function(e){if(e.color)return e.color;var n=d3plus.shape.color(e.parent,t),r=d3plus.color.text(n),a=e.text?.15:1;return d3plus.color.mix(n,r,.2,a)}).attr("x",a).attr("y",i),r&&e.each(function(e){if(e.resize instanceof Array){e.resize[0],e.resize[1]}if(e.text){if(e.resize instanceof Array)var n=e.resize,r=!0;else var n=[9/e.scale,50*e.scale],r=e.resize;d3plus.textwrap().container(d3.select(this)).height(e.h*e.scale-e.padding).resize(r).size(n).text(t.format.value(100*e.text,"share")+"%").width(e.w*e.scale-e.padding).draw()}else{if("middle"!==t.labels.align&&e.share)var a=e.h-e.share-e.padding;else var a=e.h;if(e.resize instanceof Array)var n=e.resize,r=!0;else var n=[9/e.scale,40*e.scale],r=e.resize;var i=e.shape||"square";d3plus.textwrap().container(d3.select(this)).height(a*e.scale-e.padding).resize(r).size(n).shape(i).text(e.names).width(e.w*e.scale-e.padding).draw()}}).attr("x",a).attr("y",i),e.attr("transform",function(t){var e=t.angle||0,r=t.translate&&t.translate.x||0,a=t.translate&&t.translate.y||0;return"rotate("+e+","+r+","+a+")scale("+1/n[1]+")"}).selectAll("tspan").attr("x",a)},t.labels.value){if(t.dev.value){var i="drawing "+e+" labels";d3plus.console.time(i)}r.each(function(r){function i(e){var r="none"===t.background.value?"#ffffff":t.background.value,a="string"==typeof label.background?label.background:r,i=label.angle||0,o=label.translate?g.x+g.width/2:0,l=label.translate?g.y+g.height/2:0,s="scale("+1/n[1]+")rotate("+i+","+o+","+l+")";e.attr("fill",a).attr(g).attr("transform",s)}var o=r.d3plus&&"label"in r.d3plus&&!r.d3plus.label,l=r.d3plus&&"static"in r.d3plus&&r.d3plus.static;if(label=r.d3plus_label?r.d3plus_label:t.zoom.labels?t.zoom.labels[r.d3plus.id]:null,share=r.d3plus_share,names=label&&label.names?label.names:d3plus.variable.text(t,r),e=label&&"group"in label?label.group:d3.select(this),share_size=0,fill=d3plus.visualization[t.type.value].fill,label)if(["line","area"].indexOf(t.shape.value)>=0)var s=!0;else if(r&&"d3plus"in r)var u=t.active.value?r.d3plus[t.active.value]:r.d3plus.active,c=t.temp.value?r.d3plus[t.temp.value]:r.d3plus.temp,d=t.total.value?r.d3plus[t.total.value]:r.d3plus.total,s=!c&&!u||u==d;if(o||!s&&fill||l)delete r.d3plus_label,e.selectAll("text#d3plus_label_"+r.d3plus.id+", rect#d3plus_label_bg_"+r.d3plus.id).call(remove);else{if(share&&r.d3plus.share&&"middle"!=t.labels.align){share.resize=t.labels.resize.value===!1?!1:share&&"resize"in share?share.resize:!0,share.scale=share.resize?n[1]:n[0],share.padding=t.labels.padding/share.scale*2,share.text=r.d3plus.share,share.parent=r;var f=e.selectAll("text#d3plus_share_"+r.d3plus.id).data([share],function(t){return t.w+""+t.h+t.text});t.draw.timing?(f.transition().duration(t.draw.timing/2).call(style),f.enter().append("text").attr("id","d3plus_share_"+r.d3plus.id).attr("class","d3plus_share").attr("opacity",0).call(style,!0).transition().duration(t.draw.timing/2).delay(t.draw.timing/2).attr("opacity",1)):(f.attr("opacity",1).call(style),f.enter().append("text").attr("id","d3plus_share_"+r.d3plus.id).attr("class","d3plus_share").attr("opacity",1).call(style,!0)),share_size=f.node().getBBox().height,f.exit().call(remove)}else e.selectAll("text.d3plus_share").call(remove);if(label){label.resize=t.labels.resize.value===!1?!1:label&&"resize"in label?label.resize:!0,label.scale=label.resize?n[1]:n[0];var p="number"==typeof label.padding?label.padding:t.labels.padding;label.padding=p/label.scale*2}if(label&&label.w*label.scale-label.padding>=20&&label.h*label.scale-label.padding>=10&&names.length){label.names=names,label.share=share_size,label.parent=r;var f=e.selectAll("text#d3plus_label_"+r.d3plus.id).data([label],function(t){return t?t.w+"_"+t.h+"_"+t.x+"_"+t.y+"_"+t.names.join("_"):!1}),h=label.resize?void 0:t.labels.font.size*label.scale;if(t.draw.timing?(f.transition().duration(t.draw.timing/2).call(style),f.enter().append("text").attr("font-size",h).attr("id","d3plus_label_"+r.d3plus.id).attr("class","d3plus_label").attr("opacity",0).call(style,!0).transition().duration(t.draw.timing/2).delay(t.draw.timing/2).call(a)):(f.attr("opacity",1).call(style),f.enter().append("text").attr("font-size",h).attr("id","d3plus_label_"+r.d3plus.id).attr("class","d3plus_label").call(style,!0).call(a)),f.exit().call(remove),0==f.size()||""==f.html())delete r.d3plus_label,e.selectAll("text#d3plus_label_"+r.d3plus.id+", rect#d3plus_label_bg_"+r.d3plus.id).call(remove);else{if(label.background){var v=["background"],g=f.node().getBBox();g.width+=t.labels.padding*n[0],g.height+=t.labels.padding*n[0],g.x-=t.labels.padding*n[0]/2,g.y-=t.labels.padding*n[0]/2}else var v=[],g={};var m=e.selectAll("rect#d3plus_label_bg_"+r.d3plus.id).data(v),y="number"==typeof label.background?label.background:.6;t.draw.timing?(m.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),m.transition().duration(t.draw.timing).attr("opacity",y).call(i),m.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+r.d3plus.id).attr("class","d3plus_label_bg").attr("opacity",0).call(i).transition().duration(t.draw.timing).attr("opacity",y)):(m.exit().remove(),m.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+r.d3plus.id).attr("class","d3plus_label_bg"),m.attr("opacity",y).call(i))}}else delete r.d3plus_label,e.selectAll("text#d3plus_label_"+r.d3plus.id+", rect#d3plus_label_bg_"+r.d3plus.id).call(remove)}}),t.dev.value&&d3plus.console.timeEnd(i)}else{if(t.dev.value){var i="removing "+e+" labels";d3plus.console.time(i)}r.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(remove),t.g.labels.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(remove),t.dev.value&&d3plus.console.timeEnd(i)}}},{}],267:[function(){d3plus.shape.line=function(t,e){function n(t){t.attr("x",function(t){return t.d3plus.x}).attr("y",function(t){return t.d3plus.y}).attr("width",0).attr("height",0)}function r(t,e){if(!e)var e=0;t.attr("x",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return t.d3plus.x-(n/2+e/2)}).attr("y",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return t.d3plus.y-(n/2+e/2)}).attr("width",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return n+e}).attr("height",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return n+e}).attr("rx",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return(n+e)/2}).attr("ry",function(t){var n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return(n+e)/2})}var a=d3.svg.line().x(function(t){return t.d3plus.x}).y(function(t){return t.d3plus.y}).interpolate(t.shape.interpolate.value),i=t.data.stroke.width;30>i&&(i=30),e.each(function(e){var o=!1,l=[],s=[],u=d3plus.util.copy(e),c=d3.select(this);u.values=[],e.values.forEach(function(n,r,a){s.push(n);var i=n[t[t.continuous_axis].value],c=t.tickValues[t.continuous_axis].indexOf(i);o===!1&&(o=c),r+o===c?(u.values.push(n),u.key+="_"+l.length):(r>0&&(l.push(u),u=d3plus.util.copy(e),u.values=[]),u.values.push(n),u.key+="_"+l.length,o++),r===a.length-1&&l.push(u)});var d=c.selectAll("path.d3plus_line").data(l,function(t){return t.key}),f=c.selectAll("rect.d3plus_anchor").data(s,function(t){return t.d3plus.id});t.draw.timing?(d.transition().duration(t.draw.timing).attr("d",function(t){return a(t.values)}).call(d3plus.shape.style,t),d.enter().append("path").attr("class","d3plus_line").attr("d",function(t){return a(t.values)}).call(d3plus.shape.style,t),f.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(t){return t.d3plus.id}).call(n).call(d3plus.shape.style,t),f.transition().duration(t.draw.timing).call(r).call(d3plus.shape.style,t),f.exit().transition().duration(t.draw.timing).call(n).remove()):(d.enter().append("path").attr("class","d3plus_line"),d.attr("d",function(t){return a(t.values)}).call(d3plus.shape.style,t),f.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(t){return t.d3plus.id}),f.call(r).call(d3plus.shape.style,t));var p=c.selectAll("path.d3plus_mouse").data(l,function(t){return t.key});p.enter().append("path").attr("class","d3plus_mouse").attr("d",function(t){return a(t.values)}).style("stroke","black").style("stroke-width",i).style("fill","none").style("stroke-linecap","round").attr("opacity",0),p.on(d3plus.evt.over,function(){t.draw.frozen||(d3.select(this.parentNode).selectAll("path.d3plus_line").transition().duration(t.timing.mouseevents).style("stroke-width",2*t.data.stroke.width),d3.select(this.parentNode).selectAll("rect").transition().duration(t.timing.mouseevents).style("stroke-width",2*t.data.stroke.width).call(r,2))}).on(d3plus.evt.out,function(){t.draw.frozen||(d3.select(this.parentNode).selectAll("path.d3plus_line").transition().duration(t.timing.mouseevents).style("stroke-width",t.data.stroke.width),d3.select(this.parentNode).selectAll("rect").transition().duration(t.timing.mouseevents).style("stroke-width",t.data.stroke.width).call(r))}),t.draw.timing?p.transition().duration(t.draw.timing).attr("d",function(t){return a(t.values)}).style("stroke-width",i):p.attr("d",function(t){return a(t.values)}).style("stroke-width",i),p.exit().remove()})}},{}],268:[function(){d3plus.shape.rect=function(t,e,n,r){function a(e){if(t.labels.value&&!e.d3plus.label){e.d3plus_label={w:0,h:0,x:0,y:0};var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,r=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;e.d3plus_share={w:n,h:d3.max([25,r/3]),x:0,y:0},e.d3plus_label.w=n,e.d3plus_label.h=r,e.d3plus_label.shape="circle"===t.shape.value?"circle":"square"}else e.d3plus.label&&(e.d3plus_label=e.d3plus.label);return[e]}function i(t){t.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function o(e){e.attr("x",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return-e/2}).attr("y",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return-e/2}).attr("width",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.width;return e}).attr("height",function(t){var e=t.d3plus.r?2*t.d3plus.r:t.d3plus.height;return e}).attr("rx",function(e){var n="circle"==t.shape.value,r=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return n?(r+2)/2:0}).attr("ry",function(e){var n="circle"==t.shape.value,r=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return n?(r+2)/2:0}).attr("transform",function(t){return"rotate"in t.d3plus?"rotate("+t.d3plus.rotate+")":""}).attr("shape-rendering",function(e){return"square"!=t.shape.value||"rotate"in e.d3plus?"auto":t.shape.rendering.value})}t.draw.timing?n.append("rect").attr("class","d3plus_data").call(i).call(d3plus.shape.style,t):n.append("rect").attr("class","d3plus_data"),t.draw.timing?e.selectAll("rect.d3plus_data").data(a).transition().duration(t.draw.timing).call(o).call(d3plus.shape.style,t):e.selectAll("rect.d3plus_data").data(a).call(o).call(d3plus.shape.style,t),t.draw.timing&&r.selectAll("rect.d3plus_data").transition().duration(t.draw.timing).call(i)}},{}],269:[function(){d3plus.shape.style=function(t,e){t.attr("fill",function(t){return t.d3plus&&t.d3plus.spline?"none":d3plus.shape.color(t,e)}).style("stroke",function(t){if(t.values)var n=d3plus.shape.color(t.values[0],e);else var n=d3plus.shape.color(t,e);return d3.rgb(n).darker(.5)}).style("stroke-width",e.data.stroke.width).attr("opacity",e.data.opacity).attr("vector-effect","non-scaling-stroke")}},{}],270:[function(){d3plus.visualization.bubbles=function(t){function e(e){e.attr("x",function(t){return t.d3plus.x}).attr("y",function(t){return t.d3plus.y-t.r-t.d3plus.label_height-d}).attr("text-anchor","middle").attr("font-weight",t.labels.font.weight).attr("font-family",t.labels.font.family.value).attr("font-size","12px").style("fill",function(e){var n=d3plus.variable.color(t,e);return d3plus.color.legible(n)}).each(function(e){if(e.r>10&&n>10){var r=d3plus.variable.text(t,e,e.depth);d3plus.textwrap().container(d3.select(this)).height(n).text(r).width(l-2*d).draw()}}).attr("y",function(t){return t.d3plus.label_height=d3.select(this).node().getBBox().height,t.d3plus.y-t.r-t.d3plus.label_height-d}).selectAll("tspan").attr("x",function(t){return t.d3plus.x})}var n=t.labels.value&&!t.small?50:0;d3plus.array.sort(t.data.app,t.order.value||t.size.value,t.order.sort.value,t.color.value,t);var r=t.data.app.length;if(4>r)var a=r,i=1;else var o=t.width.viz/t.height.viz,a=Math.ceil(Math.sqrt(r*o)),i=Math.ceil(Math.sqrt(r/o));if(r>0)for(;(i-1)*a>=t.data.app.length;)i--;var l=t.width.viz/a,s=t.height.viz/i,u=d3.min(t.data.app,function(e){return t.size.value?d3plus.variable.value(t,e,t.size.value,null,"min"):0}),c=d3.max(t.data.app,function(e){return t.size.value?d3plus.variable.value(t,e,t.size.value):0}),d=5,f=20,p=d3.min([l,s])/2-2*d;p-=n;var h=t.size.scale.value.domain([u,c]).rangeRound([f,p]),v=d3.layout.pack().size([l-2*d,s-2*d-n]).value(function(e){return t.size.value?d3plus.variable.value(t,e,t.size.value):0}).padding(d).radius(function(t){return h(t)}),g=[],m=0;t.data.app.forEach(function(e,r){var i=v.nodes(e),o=l*r%t.width.viz,u=s*m;i.forEach(function(e){e.xoffset=o,e.yoffset=u+n,e.d3plus.static=e.depth<t.depth.value?!0:!1,e.d3plus.label=1==i.length?!1:!0}),g=g.concat(i),(r+1)%a==0&&m++});var y=p/d3.max(g,function(t){return t.r});g.forEach(function(t){t.x=(t.x-l/2)*y+l/2,t.d3plus.x=t.x+t.xoffset,t.y=(t.y-s/2)*y+s/2,t.d3plus.y=t.y+t.yoffset,t.r=t.r*y,t.d3plus.r=t.r}),g.sort(function(t,e){return t.depth-e.depth});var x=g.filter(function(t){return 0==t.depth}),b=t.group.selectAll("text.d3plus_bubble_label").data(x,function(e){return e.d3plus.label_height||(e.d3plus.label_height=0),e[t.id.nesting[e.depth]]});return b.enter().append("text").attr("class","d3plus_bubble_label").call(e).attr("opacity",0),b.transition().duration(t.draw.timing).call(e).attr("opacity",1),b.exit().attr("opacity",0).remove(),g},d3plus.visualization.bubbles.fill=!0,d3plus.visualization.bubbles.requirements=["data"],d3plus.visualization.bubbles.scale=1.05,d3plus.visualization.bubbles.shapes=["circle","donut"],d3plus.visualization.bubbles.tooltip="static"},{}],271:[function(){d3plus.visualization.chart=function(t){function e(e,n){e.attr("stroke",t.axes.ticks.color).attr("stroke-width",t.axes.ticks.width).attr("shape-rendering",t.shape.rendering.value).style("opacity",function(e){var r="log"==t[n].scale.value&&"1"!=e.toString().charAt(0);return r?.25:1})}function n(e,n){e.attr("x1",function(e){return"x"==n?t.x_scale(e):0}).attr("x2",function(e){return"x"==n?t.x_scale(e):l.width}).attr("y1",function(e){return"y"==n?t.y_scale(e):0}).attr("y2",function(e){return"y"==n?t.y_scale(e):l.height})}function r(t){return"number"==typeof t||"string"==typeof t?null:d3.keys(t)[0]}function a(t){if("number"==typeof t)return t;if("string"==typeof t)return parseFloat(t);var e=t[d3.keys(t)[0]];return"string"==typeof e?parseFloat(e):e}function i(e,n){e.attr("x1",function(t){return"y"==n?0:t.d3plus.x-l.margin.left}).attr("x2",function(t){return"y"==n?-5:t.d3plus.x-l.margin.left}).attr("y1",function(t){return"x"==n?l.height:t.d3plus.y-l.margin.top}).attr("y2",function(t){return"x"==n?l.height+5:t.d3plus.y-l.margin.top}).style("stroke",function(e){return d3plus.color.legible(d3plus.variable.color(t,e))}).style("stroke-width",t.data.stroke.width).attr("shape-rendering",t.shape.rendering.value)}function o(e){function n(t){t.attr("x2",function(t){var e="x"==t.axis?t.x:t.x-t.r;return e}).attr("y2",function(t){var e="y"==t.axis?t.y:t.y+t.r;return e}).style("stroke-width",0).attr("opacity",0)}var r=d3.event.type==d3plus.evt.click&&(t.tooltip.value.long||t.tooltip.html.value),a=[d3plus.evt.over,d3plus.evt.move].indexOf(d3.event.type)>=0;if(!r&&a&&"area"!=t.shape.value){if(e.data)var e=e.data;var i=[d3plus.util.copy(e.d3plus),d3plus.util.copy(e.d3plus)];i[0].axis="x",i[1].axis="y"}else var i=[];var o=S.selectAll("line.d3plus_axis_label").data(i,function(t){return t.axis+"_"+t.id});o.enter().append("line").attr("class","d3plus_axis_label").call(n).attr("x1",function(t){return"x"==t.axis?t.x:t.x-t.r}).attr("y1",function(t){return"y"==t.axis?t.y:t.y+t.r}).style("stroke",function(){return d3plus.variable.color(t,e)}).attr("shape-rendering",t.shape.rendering.value),o.transition().duration(t.timing.mouseevents).attr("class","d3plus_axis_label").attr("x2",function(e){return"x"==e.axis?e.x:l.margin.left-t.axes.ticks.size
}).attr("y2",function(e){return"y"==e.axis?e.y:l.height+l.margin.top+t.axes.ticks.size}).style("stroke",function(){return d3plus.color.legible(d3plus.variable.color(t,e))}).style("stroke-width",t.data.stroke.width).attr("opacity",1),o.exit().transition().duration(t.timing.mouseevents).call(n).remove();var s=S.selectAll("text.d3plus_axis_label").data(i,function(t){return t.axis+"_"+t.id});s.enter().append("text").attr("class","d3plus_axis_label").attr("id",function(t){return t.axis+"_"+t.id}).text(function(n){var r=d3plus.variable.value(t,e.d3plus_data||e,t[n.axis].value);return t.format.value(r,t[n.axis].value)}).attr("x",function(e){return"x"==e.axis?e.x:l.margin.left-5-t.axes.ticks.size}).attr("y",function(e){return"y"==e.axis?e.y:l.height+l.margin.top+5+t.axes.ticks.size}).attr("dy",function(e){return"y"==e.axis?.35*t.axes.ticks.font.size:t.axes.ticks.font.size}).attr("text-anchor",function(t){return"y"==t.axis?"end":"middle"}).style("fill",function(){return d3plus.color.legible(d3plus.variable.color(t,e))}).style("font-size",t.axes.ticks.font.size).attr("font-family",t.axes.ticks.font.family.value).attr("font-weight",t.axes.ticks.font.weight).attr("opacity",0),s.transition().duration(t.timing.mouseevents).delay(t.timing.mouseevents).attr("opacity",1),s.exit().transition().duration(t.timing.mouseevents).attr("opacity",0).remove();var u=S.selectAll("rect.d3plus_axis_label").data(i,function(t){return t.axis+"_"+t.id});u.enter().insert("rect","text").attr("class","d3plus_axis_label").attr("x",function(e){var n=d3.select("text#"+e.axis+"_"+e.id).node().getBBox().width,r="x"==e.axis?e.x:l.margin.left-t.axes.ticks.size;return"x"==e.axis?r-n/2-5:r-n-10}).attr("y",function(e){var n=d3.select("text#"+e.axis+"_"+e.id).node().getBBox().height,r="y"==e.axis?e.y:l.height+l.margin.top;return"x"==e.axis?r+t.axes.ticks.size:r-n/2-5}).attr("width",function(t){var e=d3.select("text#"+t.axis+"_"+t.id).node().getBBox();return e.width+10}).attr("height",function(t){var e=d3.select("text#"+t.axis+"_"+t.id).node().getBBox();return e.height+10}).style("stroke",function(){return d3plus.color.legible(d3plus.variable.color(t,e))}).style("fill","white").style("stroke-width",t.data.stroke.width).attr("shape-rendering",t.shape.rendering.value).attr("opacity",0),u.transition().duration(t.timing.mouseevents).delay(t.timing.mouseevents).attr("opacity",1),u.exit().transition().duration(t.timing.mouseevents).attr("opacity",0).remove()}if(t.small)var l={margin:{top:0,right:0,bottom:0,left:0}};else var l={margin:{top:10,right:10,bottom:40,left:40}};if(l.width=t.width.viz-l.margin.left-l.margin.right,l.height=t.height.viz-l.margin.top-l.margin.bottom,t.data.app.length){if(t.tickValues||(t.tickValues={}),t.continuous_axis=null,t.opp_axis=null,t.stacked_axis=null,t.axes.values.forEach(function(e){if(t[e].stacked.value&&(t.stacked_axis=e),t.continuous_axis||"continuous"!=t[e].scale.value||(t.continuous_axis=e,t.opp_axis="x"==e?"y":"x"),t.data.changed||t.depth.changed||!t[e+"_range"]||t.time.fixed.value){if(t.dev.value&&d3plus.console.time("determining "+e+"-axis"),"share"==t[e].scale.value)t[e+"_range"]=[0,1],t.tickValues[e]=d3plus.util.buckets([0,1],11),t.stacked_axis=e;else if(t[e].stacked.value){if(t.time.fixed.value)var n=t.data.app;else var n=t.data.value;var r=d3.nest().key(function(e){return e[t.x.value]}).rollup(function(n){return d3.sum(n,function(n){return parseFloat(d3plus.variable.value(t,n,t[e].value))})}).entries(n);t[e+"_range"]=[0,d3.max(r,function(t){return t.values})]}else if(t[e].domain instanceof Array)t[e+"_range"]=t[e].domain,t.tickValues[e]=d3plus.util.uniques(t.data.app,t[e].value),t.tickValues[e]=t.tickValues[e].filter(function(n){return n>=t[e+"_range"][0]&&n<=t[e+"_range"][1]});else if(t.time.fixed.value)t[e+"_range"]=d3.extent(t.data.app,function(n){return parseFloat(d3plus.variable.value(t,n,t[e].value))}),t.tickValues[e]=d3plus.util.uniques(t.data.app,t[e].value);else{var a=[];for(id in t.id.nesting)a=a.concat(t.data.grouped[t.id.nesting[id]].all);t[e+"_range"]=d3.extent(a,function(n){return parseFloat(d3plus.variable.value(t,n,t[e].value))}),t.tickValues[e]=d3plus.util.uniques(t.data.value,t[e].value)}t[e+"_range"][0]==t[e+"_range"][1]&&(t[e+"_range"][0]-=1,t[e+"_range"][1]+=1),"y"==e&&(t.y_range=t.y_range.reverse()),t.dev.value&&d3plus.console.timeEnd("determining "+e+"-axis")}else t[e+"_range"]||(t[e+"_range"]=[-1,1])}),t.axes.mirror.value){var s=t.y_range.concat(t.x_range);t.x_range=d3.extent(s),t.y_range=d3.extent(s).reverse()}t.dev.value&&d3plus.console.time("removing data outside of axes");var u=t.data.app.length;if("share"==t.y.scale.value)var c=t.data.app;else var c=t.data.app.filter(function(e){var n=parseFloat(d3plus.variable.value(t,e,t.y.value)),r=null!==n&&n<=t.y_range[0]&&n>=t.y_range[1];if(r){var n=parseFloat(d3plus.variable.value(t,e,t.x.value));return null!==n&&n>=t.x_range[0]&&n<=t.x_range[1]}return!1});t.dev.value&&d3plus.console.timeEnd("removing data outside of axes");var f=u-c.length;if(f&&t.dev.value&&d3plus.console.log("removed "+f+" nodes"),c){if(t.dev.value&&d3plus.console.time("determining size scale"),t.size.value){if(t.time.fixed.value)var p=d3.extent(t.data.app,function(e){var n=d3plus.variable.value(t,e,t.size.value);return 0==n?null:n});else{var h=[];for(id in t.id.nesting)h=h.concat(t.data.grouped[t.id.nesting[id]].all);var p=d3.extent(h,function(e){var n=d3plus.variable.value(t,e,t.size.value);return 0==n?null:n})}p[0]&&p[1]||(p=[0,0])}else var p=[0,0];var v=Math.floor(d3.max([d3.min([l.width,l.height])/15,10])),g=10;if(p[0]==p[1])var g=v;var m=[g,v],y=t.size.scale.value.domain(p).rangeRound(m);t.dev.value&&d3plus.console.timeEnd("determining size scale")}t.axes.values.forEach(function(e){var n="x"==e?l.width:l.height;if(["continuous","share"].indexOf(t[e].scale.value)>=0)var r="linear";else var r=t[e].scale.value;if(t[e+"_scale"]=d3.scale[r]().domain(t[e+"_range"]).rangeRound([0,n]),["square","circle","donut"].indexOf(t.shape.value)>=0&&["share"].indexOf(t[e].scale.value)<0){var a=t[e+"_scale"],i=2*y.range()[1],o=a.invert(-i),s=a.invert(n+i);t[e+"_scale"].domain([o,s])}var u="x"==e?"bottom":"left";t[e+"_axis"]=d3.svg.axis().tickSize(t.axes.ticks.size).tickPadding(5).orient(u).scale(t[e+"_scale"]).tickFormat(function(n){var r=!0;if(t[e].value==t.time.value&&n%1!=0&&(r=!1),("log"==t[e].scale.value&&"1"==n.toString().charAt(0)||"log"!=t[e].scale.value)&&r){if("share"==t[e].scale.value)var a=100*n+"%";else var a=t.format.value(n,t[e].value);if(d3.select(this).style("font-size",t.axes.ticks.font.size).style("fill",t.axes.ticks.font.color).attr("font-family",t.axes.ticks.font.family.value).attr("font-weight",t.axes.ticks.font.weight).text(a),"x"==e){var i=this.getBBox().width,o=this.getBBox().height;d3.select(this).attr("transform","translate(18,8)rotate(70)");var s=Math.ceil(Math.cos(25)*i+5);s>l.yoffset&&!t.small&&(l.yoffset=s);var u=Math.ceil(Math.cos(25)*o+5);u>l.rightoffset&&!t.small&&(l.rightoffset=u)}else{var u=this.getBBox().width;u>l.offset&&!t.small&&(l.offset=u)}}else var a=null;return a}),"continuous"==t[e].scale.value&&t.tickValues[e]&&t[e+"_axis"].tickValues(t.tickValues[e])})}if(!c)var c=[];var x=t.group.selectAll("g#plane").data(["plane"]);x.enter().append("g").attr("id","plane").attr("transform","translate("+l.margin.left+","+l.margin.top+")");var b=x.selectAll("rect#background").data(["background"]);b.enter().append("rect").attr("id","background").attr("x",0).attr("y",0).attr("width",l.width).attr("height",l.height).attr("stroke-width",1).attr("stroke","#ccc").attr("shape-rendering",t.shape.rendering.value).style("fill","#fafafa");var w=x.selectAll("path#mirror").data(["mirror"]);w.enter().append("path").attr("id","mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0);var _=t.group.selectAll("g#axes").data(["axes"]);_.enter().append("g").attr("id","axes");var z=x.selectAll("g#xgrid").data(["xgrid"]);z.enter().append("g").attr("id","xgrid");var k=x.selectAll("g#ygrid").data(["ygrid"]);k.enter().append("g").attr("id","ygrid");var M=x.selectAll("g#xaxis").data(["xaxis"]);M.enter().append("g").attr("id","xaxis").attr("transform","translate(0,"+l.height+")");var A=x.selectAll("g#yaxis").data(["yaxis"]);A.enter().append("g").attr("id","yaxis");var E=_.selectAll("text#xlabel").data(t.small?[]:["xlabel"]);E.enter().append("text").attr("id","xlabel").attr("x",t.width.viz/2).attr("y",t.height.viz-10).text(t.format.value(t.x.value)).attr("font-family",t.labels.font.family.value).attr("font-weight",t.labels.font.weight).attr("font-size",t.labels.font.size).attr("fill",t.labels.font.color).attr("text-anchor",t.labels.font.align),E.exit().remove();var j=_.selectAll("text#ylabel").data(t.small?[]:["ylabel"]);j.enter().append("text").attr("id","ylabel").attr("y",15).attr("x",-(l.height/2+l.margin.top)).text(t.format.value(t.y.value)).attr("transform","rotate(-90)").attr("font-family",t.labels.font.family.value).attr("font-weight",t.labels.font.weight).attr("font-size",t.labels.font.size).attr("fill",t.labels.font.color).attr("text-anchor",t.labels.font.align),j.exit().remove();var S=t.group.selectAll("g#mouseevents").data(["mouseevents"]);S.enter().append("g").attr("id","mouseevents"),l.offset=0,A.call(t.y_axis).selectAll("line").call(e,"y"),l.margin.left+=l.offset,l.width-=l.offset,t.x_scale.rangeRound([0,l.width]),l.yoffset=0,l.rightoffset=0,M.call(t.x_axis).selectAll("line").call(e,"x"),l.height-=l.yoffset,l.width-=l.rightoffset,t.x_scale.rangeRound([0,l.width]),t.y_scale.rangeRound([0,l.height]),A.call(t.y_axis),M.call(t.x_axis),x.transition().duration(t.draw.timing).attr("transform","translate("+l.margin.left+","+l.margin.top+")"),b.attr("width",l.width).attr("height",l.height),w.transition().duration(t.draw.timing).attr("opacity",function(){return t.axes.mirror.value?1:0}).attr("d",function(){var t=l.width,e=l.height;return"M "+t+" "+e+" L 0 "+e+" L "+t+" 0 Z"}),A.transition().duration(t.draw.timing).call(t.y_axis.scale(t.y_scale)),A.selectAll("line").transition().duration(t.draw.timing).call(e,"y"),A.selectAll("path").style("fill","none"),M.transition().duration(t.draw.timing).attr("transform","translate(0,"+l.height+")").call(t.x_axis.scale(t.x_scale)).selectAll("g.tick").select("text").style("text-anchor","start"),M.selectAll("line").transition().duration(t.draw.timing).call(e,"x"),M.selectAll("path").style("fill","none");var C="continuous"==t.y.scale.value?t.y_scale.ticks(t.tickValues.y.length):t.y_scale.ticks(),N=k.selectAll("line").data(C);N.enter().append("line").style("opacity",0).call(n,"y").call(e,"y"),N.transition().duration(t.draw.timing).style("opacity",1).call(n,"y").call(e,"y"),N.exit().transition().duration(t.draw.timing).style("opacity",0).remove();var O="continuous"==t.x.scale.value?t.x_scale.ticks(t.tickValues.x.length):t.x_scale.ticks(),F=z.selectAll("line").data(O);F.enter().append("line").style("opacity",0).call(n,"x").call(e,"x"),F.transition().duration(t.draw.timing).style("opacity",1).call(n,"x").call(e,"x"),F.exit().transition().duration(t.draw.timing).style("opacity",0).remove(),E.text(t.format.value(t.x.value)).attr("x",t.width.viz/2).attr("y",t.height.viz-10).attr("opacity",function(){return 0==t.data.app.length?0:1}),j.text(t.format.value(t.y.value)).attr("y",15).attr("x",-(l.height/2+l.margin.top)).attr("opacity",function(){return 0==t.data.app.length?0:1}),t.axes.values.forEach(function(e){var n=x.selectAll("g.d3plus_"+e+"line").data(t[e].lines,function(t){return"number"==typeof t||"string"==typeof t?t:d3.keys(t)[0]}),i=n.enter().append("g").attr("class","d3plus_"+e+"line"),o="x"==e?"height":"width",s="x"==e?l.height-8+"px":"10px",u="x"==e?10:20;i.append("line").attr(e+"1",0).attr(e+"2",l[o]).attr("stroke","#ccc").attr("stroke-width",3).attr("stroke-dasharray","10,10"),i.append("text").style("font-size",t.axes.ticks.font.size).style("fill",t.axes.ticks.font.color).attr("text-align","start").attr(e,s),n.selectAll("line").transition().duration(t.draw.timing).attr(e+"1",function(n){return a(n)?t[e+"_scale"](a(n)):0}).attr(e+"2",function(n){return a(n)?t[e+"_scale"](a(n)):0}).attr("opacity",function(n){var r=a(n)>t[e+"_scale"].domain()[1]&&a(n)<t[e+"_scale"].domain()[0];return null!==a(n)&&r?1:0}),n.selectAll("text").transition().duration(t.draw.timing).text(function(){if(null!==a(d)){var e=t.format.value(a(d),y_name);return r(d)?t.format.value(r(d))+": "+e:e}return null}).attr(e,function(n){return t[e+"_scale"](a(n))+u+"px"})}),["line","area"].indexOf(t.shape.value)>=0&&y.rangeRound([2,2]),t.axis_offset={x:l.margin.left,y:l.margin.top},c.forEach(function(e){e.d3plus.x=t.x_scale(d3plus.variable.value(t,e,t.x.value)),e.d3plus.x+=t.axis_offset.x,e.d3plus.r=y(d3plus.variable.value(t,e,t.size.value)),t.stacked_axis||(e.d3plus.y=t.y_scale(d3plus.variable.value(t,e,t.y.value)),e.d3plus.y+=t.axis_offset.y,"area"==t.shape.value&&(e.d3plus[t.opp_axis+"0"]=t[t.opp_axis+"_scale"].range()[1],e.d3plus[t.opp_axis+"0"]+=t.axis_offset[t.opp_axis]))});var T=t.order.value?t.order.value:t.continuous_axis?t[t.opp_axis].value:t.size.value||t.id.value;if(["line","area"].indexOf(t.shape.value)>=0&&(c=d3.nest().key(function(e){var n=d3plus.variable.value(t,e,t.id.value),r=e.d3plus.depth?e.d3plus.depth:0;return d3plus.string.strip(n)+"_"+r+"_"+t.shape.value}).rollup(function(e){var n=d3plus.util.uniques(e,t[t.continuous_axis].value),r=!1;return t.tickValues[t.continuous_axis].forEach(function(a,i,o){if(n.indexOf(a)<0){var l={};if(l[t[t.continuous_axis].value]=a,l[t.id.value]=e[0][t.id.value],l[t[t.opp_axis].value]=t[t.opp_axis+"_scale"].domain()[1],l.d3plus={},l.d3plus.r=y(y.domain()[0]),l.d3plus[t.continuous_axis]+=t.axis_offset[t.continuous_axis],t.stacked_axis||(l.d3plus[t.opp_axis]=t[t.opp_axis+"_scale"].range()[1],l.d3plus[t.opp_axis]+=t.axis_offset[t.opp_axis],l.d3plus[t.opp_axis+"0"]=l.d3plus[t.opp_axis]),t[t.continuous_axis].zerofill.value||t[t.opp_axis].stacked.value){var s=t[t.continuous_axis+"_scale"](a);s+=t.axis_offset[t.continuous_axis],l.d3plus[t.continuous_axis]=s,e.push(l)}else if("line"!=t.shape.value){if(!r&&i>0){var s=t[t.continuous_axis+"_scale"](o[i-1]);s+=t.axis_offset[t.continuous_axis],l.d3plus[t.continuous_axis]=s,e.push(l)}if(i<o.length-1){var s=t[t.continuous_axis+"_scale"](o[i+1]);s+=t.axis_offset[t.continuous_axis];var u=d3plus.util.copy(l);u.d3plus[t.continuous_axis]=s,e.push(u)}}r=!0}else r=!1}),e.sort(function(e,n){var r=e.d3plus[t.continuous_axis]-n.d3plus[t.continuous_axis];if(r)return r;var a=e[t[t.continuous_axis].value]-n[t[t.continuous_axis].value];return a}),e}).entries(c),c.forEach(function(e){t.id.nesting.forEach(function(n,r){r<=t.depth.value&&!e[n]&&(e[n]=d3plus.util.uniques(e.values,n).filter(function(t){return t&&"undefined"!=t})[0])}),T in e||(e[T]=0,e.values.forEach(function(n){var r=d3plus.variable.value(t,n,T);r&&("number"==typeof r?e[T]+=r:e[T]=r)}))})),T&&d3plus.array.sort(c,T,"desc"===t.order.sort.value?"asc":"desc",t.color.value||[],t),t.stacked_axis)var q=d3.layout.stack().values(function(t){return t.values}).x(function(t){return t.d3plus.x}).x(function(t){return t.d3plus.y}).y(function(e){var n=l.height,r=d3plus.variable.value(t,e,t.y.value);return n-t.y_scale(r)}).out(function(e,n,r){var a=l.height;"share"==t[t.stacked_axis].scale.value?(e.d3plus.y0=(1-n)*a,e.d3plus.y=e.d3plus.y0-r*a):(e.d3plus.y0=a-n,e.d3plus.y=e.d3plus.y0-r),e.d3plus.y+=l.margin.top,e.d3plus.y0+=l.margin.top}),L="share"==t[t.stacked_axis].scale.value?"expand":"zero",c=q.offset(L)(c);else if(["area","line"].indexOf(t.shape.value)<0){var P=x.selectAll("g.d3plus_data_ticks").data(c,function(e){return e[t.id.value]+"_"+e.d3plus.depth}),I=P.enter().append("g").attr("class","d3plus_data_ticks").attr("opacity",0);I.append("line").attr("class","d3plus_data_y").call(i,"y"),P.selectAll("line.d3plus_data_y").call(i,"y"),I.append("line").attr("class","d3plus_data_x").call(i,"x"),P.selectAll("line.d3plus_data_x").call(i,"x"),P.transition().duration(t.draw.timing).attr("opacity",1),P.exit().transition().duration(t.draw.timing).attr("opacity",0).remove()}return t.mouse=o,c},d3plus.visualization.chart.fill=!0,d3plus.visualization.chart.requirements=["data","x","y"],d3plus.visualization.chart.scale={circle:1.1,donut:1.1,square:1.1},d3plus.visualization.chart.shapes=["circle","donut","line","square","area"],d3plus.visualization.chart.tooltip="static"},{}],272:[function(){d3plus.visualization.geo_map=function(t){topojson.presimplify(t.coords.value);var e=t.coords.value,n=d3.keys(e.objects)[0],r=topojson.feature(e,e.objects[n]),a=r.features,a=a.filter(function(e){return e[t.id.value]=e.id,t.coords.solo.value.length?t.coords.solo.value.indexOf(e.id)>=0:t.coords.mute.value.length?t.coords.mute.value.indexOf(e.id)<0:!0});return a},d3plus.visualization.geo_map.libs=["topojson"],d3plus.visualization.geo_map.nesting=!1,d3plus.visualization.geo_map.requirements=["color","coords"],d3plus.visualization.geo_map.scale=1,d3plus.visualization.geo_map.shapes=["coordinates"],d3plus.visualization.geo_map.tooltip="follow",d3plus.visualization.geo_map.zoom=!0},{}],273:[function(){d3plus.visualization.line=function(t){return d3plus.visualization.chart(t)},d3plus.visualization.line.requirements=["data","x","y"],d3plus.visualization.line.setup=function(t){t.self.x({scale:"continuous"})},d3plus.visualization.line.shapes=["line"],d3plus.visualization.line.tooltip="static"},{}],274:[function(){d3plus.visualization.network=function(t){var e=t.nodes.restricted||t.nodes.value,n=t.edges.restricted||t.edges.value,r=d3.extent(e,function(t){return t.x}),a=d3.extent(e,function(t){return t.y}),i=t.size.value?d3.extent(e,function(e){var n=d3plus.variable.value(t,e,t.size.value);return 0===n?null:n}):[1,1];"undefined"==typeof i[0]&&(i=[1,1]);var o=d3.min(d3plus.util.distances(e));if(o*=t.nodes.overlap,t.edges.arrows.value&&(o=.5*o),i[0]===i[1])var l=o;else{var s=r[1]+1.1*o-(r[0]-1.1*o),u=a[1]+1.1*o-(a[0]-1.1*o);if(aspect=s/u,app=t.width.viz/t.height.viz,app>aspect)var c=t.height.viz/u;else var c=t.width.viz/s;var l=.25*o;2>l*c&&(l=2/c)}var d=t.size.scale.value.domain(i).range([l,o]);t.zoom.bounds=[[r[0]-1.1*o,a[0]-1.1*o],[r[1]+1.1*o,a[1]+1.1*o]];var f=[],p={};return e.forEach(function(e){var n=t.data.app.filter(function(n){return n[t.id.value]==e[t.id.value]})[0];if(n)var r=d3plus.object.merge(e,n);else var r=d3plus.util.copy(e);r.d3plus={},r.d3plus.x=e.x,r.d3plus.y=e.y;var a=d3plus.variable.value(t,r,t.size.value);r.d3plus.r=a?d(a):d.range()[0],p[r[t.id.value]]={x:r.d3plus.x,y:r.d3plus.y,r:r.d3plus.r},f.push(r)}),f.sort(function(t,e){return e.d3plus.r-t.d3plus.r}),n.forEach(function(e){e[t.edges.source]=d3plus.util.copy(e[t.edges.source]),e[t.edges.source].d3plus={};var n=p[e[t.edges.source][t.id.value]];e[t.edges.source].d3plus.r=n.r,e[t.edges.source].d3plus.x=n.x,e[t.edges.source].d3plus.y=n.y,e[t.edges.target]=d3plus.util.copy(e[t.edges.target]),e[t.edges.target].d3plus={};var r=p[e[t.edges.target][t.id.value]];e[t.edges.target].d3plus.r=r.r,e[t.edges.target].d3plus.x=r.x,e[t.edges.target].d3plus.y=r.y}),{nodes:f,edges:n}},d3plus.visualization.network.nesting=!1,d3plus.visualization.network.requirements=["nodes","edges"],d3plus.visualization.network.scale=1.05,d3plus.visualization.network.shapes=["circle","square","donut"],d3plus.visualization.network.tooltip="static",d3plus.visualization.network.zoom=!0},{}],275:[function(){d3plus.visualization.rings=function(t){var e=d3.min([t.height.viz,t.width.viz])/2,n=t.small||!t.labels.value?(e-2*t.labels.padding)/2:e/3,r=t.small||!t.labels.value?1.4*n:n,i=2*n,o=[],l=[],s=t.data.app.filter(function(e){return e[t.id.value]===t.focus.value})[0];s||(s={d3plus:{}},s[t.id.value]=t.focus.value),s.d3plus.x=t.width.viz/2,s.d3plus.y=t.height.viz/2,s.d3plus.r=.65*r;var u=[],c=[t.focus.value];t.edges.connections(t.focus.value,t.id.value).forEach(function(e){var n=e[t.edges.source][t.id.value]==t.focus.value?e[t.edges.target]:e[t.edges.source],r=t.data.app.filter(function(e){return e[t.id.value]===n[t.id.value]})[0];r||(r={d3plus:{}},r[t.id.value]=n[t.id.value]),r.d3plus.edges=t.edges.connections(r[t.id.value],t.id.value).filter(function(e){return e[t.edges.source][t.id.value]!=t.focus.value&&e[t.edges.target][t.id.value]!=t.focus.value}),r.d3plus.edge=e,c.push(r[t.id.value]),u.push(r)});var d=t.order.value||t.color.value||t.size.value||t.id.value;u.sort(function(e,n){var r=e.d3plus.edges.length-n.d3plus.edges.length;return r?r:d3plus.array.sort([e,n],d,t.order.sort.value,t.color.value||[],t)}),"number"==typeof t.edges.limit?u=u.slice(0,t.edges.limit):"function"==typeof t.edges.limit&&(u=t.edges.limit(u));var f=[],p=0;u.forEach(function(e){var n=e[t.id.value];e.d3plus.edges=e.d3plus.edges.filter(function(e){var r=e[t.edges.source][t.id.value],a=e[t.edges.target][t.id.value];return c.indexOf(r)<0&&a==n||c.indexOf(a)<0&&r==n}),p+=e.d3plus.edges.length||1,e.d3plus.edges.forEach(function(e){var r=e[t.edges.source],a=e[t.edges.target],i=a[t.id.value]==n?r:a;c.push(i[t.id.value])})}),d3plus.array.sort(u,d,t.order.sort.value,t.color.value||[],t);var h=0,v=2*Math.PI,g=0;u.forEach(function(e,n){var o=e.d3plus.edges.length||1,l=v/p*o;0==n&&(g=s,h-=l/2);var s=h+l/2;s-=v/4,e.d3plus.radians=s,e.d3plus.x=t.width.viz/2+r*Math.cos(s),e.d3plus.y=t.height.viz/2+r*Math.sin(s),h+=l,e.d3plus.edges.sort(function(n,r){var n=n[t.edges.source][t.id.value]==e[t.id.value]?n[t.edges.target]:n[t.edges.source],r=r[t.edges.source][t.id.value]==e[t.id.value]?r[t.edges.target]:r[t.edges.source];return d3plus.array.sort([n,r],d,t.order.sort.value,t.color.value||[],t)}),e.d3plus.edges.forEach(function(n,r){var l=n[t.edges.source][t.id.value]==e[t.id.value]?n[t.edges.target]:n[t.edges.source],u=v/p,c=t.data.app.filter(function(e){return e[t.id.value]===l[t.id.value]})[0];c||(c={d3plus:{}},c[t.id.value]=l[t.id.value]),a=s-u*o/2+u/2+u*r,c.d3plus.radians=a,c.d3plus.x=t.width.viz/2+i*Math.cos(a),c.d3plus.y=t.height.viz/2+i*Math.sin(a),f.push(c)})});var m=d3.min(d3plus.util.distances(u,function(t){return[t.d3plus.x,t.d3plus.y]})),y=d3.min(d3plus.util.distances(f,function(t){return[t.d3plus.x,t.d3plus.y]}));if(m||(m=n/2),y||(y=n/4),8>m/2-4)var x=d3.min([m/2,8]);else var x=m/2-4;if(4>y/2-4)var b=d3.min([y/2,4]);else var b=y/2-4;b>n/10&&(b=n/10),b>x?b=.75*x:x>1.5*b&&(x=1.5*b),x=Math.floor(x),b=Math.floor(b);var w=d3plus.util.uniques(u,t.id.value);w=w.concat(d3plus.util.uniques(f,t.id.value)),w.push(t.focus.value);var _=t.data.app.filter(function(e){return w.indexOf(e[t.id.value])>=0});if(t.size.value){var z=d3.extent(_,function(e){return d3plus.variable.value(t,e,t.size.value)});z[0]==z[1]&&(z[0]=0);var e=d3.scale.linear().domain(z).rangeRound([3,d3.min([x,b])]),k=d3plus.variable.value(t,s,t.size.value);s.d3plus.r=e(k)}else{var e=d3.scale.linear().domain([1,2]).rangeRound([x,b]);t.edges.label&&(s.d3plus.r=1.5*e(1))}return f.forEach(function(n){n.d3plus.ring=2;var r=t.size.value?d3plus.variable.value(t,n,t.size.value):2;n.d3plus.r=e(r)}),u.forEach(function(n){n.d3plus.ring=1;var r=t.size.value?d3plus.variable.value(t,n,t.size.value):1;n.d3plus.r=e(r)}),u.forEach(function(e){var n=[t.edges.source,t.edges.target],a=d3plus.util.copy(e.d3plus.edge);n.forEach(function(n){a[n].d3plus=a[n][t.id.value]==s[t.id.value]?{x:s.d3plus.x,y:s.d3plus.y,r:s.d3plus.r}:{x:e.d3plus.x,y:e.d3plus.y,r:e.d3plus.r}}),delete a.d3plus,o.push(a),t.edges.connections(e[t.id.value],t.id.value).forEach(function(n){var a=d3plus.util.copy(n),l=a[t.edges.source][t.id.value]==e[t.id.value]?a[t.edges.target]:a[t.edges.source];if(l[t.id.value]!=s[t.id.value]){var c=f.filter(function(e){return e[t.id.value]==l[t.id.value]})[0];if(c)var d=i;else{var d=r;c=u.filter(function(e){return e[t.id.value]==l[t.id.value]})[0]}if(c){a.d3plus={spline:!0,translate:{x:t.width.viz/2,y:t.height.viz/2}};var p=[t.edges.source,t.edges.target];p.forEach(function(n){a[n].d3plus=a[n][t.id.value]==e[t.id.value]?{a:e.d3plus.radians,r:r+e.d3plus.r,depth:1}:{a:c.d3plus.radians,r:d-c.d3plus.r,depth:2}}),o.push(a)}}})}),l=[s].concat(u).concat(f),l.forEach(function(e){if(!t.small&&t.labels.value)if(e[t.id.value]!=t.focus.value){e.d3plus.rotate=e.d3plus.radians*(180/Math.PI);var a=e.d3plus.rotate,i=n-3*t.labels.padding-e.d3plus.r;if(-90>a||a>90){a-=180;var o=-(e.d3plus.r+i/2+t.labels.padding),l="end"}else var o=e.d3plus.r+i/2+t.labels.padding,l="start";var s=u.indexOf(e)>=0?!0:!1,c=1==e.d3plus.ring?m:y;c+=2*t.labels.padding,e.d3plus.label={x:o,y:0,w:i,h:c,angle:a,anchor:l,valign:"center",color:d3plus.color.legible(d3plus.variable.color(t,e[t.id.value])),resize:[8,t.labels.font.size],background:s,mouse:!0}}else if(t.size.value||t.edges.label){var c=r-2*e.d3plus.r-2*t.labels.padding;e.d3plus.label={x:0,y:e.d3plus.r+c/2,w:r,h:c,color:d3plus.color.legible(d3plus.variable.color(t,e[t.id.value])),resize:[10,40],background:!0,mouse:!0}}else delete e.d3plus.rotate,delete e.d3plus.label;else delete e.d3plus.rotate,delete e.d3plus.label}),t.mouse[d3plus.evt.click]=function(e){e[t.id.value]!=t.focus.value&&(d3plus.tooltip.remove(t.type.value),t.self.focus(e[t.id.value]).draw())},{edges:o,nodes:l,data:_}},d3plus.visualization.rings.filter=function(t,e){var n=t.edges.connections(t.focus.value,t.id.value,!0),r=[];n.forEach(function(e){r=r.concat(t.edges.connections(e[t.id.value],t.id.value,!0))});var a=n.concat(r),i=d3plus.util.uniques(a,t.id.value),o=[];return i.forEach(function(n){var r=e.filter(function(e){return e[t.id.value]===n})[0];if(r)o.push(r);else{var a={d3plus:{}};a[t.id.value]=n,o.push(a)}}),o},d3plus.visualization.rings.nesting=!1,d3plus.visualization.rings.scale=1,d3plus.visualization.rings.shapes=["circle","square","donut"],d3plus.visualization.rings.requirements=["edges","focus"],d3plus.visualization.rings.tooltip="static"},{}],276:[function(){d3plus.visualization.scatter=function(t){return d3plus.visualization.chart(t)},d3plus.visualization.scatter.fill=!0,d3plus.visualization.scatter.requirements=["data","x","y"],d3plus.visualization.scatter.scale=d3plus.visualization.chart.scale,d3plus.visualization.scatter.shapes=["circle","square","donut"],d3plus.visualization.scatter.tooltip="static"},{}],277:[function(){d3plus.visualization.stacked=function(t){return d3plus.visualization.chart(t)},d3plus.visualization.stacked.filter=function(t,e){return d3plus.data.threshold(t,e,t.x.value)},d3plus.visualization.stacked.requirements=["data","x","y"],d3plus.visualization.stacked.setup=function(t){t.self.x({scale:"continuous",zerofill:!0}).y({stacked:!0});var e=t.y,n=t.size;!e.value&&n.value||n.changed&&n.previous===e.value?t.self.y(n.value):(!n.value&&e.value||e.changed&&e.previous===n.value)&&t.self.size(e.value)},d3plus.visualization.stacked.shapes=["area"],d3plus.visualization.stacked.threshold=function(t){return 20/t.height.viz},d3plus.visualization.stacked.tooltip="static"},{}],278:[function(){d3plus.visualization.tree_map=function(t){var e=d3.nest();t.id.nesting.forEach(function(n,r){r<t.depth.value&&e.key(function(e){return d3plus.variable.value(t,e.d3plus,n)})});var n=[];t.data.app.forEach(function(e){n.push({d3plus:e,id:e[t.id.value],value:d3plus.variable.value(t,e,t.size.value)})}),e=e.entries(n);var r=d3.layout.treemap().mode(t.type.mode.value).round(!0).size([t.width.viz,t.height.viz]).children(function(t){return t.values}).padding(1).sort(function(t,e){var n=t.value-e.value;return 0===n?t.id<e.id:n}).nodes({name:"root",values:e}).filter(function(t){return!t.values&&t.area});if(r.length){for(var a=r[0];a.parent;)a=a.parent;var i=[];r.forEach(function(t){t.d3plus.d3plus=d3plus.object.merge(t.d3plus.d3plus,{x:t.x+t.dx/2,y:t.y+t.dy/2,width:t.dx,height:t.dy,share:t.value/a.value}),i.push(t.d3plus)})}return i},d3plus.visualization.tree_map.filter=function(t,e){return d3plus.data.threshold(t,e)},d3plus.visualization.tree_map.modes=["squarify","slice","dice","slice-dice"],d3plus.visualization.tree_map.requirements=["data","size"],d3plus.visualization.tree_map.shapes=["square"],d3plus.visualization.tree_map.threshold=function(t){return 1600/(t.width.viz*t.height.viz)},d3plus.visualization.tree_map.tooltip="follow"},{}],279:[function(){d3plus.ui.drawer=function(t){var e=t.ui.value&&t.ui.value.length,n=t.ui.position.value,r=0;t.dev.value&&e&&d3plus.console.time("drawing custom UI elements");var a=t.container.value.selectAll("div#d3plus_drawer").data(["d3plus_drawer"]);a.enter().append("div").attr("id","d3plus_drawer").each(function(){r+=2*t.ui.margin});var i={};t.ui.position.accepted.forEach(function(e){i[e]=e==n?t.margin.bottom+"px":"auto"}),a.style("text-align",t.ui.align.value).style("position","absolute").style("width",t.width.value-2*t.ui.padding+"px").style("height","auto").style(i);var o=a.selectAll("div.d3plus_drawer_ui").data(e?t.ui.value:[],function(t){return t.method||!1});o.enter().append("div").attr("class","d3plus_drawer_ui").style("padding",t.ui.padding+"px").style("display","inline-block").each(function(e){var n=d3.select(this);e.form=d3plus.form().container(n).focus(t[e.method].value,function(n){n!==t[e.method].value&&t.self[e.method](n).draw()}).font(t.ui.font).id("id").text("text").type("auto").width(e.width||!1)}),o.each(function(e){var n=[],r=t.format.locale.value.method[e.method]||e.method;e.value.forEach(function(e){var r={id:e,text:t.format.value(e)};n.push(r)}),e.form.data(n).format(t.format.locale.language).title(t.format.value(r)).ui({align:t.ui.align.value,padding:t.ui.padding,margin:t.ui.margin}).draw()}),o.exit().remove();var l=a.node().offsetHeight;l&&(t.margin[n]+=l+r),t.dev.value&&e&&d3plus.console.timeEnd("drawing custom UI elements")}},{}],280:[function(){d3plus.ui.focus=function(t){if(!t.internal_error&&t.focus.value&&!t.small&&t.focus.tooltip.value){t.dev.value&&d3plus.console.time("drawing focus tooltip");var e=t.data.pool.filter(function(e){return d3plus.variable.value(t,e,t.id.value)==t.focus.value});e.length>=1?e=e[0]:(e={},e[t.id.value]=t.focus.value);var n=t.labels.padding;d3plus.tooltip.app({anchor:"top left",arrow:!1,data:e,length:"long",fullscreen:!1,id:t.type.value+"_focus",maxheight:t.height.viz-2*n,mouseevents:!0,offset:0,vars:t,x:t.width.value-t.margin.right-n,y:t.margin.top+n,width:t.tooltip.large}),d3.select("div#d3plus_tooltip_id_"+t.type.value+"_focus").empty()||(t.width.viz-=t.tooltip.large+2*n),t.dev.value&&d3plus.console.timeEnd("drawing focus tooltip")}else d3plus.tooltip.remove(t.type.value+"_focus")}},{}],281:[function(){d3plus.ui.history=function(t){function e(e){e.style("position","absolute").style("left",t.ui.padding+"px").style("top",t.margin.top/2-r/2+"px").style("color",a).style("font-family",i).style("font-weight",o).style("font-size",r+"px").style("z-index",2e3)}if(!t.small&&t.history.states.length>0){t.dev.value&&d3plus.console.time("drawing back button");var n=t.container.value.selectAll("div#d3plus_back_button").data(["d3plus_back_button"]),r=t.title.value?t.title.font.size:t.title.sub.font.size,a=t.title.sub.value?t.title.sub.font.color:t.title.font.color,i=t.title.sub.value?t.title.sub.font.family.value:t.title.font.family.value,o=t.title.sub.value?t.title.sub.font.weight:t.title.font.weight,l=t.title.sub.value?t.title.sub.padding:t.title.padding,s=r+2*l;t.margin.top<s&&(t.margin.top=s);{n.enter().append("div").attr("id","d3plus_back_button").style("opacity",0).call(e).html(function(){if(d3plus.font.awesome)var e="<span style='font-family:FontAwesome;margin-right:5px;'>&#xf104</span>";else var e="&laquo; ";return e+t.format.value(t.format.locale.value.ui.back)})}n.on(d3plus.evt.over,function(){!t.small&&t.history.states.length>0&&d3.select(this).style("cursor","pointer").transition().duration(t.timing.mouseevents).style("color",d3plus.color.lighter(a,.25))}).on(d3plus.evt.out,function(){!t.small&&t.history.states.length>0&&d3.select(this).style("cursor","auto").transition().duration(t.timing.mouseevents).style("color",a)}).on(d3plus.evt.click,function(){t.history.back()}).transition().duration(t.draw.timing).style("opacity",1).call(e),t.dev.value&&d3plus.console.timeEnd("drawing back button")}else t.container.value.selectAll("div#d3plus_back_button").transition().duration(t.draw.timing).style("opacity",0).remove()
}},{}],282:[function(){d3plus.ui.legend=function(t){function e(e){e.attr("transform",function(e,n){var r=m+n*(t.ui.padding+a);return"translate("+r+","+t.ui.padding+")"})}function n(e){e.attr("width",a).attr("height",a).attr("fill",function(e){d3.select(this.parentNode).selectAll("text").remove();var n=d3plus.variable.value(t,e,t.icon.value,t.id.nesting[e.d3plus.depth]),r=d3plus.variable.color(t,e,t.id.nesting[e.d3plus.depth]);if(n){var i=d3plus.string.strip(n+"_"+r),o=t.defs.selectAll("pattern#"+i).data([i]);if("string"==typeof t.icon.style.value)var l=t.icon.style.value;else if("object"==typeof t.icon.style.value&&t.icon.style.value[icon_depth])var l=t.icon.style.value[icon_depth];else var l="default";var r="knockout"==l?r:"none";o.select("rect").transition().duration(t.draw.timing).attr("fill",r).attr("width",a).attr("height",a),o.select("image").transition().duration(t.draw.timing).attr("width",a).attr("height",a);var s=o.enter().append("pattern").attr("id",i).attr("width",a).attr("height",a);return s.append("rect").attr("fill",r).attr("width",a).attr("height",a),s.append("image").attr("xlink:href",n).attr("width",a).attr("height",a).each(function(){0==n.indexOf("/")||n.indexOf(window.location.hostname)>=0?d3plus.util.dataurl(n,function(t){o.select("image").attr("xlink:href",t)}):o.select("image").attr("xlink:href",n)}),"url(#"+i+")"}var u=d3.select(this.parentNode).append("text");return u.attr("font-size",t.legend.font.size).attr("font-weight",t.legend.font.weight).attr("font-family",t.legend.font.family.value).attr("text-anchor","start").attr("fill",d3plus.color.text(r)).attr("x",0).attr("y",0).each(function(){var n=d3plus.variable.text(t,e,e.d3plus.depth);1===n.length&&n[0].length&&d3plus.textwrap().container(d3.select(this)).height(a-2*t.ui.padding).resize(t.labels.resize.value).text(n[0]).width(a-2*t.ui.padding).draw()}).attr("y",function(){var t=this.getBBox().height,e=parseFloat(d3.select(this).style("font-size"),10)/5;return a/2-t/2-e/2}).selectAll("tspan").attr("x",function(){var t=this.getComputedTextLength();return a/2-t/2}),u.select("tspan").empty()&&u.remove(),r})}var r=!0,a=0,i=t.color.value,o=t.color.value||"d3plus_color";if(i&&!t.small&&t.legend.value)if(t.color.scale)if(t.color.scale){t.dev.value&&d3plus.console.time("drawing color scale"),t.g.legend.selectAll("g.d3plus_color").transition().duration(t.draw.timing).attr("opacity",0).remove();var l=t.color.scale.domain(),s=t.color.scale.range();l.length<=2&&(l=d3plus.util.buckets(l,6));var u=t.g.legend.selectAll("g.d3plus_scale").data(["scale"]);u.enter().append("g").attr("class","d3plus_scale").attr("opacity",0);var c=u.selectAll("#d3plus_legend_heatmap").data(["heatmap"]);c.enter().append("linearGradient").attr("id","d3plus_legend_heatmap").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");var f=c.selectAll("stop").data(d3.range(0,s.length));f.enter().append("stop").attr("stop-opacity",1),f.attr("offset",function(t){return Math.round(t/(s.length-1)*100)+"%"}).attr("stop-color",function(t){return s[t]}),f.exit().remove();var p=u.selectAll("rect#gradient").data(["gradient"]);p.enter().append("rect").attr("id","gradient").attr("x",function(){return"middle"==t.legend.align?t.width.value/2:"end"==t.legend.align?t.width.value:0}).attr("y",t.ui.padding).attr("width",0).attr("height",t.legend.gradient.height).attr("stroke",t.legend.font.color).attr("stroke-width",1).style("fill","url(#d3plus_legend_heatmap)");var h=u.selectAll("text.d3plus_tick").data(d3.range(0,l.length));h.enter().append("text").attr("class","d3plus_tick").attr("x",function(){return"middle"==t.legend.align?t.width.value/2:"end"==t.legend.align?t.width.value:0}).attr("y",function(){return this.getBBox().height+t.legend.gradient.height+2*t.ui.padding});var v=0;h.order().attr("font-weight",t.legend.font.weight).attr("font-family",t.legend.font.family.value).attr("font-size",t.legend.font.size).attr("text-anchor",t.legend.font.align).attr("fill",t.legend.font.color).text(function(e){return t.format.value(l[e],i)}).attr("y",function(){return this.getBBox().height+t.legend.gradient.height+2*t.ui.padding}).each(function(){var t=this.offsetWidth;t>v&&(v=t)}),v+=2*t.labels.padding;var g=v*(l.length-1);if(g+v<t.width.value){if(g+v<t.width.value/2&&(g=t.width.value/2,v=g/l.length,g-=v),"start"==t.legend.align)var m=t.ui.padding;else if("end"==t.legend.align)var m=t.width.value-t.ui.padding-g;else var m=t.width.value/2-g/2;h.transition().duration(t.draw.timing).attr("x",function(t){return m+v*t}),h.exit().transition().duration(t.draw.timing).attr("opacity",0).remove();var y=u.selectAll("rect.d3plus_tick").data(d3.range(0,l.length));y.enter().append("rect").attr("class","d3plus_tick").attr("x",function(){return"middle"==t.legend.align?t.width.value/2:"end"==t.legend.align?t.width.value:0}).attr("y",t.ui.padding).attr("width",0).attr("height",t.ui.padding+t.legend.gradient.height).attr("fill",t.legend.font.color),y.transition().duration(t.draw.timing).attr("x",function(t){var e=0==t?1:0;return m+v*t-e}).attr("y",t.ui.padding).attr("width",1).attr("height",t.ui.padding+t.legend.gradient.height).attr("fill",t.legend.font.color),y.exit().transition().duration(t.draw.timing).attr("width",0).remove(),p.transition().duration(t.draw.timing).attr("x",function(){return"middle"==t.legend.align?t.width.value/2-g/2:"end"==t.legend.align?t.width.value-g-t.ui.padding:t.ui.padding}).attr("y",t.ui.padding).attr("width",g).attr("height",t.legend.gradient.height),u.transition().duration(t.draw.timing).attr("opacity",1),t.dev.value&&d3plus.console.timeEnd("drawing color scale")}else r=!1}else r=!1;else{if(t.dev.value&&d3plus.console.time("grouping data by colors"),t.nodes.value&&d3plus.visualization[t.type.value].requirements.indexOf("nodes")>=0){var x=t.nodes.restriced||t.nodes.value;if(t.data.app.length)for(var b=0;b<x.length;b++){var w=t.data.app.filter(function(e){return e[t.id.value]===x[b][t.id.value]});w.length&&(x[b]=d3plus.object.merge(x[b],w[0]))}}else var x=t.data.app;for(var _=0;_<x.length;_++){d=x[_];for(var b=0;b<t.id.nesting.length;b++){var z=t.id.nesting[b];if(!(z in d)){var k=t.id.nesting[b+1];d[z]=d3plus.variable.value(t,d[k],z,k)}}}for(var M=function(e){return d3plus.variable.color(t,e,t.id.nesting[A])},b=0;b<t.id.nesting.length;b++){var A=b,z=t.id.nesting[b],E=d3plus.util.uniques(x,z),j=d3plus.util.uniques(x,M);if(E.length===j.length&&j.length>1)break}for(var s=d3plus.data.nest(t,x,[M],[]),_=0;_<s.length;_++){d=s[_];var k=t.id.nesting[A+1];d[z]=d[z]||d3plus.variable.value(t,d[k],z,k),d[o]=d[o]||d3plus.variable.color(t,d,z),d.d3plus.colorDepth=A}t.dev.value&&d3plus.console.timeEnd("grouping data by color");var S=t.width.value;a=t.legend.size;var g=a*s.length+t.ui.padding*(s.length+1);if(a instanceof Array){t.dev.value&&d3plus.console.time("calculating legend size");for(var b=a[1];b>=a[0];b--)if(g=b*s.length+t.ui.padding*(s.length+1),S>=g){a=b;break}t.dev.value&&d3plus.console.timeEnd("calculating legend size")}else"number"!=typeof a&&a!==!1&&(a=30);if(g>S||1==s.length)r=!1;else{g-=2*t.ui.padding,t.dev.value&&d3plus.console.time("sorting legend");var C=t[t.legend.order.value].value;if(d3plus.array.sort(s,C,t.legend.order.sort.value,o,t),t.dev.value&&d3plus.console.timeEnd("sorting legend"),t.dev.value&&d3plus.console.time("drawing legend"),"start"==t.legend.align)var m=t.ui.padding;else if("end"==t.legend.align)var m=S-t.ui.padding-g;else var m=S/2-g/2;t.g.legend.selectAll("g.d3plus_scale").transition().duration(t.draw.timing).attr("opacity",0).remove();var N=t.g.legend.selectAll("g.d3plus_color").data(s,function(e){return e[t.id.nesting[e.d3plus.colorDepth]]}),O=N.enter().append("g").attr("class","d3plus_color").attr("opacity",0).call(e);O.append("rect").attr("class","d3plus_color").call(n),d3plus.touch||N.on(d3plus.evt.over,function(e,n){d3.select(this).style("cursor","pointer");var r=m+n*(t.ui.padding+a),i=d3.transform(d3.select(this.parentNode).attr("transform")).translate[1];r+=a/2,i+=t.ui.padding+a/2,d3plus.tooltip.app({data:e,footer:!1,vars:t,x:r,y:i})}).on(d3plus.evt.out,function(){d3plus.tooltip.remove(t.type.value)}),N.order().transition().duration(t.draw.timing).attr("opacity",1).call(e),N.selectAll("rect.d3plus_color").transition().duration(t.draw.timing).call(n),N.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),t.dev.value&&d3plus.console.timeEnd("drawing legend")}}else r=!1;if(t.legend.value&&i&&r){if(t.dev.value&&d3plus.console.time("positioning legend"),a)var F=a+t.ui.padding;else var T=t.g.legend.node().getBBox(),F=T.height+T.y-t.ui.padding;0===t.margin.bottom&&(t.margin.bottom+=t.ui.padding),t.margin.bottom+=F,t.g.legend.transition().duration(t.draw.timing).attr("transform","translate(0,"+(t.height.value-t.margin.bottom)+")"),t.dev.value&&d3plus.console.timeEnd("positioning legend")}else t.dev.value&&d3plus.console.time("hiding legend"),t.g.legend.transition().duration(t.draw.timing).attr("transform","translate(0,"+t.height.value+")"),t.dev.value&&d3plus.console.timeEnd("hiding legend")}},{}],283:[function(){d3plus.ui.message=function(t,e){function n(e){e.style(a).style("position","absolute").style("background",o).style("text-align","center").style("left",function(){return"center"==i?"50%":"0px"}).style("width",function(){return"center"==i?"auto":t.width.value+"px"}).style("margin-left",function(){var e=t.width.value-t.width.viz;return"center"==i?-(this.offsetWidth/2+e/2)+"px":"0px"}).style("top",function(){return"center"==i?"50%":"top"==i?"0px":"auto"}).style("bottom",function(){return"bottom"==i?"0px":"auto"}).style("margin-top",function(){if("large"==r){var t=this.offsetHeight;return-t/2+"px"}return"0px"})}var e=t.messages.value?e:null,r=e==t.internal_error?"large":t.messages.style;if("large"==r)var a=t.messages,i="center";else{if(t.footer.value)var a=t.footer;else if(t.title.value)var a=t.title;else if(t.title.sub.value)var a=t.title.sub;else if(t.title.total.value)var a=t.title.total;else var a=t.title.sub;var i=a.position}var a={color:a.font.color,"font-family":a.font.family.value,"font-weight":a.font.weight,"font-size":a.font.size+"px",padding:a.padding+"px"},o="none"!=t.background.value?t.background.value:"white";t.g.message=t.container.value.selectAll("div#d3plus_message").data(["message"]),t.g.message.enter().append("div").attr("id","d3plus_message").attr("opacity",0);var l=e?1:0,s=e?e:t.g.message.text(),u=e?"inline-block":"none";t.g.message.text(s).style("opacity",l).style("display",u).call(n)}},{}],284:[function(){d3plus.ui.timeline=function(t){var e=t.data.time;if(!t.small&&e&&e.length>1&&t.timeline.value){if(t.dev.value&&d3plus.console.time("drawing timeline"),t.time.value==t.x.value&&"continuous"==t.x.scale.value||t.time.value==t.y.value&&"continuous"==t.y.scale.value)var n=2;else var n=1;if(t.time.solo.value.length)var r=d3.extent(t.time.solo.value);else var r=d3.extent(e);var a=e[0],i=e[e.length-1],o=r[0],l=r[1],s=[],u=[];e.forEach(function(t,n){0!=n&&u.push(t-e[n-1])});{var c=d3.min(u);c*e.length}e=[];for(var d=a;i>=d;d+=c)e.push(d),s.push(d3.time.year(new Date(parseInt(d),0,1)));s.push(d3.time.year(new Date(parseInt(i+c),0,1)));var f=function(){if(null!==d3.event.sourceEvent){var r=M.extent(),a=d3plus.util.closest(s,d3.time.year.round(r[0])),i=d3plus.util.closest(s,d3.time.year.round(r[1]));a==i&&(a=d3plus.util.closest(s,d3.time.year.floor(r[0])));var o=s.indexOf(a),l=s.indexOf(i);if(l-o>=n)var u=[a,i];else if(o+n<=e.length)var u=[a,s[o+n]];else{for(var u=[a],c=1;n>=c;c++)o+c<=e.length?u.push(s[o+c]):u.unshift(s[o-(o+c-e.length)]);u=[u[0],u[u.length-1]]}d3.select(this).transition().call(M.extent(u)).each("end",function(){var n=d3.range(u[0].getFullYear(),u[1].getFullYear());n=n.filter(function(t){return e.indexOf(t)>=0}),t.self.time({solo:n}).draw()})}},p=t.g.timeline.selectAll("rect.d3plus_timeline_background").data(["background"]);p.enter().append("rect").attr("class","d3plus_timeline_background").attr("opacity",0).attr("fill",t.timeline.background);var h=t.g.timeline.selectAll("g#ticks").data(["ticks"]);h.enter().append("g").attr("id","ticks").attr("transform","translate("+t.width.value/2+","+t.ui.padding+")");var v=t.g.timeline.selectAll("g#brush").data(["brush"]);v.enter().append("g").attr("id","brush");var g=t.g.timeline.selectAll("g#labels").data(["labels"]);g.enter().append("g").attr("id","labels");var m=g.selectAll("text").data(e,function(t,e){return e});m.enter().append("text").attr("y",0).attr("dy",0).attr("x",function(){return"middle"==t.timeline.align?t.width.value/2:"end"==t.timeline.align?t.width.value:0}).attr("y",function(){var e=e=parseFloat(d3.select(this).style("font-size"),10)/5,n=t.ui.padding+t.timeline.height/2+this.getBBox().height/2-e;return n});var y=0,x=0;m.order().attr("font-weight",t.timeline.tick.weight).attr("font-family",t.timeline.tick.family.value).attr("font-size",t.timeline.tick.size).attr("text-anchor",t.timeline.tick.align).attr("opacity",0).text(function(t){return t}).each(function(){var t=this.getBBox().width,e=this.getBBox().height;t>y&&(y=t),e>x&&(x=e)});var b=y+2*t.ui.padding,w=b*e.length,_=t.width.value-2*t.ui.padding,c=1;if(w>_)for(w=_,c=Math.ceil(b/(w/e.length)),b=w/e.length,c;c<e.length-1&&(e.length-1)%c!=0;c++);if("start"==t.timeline.align)var z=t.ui.padding;else if("end"==t.timeline.align)var z=t.width.value-t.ui.padding-w;else var z=t.width.value/2-w/2;m.text(function(t,e){return e%c==0?t:""}).attr("opacity",1).attr("fill",function(e){if(e>=r[0]&&e<=r[1]){var n=t.timeline.background,a=t.timeline.brush.color,i=t.timeline.brush.opacity;return mixed=d3plus.color.mix(a,n,i),d3plus.color.text(mixed)}return d3plus.color.text(t.timeline.background)}).attr("x",function(t,e){return z+b*e+b/2}).attr("y",function(){var e=e=parseFloat(d3.select(this).style("font-size"),10)/5,n=t.ui.padding+t.timeline.height/2-1+this.getBBox().height/2-e;return c>1&&(n+=x+t.ui.padding),n}),m.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),p.transition().duration(t.draw.timing).attr("opacity",1).attr("width",w).attr("height",t.timeline.height-2).attr("x",z).attr("y",t.ui.padding).attr("fill",t.timeline.background);var k=d3.time.scale().domain(d3.extent(s)).rangeRound([0,w]),M=d3.svg.brush().x(k).extent([s[e.indexOf(o)],s[e.indexOf(l)+1]]).on("brushend",f);h.attr("transform","translate("+z+","+t.ui.padding+")").transition().duration(t.draw.timing).call(d3.svg.axis().scale(k).orient("top").ticks(function(){return s}).tickFormat("").tickSize(-(t.timeline.height-2)).tickPadding(0)).selectAll("path").attr("fill","none"),h.selectAll("line").attr("stroke",t.timeline.tick.color).attr("shape-rendering",t.shape.rendering.value),v.attr("transform","translate("+z+","+t.ui.padding+")").attr("opacity",1).call(M),m.attr("pointer-events","none"),v.selectAll("rect.background, rect.extent").attr("height",t.timeline.height-2),v.selectAll("rect.background").attr("fill","none").attr("stroke-width",1).attr("stroke",t.timeline.tick.color).style("visibility","visible").attr("shape-rendering",t.shape.rendering.value),v.selectAll("rect.extent").attr("stroke-width",1).attr("fill",t.timeline.brush.color).attr("fill-opacity",t.timeline.brush.opacity).attr("stroke",t.timeline.tick.color).attr("shape-rendering",t.shape.rendering.value),t.timeline.handles.value?v.selectAll("g.resize").select("rect").attr("fill",t.timeline.handles.color).attr("stroke",t.timeline.handles.stroke).attr("stroke-width",1).attr("x",-t.timeline.handles.size/2).attr("width",t.timeline.handles.size).attr("height",t.timeline.height-2).style("visibility","visible").attr("shape-rendering",t.shape.rendering.value).attr("opacity",t.timeline.handles.opacity):v.selectAll("g.resize").remove(),t.timeline.handles.opacity&&v.selectAll("g.resize").on(d3plus.evt.over,function(){d3.select(this).select("rect").transition().duration(t.timing.mouseevents).attr("fill",t.timeline.handles.hover)}).on(d3plus.evt.out,function(){d3.select(this).select("rect").transition().duration(t.timing.mouseevents).attr("fill",t.timeline.handles.color)}),0===t.margin.bottom&&(t.margin.bottom+=t.ui.padding);var A=t.g.timeline.node().getBBox();t.margin.bottom+=A.height+A.y,t.g.timeline.transition().duration(t.draw.timing).attr("transform","translate(0,"+(t.height.value-t.margin.bottom-t.ui.padding/2)+")"),t.margin.bottom+=t.ui.padding,t.dev.value&&d3plus.console.time("drawing timeline")}else t.g.timeline.transition().duration(t.draw.timing).attr("transform","translate(0,"+t.height.value+")")}},{}],285:[function(){d3plus.ui.titles=function(t){function e(e){e.attr("text-anchor",function(t){var e=t.style.font.align;return"center"==e?"middle":"left"==e&&!d3plus.rtl||"right"==e&&d3plus.rtl?"start":"left"==e&&d3plus.rtl||"right"==e&&!d3plus.rtl?"end":void 0}).attr("x",function(e){var n=e.style.font.align;return"center"==n?t.width.value/2:"left"==n&&!d3plus.rtl||"right"==n&&d3plus.rtl?t.padding:"left"==n&&d3plus.rtl||"right"==n&&!d3plus.rtl?t.width.value-t.padding:void 0}).attr("y",0)}function n(e){e.attr("font-size",function(t){return t.style.font.size}).attr("fill",function(e){return e.link?t.links.font.color:e.style.font.color}).attr("font-family",function(e){return e.link?t.links.font.family.value:e.style.font.family.value}).attr("font-weight",function(e){return e.link?t.links.font.weight:e.style.font.weight}).style("text-decoration",function(e){return e.link?t.links.font.decoration.value:e.style.font.decoration.value}).style("text-transform",function(e){return e.link?t.links.font.transform.value:e.style.font.transform.value})}var r=t.size.value?t.size.value:"number"===t.color.type?t.color.value:!1;if(t.data.app&&t.title.total.value&&!t.small)if(r){if(t.dev.value&&d3plus.console.time("calculating total value"),t.focus.value){var a=t.data.app.filter(function(e){return e[t.id.value]==t.focus.value});a=d3.sum(a,function(e){return d3plus.variable.value(t,e,r)})}else var a=d3.sum(t.data.pool,function(e){return d3plus.variable.value(t,e,r)});if(0===a&&(a=!1),"number"==typeof a){var i="";if(t.data.mute.length||t.data.solo.length||t.focus.value){var o=d3.sum(t.data.value,function(e){if(t.time.solo.value.length>0)var n=t.time.solo.value.indexOf(d3plus.variable.value(t,e,t.time.value))>=0;else if(t.time.mute.value.length>0)var n=t.time.solo.value.indexOf(d3plus.variable.value(t,e,t.time.value))<0;else var n=!0;return n?d3plus.variable.value(t,e,r):void 0});if(o>a)var i=a/o*100,l=t.format.value(o,t.size.value),i=" ("+t.format.value(i,"share")+"% of "+l+")"}a=t.format.value(a,t.size.value);var s=t.title.total.value,u=s.prefix||t.format.value(t.format.locale.value.ui.total)+": ";a=u+a,s.suffix?a+=s.suffix:null,a+=i}t.dev.value&&d3plus.console.timeEnd("calculating total value")}else var a=!1;else var a=!1;var c=[];t.footer.value&&c.push({link:t.footer.link,style:t.footer,type:"footer",value:t.footer.value}),t.small||(t.title.value&&c.push({link:t.title.link,style:t.title,type:"title",value:t.title.value}),t.title.sub.value&&c.push({link:t.title.sub.link,style:t.title.sub,type:"sub",value:t.title.sub.value}),t.title.total.value&&a&&c.push({link:t.title.total.link,style:t.title.total,type:"total",value:a})),t.dev.value&&d3plus.console.time("drawing titles");var d=t.svg.selectAll("g.d3plus_title").data(c,function(t){return t.type}),f=t.title.width||t.width.value;d.enter().append("g").attr("class","d3plus_title").attr("opacity",0).attr("transform",function(e){var n="top"==e.style.position?0:t.height.value;return"translate(0,"+n+")"}).append("text").call(e).call(n),d.each(function(e){d3plus.textwrap().container(d3.select(this).select("text")).height(t.height.value/8).size(!1).text(e.value).width(f).draw(),e.y=t.margin[e.style.position],t.margin[e.style.position]+=this.getBBox().height+2*e.style.padding}).on(d3plus.evt.over,function(e){e.link&&d3.select(this).transition().duration(t.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",t.links.hover.color).attr("font-family",t.links.hover.family.value).attr("font-weight",t.links.hover.weight).style("text-decoration",t.links.hover.decoration.value).style("text-transform",t.links.hover.transform.value)}).on(d3plus.evt.out,function(e){e.link&&d3.select(this).transition().duration(t.timing.mouseevents).style("cursor","auto").select("text").call(n)}).on(d3plus.evt.click,function(t){if(t.link){var e="/"!=t.link.charAt(0)?"_blank":"_self";window.open(t.link,e)}}).transition().duration(t.draw.timing).attr("opacity",1).attr("transform",function(e){var n=e.style.position,r="top"==n?0+e.y:t.height.value-e.y;return"bottom"==n?r-=this.getBBox().height+e.style.padding:r+=e.style.padding,"translate(0,"+r+")"}).select("text").call(e).call(n),d.exit().transition().duration(t.draw.timing).attr("opacity",0).remove(),t.margin.top>0&&(t.margin.top+=t.title.padding),t.margin.bottom>0&&(t.margin.bottom+=t.title.padding);var p=t.title.height;p&&t.margin[t.title.position]<p&&(t.margin[t.title.position]=p),t.dev.value&&d3plus.console.timeEnd("drawing titles")}},{}],286:[function(){d3plus.viz=function(){var t={g:{apps:{}},shell:"viz"};t.self=function(e){return e.each(function(){function e(){s=l.shift();var e=t.g.message&&a===s.message,n="check"in s?s.check:!0;if("function"==typeof n&&(n=n(t)),n)if(!e&&t.draw.update){t.dev.value&&(a!==!1&&d3plus.console.groupEnd(),d3plus.console.groupCollapsed(s.message)),a="string"==typeof t.messages.value?t.messages.value:s.message;var r="string"==typeof t.messages.value?t.messages.value:t.format.value(s.message);d3plus.ui.message(t,r),setTimeout(c,10)}else c();else"otherwise"in s?setTimeout(function(){c("otherwise")},10):u()}t.draw.frozen=!0,t.internal_error=null,d3plus.draw.container(t),"timing"in t.draw||(t.draw.timing=t.timing.transitions);var n=t.width.value<=t.width.small,r=t.height.value<=t.height.small;t.small=n||r;var a=!1;if(t.error.value){var i=t.draw.timing;t.group.transition().duration(i).attr("opacity",0),t.g.data.transition().duration(i).attr("opacity",0),t.g.edges.transition().duration(i).attr("opacity",0),t.messages.style="large";var o=t.error.value===!0?t.format.value(t.format.locale.value.ui.error):t.error.value;a=o,d3plus.ui.message(t,o)}else{var l=d3plus.draw.steps(t),s=!1;t.container.value.style("cursor","wait"),t.messages.style=t.group&&"1"===t.group.attr("opacity")?"small":"large";var u=function(){l.length?e():(t.methodGroup=!1,t.dev.value&&(d3plus.console.timeEnd("total draw time"),d3plus.console.groupEnd(),d3plus.console.log("\n")),t.container.value.style("cursor","auto"))},c=function(e){var e=e||"function";s[e]instanceof Array?s[e].forEach(function(e){e(t,u)}):"function"==typeof s[e]&&s[e](t,u),s.wait||u()};e()}}),t.self};var e=["active","aggs","attrs","axes","color","container","coords","csv","data","depth","descs","dev","draw","edges","error","focus","footer","format","height","history","icon","id","labels","legend","margin","messages","nodes","order","shape","size","style","temp","text","time","timeline","title","tooltip","total","type","ui","width","x","y","zoom"],n=["axes","background","color","coords","data","edges","font","footer","height","labels","legend","links","messages","nodes","shape","timeline","timing","title","tooltip","ui","width "];return d3plus.method(t,e,n),t.self}},{}],287:[function(){d3plus.zoom.bounds=function(t,e,n){if(!e)var e=t.zoom.bounds;if("number"!=typeof n)var n=t.timing.transitions;t.zoom.size={height:e[1][1]-e[0][1],width:e[1][0]-e[0][0]};var r=t.coords.fit.value;if("auto"==r||d3plus.visualization[t.type.value].requirements.indexOf("coords")<0)var a=d3.max([t.zoom.size.width/t.width.viz,t.zoom.size.height/t.height.viz]);else var a=t.zoom.size[r]/t["app_"+r];var i=d3.min([t.width.viz,t.height.viz]),o=(i-2*t.coords.padding)/i/a,l=t.zoom.behavior.scaleExtent();(l[0]==l[1]||e==t.zoom.bounds)&&t.zoom.behavior.scaleExtent([o,16*o]);var s=t.zoom.behavior.scaleExtent()[1];o>s&&(o=s),t.zoom.scale=o;var u=[];u[0]=t.width.viz/2-t.zoom.size.width*o/2-e[0][0]*o,u[1]=t.height.viz/2-t.zoom.size.height*o/2-e[0][1]*o,t.zoom.translate=u,t.zoom.behavior.translate(u).scale(o),t.zoom.size={height:t.zoom.bounds[1][1]-t.zoom.bounds[0][1],width:t.zoom.bounds[1][0]-t.zoom.bounds[0][0]},d3plus.zoom.transform(t,n)}},{}],288:[function(){d3plus.zoom.controls=function(){if(d3.select("#d3plus.utilsts.zoom_controls").remove(),!vars.small){var t=vars.container.value.append("div").attr("id","d3plus.utilsts.zoom_controls").style("top",vars.margin.top+5+"px");t.append("div").attr("id","zoom_in").attr("unselectable","on").on(d3plus.evt.click,function(){vars.zoom("in")}).text("+"),t.append("div").attr("id","zoom_out").attr("unselectable","on").on(d3plus.evt.click,function(){vars.zoom("out")}).text("-"),t.append("div").attr("id","zoom_reset").attr("unselectable","on").on(d3plus.evt.click,function(){vars.zoom("reset"),vars.draw.update()}).html("&#8634;")}}},{}],289:[function(){d3plus.zoom.labels=function(t){var e=t.zoom.behavior.scaleExtent()[1];t.dev.value&&d3plus.console.time("determining label visibility"),t.draw.timing?t.g.viz.selectAll("text.d3plus_label").transition().duration(t.draw.timing).attr("opacity",function(n){if(!n)var n={scale:e};var r=parseFloat(d3.select(this).attr("font-size"),10);return n.visible=r/n.scale*t.zoom.scale>=7,n.visible?1:0}):t.g.viz.selectAll("text.d3plus_label").attr("opacity",function(n){if(!n)var n={scale:e};var r=parseFloat(d3.select(this).attr("font-size"),10);return n.visible=r/n.scale*t.zoom.scale>=7,n.visible?1:0}),t.dev.value&&d3plus.console.timeEnd("determining label visibility")}},{}],290:[function(){d3plus.zoom.mouse=function(t){var e=d3.event.translate,n=d3.event.scale,r=t.zoom.bounds,a=(t.width.viz-t.zoom.size.width*n)/2,i=a>0?a:0,o=a>0?t.width.viz-a:t.width.viz,l=(t.height.viz-t.zoom.size.height*n)/2,s=l>0?l:0,u=l>0?t.height.viz-l:t.height.viz;if(e[0]+r[0][0]*n>i?e[0]=-r[0][0]*n+i:e[0]+r[1][0]*n<o&&(e[0]=o-r[1][0]*n),e[1]+r[0][1]*n>s?e[1]=-r[0][1]*n+s:e[1]+r[1][1]*n<u&&(e[1]=u-r[1][1]*n),t.zoom.behavior.translate(e).scale(n),t.zoom.translate=e,t.zoom.scale=n,"wheel"==d3.event.sourceEvent.type){var c=t.draw.timing?100:250;clearTimeout(t.zoom.wheel),t.zoom.wheel=setTimeout(function(){d3plus.zoom.labels(t)},c)}else d3plus.zoom.labels(t);"dblclick"===d3.event.sourceEvent.type?d3plus.zoom.transform(t,t.timing.transitions):d3plus.zoom.transform(t,0)}},{}],291:[function(){d3plus.zoom.transform=function(t,e){if("number"!=typeof e)var e=t.timing.transitions;var n=t.zoom.translate,r=t.zoom.scale;e?t.g.viz.transition().duration(e).attr("transform","translate("+n+")scale("+r+")"):t.g.viz.attr("transform","translate("+n+")scale("+r+")")}},{}]},{},[121,122,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,112,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,114,115,116,117,118,119,120,123,124,125,126,135,127,128,129,130,131,132,133,134,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,222,223,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,232,224,225,226,227,228,229,230,231,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,286,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,287,288,289,290,291]);